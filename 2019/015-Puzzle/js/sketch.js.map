{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "buttons = []\r\ngrid = null\r\noriginalGrid = null\r\ncurrent = 0\r\n\r\nclass Button\r\n\tconstructor : (@title,@x,@y,@w,@h,@click) ->\r\n\t\t@active = true\r\n\tdraw : ->\r\n\t\ttextAlign CENTER,CENTER\r\n\t\ttextSize 30\r\n\t\tif @title == 0 then fill 128 else fill 255\r\n\t\trect @x,@y,@w,@h\r\n\t\tif @active then fill 0 else fill 128\r\n\t\tif @title != 0 then text @title,@x+@w/2,@y+@h/2\r\n\tinside : -> @active and @x < mouseX < @x+@w and @y < mouseY < @y+@h \r\n\r\nrandomMoveList = (grid, nMoves, moveList=[]) ->\r\n\tif moveList.length == nMoves then return moveList\r\n\r\n\tvalidMoves = grid.validMoves()\r\n\r\n\tif moveList.length > 0\r\n\t\t# Don't just revert the last move\r\n\t\tlast = _.last moveList\r\n\t\t[ldr, ldc] = directionToDelta last\r\n\t\tvalidMoves = _.filter validMoves, (m) ->\r\n\t\t\tnot directionsAreOpposites last, m\r\n\r\n\tsourceDirection = _.shuffle(validMoves)[0]\r\n\tnextGrid = grid.applyMoveFrom sourceDirection\r\n\tmoveList.push sourceDirection\r\n\r\n\trandomMoveList nextGrid, nMoves, moveList\r\n\r\ntransfer = ->\r\n\tfor i in range 16\r\n\t\tbuttons[i].title = grid.grid[i//4][i%%4]\r\n\r\nupdate = (delta) ->\r\n\tcurrent = constrain current+delta,0,window.solution.length\r\n\tgrid = originalGrid.applyMoves window.solution.slice 0,current\r\n\ttransfer()\r\n\r\nprevNext = (value) ->\r\n\tbuttons[18].active = value\r\n\tbuttons[19].active = value \r\n\r\nsetup = ->\r\n\tcreateCanvas 200+1,350+1\r\n\r\n\tfor i in range 16\r\n\t\tx = i%4\r\n\t\ty = i//4\r\n\t\tbuttons.push new Button i,50*x,50*y,50,50,->\r\n\r\n\tbuttons.push new Button 'Shuffle',0,250,100,50,->\r\n\t\twindow.solution = []\r\n\t\tgrid = grid.applyMoves randomMoveList grid,25\r\n\t\ttransfer()\r\n\t\tprevNext false \r\n\t\t#print grid.lowerSolutionBound()\r\n\r\n\tbuttons.push new Button 'Solve',100,250,100,50,->\r\n\t\tprevNext false\r\n\t\twindow.solution = []\r\n\t\toriginalGrid = grid.copy()\r\n\t\tsolve grid\r\n\r\n\tbuttons.push new Button 'Prev',0,300,100,50,-> update -1\r\n\tbuttons.push new Button 'Next',100,300,100,50,-> update +1\r\n\r\n\tprevNext false\r\n\r\n\tgrid = new Grid INIT_GRID, [3,3]\r\n\ttransfer()\r\n\r\ndraw = ->\r\n\tbackground 128\r\n\tfor button in buttons\r\n\t\tbutton.draw()\r\n\tif solution.length > 0\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tfill 255\r\n\t\ttext \"#{current} of #{solution.length}\", 100,225\r\n\r\nmousePressed = ->\r\n\tfor button in buttons\r\n\t\tif button.inside() then button.click()\r\n"
  ]
}