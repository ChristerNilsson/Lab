{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "VALTYP = 0\r\nVALOMRÅDESKOD = 1\r\nVALOMRÅDESNAMN = 2\r\nVALKRETSKOD = 3\r\nVALKRETSNAMN = 4\r\nPARTIBETECKNING = 5\r\nPARTIFÖRKORTNING = 6\r\nPARTIKOD = 7\r\nVALSEDELSSTATUS = 8\r\nLISTNUMMER = 9\r\nORDNING = 10\r\nANMKAND = 11\r\nANMDELTAGANDE = 12\r\nSAMTYCKE = 13\r\nFÖRKLARING = 14\r\nKANDIDATNUMMER = 15\r\nNAMN = 16\r\nÅLDER_PÅ_VALDAGEN = 17\r\nKÖN = 18\r\nFOLKBOKFÖRINGSORT = 19\r\nVALSEDELSUPPGIFT = 20\r\nANT_BEST_VALS = 21\r\nVALBAR_PÅ_VALDAGEN = 22\r\nGILTIG = 23\r\n\r\nPERSONS_PER_PAGE = 31\r\n\r\nkommunkod = null\r\nlänskod = null\r\n\r\ntree = {}\r\n\r\ndictionary = {} \r\n\t# S -> Socialdemokraterna\r\n\t# 01 -> Stockholms läns landsting\r\n\t# 0180 -> Stockholm\r\n\r\nbuttons = []\r\npbuttons = []\r\nlbuttons = []\r\nkbuttons = []\r\n\r\nselectedButton = null\r\nselectedPartiButton = null\r\nselectedLetterButton = null\r\nselectedPersonButton = null\r\n\r\nclass Button\r\n\tconstructor : (@title, @x,@y,@w,@h,@click = ->) ->\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize 20\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif selectedButton==@ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x,@y\r\n\tinside : (mx,my) -> @x-@w/2 < mx < @x+@w/2 and @y-@h/2 < my < @y+@h/2\r\n\r\nclass PartiButton extends Button \r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize if @title in 'S C MP L M V SD KD'.split ' ' then 28 else 20\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif selectedPartiButton==@ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x,@y\r\n\r\nclass PersonButton extends Button\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize 12\r\n\t\ttextAlign LEFT,CENTER\r\n\t\tfc 1\r\n\t\ttext @title,@x-@w/2+5,@y\r\n\r\nclass LetterButton extends Button \r\n\tconstructor : (title,x,y,w,h,@antal,click) ->\r\n\t\tsuper title,x,y,w,h,click\r\n\t\t@page = -1\r\n\t\t@pages = 1 + @antal // 30\r\n\t\tif @antal==0 then @pages = 0 \r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize 20\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif selectedLetterButton==@ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x,@y\r\n\t\tpush()\r\n\t\t@pageIndicator()\r\n\t\tpop()\r\n\tpageIndicator : ->\r\n\t\tif @pages < 1 then return \r\n\t\tdx = @w//(@pages+1)\r\n\t\tfor i in range @pages\r\n\t\t\tif i==@page then fc 1 else fc 0\r\n\t\t\tcircle @x + i*dx - dx//2*(@pages-1), @y+15, 3\r\n\r\nspara = (lista,key,value) ->\r\n\tcurrent = tree\r\n\tfor name in lista\r\n\t\ta = current[name]\r\n\t\tif a == undefined then current[name] = {}\r\n\t\tcurrent = current[name]\r\n\tcurrent[key] = value\r\n\r\nantal = (letter,personer) ->\r\n\t#print letter,personer\r\n\tlst = (1 for key,person of personer when letter == person[NAMN][0])\r\n\tlst.length\r\n\r\nclickLetterButton = (button,letter,personer) ->\r\n\tN = PERSONS_PER_PAGE\r\n\tselectedLetterButton = button\r\n\tbutton.page = (button.page + 1) % button.pages\r\n\t#print 'visaPersoner',button.page\r\n\tkbuttons = []\r\n\tkeys = _.keys personer \r\n\tkeys.sort (a,b) -> if a.slice(a.indexOf('-')) < b.slice(b.indexOf('-')) then -1 else 1\r\n\t#print _.size keys\r\n\tj = 0\r\n\tfor key in keys\r\n\t\tperson = personer[key]\r\n\t\tif letter == person[NAMN][0]\r\n\t\t\tif j // N == button.page \r\n\t\t\t\tx = 605 \r\n\t\t\t\ty = 40+25*(j%N)\r\n\t\t\t\tdo (key) -> kbuttons.push new PersonButton \"#{person[NAMN]} - #{person[VALSEDELSUPPGIFT]}\",x,y,400,20, -> print key\r\n\t\t\tj++\r\n\r\nclickPartiButton = (button, personer) ->\r\n\tN = 16\r\n\tselectedPartiButton = button \r\n\tlbuttons = []\r\n\tkbuttons = []\r\n\r\n\tif PERSONS_PER_PAGE >= _.size personer\r\n\t\tkeys = _.keys personer\r\n\t\tkeys.sort (a,b) -> if a.slice(a.indexOf('-')) < b.slice(b.indexOf('-')) then -1 else 1\r\n\t\tfor key,j in keys\r\n\t\t\tperson = personer[key]\r\n\t\t\tx = 605\r\n\t\t\ty = 40+25*j\r\n\t\t\tdo (key) -> kbuttons.push new PersonButton \"#{person[NAMN]} - #{person[VALSEDELSUPPGIFT]}\",x,y,400,20, -> print key\r\n\r\n\telse\r\n\t\tfor letter,i in 'ABCDEFGHIJKLMNOPQRSTUVWXYZÅÄÖ'\r\n\t\t\tx = 325+50*(i//N)\r\n\t\t\ty = 50+50*(i%N)\r\n\t\t\tn = antal letter,personer\r\n\t\t\ttitle = letter\r\n\t\t\tdo (letter,title) -> lbuttons.push new LetterButton title,x,y,45,45,n, -> clickLetterButton @, letter, personer\r\n\r\nclickButton = (button, partier) ->\r\n\tN = 16\r\n\tselectedButton = button\r\n\t#print button\r\n\tpbuttons = []\r\n\tlbuttons = []\r\n\tkbuttons = []\r\n\tkeys = _.keys partier\r\n\tkeys.sort (a,b) -> _.size(partier[b]) - _.size(partier[a])\r\n\tfor key,i in keys\r\n\t\tx = 150+100*(i//N)\r\n\t\ty = 50+50*(i%N)\r\n\t\tdo (key) -> pbuttons.push new PartiButton key,x,y,95,45, -> clickPartiButton @, partier[key]\r\n\r\nreadDatabase = ->\r\n\tlines = db.split '\\n'\r\n\tfor line in lines\r\n\t\tcells = line.split ';'\r\n\t\tvaltyp = cells[VALTYP]\r\n\t\tområdeskod = cells[VALOMRÅDESKOD]\r\n\t\tområde = cells[VALOMRÅDESNAMN]\r\n\t\tparti = cells[PARTIFÖRKORTNING]\r\n\t\t#if parti=='' then parti = cells[PARTIKOD]\r\n\t\tknr = cells[KANDIDATNUMMER]\r\n\t\tnamn = cells[NAMN]\r\n\r\n\t\tif namn == undefined then continue\r\n\t\tif parti == '' then continue\r\n\r\n\t\tdictionary[parti] = cells[PARTIBETECKNING]\r\n\t\tdictionary[områdeskod] = område # hanterar både kommun och landsting\r\n\t\t# S -> Socialdemokraterna\r\n\t\t# 01 -> 01 - Stockholms läns landsting\r\n\t\t# 0180 -> Stockholm\r\n\r\n\t\tarr = namn.split ', '\r\n\t\tif arr.length == 2\r\n\t\t\tnamn = arr[1] + ' ' + arr[0] \r\n\t\t\tcells[NAMN] = namn\r\n\r\n\t\tif parti == '' or namn == '[inte lämnat förklaring]' then continue\r\n\t\tif valtyp == 'R'                           then spara ['00 - riksdagen',              parti], \"#{knr}-#{namn}\", cells\r\n\t\tif valtyp == 'L' and områdeskod==länskod   then spara [områdeskod,\"#{område}\",        parti], \"#{knr}-#{namn}\", cells\r\n\t\tif valtyp == 'K' and områdeskod==kommunkod then spara [områdeskod.slice(0,2), område, parti], \"#{knr}-#{namn}\", cells\r\n\tprint dictionary\r\n\r\nsetup = ->\r\n\tcreateCanvas 1400,840\r\n\tsc()\r\n\r\n\t# från urlen:\r\n\t#kommunkod = '0180' # Stockholm\r\n\tkommunkod = '1275' # Perstorp\r\n\t#kommunkod = '1276' # Klippan\r\n\r\n\tlänskod = kommunkod.slice 0,2\r\n\t\r\n\treadDatabase()\r\n\tprint tree\r\n\r\n\trectMode CENTER\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 20\r\n\r\n\tbuttons.push new Button 'Riksdag',  50, 25,95,45, -> clickButton @, tree['00 - riksdagen'] \r\n\tbuttons.push new Button 'Landsting',50, 75,95,45, -> clickButton @, tree[länskod][dictionary[länskod]]\r\n\tbuttons.push new Button 'Kommun',   50,125,95,45, -> clickButton @, tree[länskod][dictionary[kommunkod]]\r\n\r\ndraw = ->\r\n\tbg 0\r\n\tfor button in buttons.concat pbuttons.concat lbuttons.concat kbuttons\r\n\t\tbutton.draw()\r\n\tif selectedPartiButton != null\r\n\t\tpush()\r\n\t\ttextAlign LEFT,CENTER\r\n\t\ttextSize 20\r\n\t\ttext dictionary[selectedPartiButton.title],410,15\r\n\t\tpop()\r\n\tif selectedButton != null\r\n\t\tpush()\r\n\t\ttextAlign LEFT,CENTER\r\n\t\ttextSize 20\r\n\t\tif selectedButton.title == 'Riksdag'   then text 'Riksdag',            110,15\r\n\t\tif selectedButton.title == 'Landsting' then text dictionary[länskod],  110,15\r\n\t\tif selectedButton.title == 'Kommun'    then text dictionary[kommunkod],110,15\r\n\t\tpop()\r\n\r\nmousePressed = ->\r\n\tfor button in buttons.concat pbuttons.concat lbuttons.concat kbuttons\r\n\t\tif button.inside mouseX,mouseY then button.click()\r\n"
  ]
}