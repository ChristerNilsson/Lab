// Generated by CoffeeScript 2.3.2
var Parallel, Resistor, Serial, build, nd, node;

nd = function(num) {
  return num.toFixed(3).padStart(8);
};

Resistor = class Resistor {
  constructor(resistance, a1 = null, b1 = null, symbol = 'r') {
    this.resistance = resistance;
    this.a = a1;
    this.b = b1;
    this.symbol = symbol;
  }

  res() {
    return this.resistance;
  }

  setVoltage(voltage) {
    this.voltage = voltage;
  }

  current() {
    return this.voltage / this.res();
  }

  effect() {
    return this.current() * this.voltage;
  }

  report(level) {
    print(`${nd(this.res())} ${nd(this.voltage)} ${nd(this.current())} ${nd(this.effect())}  ${level}${this.symbol}`);
    if (this.a) {
      this.a.report(level + "| ");
    }
    if (this.b) {
      return this.b.report(level + "| ");
    }
  }

};

Serial = class Serial extends Resistor {
  constructor(a, b) {
    super(0, a, b, '+');
  }

  res() {
    return this.a.res() + this.b.res();
  }

  setVoltage(voltage) {
    var ra, rb;
    this.voltage = voltage;
    ra = this.a.res();
    rb = this.b.res();
    this.a.setVoltage(ra / (ra + rb) * this.voltage);
    return this.b.setVoltage(rb / (ra + rb) * this.voltage);
  }

};

Parallel = class Parallel extends Resistor {
  constructor(a, b) {
    super(0, a, b, '*');
  }

  res() {
    return 1 / (1 / this.a.res() + 1 / this.b.res());
  }

  setVoltage(voltage) {
    this.voltage = voltage;
    this.a.setVoltage(this.voltage);
    return this.b.setVoltage(this.voltage);
  }

};

build = function(s) {
  var i, len, ref, stack, word;
  stack = [];
  ref = s.split(' ');
  for (i = 0, len = ref.length; i < len; i++) {
    word = ref[i];
    if (word === '+') {
      stack.push(new Serial(stack.pop(), stack.pop()));
    } else if (word === '*') {
      stack.push(new Parallel(stack.pop(), stack.pop()));
    } else {
      stack.push(new Resistor(parseFloat(word)));
    }
  }
  return stack.pop();
};

node = build("10 2 + 6 * 8 + 6 * 4 + 8 * 4 + 8 * 6 +");

node.setVoltage(18.0);

print("     Ohm     Volt   Ampere     Watt  Network tree");

node.report("");

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsYy5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxjYWxjLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxRQUFBLEVBQUEsUUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUEsRUFBQSxFQUFBOztBQUFBLEVBQUEsR0FBSyxRQUFBLENBQUMsR0FBRCxDQUFBO1NBQVMsR0FBRyxDQUFDLE9BQUosQ0FBWSxDQUFaLENBQWMsQ0FBQyxRQUFmLENBQXdCLENBQXhCO0FBQVQ7O0FBRUMsV0FBTixNQUFBLFNBQUE7RUFDQyxXQUFjLFdBQUEsT0FBZ0IsSUFBaEIsT0FBd0IsSUFBeEIsV0FBcUMsR0FBckMsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUFXLElBQUMsQ0FBQTtJQUFPLElBQUMsQ0FBQTtJQUFPLElBQUMsQ0FBQTtFQUE5Qjs7RUFDZCxHQUFNLENBQUEsQ0FBQTtXQUFHLElBQUMsQ0FBQTtFQUFKOztFQUNOLFVBQWEsUUFBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0VBQUY7O0VBQ2IsT0FBVSxDQUFBLENBQUE7V0FBRyxJQUFDLENBQUEsT0FBRCxHQUFXLElBQUMsQ0FBQSxHQUFELENBQUE7RUFBZDs7RUFDVixNQUFTLENBQUEsQ0FBQTtXQUFHLElBQUMsQ0FBQSxPQUFELENBQUEsQ0FBQSxHQUFhLElBQUMsQ0FBQTtFQUFqQjs7RUFDVCxNQUFTLENBQUMsS0FBRCxDQUFBO0lBQ1IsS0FBQSxDQUFNLENBQUEsQ0FBQSxDQUFHLEVBQUEsQ0FBRyxJQUFDLENBQUEsR0FBRCxDQUFBLENBQUgsQ0FBSCxFQUFBLENBQUEsQ0FBZ0IsRUFBQSxDQUFHLElBQUMsQ0FBQSxPQUFKLENBQWhCLEVBQUEsQ0FBQSxDQUErQixFQUFBLENBQUcsSUFBQyxDQUFBLE9BQUQsQ0FBQSxDQUFILENBQS9CLEVBQUEsQ0FBQSxDQUFnRCxFQUFBLENBQUcsSUFBQyxDQUFBLE1BQUQsQ0FBQSxDQUFILENBQWhELEdBQUEsQ0FBQSxDQUFpRSxLQUFqRSxDQUFBLENBQUEsQ0FBeUUsSUFBQyxDQUFBLE1BQTFFLENBQUEsQ0FBTjtJQUNBLElBQUcsSUFBQyxDQUFBLENBQUo7TUFBVyxJQUFDLENBQUEsQ0FBQyxDQUFDLE1BQUgsQ0FBVSxLQUFBLEdBQVEsSUFBbEIsRUFBWDs7SUFDQSxJQUFHLElBQUMsQ0FBQSxDQUFKO2FBQVcsSUFBQyxDQUFBLENBQUMsQ0FBQyxNQUFILENBQVUsS0FBQSxHQUFRLElBQWxCLEVBQVg7O0VBSFE7O0FBTlY7O0FBV00sU0FBTixNQUFBLE9BQUEsUUFBcUIsU0FBckI7RUFDQyxXQUFjLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQTtTQUFTLENBQU0sQ0FBTixFQUFRLENBQVIsRUFBVSxDQUFWLEVBQVksR0FBWjtFQUFUOztFQUNkLEdBQU0sQ0FBQSxDQUFBO1dBQUcsSUFBQyxDQUFBLENBQUMsQ0FBQyxHQUFILENBQUEsQ0FBQSxHQUFXLElBQUMsQ0FBQSxDQUFDLENBQUMsR0FBSCxDQUFBO0VBQWQ7O0VBQ04sVUFBYSxRQUFBLENBQUE7QUFDWixRQUFBLEVBQUEsRUFBQTtJQURhLElBQUMsQ0FBQTtJQUNkLEVBQUEsR0FBSyxJQUFDLENBQUEsQ0FBQyxDQUFDLEdBQUgsQ0FBQTtJQUNMLEVBQUEsR0FBSyxJQUFDLENBQUEsQ0FBQyxDQUFDLEdBQUgsQ0FBQTtJQUNMLElBQUMsQ0FBQSxDQUFDLENBQUMsVUFBSCxDQUFjLEVBQUEsR0FBRyxDQUFDLEVBQUEsR0FBRyxFQUFKLENBQUgsR0FBYSxJQUFDLENBQUEsT0FBNUI7V0FDQSxJQUFDLENBQUEsQ0FBQyxDQUFDLFVBQUgsQ0FBYyxFQUFBLEdBQUcsQ0FBQyxFQUFBLEdBQUcsRUFBSixDQUFILEdBQWEsSUFBQyxDQUFBLE9BQTVCO0VBSlk7O0FBSGQ7O0FBU00sV0FBTixNQUFBLFNBQUEsUUFBdUIsU0FBdkI7RUFDQyxXQUFjLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQTtTQUFTLENBQU0sQ0FBTixFQUFRLENBQVIsRUFBVSxDQUFWLEVBQVksR0FBWjtFQUFUOztFQUNkLEdBQU0sQ0FBQSxDQUFBO1dBQUcsQ0FBQSxHQUFJLENBQUMsQ0FBQSxHQUFJLElBQUMsQ0FBQSxDQUFDLENBQUMsR0FBSCxDQUFBLENBQUosR0FBZSxDQUFBLEdBQUksSUFBQyxDQUFBLENBQUMsQ0FBQyxHQUFILENBQUEsQ0FBcEI7RUFBUDs7RUFDTixVQUFhLFFBQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUNkLElBQUMsQ0FBQSxDQUFDLENBQUMsVUFBSCxDQUFjLElBQUMsQ0FBQSxPQUFmO1dBQ0EsSUFBQyxDQUFBLENBQUMsQ0FBQyxVQUFILENBQWMsSUFBQyxDQUFBLE9BQWY7RUFGWTs7QUFIZDs7QUFPQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsQ0FBQTtBQUNQLE1BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBO0VBQUEsS0FBQSxHQUFRO0FBQ1I7RUFBQSxLQUFBLHFDQUFBOztJQUNDLElBQVEsSUFBQSxLQUFRLEdBQWhCO01BQXlCLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBSSxNQUFKLENBQVcsS0FBSyxDQUFDLEdBQU4sQ0FBQSxDQUFYLEVBQXdCLEtBQUssQ0FBQyxHQUFOLENBQUEsQ0FBeEIsQ0FBWCxFQUF6QjtLQUFBLE1BQ0ssSUFBRyxJQUFBLEtBQVEsR0FBWDtNQUFvQixLQUFLLENBQUMsSUFBTixDQUFXLElBQUksUUFBSixDQUFhLEtBQUssQ0FBQyxHQUFOLENBQUEsQ0FBYixFQUEwQixLQUFLLENBQUMsR0FBTixDQUFBLENBQTFCLENBQVgsRUFBcEI7S0FBQSxNQUFBO01BQ29CLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBSSxRQUFKLENBQWEsVUFBQSxDQUFXLElBQVgsQ0FBYixDQUFYLEVBRHBCOztFQUZOO1NBSUEsS0FBSyxDQUFDLEdBQU4sQ0FBQTtBQU5POztBQVFSLElBQUEsR0FBTyxLQUFBLENBQU0sd0NBQU47O0FBQ1AsSUFBSSxDQUFDLFVBQUwsQ0FBZ0IsSUFBaEI7O0FBQ0EsS0FBQSxDQUFNLG1EQUFOOztBQUNBLElBQUksQ0FBQyxNQUFMLENBQVksRUFBWiIsInNvdXJjZXNDb250ZW50IjpbIm5kID0gKG51bSkgLT4gbnVtLnRvRml4ZWQoMykucGFkU3RhcnQgOFxyXG5cclxuY2xhc3MgUmVzaXN0b3JcclxuXHRjb25zdHJ1Y3RvciA6IChAcmVzaXN0YW5jZSxAYT1udWxsLEBiPW51bGwsQHN5bWJvbD0ncicpIC0+IFxyXG5cdHJlcyA6IC0+IEByZXNpc3RhbmNlXHJcblx0c2V0Vm9sdGFnZSA6IChAdm9sdGFnZSkgLT5cclxuXHRjdXJyZW50IDogLT4gQHZvbHRhZ2UgLyBAcmVzKClcclxuXHRlZmZlY3QgOiAtPiBAY3VycmVudCgpICogQHZvbHRhZ2VcclxuXHRyZXBvcnQgOiAobGV2ZWwpIC0+XHJcblx0XHRwcmludCBcIiN7bmQgQHJlcygpfSAje25kIEB2b2x0YWdlfSAje25kIEBjdXJyZW50KCl9ICN7bmQgQGVmZmVjdCgpfSAgI3tsZXZlbH0je0BzeW1ib2x9XCJcclxuXHRcdGlmIEBhIHRoZW4gQGEucmVwb3J0IGxldmVsICsgXCJ8IFwiXHJcblx0XHRpZiBAYiB0aGVuIEBiLnJlcG9ydCBsZXZlbCArIFwifCBcIlxyXG5cclxuY2xhc3MgU2VyaWFsIGV4dGVuZHMgUmVzaXN0b3JcclxuXHRjb25zdHJ1Y3RvciA6IChhLGIpIC0+IHN1cGVyIDAsYSxiLCcrJ1xyXG5cdHJlcyA6IC0+IEBhLnJlcygpICsgQGIucmVzKClcclxuXHRzZXRWb2x0YWdlIDogKEB2b2x0YWdlKSAtPlxyXG5cdFx0cmEgPSBAYS5yZXMoKVxyXG5cdFx0cmIgPSBAYi5yZXMoKVxyXG5cdFx0QGEuc2V0Vm9sdGFnZSByYS8ocmErcmIpICogQHZvbHRhZ2VcclxuXHRcdEBiLnNldFZvbHRhZ2UgcmIvKHJhK3JiKSAqIEB2b2x0YWdlXHJcblxyXG5jbGFzcyBQYXJhbGxlbCBleHRlbmRzIFJlc2lzdG9yXHJcblx0Y29uc3RydWN0b3IgOiAoYSxiKSAtPiBzdXBlciAwLGEsYiwnKidcclxuXHRyZXMgOiAtPiAxIC8gKDEgLyBAYS5yZXMoKSArIDEgLyBAYi5yZXMoKSlcclxuXHRzZXRWb2x0YWdlIDogKEB2b2x0YWdlKSAtPlxyXG5cdFx0QGEuc2V0Vm9sdGFnZSBAdm9sdGFnZVxyXG5cdFx0QGIuc2V0Vm9sdGFnZSBAdm9sdGFnZVxyXG5cclxuYnVpbGQgPSAocykgLT5cclxuXHRzdGFjayA9IFtdXHJcblx0Zm9yIHdvcmQgaW4gcy5zcGxpdCAnICdcclxuXHRcdGlmICAgICAgd29yZCA9PSAnKycgdGhlbiBzdGFjay5wdXNoIG5ldyBTZXJpYWwgc3RhY2sucG9wKCksIHN0YWNrLnBvcCgpXHJcblx0XHRlbHNlIGlmIHdvcmQgPT0gJyonIHRoZW4gc3RhY2sucHVzaCBuZXcgUGFyYWxsZWwgc3RhY2sucG9wKCksIHN0YWNrLnBvcCgpXHJcblx0XHRlbHNlICAgICAgICAgICAgICAgICAgICAgc3RhY2sucHVzaCBuZXcgUmVzaXN0b3IgcGFyc2VGbG9hdCB3b3JkXHJcblx0c3RhY2sucG9wKClcclxuXHJcbm5vZGUgPSBidWlsZCBcIjEwIDIgKyA2ICogOCArIDYgKiA0ICsgOCAqIDQgKyA4ICogNiArXCJcclxubm9kZS5zZXRWb2x0YWdlIDE4LjBcclxucHJpbnQgXCIgICAgIE9obSAgICAgVm9sdCAgIEFtcGVyZSAgICAgV2F0dCAgTmV0d29yayB0cmVlXCJcclxubm9kZS5yZXBvcnQgXCJcIlxyXG4iXX0=
//# sourceURL=C:\Lab\2019\026-ResistanceCalculatorNim\coffee\calc.coffee