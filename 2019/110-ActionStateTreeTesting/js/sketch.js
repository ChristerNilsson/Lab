// Generated by CoffeeScript 2.4.1
var i, j, len, op, reducers, ref, script, stack, start,
  splice = [].splice;

stack = [];

reducers = {
  ADD: (state) => {
    return op(state, state.a + 2);
  },
  MUL: (state) => {
    return op(state, state.a * 2);
  },
  DIV: (state) => {
    return op(state, state.a / 2);
  },
  NEW: (state) => {
    return {
      b: stack.pop(),
      a: stack.pop(),
      hist: []
    };
  },
  UNDO: (state) => {
    var a, hist, ref;
    ref = state.hist, [...hist] = ref, [a] = splice.call(hist, -1);
    return {...state, a, hist};
  }
};

op = function(state, value) {
  var a, hist;
  hist = [...state.hist, state.a];
  a = value;
  return {...state, a, hist};
};

script = "{\"a\":17,\"b\":1,\"hist\":[]}\n	A 17 B 1 \n	ADD \n		STATE {\"a\":19,\"b\":1,\"hist\":[17]}\n		A 19\n		B 1\n		HIST [17]\n		A 19 B 1\n		A 19 B 1 HIST [17]\n	MUL STATE {\"a\":34,\"b\":1,\"hist\":[17]}\n		ADD STATE {\"a\":36,\"b\":1,\"hist\":[17,34]}\n			UNDO STATE {\"a\":34,\"b\":1,\"hist\":[17]}\n	MUL ADD DIV A 18\n		17 1 NEW STATE {\"a\":17,\"b\":1,\"hist\":[]}\n{\"a\":9,\"b\":8,\"hist\":[18]}\n	A 9 B 8";

start = new Date();

ref = range(1);
for (j = 0, len = ref.length; j < len; j++) {
  i = ref[j];
  run(script);
}

console.log(new Date() - start);

console.log('Ready!');

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBO0VBQUE7O0FBQUEsS0FBQSxHQUFROztBQUVSLFFBQUEsR0FDQztFQUFBLEdBQUEsRUFBSyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1dBQVcsRUFBQSxDQUFHLEtBQUgsRUFBVSxLQUFLLENBQUMsQ0FBTixHQUFRLENBQWxCO0VBQVgsQ0FBTDtFQUNBLEdBQUEsRUFBSyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1dBQVcsRUFBQSxDQUFHLEtBQUgsRUFBVSxLQUFLLENBQUMsQ0FBTixHQUFRLENBQWxCO0VBQVgsQ0FETDtFQUVBLEdBQUEsRUFBSyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1dBQVcsRUFBQSxDQUFHLEtBQUgsRUFBVSxLQUFLLENBQUMsQ0FBTixHQUFRLENBQWxCO0VBQVgsQ0FGTDtFQUdBLEdBQUEsRUFBSyxDQUFDLEtBQUQsQ0FBQSxHQUFBO1dBQVc7TUFBQyxDQUFBLEVBQUUsS0FBSyxDQUFDLEdBQU4sQ0FBQSxDQUFIO01BQWdCLENBQUEsRUFBRSxLQUFLLENBQUMsR0FBTixDQUFBLENBQWxCO01BQStCLElBQUEsRUFBSztJQUFwQztFQUFYLENBSEw7RUFJQSxJQUFBLEVBQUssQ0FBQyxLQUFELENBQUEsR0FBQTtBQUNKLFFBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQTtJQUFBLE1BQWMsS0FBSyxDQUFDLElBQXBCLEdBQUMsR0FBRyxXQUFKLEdBQVMsaUJBQUw7V0FDSixDQUFDLEdBQUcsS0FBSixFQUFXLENBQVgsRUFBYyxJQUFkO0VBRkk7QUFKTDs7QUFRRCxFQUFBLEdBQUssUUFBQSxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQUE7QUFDSixNQUFBLENBQUEsRUFBQTtFQUFBLElBQUEsR0FBTyxDQUFDLEdBQUcsS0FBSyxDQUFDLElBQVYsRUFBZ0IsS0FBSyxDQUFDLENBQXRCO0VBQ1AsQ0FBQSxHQUFJO1NBQ0osQ0FBQyxHQUFHLEtBQUosRUFBVyxDQUFYLEVBQWMsSUFBZDtBQUhJOztBQUtMLE1BQUEsR0FBUzs7QUFtQlQsS0FBQSxHQUFRLElBQUksSUFBSixDQUFBOztBQUNSO0FBQUEsS0FBQSxxQ0FBQTs7RUFDQyxHQUFBLENBQUksTUFBSjtBQUREOztBQUVBLE9BQU8sQ0FBQyxHQUFSLENBQVksSUFBSSxJQUFKLENBQUEsQ0FBQSxHQUFXLEtBQXZCOztBQUNBLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWiIsInNvdXJjZXNDb250ZW50IjpbInN0YWNrID0gW11cclxuXHJcbnJlZHVjZXJzID1cclxuXHRBREQ6IChzdGF0ZSkgPT4gb3Agc3RhdGUsIHN0YXRlLmErMlxyXG5cdE1VTDogKHN0YXRlKSA9PiBvcCBzdGF0ZSwgc3RhdGUuYSoyXHJcblx0RElWOiAoc3RhdGUpID0+IG9wIHN0YXRlLCBzdGF0ZS5hLzJcclxuXHRORVc6IChzdGF0ZSkgPT4ge2I6c3RhY2sucG9wKCksIGE6c3RhY2sucG9wKCksIGhpc3Q6W119XHJcblx0VU5ETzooc3RhdGUpID0+XHJcblx0XHRbLi4uaGlzdCxhXSA9IHN0YXRlLmhpc3RcclxuXHRcdHsuLi5zdGF0ZSwgYSwgaGlzdH1cdFxyXG5cclxub3AgPSAoc3RhdGUsIHZhbHVlKSAtPlxyXG5cdGhpc3QgPSBbLi4uc3RhdGUuaGlzdCwgc3RhdGUuYV1cclxuXHRhID0gdmFsdWVcclxuXHR7Li4uc3RhdGUsIGEsIGhpc3R9XHJcblxyXG5zY3JpcHQgPSBcIlwiXCJcclxue1wiYVwiOjE3LFwiYlwiOjEsXCJoaXN0XCI6W119XHJcblx0QSAxNyBCIDEgXHJcblx0QUREIFxyXG5cdFx0U1RBVEUge1wiYVwiOjE5LFwiYlwiOjEsXCJoaXN0XCI6WzE3XX1cclxuXHRcdEEgMTlcclxuXHRcdEIgMVxyXG5cdFx0SElTVCBbMTddXHJcblx0XHRBIDE5IEIgMVxyXG5cdFx0QSAxOSBCIDEgSElTVCBbMTddXHJcblx0TVVMIFNUQVRFIHtcImFcIjozNCxcImJcIjoxLFwiaGlzdFwiOlsxN119XHJcblx0XHRBREQgU1RBVEUge1wiYVwiOjM2LFwiYlwiOjEsXCJoaXN0XCI6WzE3LDM0XX1cclxuXHRcdFx0VU5ETyBTVEFURSB7XCJhXCI6MzQsXCJiXCI6MSxcImhpc3RcIjpbMTddfVxyXG5cdE1VTCBBREQgRElWIEEgMThcclxuXHRcdDE3IDEgTkVXIFNUQVRFIHtcImFcIjoxNyxcImJcIjoxLFwiaGlzdFwiOltdfVxyXG57XCJhXCI6OSxcImJcIjo4LFwiaGlzdFwiOlsxOF19XHJcblx0QSA5IEIgOFxyXG5cIlwiXCJcclxuXHJcbnN0YXJ0ID0gbmV3IERhdGUoKVxyXG5mb3IgaSBpbiByYW5nZSAxXHJcblx0cnVuIHNjcmlwdFxyXG5jb25zb2xlLmxvZyBuZXcgRGF0ZSgpLXN0YXJ0XHJcbmNvbnNvbGUubG9nICdSZWFkeSEnIl19
//# sourceURL=c:\Lab\2019\110-ActionStateTreeTesting\coffee\sketch.coffee