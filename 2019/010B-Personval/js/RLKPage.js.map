{
  "version": 3,
  "file": "RLKPage.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\RLKPage.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "class RLKPage extends Page # Riksdag, Landsting, Kommun\r\n\r\n\tconstructor : (x,y,w,h,cols=1) ->\r\n\t\tsuper x,y,w,h,cols\r\n\t\t@sbuttons = []\r\n\t\t@start = new Date().getTime()\r\n\t\t@qr = '0000000000'\r\n\r\n\t\th = height/51\r\n\t\t@yoff = [@y+0,@y+16*h,@y+32*h,@y+48*h]\r\n\r\n\t\t@selectedPersons = {R:[], L:[], K:[]}\r\n\r\n\t\t@addButton new RLKButton 'R', 'Riksdag',@x,@yoff[0],@w-0,3*h-3, -> \r\n\t\t\tpages.partier.select 'R',dbTree.R\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new RLKButton 'L', dbName.L, @x,@yoff[1],@w-0,3*h-3, ->\r\n\t\t\tpages.partier.select 'L',dbTree.L\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new RLKButton 'K', dbName.K, @x,@yoff[2],@w-0,3*h-3, ->\r\n\t\t\tpages.partier.select 'K',dbTree.K\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new Button 'Utskrift', @x,@yoff[3],@w/3-2,3*h-3, ->\r\n\t\t\tpageStack.push pages.utskrift\r\n\t\t\tpages.utskrift.stopMeasuringTime()\r\n\r\n\t\t\t@page.qr = @page.getQR()\r\n\t\t\tqrcode = new QRCode document.getElementById(\"qrcode\"),\r\n\t\t\t\ttext: @page.qr\r\n\t\t\t\twidth: 0.25*width\r\n\t\t\t\theight: 0.25*width\r\n\t\t\t\tcolorDark : \"#000000\"\r\n\t\t\t\tcolorLight : \"#ffffff\"\r\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.L # Low Medium Q High\r\n\r\n\t\t@addButton new Button 'Rensa', @x+@w/3,@yoff[3],@w/3-2,3*h-3, ->\r\n\t\t\trensa()\r\n\r\n\t\t@addButton new Button 'Byt kommun', @x+2*@w/3,@yoff[3],@w/3-0,3*h-3, -> \r\n\t\t\tpageStack.push pages.kommun\r\n\r\n\taddsButton : (button) -> \r\n\t\tbutton.page = @\r\n\t\t@sbuttons.push button\r\n\r\n\tgetQR : ->\r\n\t\ts = kommunkod \r\n\t\tslump = int random 1000000\r\n\t\ts += slump.toString().padStart 6,0 # to increase probability of uniqueness \r\n\t\tfor rlk of @selectedPersons\r\n\t\t\tpersons = @selectedPersons[rlk]\r\n\t\t\tfor i in range VOTES\r\n\t\t\t\tif i < persons.length \r\n\t\t\t\t\t[partikod,knr] = persons[i]\r\n\t\t\t\t\tif knr == 0 \r\n\t\t\t\t\t\ts += '99' + partikod.padStart 4,'0'\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ts += knr.padStart 6,'0'\r\n\t\t\t\telse\r\n\t\t\t\t\ts += '000000'\r\n\t\tassert s.length,4+6+15*6\r\n\t\ts\r\n\r\n\trender : ->\r\n\t\t@bg 0\r\n\t\tif @selected != null\r\n\t\t\tpush()\r\n\t\t\tfc 1\r\n\t\t\ttextAlign LEFT,CENTER\r\n\t\t\ttextSize 0.4 * pages.personer.h/17\r\n\t\t\tsc()\r\n\t\t\t[x,y] = [pages.partier.x, pages.partier.y+pages.partier.h/34]\r\n\t\t\tif @selected.rlk == 'R' then text 'Riksdag',x,y\r\n\t\t\tif @selected.rlk == 'L' then text dbName.L, x,y\r\n\t\t\tif @selected.rlk == 'K' then text dbName.K, x,y\r\n\t\t\tpop()\r\n\t\t@showSelectedPersons()\r\n\r\n\tclickDelete : (rlk,index) ->\r\n\t\t@selectedPersons[rlk].splice index,1 \t\r\n\t\t@createSelectButtons()\r\n\r\n\tclickSwap : (rlk,index) ->\r\n\t\tarr = @selectedPersons[rlk]\r\n\t\t[arr[index],arr[index-1]] = [arr[index-1],arr[index]]\r\n\t\t@createSelectButtons()\r\n\r\n\tcreateSelectButtons : ->\r\n\t\t@sbuttons = []\r\n\t\tw = @w\r\n\t\tdw = 0.02 * width\r\n\t\tdh = 0.025 * height\r\n\t\th = height/51\r\n\r\n\t\tfor rlk,persons of @selectedPersons\r\n\t\t\tindex = \"RLK\".indexOf rlk\r\n\t\t\tfor person,i in persons\r\n\t\t\t\tx1 = @x + dw\r\n\t\t\t\tx2 = @x + 0.93 * @w\r\n\t\t\t\ty = @yoff[index] + 4.7*h + 13*h/5*i\r\n\t\t\t\ty1 = y - 2.3 * h\r\n\t\t\t\ty2 = y - 0.9 * h\r\n\t\t\t\tdo (rlk,i) =>\r\n\t\t\t\t\tif i>0 then @addsButton new Button 'byt',x1, y1,dw,dh, => @clickSwap   rlk,i\r\n\t\t\t\t\t@addsButton             new Button ' x ',x2, y2,dw,dh, => @clickDelete rlk,i\r\n\r\n\tclickPersonButton : (person) -> # av typen [partikod,knr]\r\n\t\tpersons = @selectedPersons[@selected.rlk]\r\n\t\tfor pair,i in persons \r\n\t\t\tif pair[0] == person[0] # Finns partiet redan? I så fall: ersätt denna person med den nya.\r\n\t\t\t\tpersons[i][1] = person[1]\r\n\t\t\t\treturn \r\n\t\tif persons.length < VOTES\r\n\t\t\tpersons.push person\r\n\t\t\t@createSelectButtons()\r\n\r\n\tclickPartiButton : (button) ->\r\n\t\tpersons = @selectedPersons[@selected.rlk]\r\n\t\tfor pair,i in persons \r\n\t\t\t[partikod,knr] = pair\r\n\t\t\tif partikod == button.partikod then return \r\n\t\tif persons.length < VOTES\r\n\t\t\tpersons.push [button.partikod, 0]\r\n\t\t\t@createSelectButtons()\r\n\r\n\tsample : (hash,n) -> _.object ([key,hash[key]] for key in _.sample _.keys(hash),n)\r\n\r\n\tslumpa : ->\r\n\t\tfor rlk,partier of dbTree\r\n\t\t\t@selectedPersons[rlk] = []\r\n\t\t\tparties = @sample partier,5\r\n\t\t\tfor partikod,knrs of parties\r\n\t\t\t\tif random() < 0.2 # Vote for a party\r\n\t\t\t\t\tpair = [partikod,0]\r\n\t\t\t\telse # Vote for a person\r\n\t\t\t\t\tknr = _.sample knrs\r\n\t\t\t\t\tpair = [partikod,knr]\r\n\t\t\t\t@selectedPersons[rlk].push pair\r\n\t\r\n\tshowSelectedPersons : ->\r\n\t\tpush()\r\n\t\ttextAlign LEFT,CENTER\r\n\t\ttextSize 0.025 * height\r\n\t\tfor rlk,i in 'RLK'\r\n\t\t\tsc()\r\n\t\t\tsw 1 \r\n\t\t\trectMode CORNER\r\n\t\t\ty0 = @yoff[i]\r\n\t\t\tif i == 0 then fc 1,1,0.5\r\n\t\t\tif i == 1 then fc 0.5,0.75,1\r\n\t\t\tif i == 2 then fc 1\r\n\t\t\th = height/51\r\n\t\t\trect @x, y0+3*h-1, @w, 13*h-1\r\n\t\t\tfc 0\r\n\t\t\tsc()\r\n\t\t\tsw 0\r\n\r\n\t\t\tfor pair,j in @selectedPersons[rlk]\r\n\t\t\t\ty = y0 + 4.5*h + 13*h/5*j\r\n\t\t\t\t[partikod,knr] = pair\r\n\t\t\t\tparti = dbPartier[rlk][partikod][0]\r\n\t\t\t\tnamn = if knr == 0 then dbPartier[rlk][partikod][1] else dbPersoner[rlk][knr][2]\r\n\t\t\t\ttext \"#{j+1} #{parti} - #{namn}\",@x+10,y\r\n\t\tpop()\r\n\r\n\t\tfor button in @sbuttons\r\n\t\t\tbutton.draw()\r\n\r\n\tmousePressed : ->\r\n\t\tfor button in @sbuttons\r\n\t\t\tif button.inside()\r\n\t\t\t\tbutton.click()\r\n\t\t\t\treturn true\r\n\t\tsuper()\r\n\r\nclass RLKButton extends Button\r\n\tconstructor : (@rlk, title,x,y,w,h,click = ->) ->\r\n\t\tsuper title, x,y,w,h,click\r\n"
  ]
}