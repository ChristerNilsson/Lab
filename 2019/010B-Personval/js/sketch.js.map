{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "PERSONS_PER_PAGE = 32\r\nVOTES = 5\r\n\r\nkommunkod = null\r\nlänskod = null\r\n\r\ndbName     = {} # T Områdesnamn\r\ndbTree     = {} # A\r\ndbPartier  = {} # B \r\ndbPersoner = {} # C\r\ndbKommun   = {}\r\n\r\npages = {}\r\npageStack = new PageStack()\r\n\r\npressed = false \r\n\r\nmakeFreq = (words) -> # personer är en lista\r\n\tres = {}\r\n\twords.sort()\r\n\tfor word in words\r\n\t\tletter = word[0]\r\n\t\tres[letter] = if res[letter] == undefined then 1 else res[letter] + 1\r\n\tres\r\nassert {a:5, b:9, c:4}, makeFreq 'ababcbabcbcbabcbab'.split ''\r\n\r\ngruppera = (words, n=32) -> # words är en lista med ord\r\n\tletters = makeFreq words\r\n\tres = {}\r\n\tgroup = ''\r\n\tcount = 0\r\n\tfor letter,m of letters\r\n\t\tif count + m <= n\r\n\t\t\tgroup += letter\r\n\t\t\tcount += m\r\n\t\telse\r\n\t\t\tif count > 0 then res[group] = count\r\n\t\t\tgroup = letter\r\n\t\t\tcount = m\r\n\tif count > 0 then res[group] = count\r\n\tres\r\nassert {abc:18}, gruppera 'cababbabcbcbabcbab'.split ''\r\nassert {AB:7,C:5,D:9}, gruppera 'DBDCDADBDADCDBDADCBCC'.split(''), 8\r\n\r\nrensa = ->\r\n\tpages.rlk.selectedPersons = {R:[], L:[], K:[]}\r\n\tpages.rlk.sbuttons = [] \r\n\tpages.rlk.selected = null\r\n\tpages.partier.clear()\r\n\tpages.letters.clear()\r\n\tpages.personer.clear()\r\n\tpages.rlk.qr = ''\r\n\tpages.rlk.start = new Date().getTime()\r\n\r\ngetParameters = (h = window.location.href) -> \r\n\th = decodeURI h\r\n\tarr = h.split '?'\r\n\tif arr.length != 2 then return {}\r\n\tif arr[1] == '' then return {}\r\n\t_.object(f.split '=' for f in arr[1].split '&')\t\t\r\n\r\nloadFile = (filePath) ->\r\n  result = null\r\n  xmlhttp = new XMLHttpRequest()\r\n  xmlhttp.open \"GET\", filePath, false\r\n  xmlhttp.send()\r\n  if xmlhttp.status==200 then result = xmlhttp.responseText  \r\n  result\r\n\r\ngetTxt = (rlk,filename) ->\r\n\tdata = if filename == 'data\\\\09.txt' then '' else loadFile filename # Gotland har inget Landsting\r\n\tdbName[rlk] = ''\r\n\tdbTree[rlk] = {}\r\n\tdbPartier[rlk] = {}\r\n\tdbPersoner[rlk] = {}\r\n\tlines = data.split '\\n'\r\n\tfor line in lines\r\n\t\tline = line.trim()\r\n\t\tcells = line.split '|'\r\n\t\tif cells[0]=='T' # T|Arjeplog\r\n\t\t\tdbName[rlk] = cells[1]\r\n\t\tif cells[0]=='A' # kandidaturer # A|3|208509|208510|208511|208512|208513|208514\r\n\t\t\tdbTree[rlk][cells[1]] = cells.slice 2\r\n\t\tif cells[0]=='B' # partier # B|4|C|Centerpartiet\r\n\t\t\tdbPartier[rlk][cells[1]] = cells.slice 2 \r\n\t\tif cells[0]=='C' # personer # C|10552|53|K|Britta Flinkfeldt|53 år, Arjeplog\r\n\t\t\tdbPersoner[rlk][cells[1]] = cells.slice 2 \r\n\tprint 'getTxt',rlk,filename, data.length, _.size dbPersoner[rlk]\r\n\r\ngetKommun = (filename) ->\r\n\tdata = loadFile filename \r\n\tdbKommun = {}\r\n\tlines = data.split '\\n'\r\n\tfor line in lines\r\n\t\tline = line.trim()\r\n\t\tcells = line.split '|'\r\n\t\tkod = cells[0]\r\n\t\tnamn = cells[1]\r\n\t\tif kod.length==4\r\n\t\t\tdbKommun[kod] = namn\r\n\tprint 'getKommun', _.size dbKommun\r\n\r\nfetchKommun = (kommun) -> # t ex '0180'\r\n\tstart = new Date().getTime()\r\n\r\n\tif länskod != kommun.slice 0,2\t\r\n\t\tlänskod = kommun.slice 0,2\t\r\n\t\tgetTxt 'L',\"data\\\\#{länskod}.txt\"\r\n\tif kommunkod != kommun\r\n\t\tkommunkod = kommun\r\n\t\tgetTxt 'K',\"data\\\\#{kommunkod}.txt\"\r\n\r\n\tpages.rlk.buttons[1].title = dbName.L\r\n\tpages.rlk.buttons[2].title = dbName.K\r\n\r\n\tprint 'time', new Date().getTime() - start\r\n\r\npreload = ->\r\n\t{kommun} = getParameters()\r\n\tif not kommun then kommun = '0180'\r\n\tkommunkod = kommun\r\n\tlänskod = kommunkod.slice 0,2\t\r\n\r\n\tgetTxt 'R','data\\\\00.txt'\r\n\tgetTxt 'L',\"data\\\\#{länskod}.txt\"\r\n\tgetTxt 'K',\"data\\\\#{kommunkod}.txt\"\r\n\tgetKommun 'data\\\\omraden.txt'\r\n\r\nsetup = ->\r\n\tcreateCanvas windowWidth,windowHeight-1\r\n\tsc()\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 20\r\n\r\n\tw = width\r\n\th = height\r\n\tx0 = 0\r\n\tx1 = 0.18*w\r\n\tx2 = 0.28*w\r\n\tx3 = 0.64*w\r\n\tx4 = 1.00*w\r\n\r\n\tpages.partier  = new PartiPage    0,0,x1-x0,h\r\n\tpages.letters  = new LetterPage  x1,0,x2-x1,h\r\n\tpages.personer = new PersonPage  x2,0,x3-x2,h\r\n\tpages.kommun   = new KommunPage   0.1*w,0.1*h,0.8*w,0.8*h\r\n\tpages.rlk      = new RLKPage     x3,0,x4-x3,h\r\n\tpages.utskrift = new UtskriftPage 0,0,x4,h\r\n\r\n\tpageStack.push pages.partier\r\n\tpageStack.push pages.letters\r\n\tpageStack.push pages.personer\r\n\tpageStack.push pages.rlk\r\n\r\n\tpages.utskrift.modal = true \r\n\tpages.kommun.modal = true\t\t\t\r\n\r\n\tpages.rlk.buttons[1].title = dbName.L\r\n\tpages.rlk.buttons[2].title = dbName.K\r\n\r\n\tprint _.keys pages \r\n\r\ndraw = ->\tpageStack.draw()\r\nmousePressed = -> pageStack.mousePressed()\r\n"
  ]
}