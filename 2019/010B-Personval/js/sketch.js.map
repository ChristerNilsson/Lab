{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "PERSONS_PER_PAGE = 32\r\nVOTES = 5\r\n\r\nkommunkod = null\r\nlänskod = null\r\n\r\ndbName     = {} # T Områdesnamn\r\ndbTree     = {} # A\r\ndbPartier  = {} # B \r\ndbPersoner = {} # C\r\ndbKommun   = {}\r\n\r\npages = {}\r\n\r\ngruppera = (letters,n=32) ->\r\n\tres = {}\r\n\tgroup = ''\r\n\tcount = 0\r\n\tfor letter,m of letters\r\n\t\tif count + m <= n\r\n\t\t\tgroup += letter\r\n\t\t\tcount += m\r\n\t\telse\r\n\t\t\tif count > 0 then res[group] = count\r\n\t\t\tgroup = letter\r\n\t\t\tcount = m\r\n\tif count > 0 then res[group] = count\r\n\tres\r\nassert {AB:25,C:14,D:57}, gruppera {A:12, B:13, C:14, D:57}\r\nassert {ABDEF:28, GH:25}, gruppera {A:2, B:1, D:3,E:10,F:12,G:13,H:12}\r\nassert {ABDEF:28, NO:32}, gruppera {A:2, B:1, D:3,E:10,F:12,N:20,O:12}\r\n\r\nrensa = ->\r\n\tpages.typ.selectedPersons = {R:[], L:[], K:[]}\r\n\tpages.typ.sbuttons = [] \r\n\tpages.typ.selected = null\r\n\tpages.partier.clear()\r\n\tpages.letters.clear()\r\n\tpages.personer.clear()\r\n\tpages.typ.qr = ''\r\n\tpages.typ.start = new Date().getTime()\r\n\r\nclass Page\r\n\tconstructor : (@x,@y,@w,@h,@cols=1) ->\r\n\t\t@selected = null # anger vilken knapp man klickat på\r\n\t\t@buttons  = [] \r\n\t\t@active = true\r\n\r\n\tclear : ->\r\n\t\t@selected = null\r\n\t\t@buttons = []\r\n\r\n\taddButton : (button) -> \r\n\t\tbutton.page = @\r\n\t\t@buttons.push button\r\n\r\n\tdraw : ->\r\n\t\tif @active \r\n\t\t\t@render()\r\n\t\t\tfor button in @buttons\r\n\t\t\t\tbutton.draw()\r\n\r\n\tmousePressed : ->\r\n\t\tif @active \r\n\t\t\tfor button in @buttons\r\n\t\t\t\tif button.inside mouseX,mouseY then button.click()\r\n\r\nclass PartiPage extends Page\r\n\trender : ->\r\n\t\tif @selected != null\r\n\t\t\tpush()\r\n\t\t\ttextAlign LEFT,CENTER\r\n\t\t\ttextSize 0.4 * pages.personer.h/17\r\n\t\t\trkl = pages.typ.selected.typ\r\n\t\t\tnamn = dbPartier[rkl][@selected.partikod][1]\r\n\t\t\ts = \"#{namn} (#{pages.personer.buttons.length} av #{_.size pages.personer.personer})\"\r\n\t\t\ttext s, pages.personer.x, pages.personer.y + pages.personer.h/34\r\n\t\t\tpop()\r\n\r\n\tselect : (rkl,partier) ->\r\n\t\tN = 16\r\n\t\tw = @w/2\r\n\t\th = @h/(N+1)\r\n\t\tpartikoder = _.keys partier\r\n\t\tpartikoder.sort (a,b) -> _.size(partier[b]) - _.size(partier[a])\r\n\t\t@buttons = []\r\n\r\n\t\tpages.partier.clear()\r\n\t\tpages.letters.clear()\r\n\t\tpages.personer.clear()\r\n\r\n\t\tfor partikod,i in partikoder\r\n\t\t\tx = @x + w*(i//N)\r\n\t\t\ty = @y + h*(1+i%N)\r\n\t\t\tdo (partikod) => @addButton new PartiButton rkl,partikod,x,y,w-2,h-2, -> \r\n\t\t\t\t@page.selected = @\r\n\t\t\t\tif PERSONS_PER_PAGE < _.size partier[partikod]\r\n\t\t\t\t\tpages.letters.makeLetters rkl, @, partikod, partier[partikod]\r\n\t\t\t\t\tpages.personer.buttons = []\r\n\t\t\t\telse\r\n\t\t\t\t\tpages.letters.buttons = []\r\n\t\t\t\t\tpages.personer.makePersons rkl, @, partikod, partier[partikod]\r\n\t\t\t\tpages.typ.clickPartiButton @\t\r\n\t\t\t\tpages.personer.personer = partier[partikod]\t\t\t\r\n\r\nclass LetterPage extends Page\r\n\trender : ->\r\n\r\n\tmakeFreq : (rkl,personer) -> # personer är en lista\r\n\t\tres = {}\r\n\t\tnames = (dbPersoner[rkl][key][2] for key in personer)\r\n\t\tnames.sort()\r\n\t\tfor name in names\r\n\t\t\tletter = name[0]\r\n\t\t\tres[letter] = if res[letter] == undefined then 1 else res[letter] + 1\r\n\t\tres\r\n\r\n\tmakeLetters : (rkl, button, partikod, personer) ->\r\n\t\tN = 16\r\n\t\th = @h/(N+1)\r\n\t\tw = @w/2\r\n\t\t@selected = button \r\n\t\t@buttons = []\r\n\r\n\t\ti = 0\r\n\t\tfor letters,n of gruppera @makeFreq rkl,personer\r\n\t\t\tx = @x + w*(i//N)\r\n\t\t\ty = @y + h*(1+i%N)\r\n\t\t\ttitle = if letters.length == 1 then letters else \"#{letters[0]}-#{_.last letters}\"\r\n\t\t\tdo (letters,title) => @addButton new LetterButton title,x,y,w-2,h-2,n, -> \r\n\t\t\t\t@page.selected = @\r\n\t\t\t\tpages.personer.clickLetterButton rkl, @, partikod, letters, personer\r\n\t\t\ti++\r\n\r\nclass PersonPage extends Page\r\n\r\n\trender : ->\r\n\r\n\tclickLetterButton : (rkl,button,partikod,letters,knrs) ->\r\n\t\t@personer = knrs\r\n\t\tN = PERSONS_PER_PAGE\r\n\t\tw = 0.36 * width\r\n\t\th = height/(PERSONS_PER_PAGE+2)\r\n\t\t@selected = button\r\n\t\tbutton.pageNo = (button.pageNo + 1) % button.pages\r\n\t\t@buttons = []\r\n\t\tknrs.sort (a,b) -> if dbPersoner[rkl][a][2] < dbPersoner[rkl][b][2] then -1 else 1\r\n\t\tj = 0\r\n\t\tfor knr in knrs\r\n\t\t\tperson = dbPersoner[rkl][knr]\r\n\t\t\tif person[2][0] in letters\r\n\t\t\t\tif j // N == button.pageNo\r\n\t\t\t\t\tx = j//(N//2) * w/2\r\n\t\t\t\t\tx = x % w\r\n\t\t\t\t\ty = 2*h*(1+j%(N//2))\r\n\t\t\t\t\tdo (knr) => @addButton new PersonButton rkl, partikod, knr, @x+x,@y+y,w/2-2,2*h-2, -> \r\n\t\t\t\t\t\t@page.selected = @\r\n\t\t\t\t\t\tpages.typ.clickPersonButton [partikod,knr]\r\n\t\t\t\tj++\r\n\r\n\tmakePersons : (rkl, button, partikod, knrs) -> # personer är en lista med knr\r\n\t\t@personer = knrs\r\n\t\tN = 16\r\n\t\tw = 0.36 * width \r\n\t\th = height/(PERSONS_PER_PAGE+2)\r\n\t\t@selected = button \r\n\t\t@buttons = []\r\n\r\n\t\tknrs.sort (a,b) -> if dbPersoner[rkl][a][2] < dbPersoner[rkl][b][2] then -1 else 1\r\n\t\tfor knr,j in knrs\r\n\t\t\t#person = dbPersoner[rkl][knr] # [age,sex,name,uppgift]\r\n\t\t\tx = j//N * w/2\r\n\t\t\tx = x % w\r\n\t\t\ty = 2*h*(1 + j%N)\r\n\t\t\tdo (partikod,knr) => @addButton new PersonButton rkl, partikod, knr, @x+x,@y+y,w/2-2,2*h-2, -> \r\n\t\t\t\t@page.selected = @\r\n\t\t\t\tpages.typ.clickPersonButton [@partikod,@knr]\r\n\r\nclass LetterKommunPage extends Page\r\n\trender : ->\r\n\r\n\tmakeFreq : (rkl,personer) -> # personer är en lista\r\n\t\tres = {}\r\n\t\tnames = (dbPersoner[rkl][key][2] for key in personer)\r\n\t\tnames.sort()\r\n\t\tfor name in names\r\n\t\t\tletter = name[0]\r\n\t\t\tres[letter] = if res[letter] == undefined then 1 else res[letter] + 1\r\n\t\tres\r\n\r\n\tmakeLetters : (rkl, button, partikod, personer) ->\r\n\t\tN = 16\r\n\t\th = @h/(N+1)\r\n\t\tw = @w/2\r\n\t\t@selected = button \r\n\t\t@buttons = []\r\n\r\n\t\ti = 0\r\n\t\tfor letters,n of gruppera @makeFreq rkl,personer\r\n\t\t\tx = @x + w*(i//N)\r\n\t\t\ty = @y + h*(1+i%N)\r\n\t\t\ttitle = if letters.length == 1 then letters else \"#{letters[0]}-#{_.last letters}\"\r\n\t\t\tdo (letters,title) => @addButton new LetterButton title,x,y,w-2,h-2,n, -> \r\n\t\t\t\t@page.selected = @\r\n\t\t\t\tpages.personer.clickLetterButton rkl, @, partikod, letters, personer\r\n\t\t\ti++\r\n\r\nclass KommunPage extends Page\r\n\r\n\tconstructor : (x,y,w,h) ->\r\n\t\tsuper x,y,w,h\r\n\t\t@active = true\r\n\t\t@init()\r\n\r\n\tinit : (index=0,letters='AM') ->\r\n\t\tN = 16\r\n\t\tCOLS = 10 # 7\r\n\t\t@buttons  = [] \r\n\t\tw = @w/COLS\r\n\t\th = @h/(N+1)\r\n\t\tkeys = _.keys dbKommun\r\n\t\tkeys.sort (a,b) -> if dbKommun[a] < dbKommun[b] then -1 else 1\r\n\t\t@addButton new Button 'A-M',@x+0*w,@y,w-1,h-1, -> @page.init 0,'AM'\r\n\t\t@addButton new Button 'L-Ö',@x+1*w,@y,w-1,h-1, -> @page.init 1,'NÖ'\r\n\t\ti = 0\r\n\t\tfor key in keys\t\t\t\r\n\t\t\tnamn = dbKommun[key]\r\n\t\t\tif letters[0] <= namn[0] <= letters[1]\r\n\t\t\t\tx = i%(COLS*N)//N * w\r\n\t\t\t\ty = (1 + i%N) * h\r\n\t\t\t\t@addButton new KommunButton key,@x+x,@y+y,w-1,h-1, -> \r\n\t\t\t\t\trensa()\r\n\t\t\t\t\tfetchKommun @key\r\n\t\t\t\ti++\r\n\t\t@selected = @buttons[index] \r\n\r\n\trender : ->\r\n\r\nclass TypPage extends Page\r\n\r\n\tconstructor : (x,y,w,h,cols=1) ->\r\n\t\tsuper x,y,w,h,cols\r\n\t\t@sbuttons = []\r\n\t\t@start = new Date().getTime()\r\n\t\t@qr= '0000000000'\r\n\r\n\t\th = height/51\r\n\t\t@yoff = [@y+0,@y+16*h,@y+32*h,@y+48*h]\r\n\r\n\t\t@selectedPersons = {R:[], L:[], K:[]}\r\n\r\n\t\t@addButton new TypButton 'R', 'Riksdag',@x,@yoff[0],@w-0,3*h-3, -> \r\n\t\t\tpages.partier.select 'R',dbTree.R\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new TypButton 'L', dbName.L, @x,@yoff[1],@w-0,3*h-3, ->\r\n\t\t\tpages.partier.select 'L',dbTree.L\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new TypButton 'K', dbName.K, @x,@yoff[2],@w-0,3*h-3, ->\r\n\t\t\tpages.partier.select 'K',dbTree.K\r\n\t\t\t@page.selected = @\r\n\r\n\t\t@addButton new Button 'Utskrift', @x,@yoff[3],@w/3-2,3*h-3, ->\r\n\t\t\tpages.utskrift.active = true\r\n\t\t\tpages.utskrift.stopMeasuringTime()\r\n\r\n\t\t\t@page.qr = @page.getQR()\r\n\t\t\tqrcode = new QRCode document.getElementById(\"qrcode\"),\r\n\t\t\t\ttext: @page.qr\r\n\t\t\t\twidth: 256\r\n\t\t\t\theight: 256\r\n\t\t\t\tcolorDark : \"#000000\"\r\n\t\t\t\tcolorLight : \"#ffffff\"\r\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.L # Low Medium Q High\r\n\r\n\t\t@addButton new Button 'Rensa', @x+@w/3,@yoff[3],@w/3-2,3*h-3, -> rensa()\r\n\r\n\t\t@addButton new Button 'Byt kommun', @x+2*@w/3,@yoff[3],@w/3-0,3*h-3, -> \r\n\t\t\tfor page in pages\r\n\t\t\t\tpage.active = false \r\n\t\t\tpages.kommun.active = true\r\n\r\n\taddsButton : (button) -> \r\n\t\tbutton.page = @\r\n\t\t@sbuttons.push button\r\n\r\n\tgetQR : ->\r\n\t\ts = kommunkod \r\n\t\tslump = int random 1000000\r\n\t\ts += slump.toString().padStart 6,0 # to increase probability of uniqueness \r\n\t\tfor typ of @selectedPersons\r\n\t\t\tpersons = @selectedPersons[typ]\r\n\t\t\tfor i in range VOTES\r\n\t\t\t\tif i < persons.length \r\n\t\t\t\t\t[partikod,knr] = persons[i]\r\n\t\t\t\t\tif knr == 0 \r\n\t\t\t\t\t\ts += '99' + partikod.padStart 4,'0'\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\ts += knr.padStart 6,'0'\r\n\t\t\t\telse\r\n\t\t\t\t\ts += '000000'\r\n\t\tassert s.length,4+6+15*6 # 100\r\n\t\ts\r\n\r\n\trender : ->\r\n\t\tif @selected != null\r\n\t\t\tpush()\r\n\t\t\ttextAlign LEFT,CENTER\r\n\t\t\ttextSize 20\r\n\t\t\tsc()\r\n\t\t\t[x,y] = [pages.partier.x, pages.partier.y+pages.partier.h/34]\r\n\t\t\tif @selected.typ == 'R' then text 'Riksdag',x,y\r\n\t\t\tif @selected.typ == 'L' then text dbName.L, x,y\r\n\t\t\tif @selected.typ == 'K' then text dbName.K, x,y\r\n\t\t\tpop()\r\n\t\t@showSelectedPersons() # 750,100-20\r\n\r\n\tclickDelete : (typ,index) ->\r\n\t\t@selectedPersons[typ].splice index,1 \t\r\n\t\t@createSelectButtons()\r\n\r\n\tclickSwap : (typ,index) ->\r\n\t\tarr = @selectedPersons[typ]\r\n\t\t[arr[index],arr[index-1]] = [arr[index-1],arr[index]]\r\n\t\t@createSelectButtons()\r\n\r\n\tcreateSelectButtons : ->\r\n\t\t@sbuttons = []\r\n\t\tw = @w\r\n\t\tdw = 0.02 * width\r\n\t\tdh = 0.025 * height\r\n\t\th = height/51\r\n\r\n\t\tfor typ,persons of @selectedPersons\r\n\t\t\tindex = \"RLK\".indexOf typ\r\n\t\t\tfor person,i in persons\r\n\t\t\t\tx1 = @x + dw\r\n\t\t\t\tx2 = @x + 0.93 * @w\r\n\t\t\t\ty = @yoff[index] + 4.7*h + 13*h/5*i\r\n\t\t\t\ty1 = y - 2.3 * h\r\n\t\t\t\ty2 = y - 0.9 * h\r\n\t\t\t\tdo (typ,i) =>\r\n\t\t\t\t\tif i>0 then @addsButton new Button 'byt',x1, y1,dw,dh, => @clickSwap   typ,i\r\n\t\t\t\t\t@addsButton             new Button ' x ',x2, y2,dw,dh, => @clickDelete typ,i\r\n\r\n\tclickPersonButton : (person) -> # av typen [partikod,knr]\r\n\t\tpersons = @selectedPersons[@selected.typ]\r\n\t\t# Finns partiet redan? I så fall: ersätt denna person med den nya.\r\n\t\tfor pair,i in persons \r\n\t\t\tif pair[0] == person[0]\r\n\t\t\t\tpersons[i][1] = person[1]\r\n\t\t\t\treturn \r\n\t\tif persons.length < VOTES\r\n\t\t\tpersons.push person\r\n\t\t\t@createSelectButtons()\r\n\r\n\tclickPartiButton : (button) ->\r\n\t\tpersons = @selectedPersons[@selected.typ]\r\n\t\tfor pair,i in persons \r\n\t\t\t[partikod,knr] = pair\r\n\t\t\tif partikod == button.partikod then return \r\n\t\tif persons.length < VOTES\r\n\t\t\tpersons.push [button.partikod, 0]\r\n\t\t\t@createSelectButtons()\r\n\r\n\tsample : (hash,n) -> _.object ([key,hash[key]] for key in _.sample _.keys(hash),n)\r\n\r\n\tslumpa : ->\r\n\t\tfor rkl,partier of dbTree\r\n\t\t\t@selectedPersons[rkl] = []\r\n\t\t\tparties = @sample partier,5\r\n\t\t\tfor partikod,knrs of parties\r\n\t\t\t\tif random() < 0.2 # Vote for a party\r\n\t\t\t\t\tpair = [partikod,0]\r\n\t\t\t\telse # Vote for a person\r\n\t\t\t\t\tknr = _.sample knrs\r\n\t\t\t\t\tpair = [partikod,knr]\r\n\t\t\t\t@selectedPersons[rkl].push pair\r\n\t\r\n\tshowSelectedPersons : ->\r\n\t\tpush()\r\n\t\ttextAlign LEFT,CENTER\r\n\t\ttextSize 0.025 * height\r\n\t\tfor typ,i in 'RLK'\r\n\t\t\tsc()\r\n\t\t\tsw 1 \r\n\t\t\trectMode CORNER\r\n\t\t\ty0 = @yoff[i]\r\n\t\t\tif i == 0 then fc 1,1,0.5\r\n\t\t\tif i == 1 then fc 0.5,0.75,1\r\n\t\t\tif i == 2 then fc 1\r\n\t\t\th = height/51\r\n\t\t\trect @x, y0+3*h-1, @w, 13*h-1\r\n\t\t\tfc 0\r\n\t\t\tsc()\r\n\t\t\tsw 0\r\n\r\n\t\t\tfor pair,j in @selectedPersons[typ]\r\n\t\t\t\ty = y0 + 4.5*h + 13*h/5*j\r\n\t\t\t\t[partikod,knr] = pair\r\n\t\t\t\tparti = dbPartier[typ][partikod][0]\r\n\t\t\t\tnamn = if knr == 0 then dbPartier[typ][partikod][1] else dbPersoner[typ][knr][2]\r\n\t\t\t\ttext \"#{j+1} #{parti} - #{namn}\",@x+10,y\r\n\t\tpop()\r\n\r\n\t\tfor button in @sbuttons\r\n\t\t\tbutton.draw()\r\n\r\n\tmousePressed : ->\r\n\t\tfor button in @sbuttons\r\n\t\t\tif button.inside mouseX,mouseY then button.click()\r\n\t\tsuper()\r\n\r\nclass UtskriftPage extends Page\r\n\tconstructor : (x,y,w,h) ->\r\n\t\tsuper x,y,w,h\r\n\t\t@selected = null\r\n\t\t@buttons = []\r\n\t\t@addButton new Button 'Utskrift', 50,height-482,270,45, -> window.print()\r\n\t\t@addButton new Button 'Fortsätt', 350,height-482,270,45, -> \r\n\t\t\tmyNode = document.getElementById \"qrcode\"\r\n\t\t\tmyNode.innerHTML = ''\r\n\t\t\tpages.utskrift.active = false \r\n\t\t\tpages.typ.createSelectButtons()\r\n\t\t@addButton new Button 'Slump', 650,height-482,270,45, -> \r\n\t\t\tmyNode = document.getElementById \"qrcode\"\r\n\t\t\tmyNode.innerHTML = ''\r\n\t\t\tpages.utskrift.active = false \r\n\t\t\tpages.typ.slumpa()\r\n\t\t\tpages.typ.createSelectButtons()\r\n\r\n\tstopMeasuringTime : ->\r\n\t\t@crc = @getCRC pages.typ.qr\r\n\t\t@cpu = new Date().getTime() - pages.typ.start\r\n\r\n\tgetCRC : (qr) ->\r\n\t\tres = 0\r\n\t\tfor char,i in qr\r\n\t\t\tindex = '0123456789'.indexOf char\r\n\t\t\tres += (i+1) * (index+1)\r\n\t\t\tres %= 1000000\r\n\t\tres\r\n\r\n\tshowSelectedPersons : ->\r\n\t\tpush()\r\n\t\ttextAlign LEFT,CENTER\r\n\t\tfc 0\r\n\t\tsc()\r\n\t\ttextSize 20\r\n\t\tfor typ,i in 'RLK'\r\n\t\t\tfor pair,j in pages.typ.selectedPersons[typ]\r\n\t\t\t\t[partikod,knr] = pair\r\n\t\t\t\tpartinamn = dbPartier[typ][partikod][1]\r\n\t\t\t\tif knr==0\r\n\t\t\t\t\tpersonnamn = ''\r\n\t\t\t\telse\r\n\t\t\t\t\tpersonnamn = dbPersoner[typ][knr][2]\r\n\t\t\t\ty = [0,260,520][i] + 50 + 40*j\r\n\t\t\t\ttext \"#{j+1}  #{partinamn} - #{personnamn}\",width/2,y\r\n\t\tpop()\r\n\r\n\trender : ->\r\n\t\ttextAlign LEFT,CENTER\r\n\t\tbg 1\r\n\t\tfc 0\r\n\t\ttext 'Riksdag',10,50+0\r\n\t\ttext dbName.L, 10,50+260\r\n\t\ttext dbName.K, 10,50+520\r\n\t\ttext pages.typ.qr,20,height-310\r\n\t\ttext \"#{'crc: ' + @getCRC pages.typ.qr.slice 10} #{'tid: '+@cpu}\",20,height-310-50\r\n\t\t@showSelectedPersons()\r\n\t\tpages.typ.sbuttons = []\r\n\r\nclass Button\r\n\tconstructor : (@title, @x,@y,@w,@h,@click = ->) ->\r\n\t\t@ts = 0.6 * @h\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\tpush()\r\n\t\tsc()\r\n\t\trect @x,@y,@w,@h\r\n\t\tpop()\r\n\t\ttextSize @ts\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif @page.selected == @ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x+@w/2,@y+@h/2\r\n\tinside : -> @x < mouseX < @x+@w and @y < mouseY < @y+@h\r\n\r\nclass KommunButton extends Button \r\n\r\n\tconstructor : (key, x,y,w,h,click = ->) ->\r\n\t\tsuper dbKommun[key],x,y,w,h,click\r\n\t\t@key = key \r\n\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\tpush()\r\n\t\tsc()\r\n\t\trect @x,@y,@w,@h\r\n\t\tpop()\r\n\t\ttextSize 0.65 * @ts\r\n\t\ttextAlign LEFT,CENTER\r\n\t\tif @page.selected == @ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x+0.025*@w,@y+@h/2\r\n\r\nclass PartiButton extends Button \r\n\tconstructor : (@rkl,@partikod,x,y,w,h,click = ->) ->\r\n\t\tsuper '', x,y,w,h,click\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize @ts\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif @page.selected == @ then fc 1,1,0 else fc 1\r\n\t\t#print @rkl,@partikod\r\n\t\tpartinamn = dbPartier[@rkl][@partikod][0]\r\n\t\tif partinamn == '' then partinamn = dbPartier[@rkl][@partikod][1]\r\n\r\n\t\ttext partinamn,@x+@w/2,@y+@h/2\r\n\r\nclass LetterButton extends Button \r\n\tconstructor : (title,x,y,w,h,@antal,click) ->\r\n\t\tsuper title,x,y,w,h,click\r\n\t\t@pageNo = -1\r\n\t\t@pages = 1 + @antal // PERSONS_PER_PAGE\r\n\t\tif @antal % PERSONS_PER_PAGE == 0 then @pages--\r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize 0.8 * @ts\r\n\t\ttextAlign CENTER,CENTER\r\n\t\tif @page.selected == @ then fc 1,1,0 else fc 1\r\n\t\ttext @title,@x+@w/2,@y+@h/2\r\n\t\tpush()\r\n\t\t@pageIndicator()\r\n\t\tpop()\r\n\tpageIndicator : ->\r\n\t\tif @pages <= 1 then return \r\n\t\tdx = @w//(@pages+1)\r\n\t\tfor i in range @pages\r\n\t\t\tif i==@pageNo and @page.selected == @ then fc 1 else fc 0\r\n\t\t\tcircle @x + (i+1)*dx , @y+0.85*@h, 3  \r\n\r\nclass PersonButton extends Button\r\n\tconstructor : (@rkl, @partikod, knr, x,y,w,h,click = ->) ->\r\n\t\tsuper knr,x,y,w,h,click\r\n\t\t@knr = knr \r\n\t\tperson = dbPersoner[@rkl][knr]\r\n\t\t@title0 = person[2]\r\n\t\t@title1 = person[3]\r\n\t\tif @title1 == '' then @title1 = \"#{{M:'Man', K:'Kvinna'}[person[1]]} #{person[0]} år\" \r\n\tdraw : ->\r\n\t\tfc 0.5\r\n\t\trect @x,@y,@w,@h\r\n\t\ttextSize @ts/2\r\n\t\ttextAlign LEFT,CENTER\r\n\t\tfc 1\r\n\t\ttext @title0,@x+2,@y+2+0.3*@h\r\n\t\tfc 0.75\r\n\t\ttext @title1,@x+2,@y+2+0.7*@h\r\n\r\nclass TypButton extends Button\r\n\tconstructor : (@typ, title,x,y,w,h,click = ->) ->\r\n\t\tsuper title, x,y,w,h,click\r\n\r\ngetParameters = (h = window.location.href) -> \r\n\th = decodeURI h\r\n\tarr = h.split '?'\r\n\tif arr.length != 2 then return {}\r\n\tif arr[1] == '' then return {}\r\n\t_.object(f.split '=' for f in arr[1].split '&')\t\t\r\n\r\nloadFile = (filePath) ->\r\n  result = null\r\n  xmlhttp = new XMLHttpRequest()\r\n  xmlhttp.open \"GET\", filePath, false\r\n  xmlhttp.send()\r\n  if xmlhttp.status==200 then result = xmlhttp.responseText  \r\n  result\r\n\r\ngetTxt = (rkl,filename) ->\r\n\tdata = if filename == 'data\\\\09.txt' then '' else loadFile filename \r\n\tdbName[rkl] = ''\r\n\tdbTree[rkl] = {}\r\n\tdbPartier[rkl] = {}\r\n\tdbPersoner[rkl] = {}\r\n\tlines = data.split '\\n'\r\n\tfor line in lines\r\n\t\tline = line.trim()\r\n\t\tcells = line.split '|'\r\n\t\tif cells[0]=='T' # T|Arjeplog\r\n\t\t\tdbName[rkl] = cells[1]\r\n\t\tif cells[0]=='A' # kandidaturer # A|3|208509|208510|208511|208512|208513|208514\r\n\t\t\tdbTree[rkl][cells[1]] = cells.slice 2\r\n\t\tif cells[0]=='B' # partier # B|4|C|Centerpartiet\r\n\t\t\tdbPartier[rkl][cells[1]] = cells.slice 2 \r\n\t\tif cells[0]=='C' # personer # C|10552|53|K|Britta Flinkfeldt|53 år, Arjeplog\r\n\t\t\tdbPersoner[rkl][cells[1]] = cells.slice 2 \r\n\tprint 'getTxt',rkl,filename,data.length\r\n\tprint 'Partier:', _.size dbTree[rkl] \r\n\tprint 'Partier:', _.size dbPartier[rkl]\r\n\tprint 'Personer:', _.size dbPersoner[rkl]\r\n\r\ngetKommun = (filename) ->\r\n\tdata = loadFile filename \r\n\tdbKommun = {}\r\n\tlines = data.split '\\n'\r\n\tfor line in lines\r\n\t\tline = line.trim()\r\n\t\tcells = line.split '|'\r\n\t\tkod = cells[0]\r\n\t\tnamn = cells[1]\r\n\t\tif kod.length==4\r\n\t\t\tdbKommun[kod] = namn\r\n\tprint 'getKommun', _.size dbKommun\r\n\r\npreload = ->\r\n\t{kommun} = getParameters()\r\n\tif not kommun then kommun = '0180'\r\n\tkommunkod = kommun\r\n\tlänskod = kommunkod.slice 0,2\t\r\n\r\n\tgetTxt 'R','data\\\\00.txt'\r\n\tgetTxt 'L',\"data\\\\#{länskod}.txt\"\r\n\tgetTxt 'K',\"data\\\\#{kommunkod}.txt\"\r\n\tgetKommun 'data\\\\omraden.txt'\r\n\r\nfetchKommun = (kommun) -> # t ex '0180'\r\n\tstart = new Date().getTime()\r\n\r\n\tif länskod != kommun.slice 0,2\t\r\n\t\tlänskod = kommun.slice 0,2\t\r\n\t\tgetTxt 'L',\"data\\\\#{länskod}.txt\"\r\n\tif kommunkod != kommun\r\n\t\tkommunkod = kommun\r\n\t\tgetTxt 'K',\"data\\\\#{kommunkod}.txt\"\r\n\t#getKommun 'data\\\\omraden.txt'\r\n\r\n\tfor page in pages\r\n\t\tpage.active = true\r\n\tpages.kommun.active = false\r\n\tpages.utskrift.active = false\r\n\r\n\tpages.typ.buttons[1].title = dbName.L\r\n\tpages.typ.buttons[2].title = dbName.K\r\n\r\n\tprint 'time', new Date().getTime() - start\r\n\r\nsetup = ->\r\n\tcreateCanvas windowWidth,windowHeight-1\r\n\tsc()\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 20\r\n\r\n\tx0 = 0\r\n\tx1 = 0.18*width\r\n\tx2 = 0.28*width\r\n\tx3 = 0.64*width\r\n\tx4 = 1.00*width\r\n\r\n\tpages.partier  = new PartiPage    0,0,x1-x0,height \r\n\tpages.letters  = new LetterPage  x1,0,x2-x1,height \r\n\tpages.personer = new PersonPage  x2,0,x3-x2,height \r\n\tpages.kommun   = new KommunPage  0,0,width,height \r\n\tpages.typ      = new TypPage     x3,0,x4-x3,height \r\n\tpages.utskrift = new UtskriftPage 0,0,x4,height\r\n\r\n\tpages.utskrift.active = false \r\n\tpages.kommun.active = false\t\t\t\r\n\r\n\tpages.typ.buttons[1].title=dbName.L\r\n\tpages.typ.buttons[2].title=dbName.K\r\n\r\ndraw = ->\t\r\n\tbg 0\r\n\tif _.size pages < 6 then return \r\n\tif pages.utskrift == undefined then return\r\n\tif pages.utskrift.active \r\n\t\tpages.utskrift.draw()\r\n\telse if pages.kommun.active \r\n\t\tpages.kommun.draw()\r\n\telse\r\n\t\tfor key,page of pages \r\n\t\t\tpage.draw()\r\n\r\nmousePressed = -> \r\n\tfor key,page of pages \r\n\t\tpage.mousePressed()\r\n"
  ]
}