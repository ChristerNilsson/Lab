'use strict';

// Generated by CoffeeScript 2.3.2
var UtskriftPage;

UtskriftPage = class UtskriftPage extends Page {
  constructor(x, y, w, h) {
    super(x, y, w, h);
    this.selected = null;
    this.buttons = [];
    this.addButton(new Button('Utskrift', 0.02 * width, 0.6 * height, 0.12 * w, 0.06 * h, function () {
      return window.print();
    }));
    this.addButton(new Button('Forts√§tt', 0.02 * width, 0.7 * height, 0.12 * w, 0.06 * h, function () {
      var myNode;
      myNode = document.getElementById("qrcode");
      myNode.innerHTML = '';
      pageStack.pop();
      return pages.rlk.createSelectButtons();
    }));
    this.addButton(new Button('Slump', 0.02 * width, 0.8 * height, 0.12 * w, 0.06 * h, function () {
      var myNode;
      myNode = document.getElementById("qrcode");
      myNode.innerHTML = '';
      pageStack.pop();
      pages.rlk.slumpa();
      return pages.rlk.createSelectButtons();
    }));
  }

  stopMeasuringTime() {
    return this.cpu = new Date().getTime() - pages.rlk.start;
  }

  render() {
    var h, i, j, k, knr, l, len, len1, myNode, pair, partikod, partinamn, personnamn, ref, ref1, rlk, w, y;
    myNode = document.getElementById('qrcode');
    myNode.style.position = 'absolute';
    myNode.style.left = `${int(0.02 * width)}px`;
    myNode.style.top = `${int(0.02 * height)}px`;
    textAlign(LEFT, CENTER);
    this.bg(1);
    fc(0);
    text(`${'crc: ' + pages.rlk.crc} ${'tid: ' + this.cpu}`, 0.02 * width, 0.95 * height);
    push();
    sc();
    w = width;
    h = height;
    ref = 'RLK';
    for (i = k = 0, len = ref.length; k < len; i = ++k) {
      rlk = ref[i];
      ref1 = pages.rlk.selectedPersons[rlk];
      for (j = l = 0, len1 = ref1.length; l < len1; j = ++l) {
        pair = ref1[j];
        [partikod, knr] = pair;
        partinamn = dbPartier[rlk][partikod][PARTI_BETECKNING];
        if (knr === 0) {
          personnamn = '';
        } else {
          personnamn = dbPersoner[rlk][knr][PERSON_NAMN];
        }
        y = [0, 0.3 * h, 0.6 * h][i] + 0.04 * h + 0.05 * h * j;
        if (j === 0) {
          textSize(0.028 * h);
          text(dbName[rlk], 0.31 * width, y);
        }
        textSize(0.020 * h);
        text(`${j + 1}  ${partinamn} - ${personnamn}`, 0.3 * w, y + 0.05 * h);
      }
    }
    pop();
    return pages.rlk.sbuttons = [];
  }

};
//# sourceMappingURL=UtskriftPage.js.map
