// Generated by CoffeeScript 2.3.2
var Hangman, PATH, WORDS, _, args, fs, hm,
  indexOf = [].indexOf;

_ = require('lodash');

fs = require('fs');

WORDS = 'words.txt';

PATH = 'data.json';

Hangman = class Hangman {
  constructor() {
    var words;
    words = fs.readFileSync(WORDS, 'utf8').split('\r\n');
    this.secret = words[_.random(words.length)];
    this.guessed = this.secret.split('').map(() => {
      return '_';
    });
    this.history = [];
  }

  show() {
    return this.guessed.join(' ');
  }

  guess(letter) {
    var i, j, len, ltr, ref, results;
    this.history.push(letter);
    ref = this.secret;
    results = [];
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      ltr = ref[i];
      if (ltr === letter) {
        results.push(this.guessed[i] = letter);
      } else {
        results.push(void 0);
      }
    }
    return results;
  }

  read() {
    return Object.assign(this, JSON.parse(fs.readFileSync(PATH, 'utf8')));
  }

  write() {
    return fs.writeFileSync(PATH, JSON.stringify(this));
  }

};

hm = new Hangman;

hm.read();

args = process.argv;

if (args.length === 2) {
  hm = new Hangman;
} else {
  hm.guess(args[2]);
}

if (indexOf.call(hm.guessed, '_') < 0) {
  console.log(hm.history.join());
}

console.log(hm.show());

hm.write();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtFQUFBOztBQUFBLENBQUEsR0FBSSxPQUFBLENBQVEsUUFBUjs7QUFDSixFQUFBLEdBQUssT0FBQSxDQUFRLElBQVI7O0FBRUwsS0FBQSxHQUFROztBQUNSLElBQUEsR0FBTzs7QUFFRCxVQUFOLE1BQUEsUUFBQTtFQUNDLFdBQWMsQ0FBQSxDQUFBO0FBQ2IsUUFBQTtJQUFBLEtBQUEsR0FBUSxFQUFFLENBQUMsWUFBSCxDQUFnQixLQUFoQixFQUF1QixNQUF2QixDQUE4QixDQUFDLEtBQS9CLENBQXFDLE1BQXJDO0lBQ1IsSUFBQyxDQUFBLE1BQUQsR0FBVSxLQUFNLENBQUEsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxLQUFLLENBQUMsTUFBZixDQUFBO0lBQ2hCLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBQyxDQUFBLE1BQU0sQ0FBQyxLQUFSLENBQWMsRUFBZCxDQUFpQixDQUFDLEdBQWxCLENBQXNCLENBQUEsQ0FBQSxHQUFBO2FBQUc7SUFBSCxDQUF0QjtJQUNYLElBQUMsQ0FBQSxPQUFELEdBQVc7RUFKRTs7RUFNZCxJQUFPLENBQUEsQ0FBQTtXQUFHLElBQUMsQ0FBQSxPQUFPLENBQUMsSUFBVCxDQUFjLEdBQWQ7RUFBSDs7RUFFUCxLQUFRLENBQUMsTUFBRCxDQUFBO0FBQ1AsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0lBQUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUFULENBQWMsTUFBZDtBQUNBO0FBQUE7SUFBQSxLQUFBLDZDQUFBOztNQUNDLElBQUcsR0FBQSxLQUFPLE1BQVY7cUJBQXNCLElBQUMsQ0FBQSxPQUFRLENBQUEsQ0FBQSxDQUFULEdBQWMsUUFBcEM7T0FBQSxNQUFBOzZCQUFBOztJQURELENBQUE7O0VBRk87O0VBS1IsSUFBTyxDQUFBLENBQUE7V0FBRyxNQUFNLENBQUMsTUFBUCxDQUFjLElBQWQsRUFBaUIsSUFBSSxDQUFDLEtBQUwsQ0FBVyxFQUFFLENBQUMsWUFBSCxDQUFnQixJQUFoQixFQUFxQixNQUFyQixDQUFYLENBQWpCO0VBQUg7O0VBQ1AsS0FBUSxDQUFBLENBQUE7V0FBRyxFQUFFLENBQUMsYUFBSCxDQUFpQixJQUFqQixFQUFzQixJQUFJLENBQUMsU0FBTCxDQUFlLElBQWYsQ0FBdEI7RUFBSDs7QUFmVDs7QUFpQkEsRUFBQSxHQUFLLElBQUk7O0FBQ1QsRUFBRSxDQUFDLElBQUgsQ0FBQTs7QUFFQSxJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUVmLElBQUcsSUFBSSxDQUFDLE1BQUwsS0FBZSxDQUFsQjtFQUF5QixFQUFBLEdBQUssSUFBSSxRQUFsQztDQUFBLE1BQUE7RUFBK0MsRUFBRSxDQUFDLEtBQUgsQ0FBUyxJQUFLLENBQUEsQ0FBQSxDQUFkLEVBQS9DOzs7QUFFQSxJQUFHLGFBQVcsRUFBRSxDQUFDLE9BQWQsRUFBQSxHQUFBLEtBQUg7RUFBOEIsT0FBTyxDQUFDLEdBQVIsQ0FBWSxFQUFFLENBQUMsT0FBTyxDQUFDLElBQVgsQ0FBQSxDQUFaLEVBQTlCOzs7QUFDQSxPQUFPLENBQUMsR0FBUixDQUFZLEVBQUUsQ0FBQyxJQUFILENBQUEsQ0FBWjs7QUFDQSxFQUFFLENBQUMsS0FBSCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiXyA9IHJlcXVpcmUgJ2xvZGFzaCdcclxuZnMgPSByZXF1aXJlICdmcydcclxuXHJcbldPUkRTID0gJ3dvcmRzLnR4dCdcclxuUEFUSCA9ICdkYXRhLmpzb24nXHJcblxyXG5jbGFzcyBIYW5nbWFuXHJcblx0Y29uc3RydWN0b3IgOiAtPlxyXG5cdFx0d29yZHMgPSBmcy5yZWFkRmlsZVN5bmMoV09SRFMsICd1dGY4Jykuc3BsaXQgJ1xcclxcbidcclxuXHRcdEBzZWNyZXQgPSB3b3Jkc1tfLnJhbmRvbSB3b3Jkcy5sZW5ndGhdXHJcblx0XHRAZ3Vlc3NlZCA9IEBzZWNyZXQuc3BsaXQoJycpLm1hcCA9PiAnXydcclxuXHRcdEBoaXN0b3J5ID0gW11cclxuXHJcblx0c2hvdyA6IC0+IEBndWVzc2VkLmpvaW4gJyAnXHJcblxyXG5cdGd1ZXNzIDogKGxldHRlcikgLT5cclxuXHRcdEBoaXN0b3J5LnB1c2ggbGV0dGVyXHJcblx0XHRmb3IgbHRyLGkgaW4gQHNlY3JldCBcclxuXHRcdFx0aWYgbHRyID09IGxldHRlciB0aGVuIEBndWVzc2VkW2ldID0gbGV0dGVyXHJcblxyXG5cdHJlYWQgOiAtPiBPYmplY3QuYXNzaWduIEAsIEpTT04ucGFyc2UgZnMucmVhZEZpbGVTeW5jIFBBVEgsJ3V0ZjgnXHJcblx0d3JpdGUgOiAtPiBmcy53cml0ZUZpbGVTeW5jIFBBVEgsSlNPTi5zdHJpbmdpZnkgQFxyXG5cclxuaG0gPSBuZXcgSGFuZ21hblxyXG5obS5yZWFkKClcclxuXHJcbmFyZ3MgPSBwcm9jZXNzLmFyZ3ZcclxuXHJcbmlmIGFyZ3MubGVuZ3RoID09IDIgdGhlbiBobSA9IG5ldyBIYW5nbWFuIGVsc2UgaG0uZ3Vlc3MgYXJnc1syXVxyXG5cclxuaWYgJ18nIG5vdCBpbiBobS5ndWVzc2VkIHRoZW4gY29uc29sZS5sb2cgaG0uaGlzdG9yeS5qb2luKClcclxuY29uc29sZS5sb2cgaG0uc2hvdygpXHJcbmhtLndyaXRlKCkiXX0=
//# sourceURL=c:\Lab\2019\066-HangWhatever\coffee\sketch.coffee