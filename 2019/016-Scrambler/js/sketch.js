// Generated by CoffeeScript 2.3.2
var Button, buttons, createHash, draw, hash, hist, korrekt, level, mousePressed, mouseReleased, newGame, normalize, released, setup, slumpad, touchEnded, touchStarted,
  indexOf = [].indexOf;

hash = null;

korrekt = '';

slumpad = '';

buttons = [];

level = 3;

released = true;

hist = [];

normalize = function(ord) {
  var arr;
  arr = ord.split('');
  arr.sort();
  return arr.join('');
};

createHash = function(lvl) {
  var j, key, len, ord, ref;
  hash = {};
  level = constrain(lvl, 3, 25);
  ref = ordlista.split(' ');
  for (j = 0, len = ref.length; j < len; j++) {
    ord = ref[j];
    if (ord.length === level) {
      key = normalize(ord);
      if (hash[key]) {
        hash[key].push(ord);
      } else {
        hash[key] = [ord];
      }
    }
  }
  return newGame();
};

Button = class Button {
  constructor(title, x, y, w, h, click) {
    this.title = title;
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;
    this.click = click;
  }

  draw() {
    rect(this.x, this.y, this.w, this.h);
    return text(this.title, this.x, this.y);
  }

  inside() {
    var mx, my;
    mx = mouseX * 1000 / windowWidth;
    my = mouseY * 1000 / windowHeight;
    return (this.x - this.w / 2 < mx && mx < this.x + this.w + 2) && (this.y - this.h / 2 < my && my < this.y + this.h + 2);
  }

};

newGame = function() {
  var results;
  korrekt = _.sample(_.keys(hash));
  results = [];
  while (true) {
    slumpad = (_.shuffle(korrekt.split(''))).join('');
    if (indexOf.call(hash[normalize(korrekt)], slumpad) < 0) {
      break;
    } else {
      results.push(void 0);
    }
  }
  return results;
};

setup = function() {
  createCanvas(windowWidth - 18, windowHeight - 20);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  buttons.push(new Button('+', 900, 100, 100, 50, function() {
    return createHash(level + 1);
  }));
  buttons.push(new Button('-', 700, 100, 100, 50, function() {
    return createHash(level - 1);
  }));
  buttons.push(new Button('Next', 150, 100, 200, 50, function() {
    hist.unshift([slumpad, hash[normalize(korrekt)]]);
    return newGame();
  }));
  return createHash(3);
};

draw = function() {
  var button, i, j, k, len, len1, line0, line1, pair;
  scale(windowWidth / 1000, windowHeight / 1000);
  bg(0.5);
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    button.draw();
  }
  textSize(50);
  push();
  textSize(60);
  if (hash[normalize(korrekt)].length === 1) {
    text(slumpad, 500, 200);
  } else {
    text(`${slumpad} (${hash[normalize(korrekt)].length})`, 500, 200);
  }
  pop();
  text(level, 800, 100);
  push();
  for (i = k = 0, len1 = hist.length; k < len1; i = ++k) {
    pair = hist[i];
    [line0, line1] = pair;
    textAlign(LEFT, CENTER);
    text(line0, 50, 300 + 100 * i);
    textAlign(RIGHT, CENTER);
    text(line1, 900, 350 + 100 * i);
  }
  return pop();
};

mousePressed = touchStarted = function() {
  var button, j, len;
  if (released) {
    released = false; // to make Android work 	
  } else {
    return;
  }
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    if (button.inside()) {
      button.click();
    }
  }
  return false; // to prevent double click on Android
};

mouseReleased = touchEnded = function() {
  released = true;
  return false; // to prevent double click on Android
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxVQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxFQUFBLEtBQUEsRUFBQSxZQUFBLEVBQUEsYUFBQSxFQUFBLE9BQUEsRUFBQSxTQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEVBQUEsVUFBQSxFQUFBLFlBQUE7RUFBQTs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsT0FBQSxHQUFVOztBQUNWLE9BQUEsR0FBVTs7QUFDVixPQUFBLEdBQVU7O0FBQ1YsS0FBQSxHQUFROztBQUNSLFFBQUEsR0FBVzs7QUFDWCxJQUFBLEdBQU87O0FBRVAsU0FBQSxHQUFZLFFBQUEsQ0FBQyxHQUFELENBQUE7QUFDWCxNQUFBO0VBQUEsR0FBQSxHQUFNLEdBQUcsQ0FBQyxLQUFKLENBQVUsRUFBVjtFQUNOLEdBQUcsQ0FBQyxJQUFKLENBQUE7U0FDQSxHQUFHLENBQUMsSUFBSixDQUFTLEVBQVQ7QUFIVzs7QUFLWixVQUFBLEdBQWEsUUFBQSxDQUFDLEdBQUQsQ0FBQTtBQUNaLE1BQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUEsSUFBQSxHQUFPLENBQUE7RUFDUCxLQUFBLEdBQVEsU0FBQSxDQUFVLEdBQVYsRUFBYyxDQUFkLEVBQWdCLEVBQWhCO0FBQ1I7RUFBQSxLQUFBLHFDQUFBOztJQUNDLElBQUcsR0FBRyxDQUFDLE1BQUosS0FBYyxLQUFqQjtNQUNDLEdBQUEsR0FBTSxTQUFBLENBQVUsR0FBVjtNQUNOLElBQUcsSUFBSyxDQUFBLEdBQUEsQ0FBUjtRQUFrQixJQUFLLENBQUEsR0FBQSxDQUFJLENBQUMsSUFBVixDQUFlLEdBQWYsRUFBbEI7T0FBQSxNQUFBO1FBQTBDLElBQUssQ0FB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QUFBLEdBQUksR0FBQSxHQUFJLENBQXZCO0VBTEQ7U0FNQSxHQUFBLENBQUE7QUF0Qk07O0FBd0JQLFlBQUEsR0FBZSxZQUFBLEdBQWUsUUFBQSxDQUFBLENBQUE7QUFDN0IsTUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBO0VBQUEsSUFBRyxRQUFIO0lBQWlCLFFBQUEsR0FBVyxNQUE1QjtHQUFBLE1BQUE7QUFBdUMsV0FBdkM7O0VBQ0EsS0FBQSx5Q0FBQTs7SUFDQyxJQUFHLE1BQU0sQ0FBQyxNQUFQLENBQUEsQ0FBSDtNQUF3QixNQUFNLENBQUMsS0FBUCxDQUFBLEVBQXhCOztFQUREO1NBRUEsTUFKNkI7QUFBQTs7QUFNOUIsYUFBQSxHQUFnQixVQUFBLEdBQWEsUUFBQSxDQUFBLENBQUE7RUFDNUIsUUFBQSxHQUFXO1NBQ1gsTUFGNEI7QUFBQSIsInNvdXJjZXNDb250ZW50IjpbImhhc2ggPSBudWxsXHJcbmtvcnJla3QgPSAnJ1xyXG5zbHVtcGFkID0gJydcclxuYnV0dG9ucyA9IFtdXHJcbmxldmVsID0gM1xyXG5yZWxlYXNlZCA9IHRydWVcclxuaGlzdCA9IFtdXHJcblxyXG5ub3JtYWxpemUgPSAob3JkKSAtPiBcclxuXHRhcnIgPSBvcmQuc3BsaXQgJydcclxuXHRhcnIuc29ydCgpXHJcblx0YXJyLmpvaW4gJydcclxuXHJcbmNyZWF0ZUhhc2ggPSAobHZsKSAtPlxyXG5cdGhhc2ggPSB7fVxyXG5cdGxldmVsID0gY29uc3RyYWluIGx2bCwzLDI1XHJcblx0Zm9yIG9yZCBpbiBvcmRsaXN0YS5zcGxpdCAnICdcclxuXHRcdGlmIG9yZC5sZW5ndGggPT0gbGV2ZWxcclxuXHRcdFx0a2V5ID0gbm9ybWFsaXplIG9yZFxyXG5cdFx0XHRpZiBoYXNoW2tleV0gdGhlbiBoYXNoW2tleV0ucHVzaCBvcmQgZWxzZSBoYXNoW2tleV0gPSBbb3JkXSBcclxuXHRuZXdHYW1lKClcclxuXHJcbmNsYXNzIEJ1dHRvblxyXG5cdGNvbnN0cnVjdG9yIDogKEB0aXRsZSxAeCxAeSxAdyxAaCxAY2xpY2spIC0+XHJcblx0ZHJhdyA6IC0+XHJcblx0XHRyZWN0IEB4LEB5LEB3LEBoXHJcblx0XHR0ZXh0IEB0aXRsZSxAeCxAeVxyXG5cdGluc2lkZSA6IC0+IFxyXG5cdFx0bXggPSBtb3VzZVggKiAxMDAwIC8gd2luZG93V2lkdGhcclxuXHRcdG15ID0gbW91c2VZICogMTAwMCAvIHdpbmRvd0hlaWdodFxyXG5cdFx0QHgtQHcvMiA8IG14IDwgQHgrQHcrMiBhbmQgQHktQGgvMiA8IG15IDwgQHkrQGgrMlxyXG5cclxubmV3R2FtZSA9IC0+XHJcblx0a29ycmVrdCA9IF8uc2FtcGxlIF8ua2V5cyBoYXNoIFxyXG5cdHdoaWxlIHRydWVcclxuXHRcdHNsdW1wYWQgPSAoXy5zaHVmZmxlIGtvcnJla3Quc3BsaXQgJycpLmpvaW4gJydcclxuXHRcdGlmIHNsdW1wYWQgbm90IGluIGhhc2hbbm9ybWFsaXplIGtvcnJla3RdIHRoZW4gYnJlYWtcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgtMTgsd2luZG93SGVpZ2h0LTIwXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHJcblx0YnV0dG9ucy5wdXNoIG5ldyBCdXR0b24gJysnLCA5MDAsMTAwLDEwMCw1MCwtPiBjcmVhdGVIYXNoIGxldmVsKzFcclxuXHRidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiAnLScsIDcwMCwxMDAsMTAwLDUwLC0+IGNyZWF0ZUhhc2ggbGV2ZWwtMVxyXG5cclxuXHRidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiAnTmV4dCcsIDE1MCwxMDAsIDIwMCw1MCwgLT5cclxuXHRcdGhpc3QudW5zaGlmdCBbc2x1bXBhZCwgaGFzaFtub3JtYWxpemUga29ycmVrdF1dXHJcblx0XHRuZXdHYW1lKClcclxuXHJcblx0Y3JlYXRlSGFzaCAzXHJcblxyXG5kcmF3ID0gLT5cclxuXHRzY2FsZSB3aW5kb3dXaWR0aC8xMDAwLHdpbmRvd0hlaWdodC8xMDAwXHJcblx0YmcgMC41XHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRidXR0b24uZHJhdygpXHJcblx0dGV4dFNpemUgNTBcclxuXHJcblx0cHVzaCgpXHJcblx0dGV4dFNpemUgNjBcclxuXHRpZiBoYXNoW25vcm1hbGl6ZSBrb3JyZWt0XS5sZW5ndGhcdD09IDEgdGhlbiB0ZXh0IHNsdW1wYWQsNTAwLDIwMFxyXG5cdGVsc2UgdGV4dCBcIiN7c2x1bXBhZH0gKCN7aGFzaFtub3JtYWxpemUga29ycmVrdF0ubGVuZ3RofSlcIiw1MDAsMjAwXHJcblx0cG9wKClcclxuXHJcblx0dGV4dCBsZXZlbCw4MDAsMTAwXHJcblxyXG5cdHB1c2goKVxyXG5cdGZvciBwYWlyLGkgaW4gaGlzdFxyXG5cdFx0W2xpbmUwLGxpbmUxXSA9IHBhaXJcclxuXHRcdHRleHRBbGlnbiBMRUZULENFTlRFUlxyXG5cdFx0dGV4dCBsaW5lMCw1MCwzMDArMTAwKmlcclxuXHRcdHRleHRBbGlnbiBSSUdIVCxDRU5URVJcclxuXHRcdHRleHQgbGluZTEsOTAwLDM1MCsxMDAqaVxyXG5cdHBvcCgpXHJcblxyXG5tb3VzZVByZXNzZWQgPSB0b3VjaFN0YXJ0ZWQgPSAtPlxyXG5cdGlmIHJlbGVhc2VkIHRoZW4gcmVsZWFzZWQgPSBmYWxzZSBlbHNlIHJldHVybiAjIHRvIG1ha2UgQW5kcm9pZCB3b3JrIFx0XHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRpZiBidXR0b24uaW5zaWRlKCkgdGhlbiBidXR0b24uY2xpY2soKVxyXG5cdGZhbHNlICMgdG8gcHJldmVudCBkb3VibGUgY2xpY2sgb24gQW5kcm9pZFxyXG5cclxubW91c2VSZWxlYXNlZCA9IHRvdWNoRW5kZWQgPSAtPlxyXG5cdHJlbGVhc2VkID0gdHJ1ZSBcclxuXHRmYWxzZSAjIHRvIHByZXZlbnQgZG91YmxlIGNsaWNrIG9uIEFuZHJvaWRcdCJdfQ==
//# sourceURL=C:\Lab\2019\016-Scrambler\coffee\sketch.coffee