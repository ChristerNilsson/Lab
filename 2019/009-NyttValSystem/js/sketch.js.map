{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": ";;;;;AAAA,IAAA,KAAA,GAAA,IAAA,IAAA,GAAA,GAAA,KAAA,IAAA,GAAA,aAAA,GAAA,IAAA,aAAA,GAAA,WAAA,SAAA,SAAA,QAAA,MAAA,OAAA;;AAAA,IAAI;;AACJ,IAAI;;AACJ,KAAK;;AACL,IAAI;;AACJ,IAAI;;AACJ,KAAK;;AACL,IAAI;;AACJ,KAAK;;AACL,KAAK;;AACL,MAAM;;AACN,MAAM;;AACN,SAAS;;AAET,UAAU;;AACV,OAAO,cAAA,AAAC,MAAD,AAAM;iBAAU,AAAQ;AAAK,AAAC;AAAM,eAAP,AAAiB;AAAM,WAAvB,AAA6B;AAA1D,AAAgB,AAAa,AAA+B;AAA/B,GAAb,AAAO;;;AAC9B,KAAA,AAAK,KAAL,AAAU;;AACV,KAAA,AAAK,KAAL,AAAW;;AACX,KAAA,AAAK,MAAL,AAAW;;AACX,KAAA,AAAK,KAAL,AAAU;;AACV,KAAA,AAAK,KAAL,AAAU;;AACV,KAAA,AAAK,MAAL,AAAW;;AACX,KAAA,AAAK,KAAL,AAAU;;AACV,KAAA,AAAK,MAAL,AAAW;;AACX,KAAA,AAAK,MAAL,AAAW;;AACX,KAAA,AAAK,OAAL,AAAY;;AACZ,KAAA,AAAK,OAAL,AAAY;;AACZ,KAAA,AAAK,UAAL,AAAe;;AAEf,IAAI;;AACJ,SAAS;;AAET,UAAU,iBAAA,AAAC;AACV,MADc,4EAAL,AAAW;;MACpB,GAAA,OAAA,GAAA,KAAA,GAAA,OAAA,KAAA;AAAA,UAAQ,AAAI,IAAA;AACZ,UAAQ,AAAQ,QAAA;AAChB,MAAI,MAAM,AAAK,MAAL,AAAM,QAAN,AAAc,QAAd,AAAsB,IAA5B,AAAgC,AACpC;cAAA;;AAAA,OAAA,kCAAA;;iBACC,AAAM,OAAN,AAAO,KADR,AACC,AAAY;AADb;SAJS;;;AAOV,cAAc;AACb,UAAQ,CAAR,AAAQ,AAAC;AACT,UAAQ,CAAR,AAAQ,AAAC;AACT,UAAQ,CAAA,AAAC,IAAD,AAAI,GAAZ,AAAQ,AAAM,IAAd,AAAiB;AACjB,UAAQ,CAAA,AAAC,IAAD,AAAI,IAAZ,AAAQ,AAAO,IAAf,AAAkB;AAClB,UAAQ,CAAA,AAAC,GAAT,AAAQ,AAAG,IAAX,AAAc;AACd,UAAQ,CAAA,AAAC,GAAT,AAAQ,AAAG,IAAX,AAAc;AACd,UAAQ,CAAA,AAAC,GAAT,AAAQ,AAAG;AACX,UAAQ,CAAA,AAAC,IAAT,AAAQ,AAAI;AACZ,UAAQ,CAAA,AAAC,GAAT,AAAQ,AAAG;AACX,UAAQ,CAAA,AAAC,IAAD,AAAI,GAAZ,AAAQ,AAAM,IAAd,AAAiB;AACjB,UAAQ,CAAA,AAAC,IAAD,AAAI,GAAZ,AAAQ,AAAM,IAAd,AAAiB;AACjB,UAAQ,CAAA,AAAC,IAAD,AAAI,GAAJ,AAAM,IAAd,AAAQ,AAAS;AACjB,UAAQ,CAAA,AAAC,KAAD,AAAK,IAAb,AAAQ,AAAQ;AAChB,UAAQ,CAAA,AAAC,KAAD,AAAK,IAAb,AAAQ,AAAQ;AAChB,UAAQ,CAAR,AAAQ,AAAC;AACT,WAAS,AAAC,EAAD,AAAE,QAAF,AAAU;SACnB,AAAM,MAAG,AAAM,OAjBF,AAiBb,AAAM,AAAU,AAAO;;;AAExB,cAAc,qBACb;MAAA,OAAA,GAAA,GAAA,GAAA,KAAA,MAAA,MAAA,MAAA,GAAA,GAAA,OAAA,SAAA;AAAA,OAAA,sCAAA;;AACC,AAAK,UAAL,AAAM,QADP,AACe;;AACf,OAAA,uCAAA;;AACC,SAAA,qCAAA;;AACC,UAAG,AAAQ,QAAA,AAAM,OAAjB,AAAkB;AACjB,AAAQ,gBAAA,AAAM,OAAd,AAAe,AACf;AAFD;AADD;AADD;AAKA;;AAAA,OAAA,wCAAA;;AACC,QAAyD,AAAC,EAA1D,AAA2D;mBAA3D,AAAM,MAAG,GAAG,MAAI,AAAC,EAAL,AAAM,QAAT,AAAe,GAAf,AAAiB,GAApB,AAAG,AAAmB,AAAE,YAAI,AAAC,EAA7B,AAA8B,cAAS,AAAC,EAA9C,AAAM,AAAyC;AAA/C,WAAA;wBAAA;AADD;AAAA;SARa;;;AAWd,YAAY,AAAC;AACZ;MADY,AAAC;MAAF,AAAC,AAAO;;MACnB;AAAA,UAAQ,AAAQ,QAAA;AAChB,AAAM,sBAAY,AAAK,MAAjB,AAAkB,AAAK,iBAA7B,AAAM,AAA8B,AAAM;SAC1C,AAAK,MAAL,AAAM,YAHK,AAGO;;;AAEnB,QAAQ;MACP,OAAA,KAAA,GAAA,OAAA,GAAA,KAAA,OAAA,KAAA,QAAA;AAAA,AACA;;AAAA,OAAA,kCAAA;;AACC,UAAA,AAAM;AACN,AAAM,iCAAN,AAAM,AAAkB,AAAE;AAC1B;AACA;mBAAuB;;AAAA,WAAA,kDAAA;;YAA4B,AAAK,MAAL,AAAM,QAAQ;uBAA1D,CAAC,AAAK,MAAN,AAAO,OAAP,AAAa;AAAG;AAAA;;;AACvB,AAAG,QAAH,AAAI,KAAK,UAAA,AAAC,GAAD,AAAG;aAAM,AAAE,EAAF,AAAE,KAAK,AAAE,EAAlB,AAAkB;AAA3B;AAEA,YAAQ,AAAM,OAAC,AACf;;+BAAgB,AAAI,IAAA;;AAApB,AAAC;AAAD,AAAO;;AACP,aAAS,AAAQ,QAAA;AACjB,UAAA,AAAM;AACN,AAAM,iCAAkB,AAAM,OAAxB,AAAyB,AAAK,iBAAO,GAAI,QAAA,AAAM,QAAV,AAAgB,KAAhB,AAAsB,GAAjE,AAAM,AAAqC,AAAwB,AAAE;AAErE,cAAU,AAAC,EAAD,AAAE,KAbb,AAaC,AAAU,AAAO;;AAElB,QAAA,AAAM,AACN;;AAjBA,8BAiBgB,AAAI,IAAA;;AAApB,AAAC;AAAD,AAAO;;AACP,UAAQ,AAAQ,QAAA;SAChB,AAAM,4BAAoB,AAAK,MAAzB,AAA0B,AAAK,iBAAO,GAAI,QAAA,AAAM,QAAV,AAAgB,KAAhB,AAAsB,GApB3D,AAoBP,AAAM,AAAsC,AAAwB,AAAE",
  "sourcesContent": [
    "S = 0\r\nM = 1\r\nSD = 2\r\nC = 3\r\nV = 4\r\nKD = 5\r\nL = 6\r\nMP = 7\r\nFI = 8\r\nAFS = 9\r\nMED = 10\r\nÖVRIGA = 11\r\n\r\npartier = []\r\nsave = (namn,andel) -> partier.push {andel,available:true, total:0,namn}\r\nsave 'S', 28.26\r\nsave 'M',  19.84\r\nsave 'SD', 17.53\r\nsave 'C', 8.61\r\nsave 'V', 8.00\r\nsave 'KD', 6.32\r\nsave 'L', 5.49\r\nsave 'MP', 4.41\r\nsave 'FI', 0.46\r\nsave 'AfS', 0.31\r\nsave 'MED', 0.30\r\nsave 'Övriga', 0.47\r\n\r\nN = 7497123\r\nröster = []\r\n\r\nprocess = (lst,andel=1) ->\r\n\tindex = lst[0]\r\n\tparti = partier[index]\r\n\tn = round parti.andel * andel * N / 100\r\n\tfor i in range n\r\n\t\tröster.push lst\r\n\r\nSkapaRöster = ->\r\n\tprocess [S]\r\n\tprocess [M]\r\n\tprocess [SD,V,S],0.3\r\n\tprocess [SD,KD,M],0.7\r\n\tprocess [C,S],0.5\r\n\tprocess [C,M],0.5\r\n\tprocess [V,S]\r\n\tprocess [KD,M]\r\n\tprocess [L,M]\r\n\tprocess [MP,V,S],0.7\r\n\tprocess [MP,V,M],0.3\r\n\tprocess [FI,V,MP,S]\r\n\tprocess [AFS,SD,M]\r\n\tprocess [MED,SD,M]\r\n\tprocess [ÖVRIGA]\r\n\tröster = _.shuffle röster\r\n\tprint \"#{röster.length} röster inlästa\"\r\n\r\nRäknaRöster = ->\r\n\tfor parti in partier\r\n\t\tparti.total = 0\r\n\tfor röst in röster\r\n\t\tfor index in röst\r\n\t\t\tif partier[index].available\r\n\t\t\t\tpartier[index].total++\r\n\t\t\t\tbreak \r\n\tfor p in partier\r\n\t\tprint \"#{nf 100*p.total/N,0,2}% #{p.total} #{p.namn}\" if p.available\r\n\r\neliminera = ([antal,index]) ->\r\n\tparti = partier[index]\r\n\tprint \"Tag bort #{parti.namn} med #{antal} röster\"\r\n\tparti.available = false\r\n\r\nsetup = ->\r\n\tSkapaRöster()\r\n\tfor i in range partier.length-1\r\n\t\tprint ''\r\n\t\tprint \"------- Omgång #{i} --------\"\r\n\t\tRäknaRöster()\r\n\t\tarr = ([parti.total,i] for parti,i in partier when parti.total > 0)\r\n\t\tarr.sort (a,b) -> b[0] - a[0]\r\n\r\n\t\tsumma = röster.length \r\n\t\t[antal,index] = arr[0]\r\n\t\tstörst = partier[index]\r\n\t\tprint ''\r\n\t\tprint \"Största parti: #{störst.namn} med #{nf (antal/summa*100), 0,2}% av rösterna\"\r\n\r\n\t\teliminera _.last arr\r\n\r\n\tprint '===================================================='\r\n\t[antal,index] = arr[0]\r\n\tparti = partier[index]\r\n\tprint \"Slutlig segrare: #{parti.namn} med #{nf (antal/summa*100), 0,2} röster\"\r\n"
  ]
}