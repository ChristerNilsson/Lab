// Generated by CoffeeScript 2.3.2
var assert, div0, div1, div2, div3, high, hist, input, level, low, newGame, probability, range, secret;

assert = chai.assert.deepEqual;

range = _.range;

secret = null;

low = null;

high = null;

hist = null;

level = 1;

div0 = document.createElement('div');

div1 = document.createElement('div');

input = document.createElement('input');

input.style.fontSize = '100px';

div2 = document.createElement('div');

div3 = document.createElement('div');

document.body.appendChild(div0);

document.body.appendChild(div1);

document.body.appendChild(input);

document.body.appendChild(div2);

document.body.appendChild(div3);

probability = (n) => {
  var result;
  result = range(n).map((x) => {
    return (x + 1) * 2 ** x;
  }).reduce((a, b) => {
    return a + b;
  });
  return result / (2 ** n - 1);
};

newGame = (delta) => {
  level += delta;
  if (level < 2) {
    level = 2;
  }
  low = 1;
  high = 2 ** level - 1;
  hist = [];
  secret = _.random(low, high);
  div0.innerText = 'Level: ' + level;
  div1.innerText = 'Interval: ' + low + '-' + high;
  div2.innerText = 'History: ';
  return div3.innerText = 'Probability: ' + probability(level).toFixed(3) + ' steps';
};

input.onkeyup = (evt) => {
  var value;
  if (evt.key === 'Enter') {
    value = parseInt(input.value);
    input.value = '';
    hist.push(value);
    if (value < secret && value >= low) {
      low = value + 1;
    }
    if (value > secret && value <= high) {
      high = value - 1;
    }
    if (value === secret) {
      newGame(hist.length <= level ? 1 : -1);
    }
    div1.innerText = 'Interval: ' + low + '-' + high;
    return div2.innerText = 'History: ' + hist.join(' ');
  }
};

newGame(1);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxXQUFBLEVBQUEsS0FBQSxFQUFBOztBQUFBLE1BQUEsR0FBUyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUNyQixLQUFBLEdBQVEsQ0FBQyxDQUFDOztBQUVWLE1BQUEsR0FBUzs7QUFDVCxHQUFBLEdBQU07O0FBQ04sSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFFUCxLQUFBLEdBQVE7O0FBRVIsSUFBQSxHQUFRLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCOztBQUNSLElBQUEsR0FBUSxRQUFRLENBQUMsYUFBVCxDQUF1QixLQUF2Qjs7QUFDUixLQUFBLEdBQVEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkI7O0FBQ1IsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFaLEdBQXVCOztBQUN2QixJQUFBLEdBQVEsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsS0FBdkI7O0FBQ1IsSUFBQSxHQUFRLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCOztBQUVSLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBZCxDQUEwQixJQUExQjs7QUFDQSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQWQsQ0FBMEIsSUFBMUI7O0FBQ0EsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFkLENBQTBCLEtBQTFCOztBQUNBLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBZCxDQUEwQixJQUExQjs7QUFDQSxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQWQsQ0FBMEIsSUFBMUI7O0FBRUEsV0FBQSxHQUFjLENBQUMsQ0FBRCxDQUFBLEdBQUE7QUFDYixNQUFBO0VBQUEsTUFBQSxHQUFTLEtBQUEsQ0FBTSxDQUFOLENBQ1IsQ0FBQyxHQURPLENBQ0gsQ0FBQyxDQUFELENBQUEsR0FBQTtXQUFPLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBQSxHQUFNLENBQUEsSUFBRztFQUFoQixDQURHLENBRVIsQ0FBQyxNQUZPLENBRUEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFBLEdBQUE7V0FBUyxDQUFBLEdBQUU7RUFBWCxDQUZBO1NBR1QsTUFBQSxHQUFPLENBQUMsQ0FBQSxJQUFHLENBQUgsR0FBSyxDQUFOO0FBSk07O0FBTWQsT0FBQSxHQUFVLENBQUMsS0FBRCxDQUFBLEdBQUE7RUFDVCxLQUFBLElBQVM7RUFDVCxJQUFHLEtBQUEsR0FBUSxDQUFYO0lBQWtCLEtBQUEsR0FBUSxFQUExQjs7RUFDQSxHQUFBLEdBQU07RUFDTixJQUFBLEdBQU8sQ0FBQSxJQUFHLEtBQUgsR0FBVztFQUNsQixJQUFBLEdBQU87RUFDUCxNQUFBLEdBQVMsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxHQUFULEVBQWEsSUFBYjtFQUNULElBQUksQ0FBQyxTQUFMLEdBQWlCLFNBQUEsR0FBWTtFQUM3QixJQUFJLENBQUMsU0FBTCxHQUFpQixZQUFBLEdBQWUsR0FBZixHQUFxQixHQUFyQixHQUEyQjtFQUM1QyxJQUFJLENBQUMsU0FBTCxHQUFpQjtTQUNqQixJQUFJLENBQUMsU0FBTCxHQUFpQixlQUFBLEdBQWtCLFdBQUEsQ0FBWSxLQUFaLENBQWtCLENBQUMsT0FBbkIsQ0FBMkIsQ0FBM0IsQ0FBbEIsR0FBa0Q7QUFWMUQ7O0FBWVYsS0FBSyxDQUFDLE9BQU4sR0FBZ0IsQ0FBQyxHQUFELENBQUEsR0FBQTtBQUNmLE1BQUE7RUFBQSxJQUFHLEdBQUcsQ0FBQyxHQUFKLEtBQVcsT0FBZDtJQUNDLEtBQUEsR0FBUSxRQUFBLENBQVMsS0FBSyxDQUFDLEtBQWY7SUFDUixLQUFLLENBQUMsS0FBTixHQUFjO0lBQ2QsSUFBSSxDQUFDLElBQUwsQ0FBVSxLQUFWO0lBQ0EsSUFBRyxLQUFBLEdBQVEsTUFBUixJQUFtQixLQUFBLElBQVMsR0FBL0I7TUFBd0MsR0FBQSxHQUFNLEtBQUEsR0FBUSxFQUF0RDs7SUFDQSxJQUFHLEtBQUEsR0FBUSxNQUFSLElBQW1CLEtBQUEsSUFBUyxJQUEvQjtNQUF5QyxJQUFBLEdBQU8sS0FBQSxHQUFRLEVBQXhEOztJQUNBLElBQUcsS0FBQSxLQUFTLE1BQVo7TUFDQyxPQUFBLENBQVcsSUFBSSxDQUFDLE1BQUwsSUFBZSxLQUFsQixHQUE2QixDQUE3QixHQUFvQyxDQUFDLENBQTdDLEVBREQ7O0lBRUEsSUFBSSxDQUFDLFNBQUwsR0FBaUIsWUFBQSxHQUFlLEdBQWYsR0FBcUIsR0FBckIsR0FBMkI7V0FDNUMsSUFBSSxDQUFDLFNBQUwsR0FBaUIsV0FBQSxHQUFjLElBQUksQ0FBQyxJQUFMLENBQVUsR0FBVixFQVRoQzs7QUFEZTs7QUFZaEIsT0FBQSxDQUFRLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJhc3NlcnQgPSBjaGFpLmFzc2VydC5kZWVwRXF1YWxcclxucmFuZ2UgPSBfLnJhbmdlXHJcblxyXG5zZWNyZXQgPSBudWxsXHJcbmxvdyA9IG51bGxcclxuaGlnaCA9IG51bGxcclxuaGlzdCA9IG51bGxcclxuXHJcbmxldmVsID0gMVxyXG5cclxuZGl2MCAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdkaXYnXHJcbmRpdjEgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnZGl2J1xyXG5pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgJ2lucHV0J1xyXG5pbnB1dC5zdHlsZS5mb250U2l6ZSA9ICcxMDBweCdcclxuZGl2MiAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICdkaXYnXHJcbmRpdjMgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCAnZGl2J1xyXG5cclxuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCBkaXYwXHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQgZGl2MVxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIGlucHV0XHJcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQgZGl2MlxyXG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIGRpdjNcclxuXHJcbnByb2JhYmlsaXR5ID0gKG4pID0+XHJcblx0cmVzdWx0ID0gcmFuZ2UgbiBcclxuXHRcdC5tYXAgKHgpID0+ICh4KzEpKjIqKnhcclxuXHRcdC5yZWR1Y2UgKGEsYikgPT4gYStiXHJcblx0cmVzdWx0LygyKipuLTEpXHJcblxyXG5uZXdHYW1lID0gKGRlbHRhKSA9PlxyXG5cdGxldmVsICs9IGRlbHRhXHJcblx0aWYgbGV2ZWwgPCAyIHRoZW4gbGV2ZWwgPSAyXHJcblx0bG93ID0gMVxyXG5cdGhpZ2ggPSAyKipsZXZlbCAtIDFcclxuXHRoaXN0ID0gW11cclxuXHRzZWNyZXQgPSBfLnJhbmRvbSBsb3csaGlnaFxyXG5cdGRpdjAuaW5uZXJUZXh0ID0gJ0xldmVsOiAnICsgbGV2ZWwgXHJcblx0ZGl2MS5pbm5lclRleHQgPSAnSW50ZXJ2YWw6ICcgKyBsb3cgKyAnLScgKyBoaWdoXHJcblx0ZGl2Mi5pbm5lclRleHQgPSAnSGlzdG9yeTogJ1xyXG5cdGRpdjMuaW5uZXJUZXh0ID0gJ1Byb2JhYmlsaXR5OiAnICsgcHJvYmFiaWxpdHkobGV2ZWwpLnRvRml4ZWQoMykgKyAnIHN0ZXBzJ1xyXG5cclxuaW5wdXQub25rZXl1cCA9IChldnQpID0+XHJcblx0aWYgZXZ0LmtleSA9PSAnRW50ZXInXHRcclxuXHRcdHZhbHVlID0gcGFyc2VJbnQgaW5wdXQudmFsdWVcclxuXHRcdGlucHV0LnZhbHVlID0gJydcclxuXHRcdGhpc3QucHVzaCB2YWx1ZVxyXG5cdFx0aWYgdmFsdWUgPCBzZWNyZXQgYW5kIHZhbHVlID49IGxvdyB0aGVuIGxvdyA9IHZhbHVlICsgMVxyXG5cdFx0aWYgdmFsdWUgPiBzZWNyZXQgYW5kIHZhbHVlIDw9IGhpZ2ggdGhlbiBoaWdoID0gdmFsdWUgLSAxXHJcblx0XHRpZiB2YWx1ZSA9PSBzZWNyZXQgXHJcblx0XHRcdG5ld0dhbWUgaWYgaGlzdC5sZW5ndGggPD0gbGV2ZWwgdGhlbiAxIGVsc2UgLTFcclxuXHRcdGRpdjEuaW5uZXJUZXh0ID0gJ0ludGVydmFsOiAnICsgbG93ICsgJy0nICsgaGlnaFxyXG5cdFx0ZGl2Mi5pbm5lclRleHQgPSAnSGlzdG9yeTogJyArIGhpc3Quam9pbiAnICdcclxuXHJcbm5ld0dhbWUgMVxyXG4iXX0=
//# sourceURL=c:\Lab\2019\065-GuessMyNumberInterval\coffee\sketch.coffee