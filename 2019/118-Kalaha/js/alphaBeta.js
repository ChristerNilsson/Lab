// Generated by CoffeeScript 2.4.1
var alphaBeta, maxAlphaBeta, minAlphaBeta;

alphaBeta = function(depthMax, player) {
  var alpha, beta, house, playerShop;
  alpha = -1000;
  beta = 1000;
  house = buttons.map(function(button) {
    return button.value;
  });
  playerShop = 6;
  if (player === 1) {
    playerShop = 13;
  }
  return maxAlphaBeta(house, depthMax, 0, alpha, beta, playerShop);
};

maxAlphaBeta = function(house, depthMax, depth, alpha, beta, playerShop) {
  var action, i, j, len, ref, tempHouse, tempValue;
  if (HasSuccessors(house) === false) {
    FinalScoring(house);
    return Evaluate(house, playerShop, (playerShop + 7) % 14);
  } else if (depth >= depthMax) {
    return Evaluate(house, playerShop, (playerShop + 7) % 14);
  } else {
    action = null;
    ref = range(playerShop - 6, playerShop);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      if (house[i] === 0) {
        continue;
      }
      tempHouse = house.slice();
      tempValue = null;
      if (Relocation(tempHouse, i)) {
        tempValue = maxAlphaBeta(tempHouse, depthMax, depth + 2, alpha, beta, playerShop);
      } else {
        tempValue = minAlphaBeta(tempHouse, depthMax, depth + 1, alpha, beta, playerShop);
      }
      if (alpha < tempValue) {
        alpha = tempValue;
        action = i;
      }
      if (alpha >= beta) {
        break;
      }
    }
    if (depth === 0) {
      return action;
    } else {
      return alpha;
    }
  }
};

minAlphaBeta = function(house, depthMax, depth, alpha, beta, playerShop) {
  var i, j, len, opponentShop, ref, tempHouse, tempValue;
  if (HasSuccessors(house) === false) {
    FinalScoring(house);
    return Evaluate(house, playerShop, (playerShop + 7) % 14);
  } else if (depth >= depthMax) {
    return Evaluate(house, playerShop, (playerShop + 7) % 14);
  } else {
    opponentShop = (playerShop + 7) % 14;
    ref = range(opponentShop - 6, opponentShop);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      if (house[i] === 0) {
        continue;
      }
      tempHouse = house.slice();
      tempValue = null;
      if (Relocation(tempHouse, i)) {
        tempValue = minAlphaBeta(tempHouse, depthMax, depth + 2, alpha, beta, playerShop);
      } else {
        tempValue = maxAlphaBeta(tempHouse, depthMax, depth + 1, alpha, beta, playerShop);
      }
      if (beta > tempValue) {
        beta = tempValue;
      }
      if (alpha >= beta) {
        break;
      }
    }
    return beta;
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxwaGFCZXRhLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGFscGhhQmV0YS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsU0FBQSxFQUFBLFlBQUEsRUFBQTs7QUFBQSxTQUFBLEdBQVksUUFBQSxDQUFDLFFBQUQsRUFBVyxNQUFYLENBQUE7QUFDWCxNQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBO0VBQUEsS0FBQSxHQUFRLENBQUM7RUFDVCxJQUFBLEdBQU87RUFDUCxLQUFBLEdBQVEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxRQUFBLENBQUMsTUFBRCxDQUFBO1dBQVksTUFBTSxDQUFDO0VBQW5CLENBQVo7RUFDUixVQUFBLEdBQWE7RUFDYixJQUFHLE1BQUEsS0FBVSxDQUFiO0lBQW9CLFVBQUEsR0FBYSxHQUFqQzs7U0FDQSxZQUFBLENBQWEsS0FBYixFQUFvQixRQUFwQixFQUE4QixDQUE5QixFQUFpQyxLQUFqQyxFQUF3QyxJQUF4QyxFQUE4QyxVQUE5QztBQU5XOztBQVFaLFlBQUEsR0FBZSxRQUFBLENBQUMsS0FBRCxFQUFRLFFBQVIsRUFBa0IsS0FBbEIsRUFBeUIsS0FBekIsRUFBZ0MsSUFBaEMsRUFBc0MsVUFBdEMsQ0FBQTtBQUNkLE1BQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUE7RUFBQSxJQUFHLGFBQUEsQ0FBYyxLQUFkLENBQUEsS0FBd0IsS0FBM0I7SUFDQyxZQUFBLENBQWEsS0FBYjtBQUNBLFdBQU8sUUFBQSxDQUFTLEtBQVQsRUFBZ0IsVUFBaEIsRUFBNEIsQ0FBQyxVQUFBLEdBQWEsQ0FBZCxDQUFBLEdBQW1CLEVBQS9DLEVBRlI7R0FBQSxNQUdLLElBQUcsS0FBQSxJQUFTLFFBQVo7QUFDSixXQUFPLFFBQUEsQ0FBUyxLQUFULEVBQWdCLFVBQWhCLEVBQTRCLENBQUMsVUFBQSxHQUFhLENBQWQsQ0FBQSxHQUFtQixFQUEvQyxFQURIO0dBQUEsTUFBQTtJQUdKLE1BQUEsR0FBUztBQUNUO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxJQUFHLEtBQU0sQ0FBQSxDQUFBLENBQU4sS0FBWSxDQUFmO0FBQXNCLGlCQUF0Qjs7TUFFQSxTQUFBLEdBQVksS0FBSyxDQUFDLEtBQU4sQ0FBQTtNQUNaLFNBQUEsR0FBWTtNQUVaLElBQUcsVUFBQSxDQUFXLFNBQVgsRUFBc0IsQ0FBdEIsQ0FBSDtRQUNDLFNBQUEsR0FBWSxZQUFBLENBQWEsU0FBYixFQUF3QixRQUF4QixFQUFrQyxLQUFBLEdBQVEsQ0FBMUMsRUFBNkMsS0FBN0MsRUFBb0QsSUFBcEQsRUFBMEQsVUFBMUQsRUFEYjtPQUFBLE1BQUE7UUFHQyxTQUFBLEdBQVksWUFBQSxDQUFhLFNBQWIsRUFBd0IsUUFBeEIsRUFBa0MsS0FBQSxHQUFRLENBQTFDLEVBQTZDLEtBQTdDLEVBQW9ELElBQXBELEVBQTBELFVBQTFELEVBSGI7O01BS0EsSUFBRyxLQUFBLEdBQVEsU0FBWDtRQUNDLEtBQUEsR0FBUTtRQUNSLE1BQUEsR0FBUyxFQUZWOztNQUlBLElBQUcsS0FBQSxJQUFTLElBQVo7QUFBc0IsY0FBdEI7O0lBZkQ7SUFpQk8sSUFBRyxLQUFBLEtBQVMsQ0FBWjthQUFtQixPQUFuQjtLQUFBLE1BQUE7YUFBK0IsTUFBL0I7S0FyQkg7O0FBSlM7O0FBMkJmLFlBQUEsR0FBZSxRQUFBLENBQUMsS0FBRCxFQUFRLFFBQVIsRUFBa0IsS0FBbEIsRUFBeUIsS0FBekIsRUFBZ0MsSUFBaEMsRUFBc0MsVUFBdEMsQ0FBQTtBQUNkLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsWUFBQSxFQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUE7RUFBQSxJQUFHLGFBQUEsQ0FBYyxLQUFkLENBQUEsS0FBd0IsS0FBM0I7SUFDQyxZQUFBLENBQWEsS0FBYjtBQUNBLFdBQU8sUUFBQSxDQUFTLEtBQVQsRUFBZ0IsVUFBaEIsRUFBNEIsQ0FBQyxVQUFBLEdBQWEsQ0FBZCxDQUFBLEdBQW1CLEVBQS9DLEVBRlI7R0FBQSxNQUdLLElBQUcsS0FBQSxJQUFTLFFBQVo7QUFDSixXQUFPLFFBQUEsQ0FBUyxLQUFULEVBQWdCLFVBQWhCLEVBQTRCLENBQUMsVUFBQSxHQUFhLENBQWQsQ0FBQSxHQUFtQixFQUEvQyxFQURIO0dBQUEsTUFBQTtJQUdKLFlBQUEsR0FBZSxDQUFDLFVBQUEsR0FBYSxDQUFkLENBQUEsR0FBbUI7QUFDbEM7SUFBQSxLQUFBLHFDQUFBOztNQUNDLElBQUcsS0FBTSxDQUFBLENBQUEsQ0FBTixLQUFZLENBQWY7QUFBc0IsaUJBQXRCOztNQUVBLFNBQUEsR0FBWSxLQUFLLENBQUMsS0FBTixDQUFBO01BQ1osU0FBQSxHQUFZO01BRVosSUFBRyxVQUFBLENBQVcsU0FBWCxFQUFzQixDQUF0QixDQUFIO1FBQ0MsU0FBQSxHQUFZLFlBQUEsQ0FBYSxTQUFiLEVBQXdCLFFBQXhCLEVBQWtDLEtBQUEsR0FBUSxDQUExQyxFQUE2QyxLQUE3QyxFQUFvRCxJQUFwRCxFQUEwRCxVQUExRCxFQURiO09BQUEsTUFBQTtRQUdDLFNBQUEsR0FBWSxZQUFBLENBQWEsU0FBYixFQUF3QixRQUF4QixFQUFrQyxLQUFBLEdBQVEsQ0FBMUMsRUFBNkMsS0FBN0MsRUFBb0QsSUFBcEQsRUFBMEQsVUFBMUQsRUFIYjs7TUFLQSxJQUFHLElBQUEsR0FBTyxTQUFWO1FBQXlCLElBQUEsR0FBTyxVQUFoQzs7TUFFQSxJQUFHLEtBQUEsSUFBUyxJQUFaO0FBQXNCLGNBQXRCOztJQWJEO0FBY0EsV0FBTyxLQWxCSDs7QUFKUyIsInNvdXJjZXNDb250ZW50IjpbImFscGhhQmV0YSA9IChkZXB0aE1heCwgcGxheWVyKSAtPlxyXG5cdGFscGhhID0gLTEwMDBcclxuXHRiZXRhID0gMTAwMFxyXG5cdGhvdXNlID0gYnV0dG9ucy5tYXAgKGJ1dHRvbikgLT4gYnV0dG9uLnZhbHVlXHJcblx0cGxheWVyU2hvcCA9IDZcclxuXHRpZiBwbGF5ZXIgPT0gMSB0aGVuIHBsYXllclNob3AgPSAxM1xyXG5cdG1heEFscGhhQmV0YShob3VzZSwgZGVwdGhNYXgsIDAsIGFscGhhLCBiZXRhLCBwbGF5ZXJTaG9wKVxyXG5cclxubWF4QWxwaGFCZXRhID0gKGhvdXNlLCBkZXB0aE1heCwgZGVwdGgsIGFscGhhLCBiZXRhLCBwbGF5ZXJTaG9wKSAtPlxyXG5cdGlmIEhhc1N1Y2Nlc3NvcnMoaG91c2UpID09IGZhbHNlXHJcblx0XHRGaW5hbFNjb3JpbmcoaG91c2UpXHJcblx0XHRyZXR1cm4gRXZhbHVhdGUoaG91c2UsIHBsYXllclNob3AsIChwbGF5ZXJTaG9wICsgNykgJSAxNClcclxuXHRlbHNlIGlmIGRlcHRoID49IGRlcHRoTWF4XHJcblx0XHRyZXR1cm4gRXZhbHVhdGUoaG91c2UsIHBsYXllclNob3AsIChwbGF5ZXJTaG9wICsgNykgJSAxNClcclxuXHRlbHNlXHJcblx0XHRhY3Rpb24gPSBudWxsXHJcblx0XHRmb3IgaSBpbiByYW5nZSBwbGF5ZXJTaG9wIC0gNiwgcGxheWVyU2hvcFxyXG5cdFx0XHRpZiBob3VzZVtpXSA9PSAwIHRoZW4gY29udGludWVcclxuXHJcblx0XHRcdHRlbXBIb3VzZSA9IGhvdXNlLnNsaWNlKClcclxuXHRcdFx0dGVtcFZhbHVlID0gbnVsbFxyXG5cclxuXHRcdFx0aWYgUmVsb2NhdGlvbih0ZW1wSG91c2UsIGkpXHJcblx0XHRcdFx0dGVtcFZhbHVlID0gbWF4QWxwaGFCZXRhKHRlbXBIb3VzZSwgZGVwdGhNYXgsIGRlcHRoICsgMiwgYWxwaGEsIGJldGEsIHBsYXllclNob3ApXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHR0ZW1wVmFsdWUgPSBtaW5BbHBoYUJldGEodGVtcEhvdXNlLCBkZXB0aE1heCwgZGVwdGggKyAxLCBhbHBoYSwgYmV0YSwgcGxheWVyU2hvcClcclxuXHJcblx0XHRcdGlmIGFscGhhIDwgdGVtcFZhbHVlXHJcblx0XHRcdFx0YWxwaGEgPSB0ZW1wVmFsdWVcclxuXHRcdFx0XHRhY3Rpb24gPSBpXHJcblxyXG5cdFx0XHRpZiBhbHBoYSA+PSBiZXRhIHRoZW4gYnJlYWtcclxuXHJcblx0XHRyZXR1cm4gaWYgZGVwdGggPT0gMCB0aGVuIGFjdGlvbiBlbHNlIGFscGhhXHJcblxyXG5taW5BbHBoYUJldGEgPSAoaG91c2UsIGRlcHRoTWF4LCBkZXB0aCwgYWxwaGEsIGJldGEsIHBsYXllclNob3ApIC0+XHJcblx0aWYgSGFzU3VjY2Vzc29ycyhob3VzZSkgPT0gZmFsc2VcclxuXHRcdEZpbmFsU2NvcmluZyhob3VzZSlcclxuXHRcdHJldHVybiBFdmFsdWF0ZShob3VzZSwgcGxheWVyU2hvcCwgKHBsYXllclNob3AgKyA3KSAlIDE0KVxyXG5cdGVsc2UgaWYgZGVwdGggPj0gZGVwdGhNYXhcclxuXHRcdHJldHVybiBFdmFsdWF0ZShob3VzZSwgcGxheWVyU2hvcCwgKHBsYXllclNob3AgKyA3KSAlIDE0KVxyXG5cdGVsc2UgXHJcblx0XHRvcHBvbmVudFNob3AgPSAocGxheWVyU2hvcCArIDcpICUgMTRcclxuXHRcdGZvciBpIGluIHJhbmdlIG9wcG9uZW50U2hvcCAtIDYsIG9wcG9uZW50U2hvcFxyXG5cdFx0XHRpZiBob3VzZVtpXSA9PSAwIHRoZW4gY29udGludWVcclxuXHJcblx0XHRcdHRlbXBIb3VzZSA9IGhvdXNlLnNsaWNlKClcclxuXHRcdFx0dGVtcFZhbHVlID0gbnVsbFxyXG5cdFx0XHRcclxuXHRcdFx0aWYgUmVsb2NhdGlvbih0ZW1wSG91c2UsIGkpXHJcblx0XHRcdFx0dGVtcFZhbHVlID0gbWluQWxwaGFCZXRhKHRlbXBIb3VzZSwgZGVwdGhNYXgsIGRlcHRoICsgMiwgYWxwaGEsIGJldGEsIHBsYXllclNob3ApXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHR0ZW1wVmFsdWUgPSBtYXhBbHBoYUJldGEodGVtcEhvdXNlLCBkZXB0aE1heCwgZGVwdGggKyAxLCBhbHBoYSwgYmV0YSwgcGxheWVyU2hvcClcclxuXHJcblx0XHRcdGlmIGJldGEgPiB0ZW1wVmFsdWUgdGhlbiBiZXRhID0gdGVtcFZhbHVlXHJcblxyXG5cdFx0XHRpZiBhbHBoYSA+PSBiZXRhIHRoZW4gYnJlYWtcclxuXHRcdHJldHVybiBiZXRhXHJcbiJdfQ==
//# sourceURL=c:\Lab\2019\118-Kalaha\coffee\alphaBeta.coffee