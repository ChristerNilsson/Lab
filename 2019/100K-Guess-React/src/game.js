// Generated by CoffeeScript 2.4.1
var Game, _;

_ = require('lodash');

Game = class Game {
  constructor(level) {
    this.init = this.init.bind(this);
    this.action = this.action.bind(this);
    this.init(level);
  }

  init(level1) {
    this.level = level1;
    if (this.level < 2) {
      this.level = 2;
    }
    this.low = 1;
    this.high = 2 ** this.level - 1;
    this.secret = _.random(this.low, this.high);
    return this.hist = [];
  }

  action(value) {
    value = parseInt(value);
    this.hist.push(value);
    if (value < this.secret && value >= this.low) {
      this.low = value + 1;
    }
    if (value > this.secret && value <= this.high) {
      this.high = value - 1;
    }
    if (value === this.secret) {
      return this.init(this.level + (this.hist.length <= this.level ? 1 : -1));
    }
  }

};

module.exports = Game;

