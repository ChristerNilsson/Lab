// Generated by CoffeeScript 2.4.1
var Game, PORT, app, express, form, game, h1, input, render, renderable;

express = require('express');

Game = require('../js/game');

//_ = require 'lodash'
app = express();

({renderable, h1, form, input} = require('teacup'));

game = new Game(2);

//game = {level:2}

// reset = (level) => 
// 	if level < 2 then level = 2
// 	game = {level:level, low:1, high:2**level-1, history:[]}
// 	game.secret = _.random game.low,game.high

// guess = (nr) => 
// 	game.history.push nr
// 	if nr < game.secret then game.low  = nr + 1
// 	if nr > game.secret then game.high = nr - 1
// 	if nr == game.secret then reset game.level + 1
render = renderable(function() {
  h1(`${game.low}-${game.high}`);
  return form({
    action: "/",
    method: "post"
  }, function() {
    input({
      type: "text",
      name: "nr",
      autofocus: true
    });
    return input({
      type: "submit",
      value: "Submit"
    });
  });
});

app.use(express.urlencoded({
  extended: false
}));

app.get('/', (req, res) => {
  game.init(2);
  return res.send(render());
});

app.post('/', (req, res) => {
  game.action(req.body.nr);
  return res.send(render());
});

PORT = process.env.PORT || 3000;

app.listen(PORT, () => {
  return console.log(`Server started on port ${PORT}`);
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBOztBQUFBLE9BQUEsR0FBVSxPQUFBLENBQVEsU0FBUjs7QUFDVixJQUFBLEdBQU8sT0FBQSxDQUFRLFlBQVIsRUFEUDs7O0FBR0EsR0FBQSxHQUFNLE9BQUEsQ0FBQTs7QUFDTixDQUFBLENBQUMsVUFBRCxFQUFZLEVBQVosRUFBZSxJQUFmLEVBQW9CLEtBQXBCLENBQUEsR0FBNkIsT0FBQSxDQUFRLFFBQVIsQ0FBN0I7O0FBRUEsSUFBQSxHQUFPLElBQUksSUFBSixDQUFTLENBQVQsRUFOUDs7Ozs7Ozs7Ozs7Ozs7QUFvQkEsTUFBQSxHQUFTLFVBQUEsQ0FBVyxRQUFBLENBQUEsQ0FBQTtFQUNuQixFQUFBLENBQUcsQ0FBQSxDQUFBLENBQUcsSUFBSSxDQUFDLEdBQVIsQ0FBWSxDQUFaLENBQUEsQ0FBZSxJQUFJLENBQUMsSUFBcEIsQ0FBQSxDQUFIO1NBQ0EsSUFBQSxDQUFLO0lBQUEsTUFBQSxFQUFPLEdBQVA7SUFBWSxNQUFBLEVBQU87RUFBbkIsQ0FBTCxFQUFnQyxRQUFBLENBQUEsQ0FBQTtJQUMvQixLQUFBLENBQU07TUFBQSxJQUFBLEVBQUssTUFBTDtNQUFhLElBQUEsRUFBSyxJQUFsQjtNQUF3QixTQUFBLEVBQVU7SUFBbEMsQ0FBTjtXQUNBLEtBQUEsQ0FBTTtNQUFBLElBQUEsRUFBSyxRQUFMO01BQWUsS0FBQSxFQUFNO0lBQXJCLENBQU47RUFGK0IsQ0FBaEM7QUFGbUIsQ0FBWDs7QUFNVCxHQUFHLENBQUMsR0FBSixDQUFRLE9BQU8sQ0FBQyxVQUFSLENBQW1CO0VBQUUsUUFBQSxFQUFVO0FBQVosQ0FBbkIsQ0FBUjs7QUFFQSxHQUFHLENBQUMsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDLEdBQUQsRUFBTSxHQUFOLENBQUEsR0FBQTtFQUNaLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBVjtTQUNBLEdBQUcsQ0FBQyxJQUFKLENBQVMsTUFBQSxDQUFBLENBQVQ7QUFGWSxDQUFiOztBQUlBLEdBQUcsQ0FBQyxJQUFKLENBQVMsR0FBVCxFQUFjLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FBQSxHQUFBO0VBQ2IsSUFBSSxDQUFDLE1BQUwsQ0FBWSxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQXJCO1NBQ0EsR0FBRyxDQUFDLElBQUosQ0FBUyxNQUFBLENBQUEsQ0FBVDtBQUZhLENBQWQ7O0FBSUEsSUFBQSxHQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBWixJQUFvQjs7QUFDM0IsR0FBRyxDQUFDLE1BQUosQ0FBVyxJQUFYLEVBQWlCLENBQUEsQ0FBQSxHQUFBO1NBQU0sT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFBLHVCQUFBLENBQUEsQ0FBMEIsSUFBMUIsQ0FBQSxDQUFaO0FBQU4sQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJleHByZXNzID0gcmVxdWlyZSAnZXhwcmVzcydcbkdhbWUgPSByZXF1aXJlICcuLi9qcy9nYW1lJ1xuI18gPSByZXF1aXJlICdsb2Rhc2gnXG5hcHAgPSBleHByZXNzKClcbntyZW5kZXJhYmxlLGgxLGZvcm0saW5wdXR9ID0gcmVxdWlyZSAndGVhY3VwJ1xuXG5nYW1lID0gbmV3IEdhbWUgMlxuI2dhbWUgPSB7bGV2ZWw6Mn1cblxuIyByZXNldCA9IChsZXZlbCkgPT4gXG4jIFx0aWYgbGV2ZWwgPCAyIHRoZW4gbGV2ZWwgPSAyXG4jIFx0Z2FtZSA9IHtsZXZlbDpsZXZlbCwgbG93OjEsIGhpZ2g6MioqbGV2ZWwtMSwgaGlzdG9yeTpbXX1cbiMgXHRnYW1lLnNlY3JldCA9IF8ucmFuZG9tIGdhbWUubG93LGdhbWUuaGlnaFxuXG4jIGd1ZXNzID0gKG5yKSA9PiBcbiMgXHRnYW1lLmhpc3RvcnkucHVzaCBuclxuIyBcdGlmIG5yIDwgZ2FtZS5zZWNyZXQgdGhlbiBnYW1lLmxvdyAgPSBuciArIDFcbiMgXHRpZiBuciA+IGdhbWUuc2VjcmV0IHRoZW4gZ2FtZS5oaWdoID0gbnIgLSAxXG4jIFx0aWYgbnIgPT0gZ2FtZS5zZWNyZXQgdGhlbiByZXNldCBnYW1lLmxldmVsICsgMVxuXG5yZW5kZXIgPSByZW5kZXJhYmxlIC0+XG5cdGgxIFwiI3tnYW1lLmxvd30tI3tnYW1lLmhpZ2h9XCJcblx0Zm9ybSBhY3Rpb246XCIvXCIsIG1ldGhvZDpcInBvc3RcIiwgLT5cblx0XHRpbnB1dCB0eXBlOlwidGV4dFwiLCBuYW1lOlwibnJcIiwgYXV0b2ZvY3VzOnRydWVcblx0XHRpbnB1dCB0eXBlOlwic3VibWl0XCIsIHZhbHVlOlwiU3VibWl0XCJcblxuYXBwLnVzZSBleHByZXNzLnVybGVuY29kZWQgeyBleHRlbmRlZDogZmFsc2UgfVxuXG5hcHAuZ2V0ICcvJywgKHJlcSwgcmVzKSA9PiBcblx0Z2FtZS5pbml0IDJcblx0cmVzLnNlbmQgcmVuZGVyKClcblxuYXBwLnBvc3QgJy8nLCAocmVxLCByZXMpID0+IFxuXHRnYW1lLmFjdGlvbiByZXEuYm9keS5uclxuXHRyZXMuc2VuZCByZW5kZXIoKVxuXG5QT1JUID0gcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwXG5hcHAubGlzdGVuIFBPUlQsICgpID0+IGNvbnNvbGUubG9nIFwiU2VydmVyIHN0YXJ0ZWQgb24gcG9ydCAje1BPUlR9XCJcbiJdfQ==
//# sourceURL=c:\Lab\2019\100I-Guess-Express-Teacup\coffee\index.coffee