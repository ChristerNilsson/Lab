{"version":3,"file":"bundle.js","sources":["../node_modules/svelte/internal/index.mjs","../node_modules/svelte/store/index.mjs","../node_modules/svelte-routing/src/contexts.js","../node_modules/svelte-routing/src/history.js","../node_modules/svelte-routing/src/utils.js","../node_modules/svelte-routing/src/Router.svelte","../node_modules/svelte-routing/src/Route.svelte","../node_modules/svelte-routing/src/Link.svelte","../node_modules/tslib/tslib.es6.js","../node_modules/rxjs/_esm5/internal/util/isFunction.js","../node_modules/rxjs/_esm5/internal/config.js","../node_modules/rxjs/_esm5/internal/util/hostReportError.js","../node_modules/rxjs/_esm5/internal/Observer.js","../node_modules/rxjs/_esm5/internal/util/isArray.js","../node_modules/rxjs/_esm5/internal/util/isObject.js","../node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","../node_modules/rxjs/_esm5/internal/Subscription.js","../node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","../node_modules/rxjs/_esm5/internal/Subscriber.js","../node_modules/rxjs/_esm5/internal/symbol/observable.js","../node_modules/rxjs/_esm5/internal/util/noop.js","../node_modules/rxjs/_esm5/internal/Observable.js","../node_modules/rxjs/_esm5/internal/util/toSubscriber.js","../node_modules/rxjs/_esm5/internal/util/canReportError.js","../node_modules/rxjs/_esm5/internal/util/pipe.js","../node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","../node_modules/rxjs/_esm5/internal/SubjectSubscription.js","../node_modules/rxjs/_esm5/internal/Subject.js","../node_modules/rxjs/_esm5/internal/BehaviorSubject.js","../node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","../node_modules/rxjs/_esm5/internal/scheduler/Action.js","../node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","../node_modules/rxjs/_esm5/internal/Scheduler.js","../node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","../node_modules/rxjs/_esm5/internal/scheduler/queue.js","../node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","../node_modules/rxjs/_esm5/internal/observable/empty.js","../node_modules/rxjs/_esm5/internal/util/isScheduler.js","../node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","../node_modules/rxjs/_esm5/internal/observable/fromArray.js","../node_modules/rxjs/_esm5/internal/observable/of.js","../node_modules/rxjs/_esm5/internal/observable/throwError.js","../node_modules/rxjs/_esm5/internal/Notification.js","../node_modules/rxjs/_esm5/internal/operators/observeOn.js","../node_modules/rxjs/_esm5/internal/ReplaySubject.js","../node_modules/rxjs/_esm5/internal/scheduler/async.js","../node_modules/rxjs/_esm5/internal/util/identity.js","../node_modules/rxjs/_esm5/internal/util/isObservable.js","../node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","../node_modules/rxjs/_esm5/internal/operators/map.js","../node_modules/rxjs/_esm5/internal/OuterSubscriber.js","../node_modules/rxjs/_esm5/internal/InnerSubscriber.js","../node_modules/rxjs/_esm5/internal/symbol/iterator.js","../node_modules/rxjs/_esm5/internal/util/isArrayLike.js","../node_modules/rxjs/_esm5/internal/util/isPromise.js","../node_modules/rxjs/_esm5/internal/util/subscribeTo.js","../node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","../node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","../node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","../node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","../node_modules/rxjs/_esm5/internal/observable/combineLatest.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","../node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","../node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","../node_modules/rxjs/_esm5/internal/util/isIterable.js","../node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","../node_modules/rxjs/_esm5/internal/observable/from.js","../node_modules/rxjs/_esm5/internal/operators/mergeMap.js","../node_modules/rxjs/_esm5/internal/operators/mergeAll.js","../node_modules/rxjs/_esm5/internal/util/isNumeric.js","../node_modules/rxjs/_esm5/internal/operators/filter.js","../node_modules/rxjs/_esm5/internal/observable/timer.js","../node_modules/rxjs/_esm5/internal/operators/audit.js","../node_modules/rxjs/_esm5/internal/operators/auditTime.js","../node_modules/rxjs/_esm5/internal/operators/debounceTime.js","../node_modules/rxjs/_esm5/internal/operators/delay.js","../node_modules/rxjs/_esm5/internal/util/isDate.js","../node_modules/rxjs/_esm5/internal/operators/distinctUntilChanged.js","../node_modules/rxjs/_esm5/internal/operators/take.js","../node_modules/rxjs/_esm5/internal/operators/pairwise.js","../node_modules/rxjs/_esm5/internal/operators/skip.js","../node_modules/rxjs/_esm5/internal/operators/switchMap.js","../node_modules/@datorama/akita/fesm5/datorama-akita.js","../node_modules/rxjs/_esm5/internal/observable/merge.js","../src/state/todos.store.js","../src/state/todos.query.js","../src/state/todos.service.js","../src/Todo.svelte","../src/AddTodo.svelte","../src/Filters.svelte","../src/Todos.svelte","../src/NavLink.svelte","../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction validate_store(store, name) {\n    if (!store || typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, callback) {\n    const unsub = store.subscribe(callback);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.ctx, definition[1](fn ? fn(ctx) : {})))\n        : ctx.$$scope.ctx;\n}\nfunction get_slot_changes(definition, ctx, changed, fn) {\n    return definition[1]\n        ? assign({}, assign(ctx.$$scope.changed || {}, definition[1](fn ? fn(changed) : {})))\n        : ctx.$$scope.changed || {};\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nlet running = false;\nfunction run_tasks() {\n    tasks.forEach(task => {\n        if (!task[0](now())) {\n            tasks.delete(task);\n            task[1]();\n        }\n    });\n    running = tasks.size > 0;\n    if (running)\n        raf(run_tasks);\n}\nfunction clear_loops() {\n    // for testing...\n    tasks.forEach(task => tasks.delete(task));\n    running = false;\n}\nfunction loop(fn) {\n    let task;\n    if (!running) {\n        running = true;\n        raf(run_tasks);\n    }\n    return {\n        promise: new Promise(fulfil => {\n            tasks.add(task = [fn, fulfil]);\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    // eslint-disable-next-line @typescript-eslint/no-object-literal-type-assertion\n    const target = {};\n    for (const k in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    for (const key in attributes) {\n        if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key in node) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group) {\n    const value = [];\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.push(group[i].__value);\n    }\n    return value;\n}\nfunction to_number(value) {\n    return value === '' ? undefined : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            for (let j = 0; j < node.attributes.length; j += 1) {\n                const attribute = node.attributes[j];\n                if (!attributes[attribute.name])\n                    node.removeAttribute(attribute.name);\n            }\n            return nodes.splice(i, 1)[0]; // TODO strip unwanted attributes\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.data !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    if (value != null || input.value) {\n        input.value = value;\n    }\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\nfunction add_resize_listener(element, fn) {\n    if (getComputedStyle(element).position === 'static') {\n        element.style.position = 'relative';\n    }\n    const object = document.createElement('object');\n    object.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\n    object.type = 'text/html';\n    object.tabIndex = -1;\n    let win;\n    object.onload = () => {\n        win = object.contentDocument.defaultView;\n        win.addEventListener('resize', fn);\n    };\n    if (/Trident/.test(navigator.userAgent)) {\n        element.appendChild(object);\n        object.data = 'about:blank';\n    }\n    else {\n        object.data = 'about:blank';\n        element.appendChild(object);\n    }\n    return {\n        cancel: () => {\n            win && win.removeEventListener && win.removeEventListener('resize', fn);\n            element.removeChild(object);\n        }\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nclass HtmlTag {\n    constructor(html, anchor = null) {\n        this.e = element('div');\n        this.a = anchor;\n        this.u(html);\n    }\n    m(target, anchor = null) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(target, this.n[i], anchor);\n        }\n        this.t = target;\n    }\n    u(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    p(html) {\n        this.d();\n        this.u(html);\n        this.m(this.t, this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\n\nlet stylesheet;\nlet active = 0;\nlet current_rules = {};\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    if (!current_rules[name]) {\n        if (!stylesheet) {\n            const style = element('style');\n            document.head.appendChild(style);\n            stylesheet = style.sheet;\n        }\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ``}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    node.style.animation = (node.style.animation || '')\n        .split(', ')\n        .filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    )\n        .join(', ');\n    if (name && !--active)\n        clear_rules();\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        let i = stylesheet.cssRules.length;\n        while (i--)\n            stylesheet.deleteRule(i);\n        current_rules = {};\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error(`Function called outside component initialization`);\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = current_component;\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nfunction flush() {\n    const seen_callbacks = new Set();\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (dirty_components.length) {\n            const component = dirty_components.shift();\n            set_current_component(component);\n            update(component.$$);\n        }\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                callback();\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n}\nfunction update($$) {\n    if ($$.fragment) {\n        $$.update($$.dirty);\n        run_all($$.before_update);\n        $$.fragment.p($$.dirty, $$.ctx);\n        $$.dirty = null;\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = key && { [key]: value };\n        const child_ctx = assign(assign({}, info.ctx), info.resolved);\n        const block = type && (info.current = type)(child_ctx);\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            flush();\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = { [info.value]: promise };\n    }\n}\n\nconst globals = (typeof window !== 'undefined' ? window : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, changed, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(changed, child_ctx);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction measure(blocks) {\n    const rects = {};\n    let i = blocks.length;\n    while (i--)\n        rects[blocks[i].key] = blocks[i].node.getBoundingClientRect();\n    return rects;\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args) {\n    const attributes = Object.assign({}, ...args);\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === undefined)\n            return;\n        if (value === true)\n            str += \" \" + name;\n        const escaped = String(value)\n            .replace(/\"/g, '&#34;')\n            .replace(/'/g, '&#39;');\n        str += \" \" + name + \"=\" + JSON.stringify(escaped);\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : ``;\n}\n\nfunction bind(component, name, callback) {\n    if (component.$$.props.indexOf(name) === -1)\n        return;\n    component.$$.bound[name] = callback;\n    callback(component.$$.ctx[name]);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    if (component.$$.fragment) {\n        run_all(component.$$.on_destroy);\n        component.$$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        component.$$.on_destroy = component.$$.fragment = null;\n        component.$$.ctx = {};\n    }\n}\nfunction make_dirty(component, key) {\n    if (!component.$$.dirty) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty = blank_object();\n    }\n    component.$$.dirty[key] = true;\n}\nfunction init(component, options, instance, create_fragment, not_equal, prop_names) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const props = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props: prop_names,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty: null\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, props, (key, ret, value = ret) => {\n            if ($$.ctx && not_equal($$.ctx[key], $$.ctx[key] = value)) {\n                if ($$.bound[key])\n                    $$.bound[key](value);\n                if (ready)\n                    make_dirty(component, key);\n            }\n            return ret;\n        })\n        : props;\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    $$.fragment = create_fragment($$.ctx);\n    if (options.target) {\n        if (options.hydrate) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.l(children(options.target));\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement !== 'undefined') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set() {\n            // overridden by instance, if it has props\n        }\n    };\n}\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set() {\n        // overridden by instance, if it has props\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, detail));\n}\nfunction append_dev(target, node) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev(\"SvelteDOMInsert\", { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev(\"SvelteDOMRemove\", { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? [\"capture\"] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev(\"SvelteDOMAddEventListener\", { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev(\"SvelteDOMRemoveEventListener\", { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev(\"SvelteDOMRemoveAttribute\", { node, attribute });\n    else\n        dispatch_dev(\"SvelteDOMSetAttribute\", { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev(\"SvelteDOMSetProperty\", { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev(\"SvelteDOMSetDataset\", { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.data === data)\n        return;\n    dispatch_dev(\"SvelteDOMSetData\", { node: text, data });\n    text.data = data;\n}\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(`'target' is a required option`);\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn(`Component was already destroyed`); // eslint-disable-line no-console\n        };\n    }\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteElement, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_element, claim_space, claim_text, clear_loops, component_subscribe, createEventDispatcher, create_animation, create_bidirectional_transition, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_function, is_promise, listen, listen_dev, loop, measure, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, validate_component, validate_store, xlink_attr };\n","import { safe_not_equal, noop, run_all, is_function } from '../internal';\nexport { get_store_value as get } from '../internal';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe,\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n * @param {Stores} stores input stores\n * @param {function(Stores=, function(*)=):*}fn function callback that aggregates the values\n * @param {*=}initial_value when used asynchronously\n */\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => store.subscribe((value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","export const LOCATION = {};\nexport const ROUTER = {};\n","/**\n * Adapted from https://github.com/reach/router/blob/b60e6dd781d5d3a4bdaaf4de665649c0f6a7e78d/src/lib/history.js\n *\n * https://github.com/reach/router/blob/master/LICENSE\n * */\n\nfunction getLocation(source) {\n  return {\n    ...source.location,\n    state: source.history.state,\n    key: (source.history.state && source.history.state.key) || \"initial\"\n  };\n}\n\nfunction createHistory(source, options) {\n  const listeners = [];\n  let location = getLocation(source);\n\n  return {\n    get location() {\n      return location;\n    },\n\n    listen(listener) {\n      listeners.push(listener);\n\n      const popstateListener = () => {\n        location = getLocation(source);\n        listener({ location, action: \"POP\" });\n      };\n\n      source.addEventListener(\"popstate\", popstateListener);\n\n      return () => {\n        source.removeEventListener(\"popstate\", popstateListener);\n\n        const index = listeners.indexOf(listener);\n        listeners.splice(index, 1);\n      };\n    },\n\n    navigate(to, { state, replace = false } = {}) {\n      state = { ...state, key: Date.now() + \"\" };\n      // try...catch iOS Safari limits to 100 pushState calls\n      try {\n        if (replace) {\n          source.history.replaceState(state, null, to);\n        } else {\n          source.history.pushState(state, null, to);\n        }\n      } catch (e) {\n        source.location[replace ? \"replace\" : \"assign\"](to);\n      }\n\n      location = getLocation(source);\n      listeners.forEach(listener => listener({ location, action: \"PUSH\" }));\n    }\n  };\n}\n\n// Stores history entries in memory for testing or other platforms like Native\nfunction createMemorySource(initialPathname = \"/\") {\n  let index = 0;\n  const stack = [{ pathname: initialPathname, search: \"\" }];\n  const states = [];\n\n  return {\n    get location() {\n      return stack[index];\n    },\n    addEventListener(name, fn) {},\n    removeEventListener(name, fn) {},\n    history: {\n      get entries() {\n        return stack;\n      },\n      get index() {\n        return index;\n      },\n      get state() {\n        return states[index];\n      },\n      pushState(state, _, uri) {\n        const [pathname, search = \"\"] = uri.split(\"?\");\n        index++;\n        stack.push({ pathname, search });\n        states.push(state);\n      },\n      replaceState(state, _, uri) {\n        const [pathname, search = \"\"] = uri.split(\"?\");\n        stack[index] = { pathname, search };\n        states[index] = state;\n      }\n    }\n  };\n}\n\n// Global history uses window.history as the source if available,\n// otherwise a memory history\nconst canUseDOM = Boolean(\n  typeof window !== \"undefined\" &&\n    window.document &&\n    window.document.createElement\n);\nconst globalHistory = createHistory(canUseDOM ? window : createMemorySource());\nconst { navigate } = globalHistory;\n\nexport { globalHistory, navigate, createHistory, createMemorySource };\n","/**\n * Adapted from https://github.com/reach/router/blob/b60e6dd781d5d3a4bdaaf4de665649c0f6a7e78d/src/lib/utils.js\n *\n * https://github.com/reach/router/blob/master/LICENSE\n * */\n\nconst paramRe = /^:(.+)/;\n\nconst SEGMENT_POINTS = 4;\nconst STATIC_POINTS = 3;\nconst DYNAMIC_POINTS = 2;\nconst SPLAT_PENALTY = 1;\nconst ROOT_POINTS = 1;\n\n/**\n * Check if `string` starts with `search`\n * @param {string} string\n * @param {string} search\n * @return {boolean}\n */\nexport function startsWith(string, search) {\n  return string.substr(0, search.length) === search;\n}\n\n/**\n * Check if `segment` is a root segment\n * @param {string} segment\n * @return {boolean}\n */\nfunction isRootSegment(segment) {\n  return segment === \"\";\n}\n\n/**\n * Check if `segment` is a dynamic segment\n * @param {string} segment\n * @return {boolean}\n */\nfunction isDynamic(segment) {\n  return paramRe.test(segment);\n}\n\n/**\n * Check if `segment` is a splat\n * @param {string} segment\n * @return {boolean}\n */\nfunction isSplat(segment) {\n  return segment[0] === \"*\";\n}\n\n/**\n * Split up the URI into segments delimited by `/`\n * @param {string} uri\n * @return {string[]}\n */\nfunction segmentize(uri) {\n  return (\n    uri\n      // Strip starting/ending `/`\n      .replace(/(^\\/+|\\/+$)/g, \"\")\n      .split(\"/\")\n  );\n}\n\n/**\n * Strip `str` of potential start and end `/`\n * @param {string} str\n * @return {string}\n */\nfunction stripSlashes(str) {\n  return str.replace(/(^\\/+|\\/+$)/g, \"\");\n}\n\n/**\n * Score a route depending on how its individual segments look\n * @param {object} route\n * @param {number} index\n * @return {object}\n */\nfunction rankRoute(route, index) {\n  const score = route.default\n    ? 0\n    : segmentize(route.path).reduce((score, segment) => {\n        score += SEGMENT_POINTS;\n\n        if (isRootSegment(segment)) {\n          score += ROOT_POINTS;\n        } else if (isDynamic(segment)) {\n          score += DYNAMIC_POINTS;\n        } else if (isSplat(segment)) {\n          score -= SEGMENT_POINTS + SPLAT_PENALTY;\n        } else {\n          score += STATIC_POINTS;\n        }\n\n        return score;\n      }, 0);\n\n  return { route, score, index };\n}\n\n/**\n * Give a score to all routes and sort them on that\n * @param {object[]} routes\n * @return {object[]}\n */\nfunction rankRoutes(routes) {\n  return (\n    routes\n      .map(rankRoute)\n      // If two routes have the exact same score, we go by index instead\n      .sort((a, b) =>\n        a.score < b.score ? 1 : a.score > b.score ? -1 : a.index - b.index\n      )\n  );\n}\n\n/**\n * Ranks and picks the best route to match. Each segment gets the highest\n * amount of points, then the type of segment gets an additional amount of\n * points where\n *\n *  static > dynamic > splat > root\n *\n * This way we don't have to worry about the order of our routes, let the\n * computers do it.\n *\n * A route looks like this\n *\n *  { path, default, value }\n *\n * And a returned match looks like:\n *\n *  { route, params, uri }\n *\n * @param {object[]} routes\n * @param {string} uri\n * @return {?object}\n */\nfunction pick(routes, uri) {\n  let match;\n  let default_;\n\n  const [uriPathname] = uri.split(\"?\");\n  const uriSegments = segmentize(uriPathname);\n  const isRootUri = uriSegments[0] === \"\";\n  const ranked = rankRoutes(routes);\n\n  for (let i = 0, l = ranked.length; i < l; i++) {\n    const route = ranked[i].route;\n    let missed = false;\n\n    if (route.default) {\n      default_ = {\n        route,\n        params: {},\n        uri\n      };\n      continue;\n    }\n\n    const routeSegments = segmentize(route.path);\n    const params = {};\n    const max = Math.max(uriSegments.length, routeSegments.length);\n    let index = 0;\n\n    for (; index < max; index++) {\n      const routeSegment = routeSegments[index];\n      const uriSegment = uriSegments[index];\n\n      if (routeSegment !== undefined && isSplat(routeSegment)) {\n        // Hit a splat, just grab the rest, and return a match\n        // uri:   /files/documents/work\n        // route: /files/* or /files/*splatname\n        const splatName = routeSegment === \"*\" ? \"*\" : routeSegment.slice(1);\n\n        params[splatName] = uriSegments\n          .slice(index)\n          .map(decodeURIComponent)\n          .join(\"/\");\n        break;\n      }\n\n      if (uriSegment === undefined) {\n        // URI is shorter than the route, no match\n        // uri:   /users\n        // route: /users/:userId\n        missed = true;\n        break;\n      }\n\n      let dynamicMatch = paramRe.exec(routeSegment);\n\n      if (dynamicMatch && !isRootUri) {\n        const value = decodeURIComponent(uriSegment);\n        params[dynamicMatch[1]] = value;\n      } else if (routeSegment !== uriSegment) {\n        // Current segments don't match, not dynamic, not splat, so no match\n        // uri:   /users/123/settings\n        // route: /users/:id/profile\n        missed = true;\n        break;\n      }\n    }\n\n    if (!missed) {\n      match = {\n        route,\n        params,\n        uri: \"/\" + uriSegments.slice(0, index).join(\"/\")\n      };\n      break;\n    }\n  }\n\n  return match || default_ || null;\n}\n\n/**\n * Check if the `path` matches the `uri`.\n * @param {string} path\n * @param {string} uri\n * @return {?object}\n */\nfunction match(route, uri) {\n  return pick([route], uri);\n}\n\n/**\n * Add the query to the pathname if a query is given\n * @param {string} pathname\n * @param {string} [query]\n * @return {string}\n */\nfunction addQuery(pathname, query) {\n  return pathname + (query ? `?${query}` : \"\");\n}\n\n/**\n * Resolve URIs as though every path is a directory, no files. Relative URIs\n * in the browser can feel awkward because not only can you be \"in a directory\",\n * you can be \"at a file\", too. For example:\n *\n *  browserSpecResolve('foo', '/bar/') => /bar/foo\n *  browserSpecResolve('foo', '/bar') => /foo\n *\n * But on the command line of a file system, it's not as complicated. You can't\n * `cd` from a file, only directories. This way, links have to know less about\n * their current path. To go deeper you can do this:\n *\n *  <Link to=\"deeper\"/>\n *  // instead of\n *  <Link to=`{${props.uri}/deeper}`/>\n *\n * Just like `cd`, if you want to go deeper from the command line, you do this:\n *\n *  cd deeper\n *  # not\n *  cd $(pwd)/deeper\n *\n * By treating every path as a directory, linking to relative paths should\n * require less contextual information and (fingers crossed) be more intuitive.\n * @param {string} to\n * @param {string} base\n * @return {string}\n */\nfunction resolve(to, base) {\n  // /foo/bar, /baz/qux => /foo/bar\n  if (startsWith(to, \"/\")) {\n    return to;\n  }\n\n  const [toPathname, toQuery] = to.split(\"?\");\n  const [basePathname] = base.split(\"?\");\n  const toSegments = segmentize(toPathname);\n  const baseSegments = segmentize(basePathname);\n\n  // ?a=b, /users?b=c => /users?a=b\n  if (toSegments[0] === \"\") {\n    return addQuery(basePathname, toQuery);\n  }\n\n  // profile, /users/789 => /users/789/profile\n  if (!startsWith(toSegments[0], \".\")) {\n    const pathname = baseSegments.concat(toSegments).join(\"/\");\n\n    return addQuery((basePathname === \"/\" ? \"\" : \"/\") + pathname, toQuery);\n  }\n\n  // ./       , /users/123 => /users/123\n  // ../      , /users/123 => /users\n  // ../..    , /users/123 => /\n  // ../../one, /a/b/c/d   => /a/b/one\n  // .././one , /a/b/c/d   => /a/b/c/one\n  const allSegments = baseSegments.concat(toSegments);\n  const segments = [];\n\n  allSegments.forEach(segment => {\n    if (segment === \"..\") {\n      segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n\n  return addQuery(\"/\" + segments.join(\"/\"), toQuery);\n}\n\n/**\n * Combines the `basepath` and the `path` into one path.\n * @param {string} basepath\n * @param {string} path\n */\nfunction combinePaths(basepath, path) {\n  return `${stripSlashes(\n    path === \"/\" ? basepath : `${stripSlashes(basepath)}/${stripSlashes(path)}`\n  )}/`;\n}\n\n/**\n * Decides whether a given `event` should result in a navigation or not.\n * @param {object} event\n */\nfunction shouldNavigate(event) {\n  return (\n    !event.defaultPrevented &&\n    event.button === 0 &&\n    !(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey)\n  );\n}\n\nexport { stripSlashes, pick, match, resolve, combinePaths, shouldNavigate };\n","<script>\n  import { getContext, setContext, onMount } from \"svelte\";\n  import { writable, derived } from \"svelte/store\";\n  import { LOCATION, ROUTER } from \"./contexts.js\";\n  import { globalHistory } from \"./history.js\";\n  import { pick, match, stripSlashes, combinePaths } from \"./utils.js\";\n\n  export let basepath = \"/\";\n  export let url = null;\n\n  const locationContext = getContext(LOCATION);\n  const routerContext = getContext(ROUTER);\n\n  const routes = writable([]);\n  const activeRoute = writable(null);\n  let hasActiveRoute = false; // Used in SSR to synchronously set that a Route is active.\n\n  // If locationContext is not set, this is the topmost Router in the tree.\n  // If the `url` prop is given we force the location to it.\n  const location =\n    locationContext ||\n    writable(url ? { pathname: url } : globalHistory.location);\n\n  // If routerContext is set, the routerBase of the parent Router\n  // will be the base for this Router's descendants.\n  // If routerContext is not set, the path and resolved uri will both\n  // have the value of the basepath prop.\n  const base = routerContext\n    ? routerContext.routerBase\n    : writable({\n        path: basepath,\n        uri: basepath\n      });\n\n  const routerBase = derived([base, activeRoute], ([base, activeRoute]) => {\n    // If there is no activeRoute, the routerBase will be identical to the base.\n    if (activeRoute === null) {\n      return base;\n    }\n\n    const { path: basepath } = base;\n    const { route, uri } = activeRoute;\n    // Remove the potential /* or /*splatname from\n    // the end of the child Routes relative paths.\n    const path = route.default ? basepath : route.path.replace(/\\*.*$/, \"\");\n\n    return { path, uri };\n  });\n\n  function registerRoute(route) {\n    const { path: basepath } = $base;\n    let { path } = route;\n\n    // We store the original path in the _path property so we can reuse\n    // it when the basepath changes. The only thing that matters is that\n    // the route reference is intact, so mutation is fine.\n    route._path = path;\n    route.path = combinePaths(basepath, path);\n\n    if (typeof window === \"undefined\") {\n      // In SSR we should set the activeRoute immediately if it is a match.\n      // If there are more Routes being registered after a match is found,\n      // we just skip them.\n      if (hasActiveRoute) {\n        return;\n      }\n\n      const matchingRoute = match(route, $location.pathname);\n      if (matchingRoute) {\n        activeRoute.set(matchingRoute);\n        hasActiveRoute = true;\n      }\n    } else {\n      routes.update(rs => {\n        rs.push(route);\n        return rs;\n      });\n    }\n  }\n\n  function unregisterRoute(route) {\n    routes.update(rs => {\n      const index = rs.indexOf(route);\n      rs.splice(index, 1);\n      return rs;\n    });\n  }\n\n  // This reactive statement will update all the Routes' path when\n  // the basepath changes.\n  $: {\n    const { path: basepath } = $base;\n    routes.update(rs => {\n      rs.forEach(r => (r.path = combinePaths(basepath, r._path)));\n      return rs;\n    });\n  }\n  // This reactive statement will be run when the Router is created\n  // when there are no Routes and then again the following tick, so it\n  // will not find an active Route in SSR and in the browser it will only\n  // pick an active Route after all Routes have been registered.\n  $: {\n    const bestMatch = pick($routes, $location.pathname);\n    activeRoute.set(bestMatch);\n  }\n\n  if (!locationContext) {\n    // The topmost Router in the tree is responsible for updating\n    // the location store and supplying it through context.\n    onMount(() => {\n      const unlisten = globalHistory.listen(history => {\n        location.set(history.location);\n      });\n\n      return unlisten;\n    });\n\n    setContext(LOCATION, location);\n  }\n\n  setContext(ROUTER, {\n    activeRoute,\n    base,\n    routerBase,\n    registerRoute,\n    unregisterRoute\n  });\n</script>\n\n<slot></slot>\n","<script>\n  import { getContext, onDestroy } from \"svelte\";\n  import { ROUTER, LOCATION } from \"./contexts.js\";\n\n  export let path = \"\";\n  export let component = null;\n\n  const { registerRoute, unregisterRoute, activeRoute } = getContext(ROUTER);\n  const location = getContext(LOCATION);\n\n  const route = {\n    path,\n    // If no path prop is given, this Route will act as the default Route\n    // that is rendered if no other Route in the Router is a match.\n    default: path === \"\"\n  };\n  let routeParams = {};\n  let routeProps = {};\n\n  $: if ($activeRoute && $activeRoute.route === route) {\n    routeParams = $activeRoute.params;\n  }\n\n  $: {\n    const { path, component, ...rest } = $$props;\n    routeProps = rest;\n  }\n\n  registerRoute(route);\n\n  // There is no need to unregister Routes in SSR since it will all be\n  // thrown away anyway.\n  if (typeof window !== \"undefined\") {\n    onDestroy(() => {\n      unregisterRoute(route);\n    });\n  }\n</script>\n\n{#if $activeRoute !== null && $activeRoute.route === route}\n  {#if component !== null}\n    <svelte:component this=\"{component}\" location={$location} {...routeParams} {...routeProps}  />\n  {:else}\n    <slot params=\"{routeParams}\" location={$location}></slot>\n  {/if}\n{/if}\n","<script>\n  import { getContext, createEventDispatcher } from \"svelte\";\n  import { ROUTER, LOCATION } from \"./contexts.js\";\n  import { navigate } from \"./history.js\";\n  import { startsWith, resolve, shouldNavigate } from \"./utils.js\";\n\n  export let to = \"#\";\n  export let replace = false;\n  export let state = {};\n  export let getProps = () => ({});\n\n  const { base } = getContext(ROUTER);\n  const location = getContext(LOCATION);\n  const dispatch = createEventDispatcher();\n\n  let href, isPartiallyCurrent, isCurrent, props;\n  $: href = to === \"/\" ? $base.uri : resolve(to, $base.uri);\n  $: isPartiallyCurrent = startsWith($location.pathname, href);\n  $: isCurrent = href === $location.pathname;\n  $: ariaCurrent = isCurrent ? \"page\" : undefined;\n  $: props = getProps({\n    location: $location,\n    href,\n    isPartiallyCurrent,\n    isCurrent\n  });\n\n  function onClick(event) {\n    dispatch(\"click\", event);\n\n    if (shouldNavigate(event)) {\n      event.preventDefault();\n      // Don't push another entry to the history stack when the user\n      // clicks on a Link to the page they are currently on.\n      const shouldReplace = $location.pathname === href || replace;\n      navigate(href, { state, replace: shouldReplace });\n    }\n  }\n</script>\n\n<a href=\"{href}\" aria-current=\"{ariaCurrent}\" on:click=\"{onClick}\" {...props}>\n  <slot></slot>\n</a>\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nvar BehaviorSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var async = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function isObservable(obj) {\n    return !!obj && (obj instanceof Observable || (typeof obj.lift === 'function' && typeof obj.subscribe === 'function'));\n}\n//# sourceMappingURL=isObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nexport var ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, destination) {\n    if (destination === void 0) {\n        destination = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (destination.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(destination);\n    }\n    return subscribeTo(result)(destination);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/ (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\nexport { CombineLatestSubscriber };\n//# sourceMappingURL=combineLatest.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        subscribeToResult(this, ish, value, index, innerSubscriber);\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */\nimport { isArray } from './isArray';\nexport function isNumeric(val) {\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n//# sourceMappingURL=isNumeric.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n    if (dueTime === void 0) {\n        dueTime = 0;\n    }\n    var period = -1;\n    if (isNumeric(periodOrScheduler)) {\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n    }\n    else if (isScheduler(periodOrScheduler)) {\n        scheduler = periodOrScheduler;\n    }\n    if (!isScheduler(scheduler)) {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        var due = isNumeric(dueTime)\n            ? dueTime\n            : (+dueTime - scheduler.now());\n        return scheduler.schedule(dispatch, due, {\n            index: 0, period: period, subscriber: subscriber\n        });\n    });\n}\nfunction dispatch(state) {\n    var index = state.index, period = state.period, subscriber = state.subscriber;\n    subscriber.next(index);\n    if (subscriber.closed) {\n        return;\n    }\n    else if (period === -1) {\n        return subscriber.complete();\n    }\n    state.index = index + 1;\n    this.schedule(state, period);\n}\n//# sourceMappingURL=timer.js.map\n","/** PURE_IMPORTS_START tslib,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function audit(durationSelector) {\n    return function auditOperatorFunction(source) {\n        return source.lift(new AuditOperator(durationSelector));\n    };\n}\nvar AuditOperator = /*@__PURE__*/ (function () {\n    function AuditOperator(durationSelector) {\n        this.durationSelector = durationSelector;\n    }\n    AuditOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new AuditSubscriber(subscriber, this.durationSelector));\n    };\n    return AuditOperator;\n}());\nvar AuditSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AuditSubscriber, _super);\n    function AuditSubscriber(destination, durationSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.durationSelector = durationSelector;\n        _this.hasValue = false;\n        return _this;\n    }\n    AuditSubscriber.prototype._next = function (value) {\n        this.value = value;\n        this.hasValue = true;\n        if (!this.throttled) {\n            var duration = void 0;\n            try {\n                var durationSelector = this.durationSelector;\n                duration = durationSelector(value);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n            var innerSubscription = subscribeToResult(this, duration);\n            if (!innerSubscription || innerSubscription.closed) {\n                this.clearThrottle();\n            }\n            else {\n                this.add(this.throttled = innerSubscription);\n            }\n        }\n    };\n    AuditSubscriber.prototype.clearThrottle = function () {\n        var _a = this, value = _a.value, hasValue = _a.hasValue, throttled = _a.throttled;\n        if (throttled) {\n            this.remove(throttled);\n            this.throttled = null;\n            throttled.unsubscribe();\n        }\n        if (hasValue) {\n            this.value = null;\n            this.hasValue = false;\n            this.destination.next(value);\n        }\n    };\n    AuditSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex) {\n        this.clearThrottle();\n    };\n    AuditSubscriber.prototype.notifyComplete = function () {\n        this.clearThrottle();\n    };\n    return AuditSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=audit.js.map\n","/** PURE_IMPORTS_START _scheduler_async,_audit,_observable_timer PURE_IMPORTS_END */\nimport { async } from '../scheduler/async';\nimport { audit } from './audit';\nimport { timer } from '../observable/timer';\nexport function auditTime(duration, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return audit(function () { return timer(duration, scheduler); });\n}\n//# sourceMappingURL=auditTime.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_scheduler_async PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { async } from '../scheduler/async';\nexport function debounceTime(dueTime, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    return function (source) { return source.lift(new DebounceTimeOperator(dueTime, scheduler)); };\n}\nvar DebounceTimeOperator = /*@__PURE__*/ (function () {\n    function DebounceTimeOperator(dueTime, scheduler) {\n        this.dueTime = dueTime;\n        this.scheduler = scheduler;\n    }\n    DebounceTimeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DebounceTimeSubscriber(subscriber, this.dueTime, this.scheduler));\n    };\n    return DebounceTimeOperator;\n}());\nvar DebounceTimeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DebounceTimeSubscriber, _super);\n    function DebounceTimeSubscriber(destination, dueTime, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.dueTime = dueTime;\n        _this.scheduler = scheduler;\n        _this.debouncedSubscription = null;\n        _this.lastValue = null;\n        _this.hasValue = false;\n        return _this;\n    }\n    DebounceTimeSubscriber.prototype._next = function (value) {\n        this.clearDebounce();\n        this.lastValue = value;\n        this.hasValue = true;\n        this.add(this.debouncedSubscription = this.scheduler.schedule(dispatchNext, this.dueTime, this));\n    };\n    DebounceTimeSubscriber.prototype._complete = function () {\n        this.debouncedNext();\n        this.destination.complete();\n    };\n    DebounceTimeSubscriber.prototype.debouncedNext = function () {\n        this.clearDebounce();\n        if (this.hasValue) {\n            var lastValue = this.lastValue;\n            this.lastValue = null;\n            this.hasValue = false;\n            this.destination.next(lastValue);\n        }\n    };\n    DebounceTimeSubscriber.prototype.clearDebounce = function () {\n        var debouncedSubscription = this.debouncedSubscription;\n        if (debouncedSubscription !== null) {\n            this.remove(debouncedSubscription);\n            debouncedSubscription.unsubscribe();\n            this.debouncedSubscription = null;\n        }\n    };\n    return DebounceTimeSubscriber;\n}(Subscriber));\nfunction dispatchNext(subscriber) {\n    subscriber.debouncedNext();\n}\n//# sourceMappingURL=debounceTime.js.map\n","/** PURE_IMPORTS_START tslib,_scheduler_async,_util_isDate,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { async } from '../scheduler/async';\nimport { isDate } from '../util/isDate';\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function delay(delay, scheduler) {\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    var absoluteDelay = isDate(delay);\n    var delayFor = absoluteDelay ? (+delay - scheduler.now()) : Math.abs(delay);\n    return function (source) { return source.lift(new DelayOperator(delayFor, scheduler)); };\n}\nvar DelayOperator = /*@__PURE__*/ (function () {\n    function DelayOperator(delay, scheduler) {\n        this.delay = delay;\n        this.scheduler = scheduler;\n    }\n    DelayOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DelaySubscriber(subscriber, this.delay, this.scheduler));\n    };\n    return DelayOperator;\n}());\nvar DelaySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DelaySubscriber, _super);\n    function DelaySubscriber(destination, delay, scheduler) {\n        var _this = _super.call(this, destination) || this;\n        _this.delay = delay;\n        _this.scheduler = scheduler;\n        _this.queue = [];\n        _this.active = false;\n        _this.errored = false;\n        return _this;\n    }\n    DelaySubscriber.dispatch = function (state) {\n        var source = state.source;\n        var queue = source.queue;\n        var scheduler = state.scheduler;\n        var destination = state.destination;\n        while (queue.length > 0 && (queue[0].time - scheduler.now()) <= 0) {\n            queue.shift().notification.observe(destination);\n        }\n        if (queue.length > 0) {\n            var delay_1 = Math.max(0, queue[0].time - scheduler.now());\n            this.schedule(state, delay_1);\n        }\n        else {\n            this.unsubscribe();\n            source.active = false;\n        }\n    };\n    DelaySubscriber.prototype._schedule = function (scheduler) {\n        this.active = true;\n        var destination = this.destination;\n        destination.add(scheduler.schedule(DelaySubscriber.dispatch, this.delay, {\n            source: this, destination: this.destination, scheduler: scheduler\n        }));\n    };\n    DelaySubscriber.prototype.scheduleNotification = function (notification) {\n        if (this.errored === true) {\n            return;\n        }\n        var scheduler = this.scheduler;\n        var message = new DelayMessage(scheduler.now() + this.delay, notification);\n        this.queue.push(message);\n        if (this.active === false) {\n            this._schedule(scheduler);\n        }\n    };\n    DelaySubscriber.prototype._next = function (value) {\n        this.scheduleNotification(Notification.createNext(value));\n    };\n    DelaySubscriber.prototype._error = function (err) {\n        this.errored = true;\n        this.queue = [];\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    DelaySubscriber.prototype._complete = function () {\n        this.scheduleNotification(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return DelaySubscriber;\n}(Subscriber));\nvar DelayMessage = /*@__PURE__*/ (function () {\n    function DelayMessage(time, notification) {\n        this.time = time;\n        this.notification = notification;\n    }\n    return DelayMessage;\n}());\n//# sourceMappingURL=delay.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isDate(value) {\n    return value instanceof Date && !isNaN(+value);\n}\n//# sourceMappingURL=isDate.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function distinctUntilChanged(compare, keySelector) {\n    return function (source) { return source.lift(new DistinctUntilChangedOperator(compare, keySelector)); };\n}\nvar DistinctUntilChangedOperator = /*@__PURE__*/ (function () {\n    function DistinctUntilChangedOperator(compare, keySelector) {\n        this.compare = compare;\n        this.keySelector = keySelector;\n    }\n    DistinctUntilChangedOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new DistinctUntilChangedSubscriber(subscriber, this.compare, this.keySelector));\n    };\n    return DistinctUntilChangedOperator;\n}());\nvar DistinctUntilChangedSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(DistinctUntilChangedSubscriber, _super);\n    function DistinctUntilChangedSubscriber(destination, compare, keySelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.hasKey = false;\n        if (typeof compare === 'function') {\n            _this.compare = compare;\n        }\n        return _this;\n    }\n    DistinctUntilChangedSubscriber.prototype.compare = function (x, y) {\n        return x === y;\n    };\n    DistinctUntilChangedSubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            var keySelector = this.keySelector;\n            key = keySelector ? keySelector(value) : value;\n        }\n        catch (err) {\n            return this.destination.error(err);\n        }\n        var result = false;\n        if (this.hasKey) {\n            try {\n                var compare = this.compare;\n                result = compare(this.key, key);\n            }\n            catch (err) {\n                return this.destination.error(err);\n            }\n        }\n        else {\n            this.hasKey = true;\n        }\n        if (!result) {\n            this.key = key;\n            this.destination.next(value);\n        }\n    };\n    return DistinctUntilChangedSubscriber;\n}(Subscriber));\n//# sourceMappingURL=distinctUntilChanged.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_util_ArgumentOutOfRangeError,_observable_empty PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { ArgumentOutOfRangeError } from '../util/ArgumentOutOfRangeError';\nimport { empty } from '../observable/empty';\nexport function take(count) {\n    return function (source) {\n        if (count === 0) {\n            return empty();\n        }\n        else {\n            return source.lift(new TakeOperator(count));\n        }\n    };\n}\nvar TakeOperator = /*@__PURE__*/ (function () {\n    function TakeOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError;\n        }\n    }\n    TakeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeSubscriber(subscriber, this.total));\n    };\n    return TakeOperator;\n}());\nvar TakeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=take.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function pairwise() {\n    return function (source) { return source.lift(new PairwiseOperator()); };\n}\nvar PairwiseOperator = /*@__PURE__*/ (function () {\n    function PairwiseOperator() {\n    }\n    PairwiseOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new PairwiseSubscriber(subscriber));\n    };\n    return PairwiseOperator;\n}());\nvar PairwiseSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(PairwiseSubscriber, _super);\n    function PairwiseSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasPrev = false;\n        return _this;\n    }\n    PairwiseSubscriber.prototype._next = function (value) {\n        var pair;\n        if (this.hasPrev) {\n            pair = [this.prev, value];\n        }\n        else {\n            this.hasPrev = true;\n        }\n        this.prev = value;\n        if (pair) {\n            this.destination.next(pair);\n        }\n    };\n    return PairwiseSubscriber;\n}(Subscriber));\n//# sourceMappingURL=pairwise.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function skip(count) {\n    return function (source) { return source.lift(new SkipOperator(count)); };\n}\nvar SkipOperator = /*@__PURE__*/ (function () {\n    function SkipOperator(total) {\n        this.total = total;\n    }\n    SkipOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new SkipSubscriber(subscriber, this.total));\n    };\n    return SkipOperator;\n}());\nvar SkipSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SkipSubscriber, _super);\n    function SkipSubscriber(destination, total) {\n        var _this = _super.call(this, destination) || this;\n        _this.total = total;\n        _this.count = 0;\n        return _this;\n    }\n    SkipSubscriber.prototype._next = function (x) {\n        if (++this.count > this.total) {\n            this.destination.next(x);\n        }\n    };\n    return SkipSubscriber;\n}(Subscriber));\n//# sourceMappingURL=skip.js.map\n","/** PURE_IMPORTS_START tslib,_OuterSubscriber,_InnerSubscriber,_util_subscribeToResult,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function switchMap(project, resultSelector) {\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(switchMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); })); };\n    }\n    return function (source) { return source.lift(new SwitchMapOperator(project)); };\n}\nvar SwitchMapOperator = /*@__PURE__*/ (function () {\n    function SwitchMapOperator(project) {\n        this.project = project;\n    }\n    SwitchMapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new SwitchMapSubscriber(subscriber, this.project));\n    };\n    return SwitchMapOperator;\n}());\nvar SwitchMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SwitchMapSubscriber, _super);\n    function SwitchMapSubscriber(destination, project) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.index = 0;\n        return _this;\n    }\n    SwitchMapSubscriber.prototype._next = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (error) {\n            this.destination.error(error);\n            return;\n        }\n        this._innerSub(result, value, index);\n    };\n    SwitchMapSubscriber.prototype._innerSub = function (result, value, index) {\n        var innerSubscription = this.innerSubscription;\n        if (innerSubscription) {\n            innerSubscription.unsubscribe();\n        }\n        var innerSubscriber = new InnerSubscriber(this, undefined, undefined);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        this.innerSubscription = subscribeToResult(this, result, value, index, innerSubscriber);\n    };\n    SwitchMapSubscriber.prototype._complete = function () {\n        var innerSubscription = this.innerSubscription;\n        if (!innerSubscription || innerSubscription.closed) {\n            _super.prototype._complete.call(this);\n        }\n        this.unsubscribe();\n    };\n    SwitchMapSubscriber.prototype._unsubscribe = function () {\n        this.innerSubscription = null;\n    };\n    SwitchMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var destination = this.destination;\n        destination.remove(innerSub);\n        this.innerSubscription = null;\n        if (this.isStopped) {\n            _super.prototype._complete.call(this);\n        }\n    };\n    SwitchMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    return SwitchMapSubscriber;\n}(OuterSubscriber));\n//# sourceMappingURL=switchMap.js.map\n","import { __assign, __values, __spread, __read, __rest, __extends, __decorate, __metadata } from 'tslib';\nimport { BehaviorSubject, of, Subject, ReplaySubject, from, isObservable, combineLatest, merge, EMPTY } from 'rxjs';\nimport { tap, distinctUntilChanged, map, filter, switchMap, skip, delay, take, debounceTime, pairwise, auditTime } from 'rxjs/operators';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template T\n * @param {?} value\n * @return {?}\n */\nfunction isArray(value) {\n    return Array.isArray(value);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template T\n * @param {?} arr\n * @return {?}\n */\nfunction isEmpty(arr) {\n    if (isArray(arr)) {\n        return arr.length === 0;\n    }\n    return false;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E\n * @param {?} entities\n * @param {?} idKey\n * @param {?} preAddEntity\n * @return {?}\n */\nfunction toEntitiesObject(entities, idKey, preAddEntity) {\n    var e_1, _a;\n    /** @type {?} */\n    var acc = {\n        entities: {},\n        ids: []\n    };\n    try {\n        for (var entities_1 = __values(entities), entities_1_1 = entities_1.next(); !entities_1_1.done; entities_1_1 = entities_1.next()) {\n            var entity = entities_1_1.value;\n            // evaluate the middleware first to support dynamic ids\n            /** @type {?} */\n            var current = preAddEntity(entity);\n            acc.entities[current[idKey]] = current;\n            acc.ids.push(current[idKey]);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (entities_1_1 && !entities_1_1.done && (_a = entities_1.return)) _a.call(entities_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return acc;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E\n * @param {?} entities\n * @param {?} id\n * @return {?}\n */\nfunction hasEntity(entities, id) {\n    return entities.hasOwnProperty(id);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E\n * @param {?} state\n * @return {?}\n */\nfunction hasActiveState(state) {\n    return state.hasOwnProperty('active');\n}\n// @internal\n/**\n * @param {?} active\n * @return {?}\n */\nfunction isMultiActiveState(active) {\n    return isArray(active);\n}\n// @internal\n/**\n * @template E\n * @param {?} __0\n * @return {?}\n */\nfunction resolveActiveEntity(_a) {\n    var active = _a.active, ids = _a.ids, entities = _a.entities;\n    if (isMultiActiveState(active)) {\n        return getExitingActives(active, ids);\n    }\n    if (hasEntity(entities, active) === false) {\n        return null;\n    }\n    return active;\n}\n// @internal\n/**\n * @param {?} currentActivesIds\n * @param {?} newIds\n * @return {?}\n */\nfunction getExitingActives(currentActivesIds, newIds) {\n    /** @type {?} */\n    var filtered = currentActivesIds.filter((/**\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) { return newIds.indexOf(id) > -1; }));\n    /** Return the same reference if nothing has changed */\n    if (filtered.length === currentActivesIds.length) {\n        return currentActivesIds;\n    }\n    return filtered;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template Entity\n * @param {?} state\n * @return {?}\n */\nfunction isEntityState(state) {\n    return state.entities && state.ids;\n}\n// @internal\n/**\n * @template E\n * @param {?} entities\n * @param {?} preAddEntity\n * @return {?}\n */\nfunction applyMiddleware(entities, preAddEntity) {\n    var e_1, _a;\n    /** @type {?} */\n    var mapped = {};\n    try {\n        for (var _b = __values(Object.keys(entities)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var id = _c.value;\n            mapped[id] = preAddEntity(entities[id]);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return mapped;\n}\n// @internal\n/**\n * @template S, E\n * @param {?} __0\n * @return {?}\n */\nfunction setEntities(_a) {\n    var state = _a.state, entities = _a.entities, idKey = _a.idKey, preAddEntity = _a.preAddEntity, isNativePreAdd = _a.isNativePreAdd;\n    /** @type {?} */\n    var newEntities;\n    /** @type {?} */\n    var newIds;\n    if (isArray(entities)) {\n        /** @type {?} */\n        var resolve = toEntitiesObject(entities, idKey, preAddEntity);\n        newEntities = resolve.entities;\n        newIds = resolve.ids;\n    }\n    else if (isEntityState(entities)) {\n        newEntities = isNativePreAdd ? entities.entities : applyMiddleware(entities.entities, preAddEntity);\n        newIds = entities.ids;\n    }\n    else {\n        // it's an object\n        newEntities = isNativePreAdd ? entities : applyMiddleware(entities, preAddEntity);\n        newIds = Object.keys(newEntities).map((/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return (isNaN((/** @type {?} */ (id))) ? id : Number(id)); }));\n    }\n    /** @type {?} */\n    var newState = __assign({}, state, { entities: newEntities, ids: newIds, loading: false });\n    if (hasActiveState(state)) {\n        newState.active = resolveActiveEntity((/** @type {?} */ (newState)));\n    }\n    return newState;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\nvar \n// @internal\nAkitaError = /** @class */ (function (_super) {\n    __extends(AkitaError, _super);\n    function AkitaError(message) {\n        return _super.call(this, message) || this;\n    }\n    return AkitaError;\n}(Error));\n// @internal\n/**\n * @param {?} name\n * @param {?} className\n * @return {?}\n */\nfunction assertStoreHasName(name, className) {\n    if (!name) {\n        console.error(\"@StoreConfig({ name }) is missing in \" + className);\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar currentAction = {\n    type: null,\n    entityIds: null,\n    skip: false\n};\n/** @type {?} */\nvar customActionActive = false;\n/**\n * @return {?}\n */\nfunction resetCustomAction() {\n    customActionActive = false;\n}\n// public API for custom actions. Custom action always wins\n/**\n * @param {?} type\n * @param {?=} entityIds\n * @return {?}\n */\nfunction logAction(type, entityIds) {\n    setAction(type, entityIds);\n    customActionActive = true;\n}\n/**\n * @param {?} type\n * @param {?=} entityIds\n * @return {?}\n */\nfunction setAction(type, entityIds) {\n    if (customActionActive === false) {\n        currentAction.type = type;\n        currentAction.entityIds = entityIds;\n    }\n}\n/**\n * @param {?=} skip\n * @return {?}\n */\nfunction setSkipAction(skip$$1) {\n    if (skip$$1 === void 0) { skip$$1 = true; }\n    currentAction.skip = skip$$1;\n}\n/**\n * @param {?} action\n * @param {?=} entityIds\n * @return {?}\n */\nfunction action(action, entityIds) {\n    return (/**\n     * @param {?} target\n     * @param {?} propertyKey\n     * @param {?} descriptor\n     * @return {?}\n     */\n    function (target, propertyKey, descriptor) {\n        /** @type {?} */\n        var originalMethod = descriptor.value;\n        descriptor.value = (/**\n         * @param {...?} args\n         * @return {?}\n         */\n        function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            logAction(action, entityIds);\n            return originalMethod.apply(this, args);\n        });\n        return descriptor;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/** @type {?} */\nvar transactionFinished = new Subject();\n// @internal\n/** @type {?} */\nvar transactionInProcess = new BehaviorSubject(false);\n// @internal\n/** @type {?} */\nvar transactionManager = {\n    activeTransactions: 0,\n    batchTransaction: null\n};\n// @internal\n/**\n * @return {?}\n */\nfunction startBatch() {\n    if (!isTransactionInProcess()) {\n        transactionManager.batchTransaction = new Subject();\n    }\n    transactionManager.activeTransactions++;\n    transactionInProcess.next(true);\n}\n// @internal\n/**\n * @return {?}\n */\nfunction endBatch() {\n    if (--transactionManager.activeTransactions === 0) {\n        transactionManager.batchTransaction.next(true);\n        transactionManager.batchTransaction.complete();\n        transactionInProcess.next(false);\n        transactionFinished.next(true);\n    }\n}\n// @internal\n/**\n * @return {?}\n */\nfunction isTransactionInProcess() {\n    return transactionManager.activeTransactions > 0;\n}\n// @internal\n/**\n * @return {?}\n */\nfunction commit() {\n    return transactionManager.batchTransaction ? transactionManager.batchTransaction.asObservable() : of(true);\n}\n/**\n *  A logical transaction.\n *  Use this transaction to optimize the dispatch of all the stores.\n *  The following code will update the store, BUT  emits only once\n *\n * \\@example\n *  applyTransaction(() => {\n *    this.todosStore.add(new Todo(1, title));\n *    this.todosStore.add(new Todo(2, title));\n *  });\n *\n * @template T\n * @param {?} action\n * @param {?=} thisArg\n * @return {?}\n */\nfunction applyTransaction(action$$1, thisArg) {\n    if (thisArg === void 0) { thisArg = undefined; }\n    startBatch();\n    try {\n        return action$$1.apply(thisArg);\n    }\n    finally {\n        logAction('@Transaction');\n        endBatch();\n    }\n}\n/**\n *  A logical transaction.\n *  Use this transaction to optimize the dispatch of all the stores.\n *\n *  The following code will update the store, BUT  emits only once.\n *\n * \\@example\n * \\@transaction\n *  addTodos() {\n *    this.todosStore.add(new Todo(1, title));\n *    this.todosStore.add(new Todo(2, title));\n *  }\n *\n *\n * @return {?}\n */\nfunction transaction() {\n    return (/**\n     * @param {?} target\n     * @param {?} propertyKey\n     * @param {?} descriptor\n     * @return {?}\n     */\n    function (target, propertyKey, descriptor) {\n        /** @type {?} */\n        var originalMethod = descriptor.value;\n        descriptor.value = (/**\n         * @param {...?} args\n         * @return {?}\n         */\n        function () {\n            var _this = this;\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return applyTransaction((/**\n             * @return {?}\n             */\n            function () {\n                return originalMethod.apply(_this, args);\n            }), this);\n        });\n        return descriptor;\n    });\n}\n/**\n *\n * RxJS custom operator that wraps the callback inside transaction\n *\n * \\@example\n *\n * return http.get().pipe(\n *    withTransaction(response > {\n *      store.setActive(1);\n *      store.update();\n *      store.updateEntity(1, {});\n *    })\n * )\n *\n * @template T\n * @param {?} transactionFn\n * @return {?}\n */\nfunction withTransaction(transactionFn) {\n    return (/**\n     * @param {?} source\n     * @return {?}\n     */\n    function (source) {\n        return source.pipe(tap((/**\n         * @param {?} value\n         * @return {?}\n         */\n        function (value) { return applyTransaction((/**\n         * @return {?}\n         */\n        function () { return transactionFn(value); })); })));\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} o\n * @return {?}\n */\nfunction deepFreeze(o) {\n    Object.freeze(o);\n    /** @type {?} */\n    var oIsFunction = typeof o === 'function';\n    /** @type {?} */\n    var hasOwnProp = Object.prototype.hasOwnProperty;\n    Object.getOwnPropertyNames(o).forEach((/**\n     * @param {?} prop\n     * @return {?}\n     */\n    function (prop) {\n        if (hasOwnProp.call(o, prop) &&\n            (oIsFunction ? prop !== 'caller' && prop !== 'callee' && prop !== 'arguments' : true) &&\n            o[prop] !== null &&\n            (typeof o[prop] === 'object' || typeof o[prop] === 'function') &&\n            !Object.isFrozen(o[prop])) {\n            deepFreeze(o[prop]);\n        }\n    }));\n    return o;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar configKey = 'akitaConfig';\n/**\n * @param {?} metadata\n * @return {?}\n */\nfunction StoreConfig(metadata) {\n    return (/**\n     * @param {?} constructor\n     * @return {?}\n     */\n    function (constructor) {\n        constructor[configKey] = { idKey: 'id' };\n        for (var i = 0, keys = Object.keys(metadata); i < keys.length; i++) {\n            /** @type {?} */\n            var key = keys[i];\n            /* name is preserved read only key */\n            if (key === 'name') {\n                constructor[configKey]['storeName'] = metadata[key];\n            }\n            else {\n                constructor[configKey][key] = metadata[key];\n            }\n        }\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar CONFIG = {\n    resettable: false\n};\n/**\n * @param {?} config\n * @return {?}\n */\nfunction akitaConfig(config) {\n    CONFIG = __assign({}, CONFIG, config);\n}\n// @internal\n/**\n * @return {?}\n */\nfunction getAkitaConfig() {\n    return CONFIG;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction toBoolean(value) {\n    return value != null && \"\" + value !== 'false';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isPlainObject(value) {\n    return toBoolean(value) && value.constructor.name === 'Object';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/** @type {?} */\nvar $$deleteStore = new Subject();\n// @internal\n/** @type {?} */\nvar $$addStore = new ReplaySubject(50, 5000);\n// @internal\n/** @type {?} */\nvar $$updateStore = new Subject();\n// @internal\n/**\n * @param {?} storeName\n * @return {?}\n */\nfunction dispatchDeleted(storeName) {\n    $$deleteStore.next(storeName);\n}\n// @internal\n/**\n * @param {?} storeName\n * @return {?}\n */\nfunction dispatchAdded(storeName) {\n    $$addStore.next(storeName);\n}\n// @internal\n/**\n * @param {?} storeName\n * @return {?}\n */\nfunction dispatchUpdate(storeName) {\n    $$updateStore.next(storeName);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar __DEV__ = true;\n/**\n * @return {?}\n */\nfunction enableAkitaProdMode() {\n    __DEV__ = false;\n}\n// @internal\n/**\n * @return {?}\n */\nfunction isDev() {\n    return __DEV__;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar isBrowser = typeof window !== 'undefined';\n/** @type {?} */\nvar isNotBrowser = !isBrowser;\n/** @type {?} */\nvar isNativeScript = typeof global !== 'undefined' && ((/** @type {?} */ (global))).__runtimeVersion !== 'undefined';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/** @type {?} */\nvar __stores__ = {};\n// @internal\n/** @type {?} */\nvar __queries__ = {};\nif (isBrowser && isDev()) {\n    ((/** @type {?} */ (window))).$$stores = __stores__;\n    ((/** @type {?} */ (window))).$$queries = __queries__;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n *\n * Store for managing any type of data\n *\n * \\@example\n *\n * export interface SessionState {\n *   token: string;\n *   userDetails: UserDetails\n * }\n *\n * export function createInitialState(): SessionState {\n *  return {\n *    token: '',\n *    userDetails: null\n *  };\n * }\n *\n * \\@StoreConfig({ name: 'session' })\n * export class SessionStore extends Store<SessionState> {\n *   constructor() {\n *    super(createInitialState());\n *   }\n * }\n * @template S\n */\nvar  /**\n *\n * Store for managing any type of data\n *\n * \\@example\n *\n * export interface SessionState {\n *   token: string;\n *   userDetails: UserDetails\n * }\n *\n * export function createInitialState(): SessionState {\n *  return {\n *    token: '',\n *    userDetails: null\n *  };\n * }\n *\n * \\@StoreConfig({ name: 'session' })\n * export class SessionStore extends Store<SessionState> {\n *   constructor() {\n *    super(createInitialState());\n *   }\n * }\n * @template S\n */\nStore = /** @class */ (function () {\n    function Store(initialState, options) {\n        if (options === void 0) { options = {}; }\n        this.options = options;\n        this.inTransaction = false;\n        this.cache = {\n            active: new BehaviorSubject(false),\n            ttl: null\n        };\n        this.onInit((/** @type {?} */ (initialState)));\n    }\n    /**\n     *  Set the loading state\n     *\n     *  @example\n     *\n     *  store.setLoading(true)\n     *\n     */\n    /**\n     *  Set the loading state\n     *\n     * \\@example\n     *\n     *  store.setLoading(true)\n     *\n     * @param {?=} loading\n     * @return {?}\n     */\n    Store.prototype.setLoading = /**\n     *  Set the loading state\n     *\n     * \\@example\n     *\n     *  store.setLoading(true)\n     *\n     * @param {?=} loading\n     * @return {?}\n     */\n    function (loading) {\n        if (loading === void 0) { loading = false; }\n        if (loading !== ((/** @type {?} */ (this._value()))).loading) {\n            isDev() && setAction('Set Loading');\n            this._setState((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return ((/** @type {?} */ (__assign({}, state, { loading: loading })))); }));\n        }\n    };\n    /**\n     *\n     * Set whether the data is cached\n     *\n     * @example\n     *\n     * store.setHasCache(true)\n     * store.setHasCache(false)\n     * store.setHasCache(true, { restartTTL: true })\n     *\n     */\n    /**\n     *\n     * Set whether the data is cached\n     *\n     * \\@example\n     *\n     * store.setHasCache(true)\n     * store.setHasCache(false)\n     * store.setHasCache(true, { restartTTL: true })\n     *\n     * @param {?} hasCache\n     * @param {?=} options\n     * @return {?}\n     */\n    Store.prototype.setHasCache = /**\n     *\n     * Set whether the data is cached\n     *\n     * \\@example\n     *\n     * store.setHasCache(true)\n     * store.setHasCache(false)\n     * store.setHasCache(true, { restartTTL: true })\n     *\n     * @param {?} hasCache\n     * @param {?=} options\n     * @return {?}\n     */\n    function (hasCache, options) {\n        var _this = this;\n        if (options === void 0) { options = { restartTTL: false }; }\n        if (hasCache !== this.cache.active.value) {\n            this.cache.active.next(hasCache);\n        }\n        if (options.restartTTL) {\n            /** @type {?} */\n            var ttlConfig = this.cacheConfig && this.cacheConfig.ttl;\n            if (ttlConfig) {\n                if (this.cache.ttl !== null) {\n                    clearTimeout(this.cache.ttl);\n                }\n                this.cache.ttl = (/** @type {?} */ (setTimeout((/**\n                 * @return {?}\n                 */\n                function () { return _this.setHasCache(false); }), ttlConfig)));\n            }\n        }\n    };\n    /**\n     *  Set the error state\n     *\n     *  @example\n     *\n     *  store.setError({text: 'unable to load data' })\n     *\n     */\n    /**\n     *  Set the error state\n     *\n     * \\@example\n     *\n     *  store.setError({text: 'unable to load data' })\n     *\n     * @template T\n     * @param {?} error\n     * @return {?}\n     */\n    Store.prototype.setError = /**\n     *  Set the error state\n     *\n     * \\@example\n     *\n     *  store.setError({text: 'unable to load data' })\n     *\n     * @template T\n     * @param {?} error\n     * @return {?}\n     */\n    function (error) {\n        if (error !== ((/** @type {?} */ (this._value()))).error) {\n            isDev() && setAction('Set Error');\n            this._setState((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return ((/** @type {?} */ (__assign({}, state, { error: error })))); }));\n        }\n    };\n    // @internal\n    // @internal\n    /**\n     * @template R\n     * @param {?} project\n     * @return {?}\n     */\n    Store.prototype._select = \n    // @internal\n    /**\n     * @template R\n     * @param {?} project\n     * @return {?}\n     */\n    function (project) {\n        return this.store.asObservable().pipe(map(project), distinctUntilChanged());\n    };\n    // @internal\n    // @internal\n    /**\n     * @return {?}\n     */\n    Store.prototype._value = \n    // @internal\n    /**\n     * @return {?}\n     */\n    function () {\n        return this.storeValue;\n    };\n    // @internal\n    // @internal\n    /**\n     * @return {?}\n     */\n    Store.prototype._cache = \n    // @internal\n    /**\n     * @return {?}\n     */\n    function () {\n        return this.cache.active;\n    };\n    Object.defineProperty(Store.prototype, \"config\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.constructor[configKey] || {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Store.prototype, \"storeName\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return ((/** @type {?} */ (this.config))).storeName || ((/** @type {?} */ (this.options))).storeName || this.options.name;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Store.prototype, \"deepFreeze\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.config.deepFreezeFn || this.options.deepFreezeFn || deepFreeze;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Store.prototype, \"cacheConfig\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.config.cache || this.options.cache;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Store.prototype, \"resettable\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.config.resettable || this.options.resettable;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // @internal\n    // @internal\n    /**\n     * @param {?} newStateFn\n     * @param {?=} _dispatchAction\n     * @return {?}\n     */\n    Store.prototype._setState = \n    // @internal\n    /**\n     * @param {?} newStateFn\n     * @param {?=} _dispatchAction\n     * @return {?}\n     */\n    function (newStateFn, _dispatchAction) {\n        if (_dispatchAction === void 0) { _dispatchAction = true; }\n        this.storeValue = __DEV__ ? this.deepFreeze(newStateFn(this._value())) : newStateFn(this._value());\n        if (!this.store) {\n            this.store = new BehaviorSubject(this.storeValue);\n            return;\n        }\n        if (isTransactionInProcess()) {\n            this.handleTransaction();\n            return;\n        }\n        this.dispatch(this.storeValue, _dispatchAction);\n    };\n    /**\n     *\n     * Reset the current store back to the initial value\n     *\n     * @example\n     *\n     * store.reset()\n     *\n     */\n    /**\n     *\n     * Reset the current store back to the initial value\n     *\n     * \\@example\n     *\n     * store.reset()\n     *\n     * @return {?}\n     */\n    Store.prototype.reset = /**\n     *\n     * Reset the current store back to the initial value\n     *\n     * \\@example\n     *\n     * store.reset()\n     *\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        if (this.isResettable()) {\n            isDev() && setAction('Reset');\n            this._setState((/**\n             * @return {?}\n             */\n            function () { return Object.assign({}, _this._initialState); }));\n            this.setHasCache(false);\n        }\n        else {\n            isDev() && console.warn(\"You need to enable the reset functionality\");\n        }\n    };\n    /**\n     * @param {?} stateOrCallback\n     * @return {?}\n     */\n    Store.prototype.update = /**\n     * @param {?} stateOrCallback\n     * @return {?}\n     */\n    function (stateOrCallback) {\n        var _this = this;\n        isDev() && setAction('Update');\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            /** @type {?} */\n            var newState = isFunction(stateOrCallback) ? stateOrCallback(state) : stateOrCallback;\n            /** @type {?} */\n            var merged = _this.akitaPreUpdate(state, (/** @type {?} */ (__assign({}, state, newState))));\n            return isPlainObject(state) ? merged : new ((/** @type {?} */ (state))).constructor(merged);\n        }));\n    };\n    /**\n     * @param {?} newOptions\n     * @return {?}\n     */\n    Store.prototype.updateStoreConfig = /**\n     * @param {?} newOptions\n     * @return {?}\n     */\n    function (newOptions) {\n        this.options = __assign({}, this.options, newOptions);\n    };\n    // @internal\n    // @internal\n    /**\n     * @param {?} _\n     * @param {?} nextState\n     * @return {?}\n     */\n    Store.prototype.akitaPreUpdate = \n    // @internal\n    /**\n     * @param {?} _\n     * @param {?} nextState\n     * @return {?}\n     */\n    function (_, nextState) {\n        return nextState;\n    };\n    /**\n     * @return {?}\n     */\n    Store.prototype.ngOnDestroy = /**\n     * @return {?}\n     */\n    function () {\n        this.destroy();\n    };\n    /**\n     *\n     * Destroy the store\n     *\n     * @example\n     *\n     * store.destroy()\n     *\n     */\n    /**\n     *\n     * Destroy the store\n     *\n     * \\@example\n     *\n     * store.destroy()\n     *\n     * @return {?}\n     */\n    Store.prototype.destroy = /**\n     *\n     * Destroy the store\n     *\n     * \\@example\n     *\n     * store.destroy()\n     *\n     * @return {?}\n     */\n    function () {\n        /** @type {?} */\n        var hmrEnabled = isBrowser ? ((/** @type {?} */ (window))).hmrEnabled : false;\n        if (!hmrEnabled && this === __stores__[this.storeName]) {\n            delete __stores__[this.storeName];\n            dispatchDeleted(this.storeName);\n            this.setHasCache(false);\n            this.cache.active.complete();\n        }\n    };\n    /**\n     * @private\n     * @param {?} initialState\n     * @return {?}\n     */\n    Store.prototype.onInit = /**\n     * @private\n     * @param {?} initialState\n     * @return {?}\n     */\n    function (initialState) {\n        __stores__[this.storeName] = this;\n        this._setState((/**\n         * @return {?}\n         */\n        function () { return initialState; }));\n        dispatchAdded(this.storeName);\n        if (this.isResettable()) {\n            this._initialState = initialState;\n        }\n        isDev() && assertStoreHasName(this.storeName, this.constructor.name);\n    };\n    /**\n     * @private\n     * @param {?} state\n     * @param {?=} _dispatchAction\n     * @return {?}\n     */\n    Store.prototype.dispatch = /**\n     * @private\n     * @param {?} state\n     * @param {?=} _dispatchAction\n     * @return {?}\n     */\n    function (state, _dispatchAction) {\n        if (_dispatchAction === void 0) { _dispatchAction = true; }\n        this.store.next(state);\n        if (_dispatchAction) {\n            dispatchUpdate(this.storeName);\n            resetCustomAction();\n        }\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    Store.prototype.watchTransaction = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        commit().subscribe((/**\n         * @return {?}\n         */\n        function () {\n            _this.inTransaction = false;\n            _this.dispatch(_this._value());\n        }));\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    Store.prototype.isResettable = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        if (this.resettable === false) {\n            return false;\n        }\n        return this.resettable || getAkitaConfig().resettable;\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    Store.prototype.handleTransaction = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        if (!this.inTransaction) {\n            this.watchTransaction();\n            this.inTransaction = true;\n        }\n    };\n    return Store;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} v\n * @return {?}\n */\nfunction isNil(v) {\n    return v === null || v === undefined;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isObject(value) {\n    /** @type {?} */\n    var type = typeof value;\n    return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} idOrOptions\n * @param {?} ids\n * @param {?} currentActive\n * @return {?}\n */\nfunction getActiveEntities(idOrOptions, ids, currentActive) {\n    /** @type {?} */\n    var result;\n    if (isArray(idOrOptions)) {\n        result = idOrOptions;\n    }\n    else {\n        if (isObject(idOrOptions)) {\n            if (isNil(currentActive))\n                return;\n            ((/** @type {?} */ (idOrOptions))) = Object.assign({ wrap: true }, idOrOptions);\n            /** @type {?} */\n            var currentIdIndex = ids.indexOf((/** @type {?} */ (currentActive)));\n            if (((/** @type {?} */ (idOrOptions))).prev) {\n                /** @type {?} */\n                var isFirst = currentIdIndex === 0;\n                if (isFirst && !((/** @type {?} */ (idOrOptions))).wrap)\n                    return;\n                result = isFirst ? ids[ids.length - 1] : ((/** @type {?} */ (ids[currentIdIndex - 1])));\n            }\n            else if (((/** @type {?} */ (idOrOptions))).next) {\n                /** @type {?} */\n                var isLast = ids.length === currentIdIndex + 1;\n                if (isLast && !((/** @type {?} */ (idOrOptions))).wrap)\n                    return;\n                result = isLast ? ids[0] : ((/** @type {?} */ (ids[currentIdIndex + 1])));\n            }\n        }\n        else {\n            if (idOrOptions === currentActive)\n                return;\n            result = (/** @type {?} */ (idOrOptions));\n        }\n    }\n    return result;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template S, E\n * @param {?} __0\n * @return {?}\n */\nfunction addEntities(_a) {\n    var state = _a.state, entities = _a.entities, idKey = _a.idKey, _b = _a.options, options = _b === void 0 ? {} : _b, preAddEntity = _a.preAddEntity;\n    var e_1, _c;\n    /** @type {?} */\n    var newEntities = {};\n    /** @type {?} */\n    var newIds = [];\n    /** @type {?} */\n    var hasNewEntities = false;\n    try {\n        for (var entities_1 = __values(entities), entities_1_1 = entities_1.next(); !entities_1_1.done; entities_1_1 = entities_1.next()) {\n            var entity = entities_1_1.value;\n            if (hasEntity(state.entities, entity[idKey]) === false) {\n                // evaluate the middleware first to support dynamic ids\n                /** @type {?} */\n                var current = preAddEntity(entity);\n                /** @type {?} */\n                var entityId = current[idKey];\n                newEntities[entityId] = current;\n                if (options.prepend)\n                    newIds.unshift(entityId);\n                else\n                    newIds.push(entityId);\n                hasNewEntities = true;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (entities_1_1 && !entities_1_1.done && (_c = entities_1.return)) _c.call(entities_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return hasNewEntities\n        ? {\n            newState: __assign({}, state, { entities: __assign({}, state.entities, newEntities), ids: options.prepend ? __spread(newIds, state.ids) : __spread(state.ids, newIds) }),\n            newIds: newIds\n        }\n        : null;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template T\n * @param {?} value\n * @return {?}\n */\nfunction coerceArray(value) {\n    if (isNil(value)) {\n        return [];\n    }\n    return Array.isArray(value) ? value : [value];\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template S, E\n * @param {?} __0\n * @return {?}\n */\nfunction removeEntities(_a) {\n    var state = _a.state, ids = _a.ids;\n    var e_1, _b;\n    if (isNil(ids))\n        return removeAllEntities(state);\n    /** @type {?} */\n    var entities = state.entities;\n    /** @type {?} */\n    var newEntities = {};\n    try {\n        for (var _c = __values(state.ids), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var id = _d.value;\n            if (ids.includes(id) === false) {\n                newEntities[id] = entities[id];\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    /** @type {?} */\n    var newState = __assign({}, state, { entities: newEntities, ids: state.ids.filter((/**\n         * @param {?} current\n         * @return {?}\n         */\n        function (current) { return ids.includes(current) === false; })) });\n    if (hasActiveState(state)) {\n        newState.active = resolveActiveEntity(newState);\n    }\n    return newState;\n}\n// @internal\n/**\n * @template S\n * @param {?} state\n * @return {?}\n */\nfunction removeAllEntities(state) {\n    return __assign({}, state, { entities: {}, ids: [], active: isMultiActiveState(state.active) ? [] : null });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/** @type {?} */\nvar getInitialEntitiesState = (/**\n * @return {?}\n */\nfunction () {\n    return ((/** @type {?} */ ({\n        entities: {},\n        ids: [],\n        loading: true,\n        error: null\n    })));\n});\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} val\n * @return {?}\n */\nfunction isDefined(val) {\n    return isNil(val) === false;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template S, E\n * @param {?} __0\n * @return {?}\n */\nfunction updateEntities(_a) {\n    var state = _a.state, ids = _a.ids, idKey = _a.idKey, newStateOrFn = _a.newStateOrFn, preUpdateEntity = _a.preUpdateEntity;\n    var e_1, _b;\n    /** @type {?} */\n    var updatedEntities = {};\n    /** @type {?} */\n    var isUpdatingIdKey = false;\n    /** @type {?} */\n    var idToUpdate;\n    try {\n        for (var ids_1 = __values(ids), ids_1_1 = ids_1.next(); !ids_1_1.done; ids_1_1 = ids_1.next()) {\n            var id = ids_1_1.value;\n            // if the entity doesn't exist don't do anything\n            if (hasEntity(state.entities, id) === false) {\n                continue;\n            }\n            /** @type {?} */\n            var oldEntity = state.entities[id];\n            /** @type {?} */\n            var newState = isFunction(newStateOrFn) ? newStateOrFn(oldEntity) : newStateOrFn;\n            /** @type {?} */\n            var isIdChanged = newState.hasOwnProperty(idKey) && newState[idKey] !== oldEntity[idKey];\n            /** @type {?} */\n            var newEntity = void 0;\n            idToUpdate = id;\n            if (isIdChanged) {\n                isUpdatingIdKey = true;\n                idToUpdate = newState[idKey];\n            }\n            /** @type {?} */\n            var merged = __assign({}, oldEntity, newState);\n            if (isPlainObject(oldEntity)) {\n                newEntity = merged;\n            }\n            else {\n                /**\n                 * In case that new state is class of it's own, there's\n                 * a possibility that it will be different than the old\n                 * class.\n                 * For example, Old state is an instance of animal class\n                 * and new state is instance of person class.\n                 * To avoid run over new person class with the old animal\n                 * class we check if the new state is a class of it's own.\n                 * If so, use it. Otherwise, use the old state class\n                 */\n                if (isPlainObject(newState)) {\n                    newEntity = new ((/** @type {?} */ (oldEntity))).constructor(merged);\n                }\n                else {\n                    newEntity = new ((/** @type {?} */ (newState))).constructor(merged);\n                }\n            }\n            updatedEntities[idToUpdate] = preUpdateEntity(oldEntity, newEntity);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (ids_1_1 && !ids_1_1.done && (_b = ids_1.return)) _b.call(ids_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    /** @type {?} */\n    var updatedIds = state.ids;\n    /** @type {?} */\n    var stateEntities = state.entities;\n    if (isUpdatingIdKey) {\n        var _c = __read(ids, 1), id_1 = _c[0];\n        var _d = state.entities, _e = id_1, deletedEntity = _d[_e], rest = __rest(_d, [typeof _e === \"symbol\" ? _e : _e + \"\"]);\n        stateEntities = rest;\n        updatedIds = state.ids.map((/**\n         * @param {?} current\n         * @return {?}\n         */\n        function (current) { return (current === id_1 ? idToUpdate : current); }));\n    }\n    return __assign({}, state, { entities: __assign({}, stateEntities, updatedEntities), ids: updatedIds });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isUndefined(value) {\n    return value === undefined;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @enum {number} */\nvar EntityActions = {\n    Set: 0,\n    Add: 1,\n    Update: 2,\n    Remove: 3,\n};\nEntityActions[EntityActions.Set] = 'Set';\nEntityActions[EntityActions.Add] = 'Add';\nEntityActions[EntityActions.Update] = 'Update';\nEntityActions[EntityActions.Remove] = 'Remove';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar DEFAULT_ID_KEY = 'id';\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n *\n * Store for managing a collection of entities\n *\n * \\@example\n *\n * export interface WidgetsState extends EntityState<Widget> { }\n *\n * \\@StoreConfig({ name: 'widgets' })\n *  export class WidgetsStore extends EntityStore<WidgetsState> {\n *   constructor() {\n *     super();\n *   }\n * }\n *\n *\n * @template S, EntityType, IDType\n */\nvar EntityStore = /** @class */ (function (_super) {\n    __extends(EntityStore, _super);\n    function EntityStore(initialState, options) {\n        if (initialState === void 0) { initialState = {}; }\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, __assign({}, getInitialEntitiesState(), initialState), options) || this;\n        _this.options = options;\n        _this.entityActions = new Subject();\n        return _this;\n    }\n    Object.defineProperty(EntityStore.prototype, \"selectEntityAction$\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.entityActions.asObservable();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EntityStore.prototype, \"idKey\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return ((/** @type {?} */ (this.config))).idKey || this.options.idKey || DEFAULT_ID_KEY;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     *\n     * Replace current collection with provided collection\n     *\n     * @example\n     *\n     * this.store.set([Entity, Entity])\n     * this.store.set({ids: [], entities: {}})\n     * this.store.set({ 1: {}, 2: {}})\n     *\n     */\n    /**\n     *\n     * Replace current collection with provided collection\n     *\n     * \\@example\n     *\n     * this.store.set([Entity, Entity])\n     * this.store.set({ids: [], entities: {}})\n     * this.store.set({ 1: {}, 2: {}})\n     *\n     * @param {?} entities\n     * @return {?}\n     */\n    EntityStore.prototype.set = /**\n     *\n     * Replace current collection with provided collection\n     *\n     * \\@example\n     *\n     * this.store.set([Entity, Entity])\n     * this.store.set({ids: [], entities: {}})\n     * this.store.set({ 1: {}, 2: {}})\n     *\n     * @param {?} entities\n     * @return {?}\n     */\n    function (entities) {\n        var _this = this;\n        if (isNil(entities))\n            return;\n        isDev() && setAction('Set Entity');\n        /** @type {?} */\n        var isNativePreAdd = this.akitaPreAddEntity === EntityStore.prototype.akitaPreAddEntity;\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            return setEntities({\n                state: state,\n                entities: entities,\n                idKey: _this.idKey,\n                preAddEntity: _this.akitaPreAddEntity,\n                isNativePreAdd: isNativePreAdd\n            });\n        }));\n        this.setHasCache(true, { restartTTL: true });\n        if (this.hasInitialUIState()) {\n            this.handleUICreation();\n        }\n        this.entityActions.next({ type: EntityActions.Set, ids: this.ids });\n    };\n    /**\n     * Add entities\n     *\n     * @example\n     *\n     * this.store.add([Entity, Entity])\n     * this.store.add(Entity)\n     * this.store.add(Entity, { prepend: true })\n     *\n     * this.store.add(Entity, { loading: false })\n     */\n    /**\n     * Add entities\n     *\n     * \\@example\n     *\n     * this.store.add([Entity, Entity])\n     * this.store.add(Entity)\n     * this.store.add(Entity, { prepend: true })\n     *\n     * this.store.add(Entity, { loading: false })\n     * @param {?} entities\n     * @param {?=} options\n     * @return {?}\n     */\n    EntityStore.prototype.add = /**\n     * Add entities\n     *\n     * \\@example\n     *\n     * this.store.add([Entity, Entity])\n     * this.store.add(Entity)\n     * this.store.add(Entity, { prepend: true })\n     *\n     * this.store.add(Entity, { loading: false })\n     * @param {?} entities\n     * @param {?=} options\n     * @return {?}\n     */\n    function (entities, options) {\n        if (options === void 0) { options = { loading: false }; }\n        /** @type {?} */\n        var collection = coerceArray(entities);\n        if (isEmpty(collection))\n            return;\n        /** @type {?} */\n        var data = addEntities({\n            state: this._value(),\n            preAddEntity: this.akitaPreAddEntity,\n            entities: collection,\n            idKey: this.idKey,\n            options: options\n        });\n        if (data) {\n            isDev() && setAction('Add Entity');\n            data.newState.loading = options.loading;\n            this._setState((/**\n             * @return {?}\n             */\n            function () { return data.newState; }));\n            if (this.hasInitialUIState()) {\n                this.handleUICreation(true);\n            }\n            this.entityActions.next({ type: EntityActions.Add, ids: data.newIds });\n        }\n    };\n    /**\n     * @param {?} idsOrFnOrState\n     * @param {?=} newStateOrFn\n     * @return {?}\n     */\n    EntityStore.prototype.update = /**\n     * @param {?} idsOrFnOrState\n     * @param {?=} newStateOrFn\n     * @return {?}\n     */\n    function (idsOrFnOrState, newStateOrFn) {\n        var _this = this;\n        if (isUndefined(newStateOrFn)) {\n            _super.prototype.update.call(this, (/** @type {?} */ (idsOrFnOrState)));\n            return;\n        }\n        /** @type {?} */\n        var ids = [];\n        if (isFunction(idsOrFnOrState)) {\n            // We need to filter according the predicate function\n            ids = this.ids.filter((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) { return ((/** @type {?} */ (idsOrFnOrState)))(_this.entities[id]); }));\n        }\n        else {\n            // If it's nil we want all of them\n            ids = isNil(idsOrFnOrState) ? this.ids : coerceArray((/** @type {?} */ (idsOrFnOrState)));\n        }\n        if (isEmpty(ids))\n            return;\n        isDev() && setAction('Update Entity', ids);\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            return updateEntities({\n                idKey: _this.idKey,\n                ids: ids,\n                preUpdateEntity: _this.akitaPreUpdateEntity,\n                state: state,\n                newStateOrFn: newStateOrFn\n            });\n        }));\n        this.entityActions.next({ type: EntityActions.Update, ids: ids });\n    };\n    /**\n     *\n     * Create or update\n     *\n     * @example\n     *\n     * store.upsert(1, { active: true })\n     * store.upsert([2, 3], { active: true })\n     * store.upsert([2, 3], entity => ({ isOpen: !entity.isOpen}))\n     *\n     */\n    /**\n     *\n     * Create or update\n     *\n     * \\@example\n     *\n     * store.upsert(1, { active: true })\n     * store.upsert([2, 3], { active: true })\n     * store.upsert([2, 3], entity => ({ isOpen: !entity.isOpen}))\n     *\n     * @param {?} ids\n     * @param {?} newState\n     * @param {?=} options\n     * @return {?}\n     */\n    EntityStore.prototype.upsert = /**\n     *\n     * Create or update\n     *\n     * \\@example\n     *\n     * store.upsert(1, { active: true })\n     * store.upsert([2, 3], { active: true })\n     * store.upsert([2, 3], entity => ({ isOpen: !entity.isOpen}))\n     *\n     * @param {?} ids\n     * @param {?} newState\n     * @param {?=} options\n     * @return {?}\n     */\n    function (ids, newState, options) {\n        var _this = this;\n        if (options === void 0) { options = {}; }\n        /** @type {?} */\n        var toArray = coerceArray(ids);\n        /** @type {?} */\n        var predicate = (/**\n         * @param {?} isUpdate\n         * @return {?}\n         */\n        function (isUpdate) { return (/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return hasEntity(_this.entities, id) === isUpdate; }); });\n        /** @type {?} */\n        var isClassBased = isFunction(options.baseClass);\n        /** @type {?} */\n        var updateIds = toArray.filter(predicate(true));\n        /** @type {?} */\n        var newEntities = toArray.filter(predicate(false)).map((/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) {\n            var _a;\n            /** @type {?} */\n            var entity = isFunction(newState) ? newState((/** @type {?} */ ({}))) : newState;\n            /** @type {?} */\n            var withId = __assign({}, ((/** @type {?} */ (entity))), (_a = {}, _a[_this.idKey] = id, _a));\n            if (isClassBased) {\n                return new options.baseClass(withId);\n            }\n            return withId;\n        }));\n        // it can be any of the three types\n        this.update((/** @type {?} */ (updateIds)), (/** @type {?} */ (newState)));\n        this.add(newEntities);\n        isDev() && logAction('Upsert Entity');\n    };\n    /**\n     *\n     * Upsert entity collection (idKey must be present)\n     *\n     * @example\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }]);\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { loading: true  });\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { baseClass: Todo  });\n     *\n     */\n    /**\n     *\n     * Upsert entity collection (idKey must be present)\n     *\n     * \\@example\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }]);\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { loading: true  });\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { baseClass: Todo  });\n     *\n     * @param {?} entities\n     * @param {?=} options\n     * @return {?}\n     */\n    EntityStore.prototype.upsertMany = /**\n     *\n     * Upsert entity collection (idKey must be present)\n     *\n     * \\@example\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }]);\n     *\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { loading: true  });\n     * store.upsertMany([ { id: 1 }, { id: 2 }], { baseClass: Todo  });\n     *\n     * @param {?} entities\n     * @param {?=} options\n     * @return {?}\n     */\n    function (entities, options) {\n        if (options === void 0) { options = {}; }\n        var e_1, _a;\n        /** @type {?} */\n        var addedIds = [];\n        /** @type {?} */\n        var updatedIds = [];\n        /** @type {?} */\n        var updatedEntities = {};\n        try {\n            // Update the state directly to optimize performance\n            for (var entities_1 = __values(entities), entities_1_1 = entities_1.next(); !entities_1_1.done; entities_1_1 = entities_1.next()) {\n                var entity = entities_1_1.value;\n                /** @type {?} */\n                var withPreCheckHook = this.akitaPreCheckEntity(entity);\n                /** @type {?} */\n                var id = withPreCheckHook[this.idKey];\n                if (hasEntity(this.entities, id)) {\n                    /** @type {?} */\n                    var prev = this._value().entities[id];\n                    /** @type {?} */\n                    var merged = __assign({}, this._value().entities[id], withPreCheckHook);\n                    /** @type {?} */\n                    var next = options.baseClass ? new options.baseClass(merged) : merged;\n                    /** @type {?} */\n                    var withHook = this.akitaPreUpdateEntity(prev, next);\n                    /** @type {?} */\n                    var nextId = withHook[this.idKey];\n                    updatedEntities[nextId] = withHook;\n                    updatedIds.push(nextId);\n                }\n                else {\n                    /** @type {?} */\n                    var newEntity = options.baseClass ? new options.baseClass(withPreCheckHook) : withPreCheckHook;\n                    /** @type {?} */\n                    var withHook = this.akitaPreAddEntity(newEntity);\n                    /** @type {?} */\n                    var nextId = withHook[this.idKey];\n                    addedIds.push(nextId);\n                    updatedEntities[nextId] = withHook;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (entities_1_1 && !entities_1_1.done && (_a = entities_1.return)) _a.call(entities_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        isDev() && logAction('Upsert Many');\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return (__assign({}, state, { ids: addedIds.length ? __spread(state.ids, addedIds) : state.ids, entities: __assign({}, state.entities, updatedEntities), loading: !!options.loading })); }));\n        updatedIds.length && this.entityActions.next({ type: EntityActions.Update, ids: updatedIds });\n        addedIds.length && this.entityActions.next({ type: EntityActions.Add, ids: addedIds });\n        if (addedIds.length && this.hasUIStore()) {\n            this.handleUICreation(true);\n        }\n    };\n    /**\n     *\n     * Replace one or more entities (except the id property)\n     *\n     *\n     * @example\n     *\n     * this.store.replace(5, newEntity)\n     * this.store.replace([1,2,3], newEntity)\n     */\n    /**\n     *\n     * Replace one or more entities (except the id property)\n     *\n     *\n     * \\@example\n     *\n     * this.store.replace(5, newEntity)\n     * this.store.replace([1,2,3], newEntity)\n     * @param {?} ids\n     * @param {?} newState\n     * @return {?}\n     */\n    EntityStore.prototype.replace = /**\n     *\n     * Replace one or more entities (except the id property)\n     *\n     *\n     * \\@example\n     *\n     * this.store.replace(5, newEntity)\n     * this.store.replace([1,2,3], newEntity)\n     * @param {?} ids\n     * @param {?} newState\n     * @return {?}\n     */\n    function (ids, newState) {\n        var e_2, _a;\n        /** @type {?} */\n        var toArray = coerceArray(ids);\n        if (isEmpty(toArray))\n            return;\n        /** @type {?} */\n        var replaced = {};\n        try {\n            for (var toArray_1 = __values(toArray), toArray_1_1 = toArray_1.next(); !toArray_1_1.done; toArray_1_1 = toArray_1.next()) {\n                var id = toArray_1_1.value;\n                newState[this.idKey] = id;\n                replaced[id] = newState;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (toArray_1_1 && !toArray_1_1.done && (_a = toArray_1.return)) _a.call(toArray_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        isDev() && setAction('Replace Entity', ids);\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return (__assign({}, state, { entities: __assign({}, state.entities, replaced) })); }));\n    };\n    /**\n     *\n     * Move entity inside the collection\n     *\n     *\n     * @example\n     *\n     * this.store.move(fromIndex, toIndex)\n     */\n    /**\n     *\n     * Move entity inside the collection\n     *\n     *\n     * \\@example\n     *\n     * this.store.move(fromIndex, toIndex)\n     * @param {?} from\n     * @param {?} to\n     * @return {?}\n     */\n    EntityStore.prototype.move = /**\n     *\n     * Move entity inside the collection\n     *\n     *\n     * \\@example\n     *\n     * this.store.move(fromIndex, toIndex)\n     * @param {?} from\n     * @param {?} to\n     * @return {?}\n     */\n    function (from$$1, to) {\n        /** @type {?} */\n        var ids = this.ids.slice();\n        ids.splice(to < 0 ? ids.length + to : to, 0, ids.splice(from$$1, 1)[0]);\n        isDev() && setAction('Move Entity');\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return (__assign({}, state, { entities: __assign({}, state.entities), ids: ids })); }));\n    };\n    /**\n     * @param {?=} idsOrFn\n     * @return {?}\n     */\n    EntityStore.prototype.remove = /**\n     * @param {?=} idsOrFn\n     * @return {?}\n     */\n    function (idsOrFn) {\n        var _this = this;\n        if (isEmpty(this.ids))\n            return;\n        /** @type {?} */\n        var idPassed = isDefined(idsOrFn);\n        // null means remove all\n        /** @type {?} */\n        var ids = [];\n        if (isFunction(idsOrFn)) {\n            ids = this.ids.filter((/**\n             * @param {?} entityId\n             * @return {?}\n             */\n            function (entityId) { return idsOrFn(_this.entities[entityId]); }));\n        }\n        else {\n            ids = idPassed ? coerceArray(idsOrFn) : null;\n        }\n        if (isEmpty(ids))\n            return;\n        isDev() && setAction('Remove Entity', ids);\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return removeEntities({ state: state, ids: ids }); }));\n        if (ids === null) {\n            this.setHasCache(false);\n        }\n        this.handleUIRemove(ids);\n        this.entityActions.next({ type: EntityActions.Remove, ids: ids });\n    };\n    /**\n     *\n     * Update the active entity\n     *\n     * @example\n     *\n     * this.store.updateActive({ completed: true })\n     * this.store.updateActive(active => {\n     *   return {\n     *     config: {\n     *      ..active.config,\n     *      date\n     *     }\n     *   }\n     * })\n     */\n    /**\n     *\n     * Update the active entity\n     *\n     * \\@example\n     *\n     * this.store.updateActive({ completed: true })\n     * this.store.updateActive(active => {\n     *   return {\n     *     config: {\n     *      ..active.config,\n     *      date\n     *     }\n     *   }\n     * })\n     * @param {?} newStateOrCallback\n     * @return {?}\n     */\n    EntityStore.prototype.updateActive = /**\n     *\n     * Update the active entity\n     *\n     * \\@example\n     *\n     * this.store.updateActive({ completed: true })\n     * this.store.updateActive(active => {\n     *   return {\n     *     config: {\n     *      ..active.config,\n     *      date\n     *     }\n     *   }\n     * })\n     * @param {?} newStateOrCallback\n     * @return {?}\n     */\n    function (newStateOrCallback) {\n        /** @type {?} */\n        var ids = coerceArray(this.active);\n        isDev() && setAction('Update Active', ids);\n        this.update(ids, (/** @type {?} */ (newStateOrCallback)));\n    };\n    /**\n     * @param {?} idOrOptions\n     * @return {?}\n     */\n    EntityStore.prototype.setActive = /**\n     * @param {?} idOrOptions\n     * @return {?}\n     */\n    function (idOrOptions) {\n        /** @type {?} */\n        var active = getActiveEntities(idOrOptions, this.ids, this.active);\n        if (active === undefined) {\n            return;\n        }\n        isDev() && setAction('Set Active', active);\n        this._setActive(active);\n    };\n    /**\n     * Add active entities\n     *\n     * @example\n     *\n     * store.addActive(2);\n     * store.addActive([3, 4, 5]);\n     */\n    /**\n     * Add active entities\n     *\n     * \\@example\n     *\n     * store.addActive(2);\n     * store.addActive([3, 4, 5]);\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    EntityStore.prototype.addActive = /**\n     * Add active entities\n     *\n     * \\@example\n     *\n     * store.addActive(2);\n     * store.addActive([3, 4, 5]);\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    function (ids) {\n        var _this = this;\n        /** @type {?} */\n        var toArray = coerceArray(ids);\n        if (isEmpty(toArray))\n            return;\n        /** @type {?} */\n        var everyExist = toArray.every((/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return _this.active.indexOf(id) > -1; }));\n        if (everyExist)\n            return;\n        isDev() && setAction('Add Active', ids);\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            /**\n             * Protect against case that one of the items in the array exist\n             * @type {?}\n             */\n            var uniques = Array.from(new Set(__spread(((/** @type {?} */ (state.active))), toArray)));\n            return __assign({}, state, { active: uniques });\n        }));\n    };\n    /**\n     * Remove active entities\n     *\n     * @example\n     *\n     * store.removeActive(2)\n     * store.removeActive([3, 4, 5])\n     */\n    /**\n     * Remove active entities\n     *\n     * \\@example\n     *\n     * store.removeActive(2)\n     * store.removeActive([3, 4, 5])\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    EntityStore.prototype.removeActive = /**\n     * Remove active entities\n     *\n     * \\@example\n     *\n     * store.removeActive(2)\n     * store.removeActive([3, 4, 5])\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    function (ids) {\n        var _this = this;\n        /** @type {?} */\n        var toArray = coerceArray(ids);\n        if (isEmpty(toArray))\n            return;\n        /** @type {?} */\n        var someExist = toArray.some((/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return _this.active.indexOf(id) > -1; }));\n        if (!someExist)\n            return;\n        isDev() && setAction('Remove Active', ids);\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            return __assign({}, state, { active: Array.isArray(state.active) ? state.active.filter((/**\n                 * @param {?} currentId\n                 * @return {?}\n                 */\n                function (currentId) { return toArray.indexOf(currentId) === -1; })) : null });\n        }));\n    };\n    /**\n     * Toggle active entities\n     *\n     * @example\n     *\n     * store.toggle(2)\n     * store.toggle([3, 4, 5])\n     */\n    /**\n     * Toggle active entities\n     *\n     * \\@example\n     *\n     * store.toggle(2)\n     * store.toggle([3, 4, 5])\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    EntityStore.prototype.toggleActive = /**\n     * Toggle active entities\n     *\n     * \\@example\n     *\n     * store.toggle(2)\n     * store.toggle([3, 4, 5])\n     * @template T\n     * @param {?} ids\n     * @return {?}\n     */\n    function (ids) {\n        var _this = this;\n        /** @type {?} */\n        var toArray = coerceArray(ids);\n        /** @type {?} */\n        var filterExists = (/**\n         * @param {?} remove\n         * @return {?}\n         */\n        function (remove) { return (/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return _this.active.includes(id) === remove; }); });\n        /** @type {?} */\n        var remove = toArray.filter(filterExists(true));\n        /** @type {?} */\n        var add = toArray.filter(filterExists(false));\n        this.removeActive(remove);\n        this.addActive(add);\n        isDev() && logAction('Toggle Active');\n    };\n    /**\n     *\n     * Create sub UI store for managing Entity's UI state\n     *\n     * @example\n     *\n     * export type ProductUI = {\n     *   isLoading: boolean;\n     *   isOpen: boolean\n     * }\n     *\n     * interface ProductsUIState extends EntityState<ProductUI> {}\n     *\n     * export class ProductsStore EntityStore<ProductsState, Product> {\n     *   ui: EntityUIStore<ProductsUIState, ProductUI>;\n     *\n     *   constructor() {\n     *     super();\n     *     this.createUIStore();\n     *   }\n     *\n     * }\n     */\n    /**\n     *\n     * Create sub UI store for managing Entity's UI state\n     *\n     * \\@example\n     *\n     * export type ProductUI = {\n     *   isLoading: boolean;\n     *   isOpen: boolean\n     * }\n     *\n     * interface ProductsUIState extends EntityState<ProductUI> {}\n     *\n     * export class ProductsStore EntityStore<ProductsState, Product> {\n     *   ui: EntityUIStore<ProductsUIState, ProductUI>;\n     *\n     *   constructor() {\n     *     super();\n     *     this.createUIStore();\n     *   }\n     *\n     * }\n     * @param {?=} initialState\n     * @param {?=} storeConfig\n     * @return {?}\n     */\n    EntityStore.prototype.createUIStore = /**\n     *\n     * Create sub UI store for managing Entity's UI state\n     *\n     * \\@example\n     *\n     * export type ProductUI = {\n     *   isLoading: boolean;\n     *   isOpen: boolean\n     * }\n     *\n     * interface ProductsUIState extends EntityState<ProductUI> {}\n     *\n     * export class ProductsStore EntityStore<ProductsState, Product> {\n     *   ui: EntityUIStore<ProductsUIState, ProductUI>;\n     *\n     *   constructor() {\n     *     super();\n     *     this.createUIStore();\n     *   }\n     *\n     * }\n     * @param {?=} initialState\n     * @param {?=} storeConfig\n     * @return {?}\n     */\n    function (initialState, storeConfig) {\n        if (initialState === void 0) { initialState = {}; }\n        if (storeConfig === void 0) { storeConfig = {}; }\n        /** @type {?} */\n        var defaults = { name: \"UI/\" + this.storeName, idKey: this.idKey };\n        this.ui = new EntityUIStore(initialState, __assign({}, defaults, storeConfig));\n        return this.ui;\n    };\n    // @internal\n    // @internal\n    /**\n     * @return {?}\n     */\n    EntityStore.prototype.destroy = \n    // @internal\n    /**\n     * @return {?}\n     */\n    function () {\n        _super.prototype.destroy.call(this);\n        if (this.ui instanceof EntityStore) {\n            this.ui.destroy();\n        }\n        this.entityActions.complete();\n    };\n    // @internal\n    // @internal\n    /**\n     * @param {?} _\n     * @param {?} nextEntity\n     * @return {?}\n     */\n    EntityStore.prototype.akitaPreUpdateEntity = \n    // @internal\n    /**\n     * @param {?} _\n     * @param {?} nextEntity\n     * @return {?}\n     */\n    function (_, nextEntity) {\n        return nextEntity;\n    };\n    // @internal\n    // @internal\n    /**\n     * @param {?} newEntity\n     * @return {?}\n     */\n    EntityStore.prototype.akitaPreAddEntity = \n    // @internal\n    /**\n     * @param {?} newEntity\n     * @return {?}\n     */\n    function (newEntity) {\n        return newEntity;\n    };\n    // @internal\n    // @internal\n    /**\n     * @param {?} newEntity\n     * @return {?}\n     */\n    EntityStore.prototype.akitaPreCheckEntity = \n    // @internal\n    /**\n     * @param {?} newEntity\n     * @return {?}\n     */\n    function (newEntity) {\n        return newEntity;\n    };\n    Object.defineProperty(EntityStore.prototype, \"ids\", {\n        get: /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            return this._value().ids;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EntityStore.prototype, \"entities\", {\n        get: /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            return this._value().entities;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(EntityStore.prototype, \"active\", {\n        get: /**\n         * @private\n         * @return {?}\n         */\n        function () {\n            return this._value().active;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @private\n     * @param {?} ids\n     * @return {?}\n     */\n    EntityStore.prototype._setActive = /**\n     * @private\n     * @param {?} ids\n     * @return {?}\n     */\n    function (ids) {\n        this._setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) {\n            return __assign({}, state, { active: ids });\n        }));\n    };\n    /**\n     * @private\n     * @param {?=} add\n     * @return {?}\n     */\n    EntityStore.prototype.handleUICreation = /**\n     * @private\n     * @param {?=} add\n     * @return {?}\n     */\n    function (add) {\n        var _this = this;\n        if (add === void 0) { add = false; }\n        /** @type {?} */\n        var ids = this.ids;\n        /** @type {?} */\n        var isFunc = isFunction(this.ui._akitaCreateEntityFn);\n        /** @type {?} */\n        var uiEntities;\n        /** @type {?} */\n        var createFn = (/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) {\n            var _a;\n            /** @type {?} */\n            var current = _this.entities[id];\n            /** @type {?} */\n            var ui = isFunc ? _this.ui._akitaCreateEntityFn(current) : _this.ui._akitaCreateEntityFn;\n            return __assign((_a = {}, _a[_this.idKey] = current[_this.idKey], _a), ui);\n        });\n        if (add) {\n            uiEntities = this.ids.filter((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) { return isUndefined(_this.ui.entities[id]); })).map(createFn);\n        }\n        else {\n            uiEntities = ids.map(createFn);\n        }\n        add ? this.ui.add(uiEntities) : this.ui.set(uiEntities);\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    EntityStore.prototype.hasInitialUIState = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        return this.hasUIStore() && isUndefined(this.ui._akitaCreateEntityFn) === false;\n    };\n    /**\n     * @private\n     * @param {?} ids\n     * @return {?}\n     */\n    EntityStore.prototype.handleUIRemove = /**\n     * @private\n     * @param {?} ids\n     * @return {?}\n     */\n    function (ids) {\n        if (this.hasUIStore()) {\n            this.ui.remove(ids);\n        }\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    EntityStore.prototype.hasUIStore = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        return this.ui instanceof EntityUIStore;\n    };\n    var _a;\n    __decorate([\n        transaction(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object, Object, Object]),\n        __metadata(\"design:returntype\", void 0)\n    ], EntityStore.prototype, \"upsert\", null);\n    __decorate([\n        transaction(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [typeof (_a = typeof T !== \"undefined\" && T) === \"function\" ? _a : Object]),\n        __metadata(\"design:returntype\", void 0)\n    ], EntityStore.prototype, \"toggleActive\", null);\n    return EntityStore;\n}(Store));\n// @internal\n/**\n * @template UIState, DEPRECATED\n */\nvar  \n// @internal\n/**\n * @template UIState, DEPRECATED\n */\nEntityUIStore = /** @class */ (function (_super) {\n    __extends(EntityUIStore, _super);\n    function EntityUIStore(initialState, storeConfig) {\n        if (initialState === void 0) { initialState = {}; }\n        if (storeConfig === void 0) { storeConfig = {}; }\n        return _super.call(this, initialState, storeConfig) || this;\n    }\n    /**\n     *\n     * Set the initial UI entity state. This function will determine the entity's\n     * initial state when we call `set()` or `add()`.\n     *\n     * @example\n     *\n     * constructor() {\n     *   super();\n     *   this.createUIStore().setInitialEntityState(entity => ({ isLoading: false, isOpen: true }));\n     *   this.createUIStore().setInitialEntityState({ isLoading: false, isOpen: true });\n     * }\n     *\n     */\n    /**\n     *\n     * Set the initial UI entity state. This function will determine the entity's\n     * initial state when we call `set()` or `add()`.\n     *\n     * \\@example\n     *\n     * constructor() {\n     *   super();\n     *   this.createUIStore().setInitialEntityState(entity => ({ isLoading: false, isOpen: true }));\n     *   this.createUIStore().setInitialEntityState({ isLoading: false, isOpen: true });\n     * }\n     *\n     * @template EntityUI, Entity\n     * @param {?} createFn\n     * @return {?}\n     */\n    EntityUIStore.prototype.setInitialEntityState = /**\n     *\n     * Set the initial UI entity state. This function will determine the entity's\n     * initial state when we call `set()` or `add()`.\n     *\n     * \\@example\n     *\n     * constructor() {\n     *   super();\n     *   this.createUIStore().setInitialEntityState(entity => ({ isLoading: false, isOpen: true }));\n     *   this.createUIStore().setInitialEntityState({ isLoading: false, isOpen: true });\n     * }\n     *\n     * @template EntityUI, Entity\n     * @param {?} createFn\n     * @return {?}\n     */\n    function (createFn) {\n        this._akitaCreateEntityFn = createFn;\n    };\n    return EntityUIStore;\n}(EntityStore));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar queryConfigKey = 'akitaQueryConfig';\n/**\n * @template E\n * @param {?} metadata\n * @return {?}\n */\nfunction QueryConfig(metadata) {\n    return (/**\n     * @param {?} constructor\n     * @return {?}\n     */\n    function (constructor) {\n        constructor[queryConfigKey] = {};\n        for (var i = 0, keys = Object.keys(metadata); i < keys.length; i++) {\n            /** @type {?} */\n            var key = keys[i];\n            constructor[queryConfigKey][key] = metadata[key];\n        }\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isString(value) {\n    return typeof value === 'string';\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template T\n * @param {?} keysOrFuncs\n * @return {?}\n */\nfunction compareKeys(keysOrFuncs) {\n    return (/**\n     * @template T\n     * @param {?} prevState\n     * @param {?} currState\n     * @return {?}\n     */\n    function (prevState, currState) {\n        /** @type {?} */\n        var isFns = isFunction(keysOrFuncs[0]);\n        // Return when they are NOT changed\n        return keysOrFuncs.some((/**\n         * @param {?} keyOrFunc\n         * @return {?}\n         */\n        function (keyOrFunc) {\n            if (isFns) {\n                return keyOrFunc(prevState) !== keyOrFunc(currState);\n            }\n            return prevState[keyOrFunc] !== currState[keyOrFunc];\n        })) === false;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template S\n */\nvar  /**\n * @template S\n */\nQuery = /** @class */ (function () {\n    function Query(store) {\n        this.store = store;\n        this.__store__ = store;\n        if (isDev()) {\n            // @internal\n            __queries__[store.storeName] = this;\n        }\n    }\n    /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    Query.prototype.select = /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    function (project) {\n        /** @type {?} */\n        var mapFn;\n        if (isFunction(project)) {\n            mapFn = project;\n        }\n        else if (isString(project)) {\n            mapFn = (/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return state[project]; });\n        }\n        else if (Array.isArray(project)) {\n            return (/** @type {?} */ (this.store\n                ._select((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return state; }))\n                .pipe(distinctUntilChanged(compareKeys(project)), map((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) {\n                if (isFunction(project[0])) {\n                    return ((/** @type {?} */ (project))).map((/**\n                     * @param {?} func\n                     * @return {?}\n                     */\n                    function (func) { return func(state); }));\n                }\n                return ((/** @type {?} */ (project))).reduce((/**\n                 * @param {?} acc\n                 * @param {?} k\n                 * @return {?}\n                 */\n                function (acc, k) {\n                    acc[(/** @type {?} */ (k))] = state[k];\n                    return acc;\n                }), {});\n            })))));\n        }\n        else {\n            mapFn = (/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return state; });\n        }\n        return this.store._select(mapFn);\n    };\n    /**\n     * Select the loading state\n     *\n     * @example\n     *\n     * this.query.selectLoading().subscribe(isLoading => {})\n     */\n    /**\n     * Select the loading state\n     *\n     * \\@example\n     *\n     * this.query.selectLoading().subscribe(isLoading => {})\n     * @return {?}\n     */\n    Query.prototype.selectLoading = /**\n     * Select the loading state\n     *\n     * \\@example\n     *\n     * this.query.selectLoading().subscribe(isLoading => {})\n     * @return {?}\n     */\n    function () {\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return ((/** @type {?} */ (state))).loading; }));\n    };\n    /**\n     * Select the error state\n     *\n     * @example\n     *\n     * this.query.selectError().subscribe(error => {})\n     */\n    /**\n     * Select the error state\n     *\n     * \\@example\n     *\n     * this.query.selectError().subscribe(error => {})\n     * @template ErrorType\n     * @return {?}\n     */\n    Query.prototype.selectError = /**\n     * Select the error state\n     *\n     * \\@example\n     *\n     * this.query.selectError().subscribe(error => {})\n     * @template ErrorType\n     * @return {?}\n     */\n    function () {\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return ((/** @type {?} */ (state))).error; }));\n    };\n    /**\n     * Get the store's value\n     *\n     * @example\n     *\n     * this.query.getValue()\n     *\n     */\n    /**\n     * Get the store's value\n     *\n     * \\@example\n     *\n     * this.query.getValue()\n     *\n     * @return {?}\n     */\n    Query.prototype.getValue = /**\n     * Get the store's value\n     *\n     * \\@example\n     *\n     * this.query.getValue()\n     *\n     * @return {?}\n     */\n    function () {\n        return this.store._value();\n    };\n    /**\n     * Select the cache state\n     *\n     * @example\n     *\n     * this.query.selectHasCache().pipe(\n     *   switchMap(hasCache => {\n     *     return hasCache ? of() : http().pipe(res => store.set(res))\n     *   })\n     * )\n     */\n    /**\n     * Select the cache state\n     *\n     * \\@example\n     *\n     * this.query.selectHasCache().pipe(\n     *   switchMap(hasCache => {\n     *     return hasCache ? of() : http().pipe(res => store.set(res))\n     *   })\n     * )\n     * @return {?}\n     */\n    Query.prototype.selectHasCache = /**\n     * Select the cache state\n     *\n     * \\@example\n     *\n     * this.query.selectHasCache().pipe(\n     *   switchMap(hasCache => {\n     *     return hasCache ? of() : http().pipe(res => store.set(res))\n     *   })\n     * )\n     * @return {?}\n     */\n    function () {\n        return this.store._cache().asObservable();\n    };\n    /**\n     * Whether we've cached data\n     *\n     * @example\n     *\n     * this.query.getHasCache()\n     *\n     */\n    /**\n     * Whether we've cached data\n     *\n     * \\@example\n     *\n     * this.query.getHasCache()\n     *\n     * @return {?}\n     */\n    Query.prototype.getHasCache = /**\n     * Whether we've cached data\n     *\n     * \\@example\n     *\n     * this.query.getHasCache()\n     *\n     * @return {?}\n     */\n    function () {\n        return this.store._cache().value;\n    };\n    Object.defineProperty(Query.prototype, \"config\", {\n        // @internal\n        get: \n        // @internal\n        /**\n         * @return {?}\n         */\n        function () {\n            return this.constructor[queryConfigKey];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Query;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} options\n * @param {?} config\n * @return {?}\n */\nfunction sortByOptions(options, config) {\n    options.sortBy = options.sortBy || (config && config.sortBy);\n    options.sortByOrder = options.sortByOrder || (config && config.sortByOrder);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @enum {string} */\nvar Order = {\n    ASC: 'asc',\n    DESC: 'desc',\n};\n// @internal\n/**\n * @param {?} key\n * @param {?=} order\n * @return {?}\n */\nfunction compareValues(key, order) {\n    if (order === void 0) { order = Order.ASC; }\n    return (/**\n     * @param {?} a\n     * @param {?} b\n     * @return {?}\n     */\n    function (a, b) {\n        if (!a.hasOwnProperty(key) || !b.hasOwnProperty(key)) {\n            return 0;\n        }\n        /** @type {?} */\n        var varA = typeof a[key] === 'string' ? a[key].toUpperCase() : a[key];\n        /** @type {?} */\n        var varB = typeof b[key] === 'string' ? b[key].toUpperCase() : b[key];\n        /** @type {?} */\n        var comparison = 0;\n        if (varA > varB) {\n            comparison = 1;\n        }\n        else if (varA < varB) {\n            comparison = -1;\n        }\n        return order == Order.DESC ? comparison * -1 : comparison;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E, S\n * @param {?} state\n * @param {?} options\n * @return {?}\n */\nfunction entitiesToArray(state, options) {\n    /** @type {?} */\n    var arr = [];\n    var ids = state.ids, entities = state.entities;\n    var filterBy = options.filterBy, limitTo = options.limitTo, sortBy = options.sortBy, sortByOrder = options.sortByOrder;\n    var _loop_1 = function (i) {\n        /** @type {?} */\n        var entity = entities[ids[i]];\n        if (!filterBy) {\n            arr.push(entity);\n            return \"continue\";\n        }\n        /** @type {?} */\n        var toArray = coerceArray(filterBy);\n        /** @type {?} */\n        var allPass = toArray.every((/**\n         * @param {?} fn\n         * @return {?}\n         */\n        function (fn) { return fn(entity, i); }));\n        if (allPass) {\n            arr.push(entity);\n        }\n    };\n    for (var i = 0; i < ids.length; i++) {\n        _loop_1(i);\n    }\n    if (sortBy) {\n        /** @type {?} */\n        var _sortBy_1 = isFunction(sortBy) ? sortBy : compareValues(sortBy, sortByOrder);\n        arr = arr.sort((/**\n         * @param {?} a\n         * @param {?} b\n         * @return {?}\n         */\n        function (a, b) { return _sortBy_1(a, b, state); }));\n    }\n    /** @type {?} */\n    var length = Math.min(limitTo || arr.length, arr.length);\n    return length === arr.length ? arr : arr.slice(0, length);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template S, E\n * @param {?} state\n * @param {?} options\n * @return {?}\n */\nfunction entitiesToMap(state, options) {\n    /** @type {?} */\n    var map$$1 = {};\n    var filterBy = options.filterBy, limitTo = options.limitTo;\n    var ids = state.ids, entities = state.entities;\n    if (!filterBy && !limitTo) {\n        return entities;\n    }\n    /** @type {?} */\n    var hasLimit = isNil(limitTo) === false;\n    if (filterBy && hasLimit) {\n        /** @type {?} */\n        var count = 0;\n        var _loop_1 = function (i, length_1) {\n            if (count === limitTo)\n                return \"break\";\n            /** @type {?} */\n            var id = ids[i];\n            /** @type {?} */\n            var entity = entities[id];\n            /** @type {?} */\n            var allPass = coerceArray(filterBy).every((/**\n             * @param {?} fn\n             * @return {?}\n             */\n            function (fn) { return fn(entity, i); }));\n            if (allPass) {\n                map$$1[id] = entity;\n                count++;\n            }\n        };\n        for (var i = 0, length_1 = ids.length; i < length_1; i++) {\n            var state_1 = _loop_1(i, length_1);\n            if (state_1 === \"break\")\n                break;\n        }\n    }\n    else {\n        /** @type {?} */\n        var finalLength = Math.min(limitTo || ids.length, ids.length);\n        var _loop_2 = function (i) {\n            /** @type {?} */\n            var id = ids[i];\n            /** @type {?} */\n            var entity = entities[id];\n            if (!filterBy) {\n                map$$1[id] = entity;\n                return \"continue\";\n            }\n            /** @type {?} */\n            var allPass = coerceArray(filterBy).every((/**\n             * @param {?} fn\n             * @return {?}\n             */\n            function (fn) { return fn(entity, i); }));\n            if (allPass) {\n                map$$1[id] = entity;\n            }\n        };\n        for (var i = 0; i < finalLength; i++) {\n            _loop_2(i);\n        }\n    }\n    return map$$1;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E\n * @param {?} predicate\n * @param {?} entities\n * @return {?}\n */\nfunction findEntityByPredicate(predicate, entities) {\n    var e_1, _a;\n    try {\n        for (var _b = __values(Object.keys(entities)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var entityId = _c.value;\n            if (predicate(entities[entityId]) === true) {\n                return entityId;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return undefined;\n}\n// @internal\n/**\n * @param {?} id\n * @param {?} project\n * @return {?}\n */\nfunction getEntity(id, project) {\n    return (/**\n     * @param {?} entities\n     * @return {?}\n     */\n    function (entities) {\n        /** @type {?} */\n        var entity = entities[id];\n        if (isUndefined(entity)) {\n            return undefined;\n        }\n        if (!project) {\n            return entity;\n        }\n        if (isString(project)) {\n            return entity[project];\n        }\n        return ((/** @type {?} */ (project)))(entity);\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template T\n * @param {?} collection\n * @param {?} idsOrPredicate\n * @param {?} idKey\n * @return {?}\n */\nfunction find(collection, idsOrPredicate, idKey) {\n    var e_1, _a, e_2, _b;\n    /** @type {?} */\n    var result = [];\n    if (isFunction(idsOrPredicate)) {\n        try {\n            for (var collection_1 = __values(collection), collection_1_1 = collection_1.next(); !collection_1_1.done; collection_1_1 = collection_1.next()) {\n                var entity = collection_1_1.value;\n                if (idsOrPredicate(entity) === true) {\n                    result.push(entity);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (collection_1_1 && !collection_1_1.done && (_a = collection_1.return)) _a.call(collection_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else {\n        /** @type {?} */\n        var toSet = coerceArray(idsOrPredicate).reduce((/**\n         * @param {?} acc\n         * @param {?} current\n         * @return {?}\n         */\n        function (acc, current) { return acc.add(current); }), new Set());\n        try {\n            for (var collection_2 = __values(collection), collection_2_1 = collection_2.next(); !collection_2_1.done; collection_2_1 = collection_2.next()) {\n                var entity = collection_2_1.value;\n                if (toSet.has(entity[idKey])) {\n                    result.push(entity);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (collection_2_1 && !collection_2_1.done && (_b = collection_2.return)) _b.call(collection_2);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }\n    return result;\n}\n// @internal\n/**\n * @template T\n * @return {?}\n */\nfunction distinctUntilArrayItemChanged() {\n    return distinctUntilChanged((/**\n     * @param {?} prevCollection\n     * @param {?} currentCollection\n     * @return {?}\n     */\n    function (prevCollection, currentCollection) {\n        if (prevCollection === currentCollection) {\n            return true;\n        }\n        if (isArray(prevCollection) === false || isArray(currentCollection) === false) {\n            return false;\n        }\n        if (isEmpty(prevCollection) && isEmpty(currentCollection)) {\n            return true;\n        }\n        // if item is new in the current collection but not exist in the prev collection\n        /** @type {?} */\n        var hasNewItem = hasChange(currentCollection, prevCollection);\n        if (hasNewItem) {\n            return false;\n        }\n        /** @type {?} */\n        var isOneOfItemReferenceChanged = hasChange(prevCollection, currentCollection);\n        // return false means there is a change and we want to call next()\n        return isOneOfItemReferenceChanged === false;\n    }));\n}\n// @internal\n/**\n * @template T\n * @param {?} first\n * @param {?} second\n * @return {?}\n */\nfunction hasChange(first, second) {\n    /** @type {?} */\n    var hasChange = second.some((/**\n     * @param {?} currentItem\n     * @return {?}\n     */\n    function (currentItem) {\n        /** @type {?} */\n        var oldItem = first.find((/**\n         * @param {?} prevItem\n         * @return {?}\n         */\n        function (prevItem) { return prevItem === currentItem; }));\n        return oldItem === undefined;\n    }));\n    return hasChange;\n}\n/**\n * @template T\n * @param {?} idsOrPredicate\n * @param {?=} idKey\n * @return {?}\n */\nfunction arrayFind(idsOrPredicate, idKey) {\n    return (/**\n     * @param {?} source\n     * @return {?}\n     */\n    function (source) {\n        return source.pipe(map((/**\n         * @param {?} collection\n         * @return {?}\n         */\n        function (collection) {\n            // which means the user deleted the root entity or set the collection to nil\n            if (isArray(collection) === false) {\n                return collection;\n            }\n            return find(collection, idsOrPredicate, idKey || DEFAULT_ID_KEY);\n        })), distinctUntilArrayItemChanged(), map((/**\n         * @param {?} value\n         * @return {?}\n         */\n        function (value) {\n            if (isArray(value) === false) {\n                return value;\n            }\n            if (isArray(idsOrPredicate) || isFunction(idsOrPredicate)) {\n                return value;\n            }\n            return value[0];\n        })));\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template T, V\n * @param {?} arr\n * @param {?} callbackFn\n * @return {?}\n */\nfunction mapSkipUndefined(arr, callbackFn) {\n    return arr.reduce((/**\n     * @param {?} result\n     * @param {?} value\n     * @param {?} index\n     * @param {?} array\n     * @return {?}\n     */\n    function (result, value, index, array) {\n        /** @type {?} */\n        var val = callbackFn(value, index, array);\n        if (val !== undefined) {\n            result.push(val);\n        }\n        return result;\n    }), []);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n *\n *  The Entity Query is similar to the general Query, with additional functionality tailored for EntityStores.\n *\n *  class WidgetsQuery extends QueryEntity<WidgetsState> {\n *     constructor(protected store: WidgetsStore) {\n *       super(store);\n *     }\n *  }\n *\n *\n *\n * @template S, EntityType, IDType\n */\nvar  /**\n *\n *  The Entity Query is similar to the general Query, with additional functionality tailored for EntityStores.\n *\n *  class WidgetsQuery extends QueryEntity<WidgetsState> {\n *     constructor(protected store: WidgetsStore) {\n *       super(store);\n *     }\n *  }\n *\n *\n *\n * @template S, EntityType, IDType\n */\nQueryEntity = /** @class */ (function (_super) {\n    __extends(QueryEntity, _super);\n    function QueryEntity(store, options) {\n        if (options === void 0) { options = {}; }\n        var _this = _super.call(this, store) || this;\n        _this.options = options;\n        _this.__store__ = store;\n        return _this;\n    }\n    /**\n     * @param {?=} options\n     * @return {?}\n     */\n    QueryEntity.prototype.selectAll = /**\n     * @param {?=} options\n     * @return {?}\n     */\n    function (options) {\n        var _this = this;\n        if (options === void 0) { options = {\n            asObject: false\n        }; }\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.entities; })).pipe(map((/**\n         * @return {?}\n         */\n        function () { return _this.getAll(options); })));\n    };\n    /**\n     * @param {?=} options\n     * @return {?}\n     */\n    QueryEntity.prototype.getAll = /**\n     * @param {?=} options\n     * @return {?}\n     */\n    function (options) {\n        if (options === void 0) { options = { asObject: false, filterBy: undefined, limitTo: undefined }; }\n        if (options.asObject) {\n            return entitiesToMap(this.getValue(), options);\n        }\n        sortByOptions(options, this.config || this.options);\n        return entitiesToArray(this.getValue(), options);\n    };\n    /**\n     * @template R\n     * @param {?} ids\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectMany = /**\n     * @template R\n     * @param {?} ids\n     * @param {?=} project\n     * @return {?}\n     */\n    function (ids, project) {\n        if (!ids || !ids.length)\n            return of([]);\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.entities; })).pipe(map((/**\n         * @param {?} entities\n         * @return {?}\n         */\n        function (entities) { return mapSkipUndefined(ids, (/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return getEntity(id, project)(entities); })); })), distinctUntilArrayItemChanged());\n    };\n    /**\n     * @template R\n     * @param {?} idOrPredicate\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectEntity = /**\n     * @template R\n     * @param {?} idOrPredicate\n     * @param {?=} project\n     * @return {?}\n     */\n    function (idOrPredicate, project) {\n        /** @type {?} */\n        var id = idOrPredicate;\n        if (isFunction(idOrPredicate)) {\n            // For performance reason we expect the entity to be in the store\n            ((/** @type {?} */ (id))) = findEntityByPredicate(idOrPredicate, this.getValue().entities);\n        }\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.entities; })).pipe(map(getEntity(id, project)), distinctUntilChanged());\n    };\n    /**\n     * Get an entity by id\n     *\n     * @example\n     *\n     * this.query.getEntity(1);\n     */\n    /**\n     * Get an entity by id\n     *\n     * \\@example\n     *\n     * this.query.getEntity(1);\n     * @param {?} id\n     * @return {?}\n     */\n    QueryEntity.prototype.getEntity = /**\n     * Get an entity by id\n     *\n     * \\@example\n     *\n     * this.query.getEntity(1);\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        return this.getValue().entities[(/** @type {?} */ (id))];\n    };\n    /**\n     * Select the active entity's id\n     *\n     * @example\n     *\n     * this.query.selectActiveId()\n     */\n    /**\n     * Select the active entity's id\n     *\n     * \\@example\n     *\n     * this.query.selectActiveId()\n     * @return {?}\n     */\n    QueryEntity.prototype.selectActiveId = /**\n     * Select the active entity's id\n     *\n     * \\@example\n     *\n     * this.query.selectActiveId()\n     * @return {?}\n     */\n    function () {\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return ((/** @type {?} */ (state))).active; }));\n    };\n    /**\n     * Get the active id\n     *\n     * @example\n     *\n     * this.query.getActiveId()\n     */\n    /**\n     * Get the active id\n     *\n     * \\@example\n     *\n     * this.query.getActiveId()\n     * @return {?}\n     */\n    QueryEntity.prototype.getActiveId = /**\n     * Get the active id\n     *\n     * \\@example\n     *\n     * this.query.getActiveId()\n     * @return {?}\n     */\n    function () {\n        return this.getValue().active;\n    };\n    /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectActive = /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    function (project) {\n        var _this = this;\n        if (isArray(this.getActive())) {\n            return this.selectActiveId().pipe(switchMap((/**\n             * @param {?} ids\n             * @return {?}\n             */\n            function (ids) { return _this.selectMany(ids, project); })));\n        }\n        return this.selectActiveId().pipe(switchMap((/**\n         * @param {?} ids\n         * @return {?}\n         */\n        function (ids) { return _this.selectEntity(ids, project); })));\n    };\n    /**\n     * @return {?}\n     */\n    QueryEntity.prototype.getActive = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        /** @type {?} */\n        var activeId = this.getActiveId();\n        if (isArray(activeId)) {\n            return activeId.map((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) { return _this.getValue().entities[(/** @type {?} */ (id))]; }));\n        }\n        return toBoolean(activeId) ? this.getEntity(activeId) : undefined;\n    };\n    /**\n     * Select the store's entity collection length\n     *\n     * @example\n     *\n     * this.query.selectCount()\n     * this.query.selectCount(entity => entity.completed)\n     */\n    /**\n     * Select the store's entity collection length\n     *\n     * \\@example\n     *\n     * this.query.selectCount()\n     * this.query.selectCount(entity => entity.completed)\n     * @param {?=} predicate\n     * @return {?}\n     */\n    QueryEntity.prototype.selectCount = /**\n     * Select the store's entity collection length\n     *\n     * \\@example\n     *\n     * this.query.selectCount()\n     * this.query.selectCount(entity => entity.completed)\n     * @param {?=} predicate\n     * @return {?}\n     */\n    function (predicate) {\n        var _this = this;\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.entities; })).pipe(map((/**\n         * @return {?}\n         */\n        function () { return _this.getCount(predicate); })));\n    };\n    /**\n     * Get the store's entity collection length\n     *\n     * @example\n     *\n     * this.query.getCount()\n     * this.query.getCount(entity => entity.completed)\n     */\n    /**\n     * Get the store's entity collection length\n     *\n     * \\@example\n     *\n     * this.query.getCount()\n     * this.query.getCount(entity => entity.completed)\n     * @param {?=} predicate\n     * @return {?}\n     */\n    QueryEntity.prototype.getCount = /**\n     * Get the store's entity collection length\n     *\n     * \\@example\n     *\n     * this.query.getCount()\n     * this.query.getCount(entity => entity.completed)\n     * @param {?=} predicate\n     * @return {?}\n     */\n    function (predicate) {\n        if (isFunction(predicate)) {\n            return this.getAll().filter(predicate).length;\n        }\n        return this.getValue().ids.length;\n    };\n    /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectLast = /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    function (project) {\n        return this.selectAt((/**\n         * @param {?} ids\n         * @return {?}\n         */\n        function (ids) { return ids[ids.length - 1]; }), project);\n    };\n    /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectFirst = /**\n     * @template R\n     * @param {?=} project\n     * @return {?}\n     */\n    function (project) {\n        return this.selectAt((/**\n         * @param {?} ids\n         * @return {?}\n         */\n        function (ids) { return ids[0]; }), project);\n    };\n    /**\n     * @param {?=} action\n     * @return {?}\n     */\n    QueryEntity.prototype.selectEntityAction = /**\n     * @param {?=} action\n     * @return {?}\n     */\n    function (action) {\n        if (isUndefined(action)) {\n            return this.store.selectEntityAction$;\n        }\n        return this.store.selectEntityAction$.pipe(filter((/**\n         * @param {?} ac\n         * @return {?}\n         */\n        function (ac) { return ac.type === action; })), map((/**\n         * @param {?} action\n         * @return {?}\n         */\n        function (action) { return action.ids; })));\n    };\n    /**\n     * @param {?=} projectOrIds\n     * @return {?}\n     */\n    QueryEntity.prototype.hasEntity = /**\n     * @param {?=} projectOrIds\n     * @return {?}\n     */\n    function (projectOrIds) {\n        var _this = this;\n        if (isNil(projectOrIds)) {\n            return this.getValue().ids.length > 0;\n        }\n        if (isFunction(projectOrIds)) {\n            return this.getAll().some(projectOrIds);\n        }\n        if (isArray(projectOrIds)) {\n            return projectOrIds.every((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) { return ((/** @type {?} */ (id))) in _this.getValue().entities; }));\n        }\n        return ((/** @type {?} */ (projectOrIds))) in this.getValue().entities;\n    };\n    /**\n     * Returns whether entity store has an active entity\n     *\n     * @example\n     *\n     * this.query.hasActive()\n     * this.query.hasActive(3)\n     *\n     */\n    /**\n     * Returns whether entity store has an active entity\n     *\n     * \\@example\n     *\n     * this.query.hasActive()\n     * this.query.hasActive(3)\n     *\n     * @param {?=} id\n     * @return {?}\n     */\n    QueryEntity.prototype.hasActive = /**\n     * Returns whether entity store has an active entity\n     *\n     * \\@example\n     *\n     * this.query.hasActive()\n     * this.query.hasActive(3)\n     *\n     * @param {?=} id\n     * @return {?}\n     */\n    function (id) {\n        /** @type {?} */\n        var active = this.getValue().active;\n        if (Array.isArray(active)) {\n            if (isDefined(id)) {\n                return active.includes(id);\n            }\n            return active.length > 0;\n        }\n        return isDefined(active);\n    };\n    /**\n     *\n     * Create sub UI query for querying Entity's UI state\n     *\n     * @example\n     *\n     *\n     * export class ProductsQuery extends QueryEntity<ProductsState> {\n     *   ui: EntityUIQuery<ProductsUIState>;\n     *\n     *   constructor(protected store: ProductsStore) {\n     *     super(store);\n     *     this.createUIQuery();\n     *   }\n     *\n     * }\n     */\n    /**\n     *\n     * Create sub UI query for querying Entity's UI state\n     *\n     * \\@example\n     *\n     *\n     * export class ProductsQuery extends QueryEntity<ProductsState> {\n     *   ui: EntityUIQuery<ProductsUIState>;\n     *\n     *   constructor(protected store: ProductsStore) {\n     *     super(store);\n     *     this.createUIQuery();\n     *   }\n     *\n     * }\n     * @return {?}\n     */\n    QueryEntity.prototype.createUIQuery = /**\n     *\n     * Create sub UI query for querying Entity's UI state\n     *\n     * \\@example\n     *\n     *\n     * export class ProductsQuery extends QueryEntity<ProductsState> {\n     *   ui: EntityUIQuery<ProductsUIState>;\n     *\n     *   constructor(protected store: ProductsStore) {\n     *     super(store);\n     *     this.createUIQuery();\n     *   }\n     *\n     * }\n     * @return {?}\n     */\n    function () {\n        this.ui = new EntityUIQuery(this.__store__.ui);\n    };\n    /**\n     * @private\n     * @template R\n     * @param {?} mapFn\n     * @param {?=} project\n     * @return {?}\n     */\n    QueryEntity.prototype.selectAt = /**\n     * @private\n     * @template R\n     * @param {?} mapFn\n     * @param {?=} project\n     * @return {?}\n     */\n    function (mapFn, project) {\n        var _this = this;\n        return this.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return (/** @type {?} */ (state.ids)); })).pipe(map(mapFn), distinctUntilChanged(), switchMap((/**\n         * @param {?} id\n         * @return {?}\n         */\n        function (id) { return _this.selectEntity(id, project); })));\n    };\n    return QueryEntity;\n}(Query));\n// @internal\n/**\n * @template UIState, DEPRECATED\n */\nvar  \n// @internal\n/**\n * @template UIState, DEPRECATED\n */\nEntityUIQuery = /** @class */ (function (_super) {\n    __extends(EntityUIQuery, _super);\n    function EntityUIQuery(store) {\n        return _super.call(this, store) || this;\n    }\n    return EntityUIQuery;\n}(QueryEntity));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * \\@example\n *\n * query.selectEntity(2).pipe(filterNil)\n * @type {?}\n */\nvar filterNil = (/**\n * @template T\n * @param {?} source\n * @return {?}\n */\nfunction (source) { return source.pipe(filter((/**\n * @param {?} value\n * @return {?}\n */\nfunction (value) { return value !== null && typeof value !== 'undefined'; }))); });\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * \\@internal\n *\n * \\@example\n *\n * getValue(state, 'todos.ui')\n *\n * @param {?} obj\n * @param {?} prop\n * @return {?}\n */\nfunction getValue(obj, prop) {\n    /** return the whole state  */\n    if (prop.split('.').length === 1) {\n        return obj;\n    }\n    /** @type {?} */\n    var removeStoreName = prop\n        .split('.')\n        .slice(1)\n        .join('.');\n    return removeStoreName.split('.').reduce((/**\n     * @param {?} acc\n     * @param {?} part\n     * @return {?}\n     */\n    function (acc, part) { return acc && acc[part]; }), obj);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * \\@internal\n *\n * \\@example\n * setValue(state, 'todos.ui', { filter: {} })\n * @param {?} obj\n * @param {?} prop\n * @param {?} val\n * @return {?}\n */\nfunction setValue(obj, prop, val) {\n    /** @type {?} */\n    var split = prop.split('.');\n    if (split.length === 1) {\n        return val;\n    }\n    obj = __assign({}, obj);\n    /** @type {?} */\n    var lastIndex = split.length - 2;\n    /** @type {?} */\n    var removeStoreName = prop.split('.').slice(1);\n    removeStoreName.reduce((/**\n     * @param {?} acc\n     * @param {?} part\n     * @param {?} index\n     * @return {?}\n     */\n    function (acc, part, index) {\n        if (index === lastIndex) {\n            acc[part] = val;\n        }\n        else {\n            acc[part] = __assign({}, acc[part]);\n        }\n        return acc && acc[part];\n    }), obj);\n    return obj;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar skipStorageUpdate = false;\n/**\n * @param {?} skip\n * @return {?}\n */\nfunction setSkipStorageUpdate(skip$$1) {\n    skipStorageUpdate = skip$$1;\n}\n/**\n * @return {?}\n */\nfunction getSkipStorageUpdate() {\n    return skipStorageUpdate;\n}\n/**\n * @param {?} v\n * @return {?}\n */\nfunction isPromise(v) {\n    return v && isFunction(v.then);\n}\n/**\n * @param {?} asyncOrValue\n * @return {?}\n */\nfunction observify(asyncOrValue) {\n    if (isPromise(asyncOrValue) || isObservable(asyncOrValue)) {\n        return from(asyncOrValue);\n    }\n    return of(asyncOrValue);\n}\n/**\n * @param {?=} params\n * @return {?}\n */\nfunction persistState(params) {\n    /** @type {?} */\n    var defaults = {\n        key: 'AkitaStores',\n        enableInNonBrowser: false,\n        storage: typeof localStorage === 'undefined' ? params.storage : localStorage,\n        deserialize: JSON.parse,\n        serialize: JSON.stringify,\n        include: [],\n        // @deprecated\n        exclude: [],\n        persistOnDestroy: false,\n        preStorageUpdate: (/**\n         * @param {?} storeName\n         * @param {?} state\n         * @return {?}\n         */\n        function (storeName, state) {\n            return state;\n        }),\n        preStoreUpdate: (/**\n         * @param {?} storeName\n         * @param {?} state\n         * @return {?}\n         */\n        function (storeName, state) {\n            return state;\n        }),\n        skipStorageUpdate: getSkipStorageUpdate,\n        preStorageUpdateOperator: (/**\n         * @return {?}\n         */\n        function () { return (/**\n         * @param {?} source\n         * @return {?}\n         */\n        function (source) { return source; }); })\n    };\n    var _a = Object.assign({}, defaults, params), storage = _a.storage, enableInNonBrowser = _a.enableInNonBrowser, deserialize = _a.deserialize, serialize = _a.serialize, include = _a.include, exclude = _a.exclude, key = _a.key, preStorageUpdate = _a.preStorageUpdate, persistOnDestroy = _a.persistOnDestroy, preStorageUpdateOperator = _a.preStorageUpdateOperator, preStoreUpdate = _a.preStoreUpdate, skipStorageUpdate = _a.skipStorageUpdate;\n    if (isNotBrowser && !enableInNonBrowser)\n        return;\n    /** @type {?} */\n    var hasInclude = include.length > 0;\n    /** @type {?} */\n    var hasExclude = exclude.length > 0;\n    /** @type {?} */\n    var includeStores;\n    if (hasInclude && hasExclude) {\n        throw new AkitaError(\"You can't use both include and exclude\");\n    }\n    if (hasInclude) {\n        includeStores = include.reduce((/**\n         * @param {?} acc\n         * @param {?} path\n         * @return {?}\n         */\n        function (acc, path) {\n            if (isFunction(path)) {\n                acc.fns.push(path);\n            }\n            else {\n                /** @type {?} */\n                var storeName = path.split('.')[0];\n                acc[storeName] = path;\n            }\n            return acc;\n        }), { fns: [] });\n    }\n    /** @type {?} */\n    var stores = {};\n    /** @type {?} */\n    var acc = {};\n    /** @type {?} */\n    var subscriptions = [];\n    /** @type {?} */\n    var buffer = [];\n    /**\n     * @param {?} v\n     * @return {?}\n     */\n    function _save(v) {\n        observify(v).subscribe((/**\n         * @return {?}\n         */\n        function () {\n            /** @type {?} */\n            var next = buffer.shift();\n            next && _save(next);\n        }));\n    }\n    // when we use the local/session storage we perform the serialize, otherwise we let the passed storage implementation to do it\n    /** @type {?} */\n    var isLocalStorage = typeof localStorage !== 'undefined' && (storage === localStorage || storage === sessionStorage);\n    observify(storage.getItem(key)).subscribe((/**\n     * @param {?} value\n     * @return {?}\n     */\n    function (value) {\n        /** @type {?} */\n        var storageState = isObject(value) ? value : deserialize(value || '{}');\n        /**\n         * @param {?} storeCache\n         * @return {?}\n         */\n        function save(storeCache) {\n            storageState['$cache'] = __assign({}, (storageState['$cache'] || {}), storeCache);\n            /** @type {?} */\n            var storageValue = Object.assign({}, storageState, acc);\n            buffer.push(storage.setItem(key, isLocalStorage ? serialize(storageValue) : storageValue));\n            _save(buffer.shift());\n        }\n        /**\n         * @param {?} storeName\n         * @param {?} path\n         * @return {?}\n         */\n        function subscribe(storeName, path) {\n            stores[storeName] = __stores__[storeName]\n                ._select((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return getValue(state, path); }))\n                .pipe(skip(1), filter((/**\n             * @return {?}\n             */\n            function () { return skipStorageUpdate() === false; })), preStorageUpdateOperator())\n                .subscribe((/**\n             * @param {?} data\n             * @return {?}\n             */\n            function (data) {\n                acc[storeName] = preStorageUpdate(storeName, data);\n                Promise.resolve().then((/**\n                 * @return {?}\n                 */\n                function () {\n                    var _a;\n                    return save((_a = {}, _a[storeName] = __stores__[storeName]._cache().getValue(), _a));\n                }));\n            }));\n        }\n        /**\n         * @param {?} storeName\n         * @param {?} store\n         * @param {?} path\n         * @return {?}\n         */\n        function setInitial(storeName, store, path) {\n            if (storeName in storageState) {\n                setAction('@PersistState');\n                store._setState((/**\n                 * @param {?} state\n                 * @return {?}\n                 */\n                function (state) {\n                    return setValue(state, path, preStoreUpdate(storeName, storageState[storeName]));\n                }));\n                /** @type {?} */\n                var hasCache = storageState['$cache'] ? storageState['$cache'][storeName] : false;\n                __stores__[storeName].setHasCache(hasCache);\n            }\n        }\n        subscriptions.push($$deleteStore.subscribe((/**\n         * @param {?} storeName\n         * @return {?}\n         */\n        function (storeName) {\n            if (stores[storeName]) {\n                if (persistOnDestroy === false) {\n                    save(false);\n                }\n                stores[storeName].unsubscribe();\n                delete stores[storeName];\n            }\n        })));\n        subscriptions.push($$addStore.subscribe((/**\n         * @param {?} storeName\n         * @return {?}\n         */\n        function (storeName) {\n            if (hasExclude && exclude.includes(storeName)) {\n                return;\n            }\n            /** @type {?} */\n            var store = __stores__[storeName];\n            if (hasInclude) {\n                /** @type {?} */\n                var path = includeStores[storeName];\n                if (!path) {\n                    /** @type {?} */\n                    var passPredicate = includeStores.fns.some((/**\n                     * @param {?} fn\n                     * @return {?}\n                     */\n                    function (fn) { return fn(storeName); }));\n                    if (passPredicate) {\n                        path = storeName;\n                    }\n                    else {\n                        return;\n                    }\n                }\n                setInitial(storeName, store, path);\n                subscribe(storeName, path);\n            }\n            else {\n                setInitial(storeName, store, storeName);\n                subscribe(storeName, storeName);\n            }\n        })));\n    }));\n    return {\n        destroy: /**\n         * @return {?}\n         */\n        function () {\n            subscriptions.forEach((/**\n             * @param {?} s\n             * @return {?}\n             */\n            function (s) { return s.unsubscribe(); }));\n            for (var i = 0, keys = Object.keys(stores); i < keys.length; i++) {\n                /** @type {?} */\n                var storeName = keys[i];\n                stores[storeName].unsubscribe();\n            }\n            stores = {};\n        },\n        clear: /**\n         * @return {?}\n         */\n        function () {\n            storage.clear();\n        },\n        clearStore: /**\n         * @param {?=} storeName\n         * @return {?}\n         */\n        function (storeName) {\n            if (isNil(storeName)) {\n                /** @type {?} */\n                var value_1 = observify(storage.setItem(key, '{}'));\n                value_1.subscribe();\n                return;\n            }\n            /** @type {?} */\n            var value = storage.getItem(key);\n            observify(value).subscribe((/**\n             * @param {?} v\n             * @return {?}\n             */\n            function (v) {\n                /** @type {?} */\n                var storageState = deserialize(v || '{}');\n                if (storageState[storeName]) {\n                    delete storageState[storeName];\n                    /** @type {?} */\n                    var value_2 = observify(storage.setItem(key, serialize(storageState)));\n                    value_2.subscribe();\n                }\n            }));\n        }\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\nvar SnapshotManager = /** @class */ (function () {\n    function SnapshotManager() {\n    }\n    /**\n     * Get a snapshot of the whole state or a specific stores\n     * Use it ONLY for things like saving the state in the server\n     */\n    /**\n     * Get a snapshot of the whole state or a specific stores\n     * Use it ONLY for things like saving the state in the server\n     * @param {?=} stores\n     * @return {?}\n     */\n    SnapshotManager.prototype.getStoresSnapshot = /**\n     * Get a snapshot of the whole state or a specific stores\n     * Use it ONLY for things like saving the state in the server\n     * @param {?=} stores\n     * @return {?}\n     */\n    function (stores) {\n        if (stores === void 0) { stores = []; }\n        /** @type {?} */\n        var acc = {};\n        /** @type {?} */\n        var hasInclude = stores.length > 0;\n        /** @type {?} */\n        var keys = hasInclude ? stores : Object.keys(__stores__);\n        for (var i = 0; i < keys.length; i++) {\n            /** @type {?} */\n            var storeName = keys[i];\n            acc[storeName] = __stores__[storeName]._value();\n        }\n        return acc;\n    };\n    /**\n     * Set snapshot we get from the server\n     */\n    /**\n     * Set snapshot we get from the server\n     * @param {?} stores\n     * @param {?=} options\n     * @return {?}\n     */\n    SnapshotManager.prototype.setStoresSnapshot = /**\n     * Set snapshot we get from the server\n     * @param {?} stores\n     * @param {?=} options\n     * @return {?}\n     */\n    function (stores, options) {\n        if (options === void 0) { options = { skipStorageUpdate: false }; }\n        options.skipStorageUpdate && setSkipStorageUpdate(true);\n        /** @type {?} */\n        var normalizedStores = stores;\n        if (isString(stores)) {\n            normalizedStores = JSON.parse((/** @type {?} */ (normalizedStores)));\n        }\n        var _loop_1 = function (i, keys) {\n            /** @type {?} */\n            var storeName = keys[i];\n            if (__stores__[storeName]) {\n                __stores__[storeName]._setState((/**\n                 * @return {?}\n                 */\n                function () { return normalizedStores[storeName]; }));\n            }\n        };\n        for (var i = 0, keys = Object.keys(normalizedStores); i < keys.length; i++) {\n            _loop_1(i, keys);\n        }\n        options.skipStorageUpdate && setSkipStorageUpdate(false);\n    };\n    return SnapshotManager;\n}());\n/** @type {?} */\nvar snapshotManager = new SnapshotManager();\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @abstract\n * @template State\n */\nvar  /**\n * @abstract\n * @template State\n */\nAkitaPlugin = /** @class */ (function () {\n    function AkitaPlugin(query, config) {\n        this.query = query;\n        if (config && config.resetFn) {\n            if (getAkitaConfig().resettable) {\n                this.onReset(config.resetFn);\n            }\n        }\n    }\n    /** This method is responsible for getting access to the query. */\n    /**\n     * This method is responsible for getting access to the query.\n     * @protected\n     * @return {?}\n     */\n    AkitaPlugin.prototype.getQuery = /**\n     * This method is responsible for getting access to the query.\n     * @protected\n     * @return {?}\n     */\n    function () {\n        return this.query;\n    };\n    /** This method is responsible for getting access to the store. */\n    /**\n     * This method is responsible for getting access to the store.\n     * @protected\n     * @return {?}\n     */\n    AkitaPlugin.prototype.getStore = /**\n     * This method is responsible for getting access to the store.\n     * @protected\n     * @return {?}\n     */\n    function () {\n        return this.getQuery().__store__;\n    };\n    /** This method is responsible tells whether the plugin is entityBased or not.  */\n    /**\n     * This method is responsible tells whether the plugin is entityBased or not.\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    AkitaPlugin.prototype.isEntityBased = /**\n     * This method is responsible tells whether the plugin is entityBased or not.\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    function (entityId) {\n        return toBoolean(entityId);\n    };\n    /** This method is responsible for selecting the source; it can be the whole store or one entity. */\n    /**\n     * This method is responsible for selecting the source; it can be the whole store or one entity.\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    AkitaPlugin.prototype.selectSource = /**\n     * This method is responsible for selecting the source; it can be the whole store or one entity.\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    function (entityId) {\n        if (this.isEntityBased(entityId)) {\n            return ((/** @type {?} */ (this.getQuery()))).selectEntity(entityId).pipe(filterNil);\n        }\n        return ((/** @type {?} */ (this.getQuery()))).select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state; }));\n    };\n    /**\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    AkitaPlugin.prototype.getSource = /**\n     * @protected\n     * @param {?} entityId\n     * @return {?}\n     */\n    function (entityId) {\n        if (this.isEntityBased(entityId)) {\n            return ((/** @type {?} */ (this.getQuery()))).getEntity(entityId);\n        }\n        return this.getQuery().getValue();\n    };\n    /** This method is responsible for updating the store or one entity; it can be the whole store or one entity. */\n    /**\n     * This method is responsible for updating the store or one entity; it can be the whole store or one entity.\n     * @protected\n     * @param {?} newState\n     * @param {?=} entityId\n     * @return {?}\n     */\n    AkitaPlugin.prototype.updateStore = /**\n     * This method is responsible for updating the store or one entity; it can be the whole store or one entity.\n     * @protected\n     * @param {?} newState\n     * @param {?=} entityId\n     * @return {?}\n     */\n    function (newState, entityId) {\n        if (this.isEntityBased(entityId)) {\n            this.getStore().update(entityId, newState);\n        }\n        else {\n            this.getStore()._setState((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) { return (__assign({}, state, newState)); }));\n        }\n    };\n    /**\n     * Function to invoke upon reset\n     */\n    /**\n     * Function to invoke upon reset\n     * @private\n     * @param {?} fn\n     * @return {?}\n     */\n    AkitaPlugin.prototype.onReset = /**\n     * Function to invoke upon reset\n     * @private\n     * @param {?} fn\n     * @return {?}\n     */\n    function (fn) {\n        var _this = this;\n        /** @type {?} */\n        var original = this.getStore().reset;\n        this.getStore().reset = (/**\n         * @param {...?} params\n         * @return {?}\n         */\n        function () {\n            var params = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                params[_i] = arguments[_i];\n            }\n            /** It should run after the plugin destroy method */\n            setTimeout((/**\n             * @return {?}\n             */\n            function () {\n                original.apply(_this.getStore(), params);\n                fn();\n            }));\n        });\n    };\n    return AkitaPlugin;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar paginatorDefaults = {\n    pagesControls: false,\n    range: false,\n    startWith: 1,\n    cacheTimeout: undefined,\n    clearStoreWithCache: true\n};\n/**\n * @template State\n */\nvar PaginatorPlugin = /** @class */ (function (_super) {\n    __extends(PaginatorPlugin, _super);\n    function PaginatorPlugin(query, config) {\n        if (config === void 0) { config = {}; }\n        var _this = _super.call(this, query, {\n            resetFn: (/**\n             * @return {?}\n             */\n            function () {\n                _this.initial = false;\n                _this.destroy({ clearCache: true, currentPage: 1 });\n            })\n        }) || this;\n        _this.query = query;\n        _this.config = config;\n        /**\n         * Save current filters, sorting, etc. in cache\n         */\n        _this.metadata = new Map();\n        _this.pages = new Map();\n        _this.pagination = {\n            currentPage: 1,\n            perPage: 0,\n            total: 0,\n            lastPage: 0,\n            data: []\n        };\n        /**\n         * When the user navigates to a different page and return\n         * we don't want to call `clearCache` on first time.\n         */\n        _this.initial = true;\n        /**\n         * Proxy to the query loading\n         */\n        _this.isLoading$ = _this.query.selectLoading().pipe(delay(0));\n        _this.config = Object.assign(paginatorDefaults, config);\n        var _a = _this.config, startWith = _a.startWith, cacheTimeout = _a.cacheTimeout;\n        _this.page = new BehaviorSubject(startWith);\n        if (isObservable(cacheTimeout)) {\n            _this.clearCacheSubscription = cacheTimeout.subscribe((/**\n             * @return {?}\n             */\n            function () { return _this.clearCache(); }));\n        }\n        return _this;\n    }\n    Object.defineProperty(PaginatorPlugin.prototype, \"pageChanges\", {\n        /**\n         * Listen to page changes\n         */\n        get: /**\n         * Listen to page changes\n         * @return {?}\n         */\n        function () {\n            return this.page.asObservable();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PaginatorPlugin.prototype, \"currentPage\", {\n        /**\n         * Get the current page number\n         */\n        get: /**\n         * Get the current page number\n         * @return {?}\n         */\n        function () {\n            return this.pagination.currentPage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PaginatorPlugin.prototype, \"isFirst\", {\n        /**\n         * Check if current page is the first one\n         */\n        get: /**\n         * Check if current page is the first one\n         * @return {?}\n         */\n        function () {\n            return this.currentPage === 1;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PaginatorPlugin.prototype, \"isLast\", {\n        /**\n         * Check if current page is the last one\n         */\n        get: /**\n         * Check if current page is the last one\n         * @return {?}\n         */\n        function () {\n            return this.currentPage === this.pagination.lastPage;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Whether to generate an array of pages for *ngFor\n     * [1, 2, 3, 4]\n     */\n    /**\n     * Whether to generate an array of pages for *ngFor\n     * [1, 2, 3, 4]\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    PaginatorPlugin.prototype.withControls = /**\n     * Whether to generate an array of pages for *ngFor\n     * [1, 2, 3, 4]\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    function () {\n        (/** @type {?} */ (this)).config.pagesControls = true;\n        return (/** @type {?} */ (this));\n    };\n    /**\n     * Whether to generate the `from` and `to` keys\n     * [1, 2, 3, 4]\n     */\n    /**\n     * Whether to generate the `from` and `to` keys\n     * [1, 2, 3, 4]\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    PaginatorPlugin.prototype.withRange = /**\n     * Whether to generate the `from` and `to` keys\n     * [1, 2, 3, 4]\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    function () {\n        (/** @type {?} */ (this)).config.range = true;\n        return (/** @type {?} */ (this));\n    };\n    /**\n     * Set the loading state\n     */\n    /**\n     * Set the loading state\n     * @param {?=} value\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.setLoading = /**\n     * Set the loading state\n     * @param {?=} value\n     * @return {?}\n     */\n    function (value) {\n        if (value === void 0) { value = true; }\n        this.getStore().setLoading(value);\n    };\n    /**\n     * Update the pagination object and add the page\n     */\n    /**\n     * Update the pagination object and add the page\n     * @param {?} response\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.update = /**\n     * Update the pagination object and add the page\n     * @param {?} response\n     * @return {?}\n     */\n    function (response) {\n        this.pagination = response;\n        this.addPage(response.data);\n    };\n    /**\n     *\n     * Set the ids and add the page to store\n     */\n    /**\n     *\n     * Set the ids and add the page to store\n     * @param {?} data\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.addPage = /**\n     *\n     * Set the ids and add the page to store\n     * @param {?} data\n     * @return {?}\n     */\n    function (data) {\n        var _this = this;\n        this.pages.set(this.currentPage, { ids: data.map((/**\n             * @param {?} entity\n             * @return {?}\n             */\n            function (entity) { return entity[_this.getStore().idKey]; })) });\n        this.getStore().add(data);\n    };\n    /**\n     * Clear the cache.\n     */\n    /**\n     * Clear the cache.\n     * @param {?=} options\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.clearCache = /**\n     * Clear the cache.\n     * @param {?=} options\n     * @return {?}\n     */\n    function (options) {\n        if (options === void 0) { options = {}; }\n        if (!this.initial) {\n            logAction('@Pagination - Clear Cache');\n            if (options.clearStore !== false && (this.config.clearStoreWithCache || options.clearStore)) {\n                this.getStore().remove();\n            }\n            this.pages = new Map();\n            this.metadata = new Map();\n        }\n        this.initial = false;\n    };\n    /**\n     * @param {?} page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.clearPage = /**\n     * @param {?} page\n     * @return {?}\n     */\n    function (page) {\n        this.pages.delete(page);\n    };\n    /**\n     * Clear the cache timeout and optionally the pages\n     */\n    /**\n     * Clear the cache timeout and optionally the pages\n     * @param {?=} __0\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.destroy = /**\n     * Clear the cache timeout and optionally the pages\n     * @param {?=} __0\n     * @return {?}\n     */\n    function (_a) {\n        var _b = _a === void 0 ? {} : _a, clearCache = _b.clearCache, currentPage = _b.currentPage;\n        if (this.clearCacheSubscription) {\n            this.clearCacheSubscription.unsubscribe();\n        }\n        if (clearCache) {\n            this.clearCache();\n        }\n        if (!isUndefined(currentPage)) {\n            this.setPage(currentPage);\n        }\n        this.initial = true;\n    };\n    /**\n     * Whether the provided page is active\n     */\n    /**\n     * Whether the provided page is active\n     * @param {?} page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.isPageActive = /**\n     * Whether the provided page is active\n     * @param {?} page\n     * @return {?}\n     */\n    function (page) {\n        return this.currentPage === page;\n    };\n    /**\n     * Set the current page\n     */\n    /**\n     * Set the current page\n     * @param {?} page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.setPage = /**\n     * Set the current page\n     * @param {?} page\n     * @return {?}\n     */\n    function (page) {\n        if (page !== this.currentPage || !this.hasPage(page)) {\n            this.page.next((this.pagination.currentPage = page));\n        }\n    };\n    /**\n     * Increment current page\n     */\n    /**\n     * Increment current page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.nextPage = /**\n     * Increment current page\n     * @return {?}\n     */\n    function () {\n        if (this.currentPage !== this.pagination.lastPage) {\n            this.setPage(this.pagination.currentPage + 1);\n        }\n    };\n    /**\n     * Decrement current page\n     */\n    /**\n     * Decrement current page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.prevPage = /**\n     * Decrement current page\n     * @return {?}\n     */\n    function () {\n        if (this.pagination.currentPage > 1) {\n            this.setPage(this.pagination.currentPage - 1);\n        }\n    };\n    /**\n     * Set current page to last\n     */\n    /**\n     * Set current page to last\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.setLastPage = /**\n     * Set current page to last\n     * @return {?}\n     */\n    function () {\n        this.setPage(this.pagination.lastPage);\n    };\n    /**\n     * Set current page to first\n     */\n    /**\n     * Set current page to first\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.setFirstPage = /**\n     * Set current page to first\n     * @return {?}\n     */\n    function () {\n        this.setPage(1);\n    };\n    /**\n     * Check if page exists in cache\n     */\n    /**\n     * Check if page exists in cache\n     * @param {?} page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.hasPage = /**\n     * Check if page exists in cache\n     * @param {?} page\n     * @return {?}\n     */\n    function (page) {\n        return this.pages.has(page);\n    };\n    /**\n     * Get the current page if it's in cache, otherwise invoke the request\n     */\n    /**\n     * Get the current page if it's in cache, otherwise invoke the request\n     * @param {?} req\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.getPage = /**\n     * Get the current page if it's in cache, otherwise invoke the request\n     * @param {?} req\n     * @return {?}\n     */\n    function (req) {\n        var _this = this;\n        /** @type {?} */\n        var page = this.pagination.currentPage;\n        if (this.hasPage(page)) {\n            return this.selectPage(page);\n        }\n        else {\n            this.setLoading(true);\n            return from(req()).pipe(switchMap((/**\n             * @param {?} config\n             * @return {?}\n             */\n            function (config) {\n                page = config.currentPage;\n                applyTransaction((/**\n                 * @return {?}\n                 */\n                function () {\n                    _this.setLoading(false);\n                    _this.update(config);\n                }));\n                return _this.selectPage(page);\n            })));\n        }\n    };\n    /**\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.getQuery = /**\n     * @return {?}\n     */\n    function () {\n        return this.query;\n    };\n    /**\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.refreshCurrentPage = /**\n     * @return {?}\n     */\n    function () {\n        if (isNil(this.currentPage) === false) {\n            this.clearPage(this.currentPage);\n            this.setPage(this.currentPage);\n        }\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.getFrom = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        if (this.isFirst) {\n            return 1;\n        }\n        return (this.currentPage - 1) * this.pagination.perPage + 1;\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.getTo = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        if (this.isLast) {\n            return this.pagination.total;\n        }\n        return this.currentPage * this.pagination.perPage;\n    };\n    /**\n     * Select the page\n     */\n    /**\n     * Select the page\n     * @private\n     * @param {?} page\n     * @return {?}\n     */\n    PaginatorPlugin.prototype.selectPage = /**\n     * Select the page\n     * @private\n     * @param {?} page\n     * @return {?}\n     */\n    function (page) {\n        var _this = this;\n        return this.query.selectAll({ asObject: true }).pipe(take(1), map((/**\n         * @param {?} entities\n         * @return {?}\n         */\n        function (entities) {\n            /** @type {?} */\n            var response = __assign({}, _this.pagination, { data: _this.pages.get(page).ids.map((/**\n                 * @param {?} id\n                 * @return {?}\n                 */\n                function (id) { return entities[id]; })) });\n            var _a = _this.config, range = _a.range, pagesControls = _a.pagesControls;\n            /** If no total - calc it */\n            if (isNaN(_this.pagination.total)) {\n                if (response.lastPage === 1) {\n                    response.total = response.data ? response.data.length : 0;\n                }\n                else {\n                    response.total = response.perPage * response.lastPage;\n                }\n                _this.pagination.total = response.total;\n            }\n            if (range) {\n                response.from = _this.getFrom();\n                response.to = _this.getTo();\n            }\n            if (pagesControls) {\n                response.pageControls = generatePages(_this.pagination.total, _this.pagination.perPage);\n            }\n            return response;\n        })));\n    };\n    __decorate([\n        action('@Pagination - New Page'),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Object]),\n        __metadata(\"design:returntype\", void 0)\n    ], PaginatorPlugin.prototype, \"update\", null);\n    return PaginatorPlugin;\n}(AkitaPlugin));\n/**\n * Generate an array so we can ngFor them to navigate between pages\n * @param {?} total\n * @param {?} perPage\n * @return {?}\n */\nfunction generatePages(total, perPage) {\n    /** @type {?} */\n    var len = Math.ceil(total / perPage);\n    /** @type {?} */\n    var arr = [];\n    for (var i = 0; i < len; i++) {\n        arr.push(i + 1);\n    }\n    return arr;\n}\n/**\n * backward compatibility\n * @type {?}\n */\nvar Paginator = PaginatorPlugin;\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// Todo: Return  AbstractControl interface\n/**\n * @template T\n */\nvar  \n// Todo: Return  AbstractControl interface\n/**\n * @template T\n */\nPersistNgFormPlugin = /** @class */ (function (_super) {\n    __extends(PersistNgFormPlugin, _super);\n    function PersistNgFormPlugin(query, factoryFnOrPath, params) {\n        if (params === void 0) { params = {}; }\n        var _this = _super.call(this, query) || this;\n        _this.query = query;\n        _this.factoryFnOrPath = factoryFnOrPath;\n        _this.params = params;\n        _this.params = __assign({ debounceTime: 300, formKey: 'akitaForm', emitEvent: false, arrControlFactory: (/**\n             * @param {?} v\n             * @return {?}\n             */\n            function (v) { return _this.builder.control(v); }) }, params);\n        _this.isRootKeys = toBoolean(factoryFnOrPath) === false;\n        _this.isKeyBased = isString(factoryFnOrPath) || _this.isRootKeys;\n        return _this;\n    }\n    /**\n     * @template THIS\n     * @this {THIS}\n     * @param {?} form\n     * @param {?=} builder\n     * @return {THIS}\n     */\n    PersistNgFormPlugin.prototype.setForm = /**\n     * @template THIS\n     * @this {THIS}\n     * @param {?} form\n     * @param {?=} builder\n     * @return {THIS}\n     */\n    function (form, builder) {\n        (/** @type {?} */ (this)).form = form;\n        (/** @type {?} */ (this)).builder = builder;\n        (/** @type {?} */ (this)).activate();\n        return (/** @type {?} */ (this));\n    };\n    /**\n     * @param {?=} initialState\n     * @return {?}\n     */\n    PersistNgFormPlugin.prototype.reset = /**\n     * @param {?=} initialState\n     * @return {?}\n     */\n    function (initialState) {\n        var _this = this;\n        var _a;\n        /** @type {?} */\n        var value;\n        if (initialState) {\n            value = initialState;\n        }\n        else {\n            value = this.isKeyBased ? this.initialValue : ((/** @type {?} */ (this))).factoryFnOrPath();\n        }\n        if (this.isKeyBased) {\n            Object.keys(this.initialValue).forEach((/**\n             * @param {?} stateKey\n             * @return {?}\n             */\n            function (stateKey) {\n                /** @type {?} */\n                var value = _this.initialValue[stateKey];\n                if (Array.isArray(value) && _this.builder) {\n                    /** @type {?} */\n                    var formArray = _this.form.controls[stateKey];\n                    _this.cleanArray(formArray);\n                    value.forEach((/**\n                     * @param {?} v\n                     * @param {?} i\n                     * @return {?}\n                     */\n                    function (v, i) {\n                        _this.form.get(stateKey).insert(i, ((/** @type {?} */ (_this.params.arrControlFactory)))(v));\n                    }));\n                }\n            }));\n        }\n        this.form.patchValue(value, { emitEvent: this.params.emitEvent });\n        /** @type {?} */\n        var storeValue = this.isKeyBased ? setValue(this.getQuery().getValue(), this.getStore().storeName + \".\" + this.factoryFnOrPath, value) : (_a = {}, _a[this.params.formKey] = value, _a);\n        this.updateStore(storeValue);\n    };\n    /**\n     * @private\n     * @param {?} control\n     * @return {?}\n     */\n    PersistNgFormPlugin.prototype.cleanArray = /**\n     * @private\n     * @param {?} control\n     * @return {?}\n     */\n    function (control) {\n        while (control.length !== 0) {\n            control.removeAt(0);\n        }\n    };\n    /**\n     * @private\n     * @param {?} formValue\n     * @param {?} root\n     * @return {?}\n     */\n    PersistNgFormPlugin.prototype.resolveInitialValue = /**\n     * @private\n     * @param {?} formValue\n     * @param {?} root\n     * @return {?}\n     */\n    function (formValue, root) {\n        var _this = this;\n        if (!formValue)\n            return;\n        return Object.keys(formValue).reduce((/**\n         * @param {?} acc\n         * @param {?} stateKey\n         * @return {?}\n         */\n        function (acc, stateKey) {\n            /** @type {?} */\n            var value = root[stateKey];\n            if (Array.isArray(value) && _this.builder) {\n                /** @type {?} */\n                var factory_1 = _this.params.arrControlFactory;\n                _this.cleanArray(_this.form.get(stateKey));\n                value.forEach((/**\n                 * @param {?} v\n                 * @param {?} i\n                 * @return {?}\n                 */\n                function (v, i) {\n                    _this.form.get(stateKey).insert(i, ((/** @type {?} */ (factory_1)))(v));\n                }));\n            }\n            acc[stateKey] = root[stateKey];\n            return acc;\n        }), {});\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    PersistNgFormPlugin.prototype.activate = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        var _a;\n        /** @type {?} */\n        var path;\n        if (this.isKeyBased) {\n            if (this.isRootKeys) {\n                this.initialValue = this.resolveInitialValue(this.form.value, this.getQuery().getValue());\n                this.form.patchValue(this.initialValue, { emitEvent: this.params.emitEvent });\n            }\n            else {\n                path = this.getStore().storeName + \".\" + this.factoryFnOrPath;\n                /** @type {?} */\n                var root = getValue(this.getQuery().getValue(), path);\n                this.initialValue = this.resolveInitialValue(root, root);\n                this.form.patchValue(this.initialValue, { emitEvent: this.params.emitEvent });\n            }\n        }\n        else {\n            if (!((/** @type {?} */ (this.getQuery().getValue())))[this.params.formKey]) {\n                logAction('@PersistNgFormPlugin activate');\n                this.updateStore((_a = {}, _a[this.params.formKey] = ((/** @type {?} */ (this))).factoryFnOrPath(), _a));\n            }\n            /** @type {?} */\n            var value = this.getQuery().getValue()[this.params.formKey];\n            this.form.patchValue(value);\n        }\n        this.formChanges = this.form.valueChanges.pipe(debounceTime(this.params.debounceTime)).subscribe((/**\n         * @param {?} value\n         * @return {?}\n         */\n        function (value) {\n            logAction('@PersistForm - Update');\n            /** @type {?} */\n            var newState;\n            if (_this.isKeyBased) {\n                if (_this.isRootKeys) {\n                    newState = (/**\n                     * @param {?} state\n                     * @return {?}\n                     */\n                    function (state) { return (__assign({}, state, value)); });\n                }\n                else {\n                    newState = (/**\n                     * @param {?} state\n                     * @return {?}\n                     */\n                    function (state) { return setValue(state, path, value); });\n                }\n            }\n            else {\n                newState = (/**\n                 * @return {?}\n                 */\n                function () {\n                    var _a;\n                    return (_a = {}, _a[_this.params.formKey] = value, _a);\n                });\n            }\n            _this.updateStore(newState(_this.getQuery().getValue()));\n        }));\n    };\n    /**\n     * @return {?}\n     */\n    PersistNgFormPlugin.prototype.destroy = /**\n     * @return {?}\n     */\n    function () {\n        this.formChanges && this.formChanges.unsubscribe();\n        this.form = null;\n        this.builder = null;\n    };\n    return PersistNgFormPlugin;\n}(AkitaPlugin));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction capitalize(value) {\n    return value && value.charAt(0).toUpperCase() + value.slice(1);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar subs = [];\n/**\n * @param {?=} ngZoneOrOptions\n * @param {?=} options\n * @return {?}\n */\nfunction akitaDevtools(ngZoneOrOptions, options) {\n    if (options === void 0) { options = {}; }\n    if (isNotBrowser)\n        return;\n    if (!((/** @type {?} */ (window))).__REDUX_DEVTOOLS_EXTENSION__) {\n        return;\n    }\n    subs.length &&\n        subs.forEach((/**\n         * @param {?} s\n         * @return {?}\n         */\n        function (s) {\n            if (s.unsubscribe) {\n                s.unsubscribe();\n            }\n            else {\n                s && s();\n            }\n        }));\n    /** @type {?} */\n    var isAngular = ngZoneOrOptions && ngZoneOrOptions['run'];\n    if (!isAngular) {\n        ngZoneOrOptions = ngZoneOrOptions || {};\n        ((/** @type {?} */ (ngZoneOrOptions))).run = (/**\n         * @param {?} cb\n         * @return {?}\n         */\n        function (cb) { return cb(); });\n        options = (/** @type {?} */ (ngZoneOrOptions));\n    }\n    /** @type {?} */\n    var defaultOptions = { name: 'Akita', shallow: true };\n    /** @type {?} */\n    var merged = Object.assign({}, defaultOptions, options);\n    /** @type {?} */\n    var devTools = ((/** @type {?} */ (window))).__REDUX_DEVTOOLS_EXTENSION__.connect(merged);\n    /** @type {?} */\n    var appState = {};\n    subs.push($$addStore.subscribe((/**\n     * @param {?} storeName\n     * @return {?}\n     */\n    function (storeName) {\n        var _a;\n        appState = __assign({}, appState, (_a = {}, _a[storeName] = __stores__[storeName]._value(), _a));\n        devTools.send({ type: \"[\" + capitalize(storeName) + \"] - @@INIT\" }, appState);\n    })));\n    subs.push($$deleteStore.subscribe((/**\n     * @param {?} storeName\n     * @return {?}\n     */\n    function (storeName) {\n        delete appState[storeName];\n        devTools.send({ type: \"[\" + storeName + \"] - Delete Store\" }, appState);\n    })));\n    subs.push($$updateStore.subscribe((/**\n     * @param {?} storeName\n     * @return {?}\n     */\n    function (storeName) {\n        var _a;\n        var type = currentAction.type, entityIds = currentAction.entityIds, skip$$1 = currentAction.skip;\n        if (skip$$1) {\n            setSkipAction(false);\n            return;\n        }\n        /** @type {?} */\n        var store = __stores__[storeName];\n        if (!store) {\n            return;\n        }\n        if (options.shallow === false && appState[storeName]) {\n            /** @type {?} */\n            var isEqual = JSON.stringify(store._value()) === JSON.stringify(appState[storeName]);\n            if (isEqual)\n                return;\n        }\n        appState = __assign({}, appState, (_a = {}, _a[storeName] = store._value(), _a));\n        /** @type {?} */\n        var normalize = capitalize(storeName);\n        /** @type {?} */\n        var msg = isDefined(entityIds) ? \"[\" + normalize + \"] - \" + type + \" (ids: \" + entityIds + \")\" : \"[\" + normalize + \"] - \" + type;\n        if (options.logTrace) {\n            console.group(msg);\n            console.trace();\n            console.groupEnd();\n        }\n        devTools.send({ type: msg }, appState);\n    })));\n    subs.push(devTools.subscribe((/**\n     * @param {?} message\n     * @return {?}\n     */\n    function (message) {\n        if (message.type === 'DISPATCH') {\n            /** @type {?} */\n            var payloadType = message.payload.type;\n            if (payloadType === 'COMMIT') {\n                devTools.init(appState);\n                return;\n            }\n            if (message.state) {\n                /** @type {?} */\n                var rootState_1 = JSON.parse(message.state);\n                var _loop_1 = function (i, keys) {\n                    /** @type {?} */\n                    var storeName = keys[i];\n                    if (__stores__[storeName]) {\n                        ((/** @type {?} */ (ngZoneOrOptions))).run((/**\n                         * @return {?}\n                         */\n                        function () {\n                            __stores__[storeName]._setState((/**\n                             * @return {?}\n                             */\n                            function () { return rootState_1[storeName]; }), false);\n                        }));\n                    }\n                };\n                for (var i = 0, keys = Object.keys(rootState_1); i < keys.length; i++) {\n                    _loop_1(i, keys);\n                }\n            }\n        }\n    })));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Each plugin that wants to add support for entities should extend this interface.\n * @abstract\n * @template State, P\n */\nvar  /**\n * Each plugin that wants to add support for entities should extend this interface.\n * @abstract\n * @template State, P\n */\nEntityCollectionPlugin = /** @class */ (function () {\n    function EntityCollectionPlugin(query, entityIds) {\n        this.query = query;\n        this.entityIds = entityIds;\n        this.entities = new Map();\n    }\n    /**\n     * Get the entity plugin instance.\n     */\n    /**\n     * Get the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.getEntity = /**\n     * Get the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        return this.entities.get(id);\n    };\n    /**\n     * Whether the entity plugin exist.\n     */\n    /**\n     * Whether the entity plugin exist.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.hasEntity = /**\n     * Whether the entity plugin exist.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        return this.entities.has(id);\n    };\n    /**\n     * Remove the entity plugin instance.\n     */\n    /**\n     * Remove the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.removeEntity = /**\n     * Remove the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        this.destroy(id);\n        return this.entities.delete(id);\n    };\n    /**\n     * Set the entity plugin instance.\n     */\n    /**\n     * Set the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @param {?} plugin\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.createEntity = /**\n     * Set the entity plugin instance.\n     * @protected\n     * @param {?} id\n     * @param {?} plugin\n     * @return {?}\n     */\n    function (id, plugin) {\n        return this.entities.set(id, plugin);\n    };\n    /**\n     * If the user passes `entityIds` we take them; otherwise, we take all.\n     */\n    /**\n     * If the user passes `entityIds` we take them; otherwise, we take all.\n     * @protected\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.getIds = /**\n     * If the user passes `entityIds` we take them; otherwise, we take all.\n     * @protected\n     * @return {?}\n     */\n    function () {\n        return isUndefined(this.entityIds) ? this.query.getValue().ids : coerceArray(this.entityIds);\n    };\n    /**\n     * When you call one of the plugin methods, you can pass id/ids or undefined which means all.\n     */\n    /**\n     * When you call one of the plugin methods, you can pass id/ids or undefined which means all.\n     * @protected\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.resolvedIds = /**\n     * When you call one of the plugin methods, you can pass id/ids or undefined which means all.\n     * @protected\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        return isUndefined(ids) ? this.getIds() : coerceArray(ids);\n    };\n    /**\n     * Call this method when you want to activate the plugin on init or when you need to listen to add/remove of entities dynamically.\n     *\n     * For example in your plugin you may do the following:\n     *\n     * this.query.select(state => state.ids).pipe(skip(1)).subscribe(ids => this.activate(ids));\n     */\n    /**\n     * Call this method when you want to activate the plugin on init or when you need to listen to add/remove of entities dynamically.\n     *\n     * For example in your plugin you may do the following:\n     *\n     * this.query.select(state => state.ids).pipe(skip(1)).subscribe(ids => this.activate(ids));\n     * @protected\n     * @param {?} ids\n     * @param {?=} actions\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.rebase = /**\n     * Call this method when you want to activate the plugin on init or when you need to listen to add/remove of entities dynamically.\n     *\n     * For example in your plugin you may do the following:\n     *\n     * this.query.select(state => state.ids).pipe(skip(1)).subscribe(ids => this.activate(ids));\n     * @protected\n     * @param {?} ids\n     * @param {?=} actions\n     * @return {?}\n     */\n    function (ids, actions) {\n        var _this = this;\n        if (actions === void 0) { actions = {}; }\n        /**\n         *\n         * If the user passes `entityIds` & we have new ids check if we need to add/remove instances.\n         *\n         * This phase will be called only upon update.\n         */\n        if (toBoolean(ids)) {\n            /**\n             * Which means all\n             */\n            if (isUndefined(this.entityIds)) {\n                for (var i = 0, len = ids.length; i < len; i++) {\n                    /** @type {?} */\n                    var entityId = ids[i];\n                    if (this.hasEntity(entityId) === false) {\n                        isFunction(actions.beforeAdd) && actions.beforeAdd(entityId);\n                        /** @type {?} */\n                        var plugin = this.instantiatePlugin(entityId);\n                        this.entities.set(entityId, plugin);\n                        isFunction(actions.afterAdd) && actions.afterAdd(plugin);\n                    }\n                }\n                this.entities.forEach((/**\n                 * @param {?} plugin\n                 * @param {?} entityId\n                 * @return {?}\n                 */\n                function (plugin, entityId) {\n                    if (ids.indexOf(entityId) === -1) {\n                        isFunction(actions.beforeRemove) && actions.beforeRemove(plugin);\n                        _this.removeEntity(entityId);\n                    }\n                }));\n            }\n            else {\n                /**\n                 * Which means the user passes specific ids\n                 * @type {?}\n                 */\n                var _ids = coerceArray(this.entityIds);\n                for (var i = 0, len = _ids.length; i < len; i++) {\n                    /** @type {?} */\n                    var entityId = _ids[i];\n                    /** The Entity in current ids and doesn't exist, add it. */\n                    if (ids.indexOf(entityId) > -1 && this.hasEntity(entityId) === false) {\n                        isFunction(actions.beforeAdd) && actions.beforeAdd(entityId);\n                        /** @type {?} */\n                        var plugin = this.instantiatePlugin(entityId);\n                        this.entities.set(entityId, plugin);\n                        isFunction(actions.afterAdd) && actions.afterAdd(plugin);\n                    }\n                    else {\n                        this.entities.forEach((/**\n                         * @param {?} plugin\n                         * @param {?} entityId\n                         * @return {?}\n                         */\n                        function (plugin, entityId) {\n                            /** The Entity not in current ids and exists, remove it. */\n                            if (ids.indexOf(entityId) === -1 && _this.hasEntity(entityId) === true) {\n                                isFunction(actions.beforeRemove) && actions.beforeRemove(plugin);\n                                _this.removeEntity(entityId);\n                            }\n                        }));\n                    }\n                }\n            }\n        }\n        else {\n            /**\n             * Otherwise, start with the provided ids or all.\n             */\n            this.getIds().forEach((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) {\n                if (!_this.hasEntity(id))\n                    _this.createEntity(id, _this.instantiatePlugin(id));\n            }));\n        }\n    };\n    /**\n     * Listen for add/remove entities.\n     */\n    /**\n     * Listen for add/remove entities.\n     * @protected\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.selectIds = /**\n     * Listen for add/remove entities.\n     * @protected\n     * @return {?}\n     */\n    function () {\n        return this.query.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.ids; }));\n    };\n    /**\n     * Base method for activation, you can override it if you need to.\n     */\n    /**\n     * Base method for activation, you can override it if you need to.\n     * @protected\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.activate = /**\n     * Base method for activation, you can override it if you need to.\n     * @protected\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.rebase(ids);\n    };\n    /**\n     * Loop over each id and invoke the plugin method.\n     */\n    /**\n     * Loop over each id and invoke the plugin method.\n     * @protected\n     * @param {?} ids\n     * @param {?} cb\n     * @return {?}\n     */\n    EntityCollectionPlugin.prototype.forEachId = /**\n     * Loop over each id and invoke the plugin method.\n     * @protected\n     * @param {?} ids\n     * @param {?} cb\n     * @return {?}\n     */\n    function (ids, cb) {\n        /** @type {?} */\n        var _ids = this.resolvedIds(ids);\n        for (var i = 0, len = _ids.length; i < len; i++) {\n            /** @type {?} */\n            var id = _ids[i];\n            if (this.hasEntity(id)) {\n                cb(this.getEntity(id));\n            }\n        }\n    };\n    return EntityCollectionPlugin;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template State\n */\nvar  /**\n * @template State\n */\nStateHistoryPlugin = /** @class */ (function (_super) {\n    __extends(StateHistoryPlugin, _super);\n    function StateHistoryPlugin(query, params, _entityId) {\n        if (params === void 0) { params = {}; }\n        var _this = _super.call(this, query, {\n            resetFn: (/**\n             * @return {?}\n             */\n            function () { return _this.clear(); })\n        }) || this;\n        _this.query = query;\n        _this.params = params;\n        _this._entityId = _entityId;\n        /**\n         * Allow skipping an update from outside\n         */\n        _this.skip = false;\n        _this.history = {\n            past: [],\n            present: null,\n            future: []\n        };\n        /**\n         * Skip the update when redo/undo\n         */\n        _this.skipUpdate = false;\n        params.maxAge = !!params.maxAge ? params.maxAge : 10;\n        params.comparator = params.comparator || ((/**\n         * @return {?}\n         */\n        function () { return true; }));\n        _this.activate();\n        return _this;\n    }\n    Object.defineProperty(StateHistoryPlugin.prototype, \"hasPast\", {\n        get: /**\n         * @return {?}\n         */\n        function () {\n            return this.history.past.length > 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(StateHistoryPlugin.prototype, \"hasFuture\", {\n        get: /**\n         * @return {?}\n         */\n        function () {\n            return this.history.future.length > 0;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.activate = /**\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        this.history.present = this.getSource(this._entityId);\n        this.subscription = ((/** @type {?} */ (this))).selectSource(this._entityId).pipe(pairwise())\n            .subscribe((/**\n         * @param {?} __0\n         * @return {?}\n         */\n        function (_a) {\n            var _b = __read(_a, 2), past = _b[0], present = _b[1];\n            if (_this.skip) {\n                _this.skip = false;\n                return;\n            }\n            /**\n             *  comparator: (prev, current) => isEqual(prev, current) === false\n             * @type {?}\n             */\n            var shouldUpdate = _this.params.comparator(past, present);\n            if (!_this.skipUpdate && shouldUpdate) {\n                if (_this.history.past.length === _this.params.maxAge) {\n                    _this.history.past = _this.history.past.slice(1);\n                }\n                _this.history.past = __spread(_this.history.past, [past]);\n                _this.history.present = present;\n            }\n        }));\n    };\n    /**\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.undo = /**\n     * @return {?}\n     */\n    function () {\n        if (this.history.past.length > 0) {\n            var _a = this.history, past = _a.past, present = _a.present;\n            /** @type {?} */\n            var previous = past[past.length - 1];\n            this.history.past = past.slice(0, past.length - 1);\n            this.history.present = previous;\n            this.history.future = __spread([present], this.history.future);\n            this.update();\n        }\n    };\n    /**\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.redo = /**\n     * @return {?}\n     */\n    function () {\n        if (this.history.future.length > 0) {\n            var _a = this.history, past = _a.past, present = _a.present;\n            /** @type {?} */\n            var next = this.history.future[0];\n            /** @type {?} */\n            var newFuture = this.history.future.slice(1);\n            this.history.past = __spread(past, [present]);\n            this.history.present = next;\n            this.history.future = newFuture;\n            this.update('Redo');\n        }\n    };\n    /**\n     * @param {?} index\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.jumpToPast = /**\n     * @param {?} index\n     * @return {?}\n     */\n    function (index) {\n        if (index < 0 || index >= this.history.past.length)\n            return;\n        var _a = this.history, past = _a.past, future = _a.future;\n        /**\n         *\n         * const past = [1, 2, 3, 4, 5];\n         *\n         * newPast = past.slice(0, 2) = [1, 2];\n         * present = past[index] = 3;\n         * [...past.slice(2 + 1), ...future] = [4, 5];\n         *\n         * @type {?}\n         */\n        var newPast = past.slice(0, index);\n        /** @type {?} */\n        var newFuture = __spread(past.slice(index + 1), future);\n        /** @type {?} */\n        var newPresent = past[index];\n        this.history.past = newPast;\n        this.history.present = newPresent;\n        this.history.future = newFuture;\n        this.update();\n    };\n    /**\n     * @param {?} index\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.jumpToFuture = /**\n     * @param {?} index\n     * @return {?}\n     */\n    function (index) {\n        if (index < 0 || index >= this.history.future.length)\n            return;\n        var _a = this.history, past = _a.past, future = _a.future;\n        /** @type {?} */\n        var newPast = __spread(past, future.slice(0, index));\n        /** @type {?} */\n        var newPresent = future[index];\n        /** @type {?} */\n        var newFuture = future.slice(index + 1);\n        this.history.past = newPast;\n        this.history.present = newPresent;\n        this.history.future = newFuture;\n        this.update('Redo');\n    };\n    /**\n     * Clear the history\n     *\n     * @param customUpdateFn Callback function for only clearing part of the history\n     *\n     * @example\n     *\n     * stateHistory.clear((history) => {\n     *  return {\n     *    past: history.past,\n     *    present: history.present,\n     *    future: []\n     *  };\n     * });\n     */\n    /**\n     * Clear the history\n     *\n     * \\@example\n     *\n     * stateHistory.clear((history) => {\n     *  return {\n     *    past: history.past,\n     *    present: history.present,\n     *    future: []\n     *  };\n     * });\n     * @param {?=} customUpdateFn Callback function for only clearing part of the history\n     *\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.clear = /**\n     * Clear the history\n     *\n     * \\@example\n     *\n     * stateHistory.clear((history) => {\n     *  return {\n     *    past: history.past,\n     *    present: history.present,\n     *    future: []\n     *  };\n     * });\n     * @param {?=} customUpdateFn Callback function for only clearing part of the history\n     *\n     * @return {?}\n     */\n    function (customUpdateFn) {\n        this.history = isFunction(customUpdateFn) ? customUpdateFn(this.history) : {\n            past: [],\n            present: null,\n            future: []\n        };\n    };\n    /**\n     * @param {?=} clearHistory\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.destroy = /**\n     * @param {?=} clearHistory\n     * @return {?}\n     */\n    function (clearHistory) {\n        if (clearHistory === void 0) { clearHistory = false; }\n        if (clearHistory) {\n            this.clear();\n        }\n        this.subscription.unsubscribe();\n    };\n    /**\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.ignoreNext = /**\n     * @return {?}\n     */\n    function () {\n        this.skip = true;\n    };\n    /**\n     * @private\n     * @param {?=} action\n     * @return {?}\n     */\n    StateHistoryPlugin.prototype.update = /**\n     * @private\n     * @param {?=} action\n     * @return {?}\n     */\n    function (action$$1) {\n        if (action$$1 === void 0) { action$$1 = 'Undo'; }\n        this.skipUpdate = true;\n        logAction(\"@StateHistory - \" + action$$1);\n        this.updateStore(this.history.present, this._entityId);\n        this.skipUpdate = false;\n    };\n    return StateHistoryPlugin;\n}(AkitaPlugin));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template State, P\n */\nvar  /**\n * @template State, P\n */\nEntityStateHistoryPlugin = /** @class */ (function (_super) {\n    __extends(EntityStateHistoryPlugin, _super);\n    function EntityStateHistoryPlugin(query, params) {\n        if (params === void 0) { params = {}; }\n        var _this = _super.call(this, query, params.entityIds) || this;\n        _this.query = query;\n        _this.params = params;\n        params.maxAge = toBoolean(params.maxAge) ? params.maxAge : 10;\n        _this.activate();\n        _this.selectIds()\n            .pipe(skip(1))\n            .subscribe((/**\n         * @param {?} ids\n         * @return {?}\n         */\n        function (ids) { return _this.activate(ids); }));\n        return _this;\n    }\n    /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.redo = /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.redo(); }));\n    };\n    /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.undo = /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.undo(); }));\n    };\n    /**\n     * @param {?} id\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.hasPast = /**\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        if (this.hasEntity(id)) {\n            return this.getEntity(id).hasPast;\n        }\n    };\n    /**\n     * @param {?} id\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.hasFuture = /**\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        if (this.hasEntity(id)) {\n            return this.getEntity(id).hasFuture;\n        }\n    };\n    /**\n     * @param {?} ids\n     * @param {?} index\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.jumpToFuture = /**\n     * @param {?} ids\n     * @param {?} index\n     * @return {?}\n     */\n    function (ids, index) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.jumpToFuture(index); }));\n    };\n    /**\n     * @param {?} ids\n     * @param {?} index\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.jumpToPast = /**\n     * @param {?} ids\n     * @param {?} index\n     * @return {?}\n     */\n    function (ids, index) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.jumpToPast(index); }));\n    };\n    /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.clear = /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.clear(); }));\n    };\n    /**\n     * @param {?=} ids\n     * @param {?=} clearHistory\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.destroy = /**\n     * @param {?=} ids\n     * @param {?=} clearHistory\n     * @return {?}\n     */\n    function (ids, clearHistory) {\n        if (clearHistory === void 0) { clearHistory = false; }\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.destroy(clearHistory); }));\n    };\n    /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.ignoreNext = /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.ignoreNext(); }));\n    };\n    /**\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    EntityStateHistoryPlugin.prototype.instantiatePlugin = /**\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        return (/** @type {?} */ (new StateHistoryPlugin(this.query, this.params, id)));\n    };\n    return EntityStateHistoryPlugin;\n}(EntityCollectionPlugin));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @type {?} */\nvar dirtyCheckDefaultParams = {\n    comparator: (/**\n     * @param {?} head\n     * @param {?} current\n     * @return {?}\n     */\n    function (head, current) { return JSON.stringify(head) !== JSON.stringify(current); })\n};\n/**\n * @param {?} nestedObj\n * @param {?} path\n * @return {?}\n */\nfunction getNestedPath(nestedObj, path) {\n    /** @type {?} */\n    var pathAsArray = path.split('.');\n    return pathAsArray.reduce((/**\n     * @param {?} obj\n     * @param {?} key\n     * @return {?}\n     */\n    function (obj, key) { return (obj && obj[key] !== 'undefined' ? obj[key] : undefined); }), nestedObj);\n}\n/**\n * @template State\n */\nvar  /**\n * @template State\n */\nDirtyCheckPlugin = /** @class */ (function (_super) {\n    __extends(DirtyCheckPlugin, _super);\n    function DirtyCheckPlugin(query, params, _entityId) {\n        var _this = _super.call(this, query) || this;\n        _this.query = query;\n        _this.params = params;\n        _this._entityId = _entityId;\n        _this.dirty = new BehaviorSubject(false);\n        _this.active = false;\n        _this._reset = new Subject();\n        _this.isDirty$ = _this.dirty.asObservable().pipe(distinctUntilChanged());\n        _this.reset$ = _this._reset.asObservable();\n        _this.params = __assign({}, dirtyCheckDefaultParams, params);\n        if (_this.params.watchProperty) {\n            /** @type {?} */\n            var watchProp = (/** @type {?} */ (coerceArray(_this.params.watchProperty)));\n            if (query instanceof QueryEntity && watchProp.includes('entities') && !watchProp.includes('ids')) {\n                watchProp.push('ids');\n            }\n            _this.params.watchProperty = watchProp;\n        }\n        return _this;\n    }\n    /**\n     * @param {?=} params\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.reset = /**\n     * @param {?=} params\n     * @return {?}\n     */\n    function (params) {\n        if (params === void 0) { params = {}; }\n        /** @type {?} */\n        var currentValue = this.head;\n        if (isFunction(params.updateFn)) {\n            if (this.isEntityBased(this._entityId)) {\n                currentValue = params.updateFn(this.head, ((/** @type {?} */ (this.getQuery()))).getEntity(this._entityId));\n            }\n            else {\n                currentValue = params.updateFn(this.head, ((/** @type {?} */ (this.getQuery()))).getValue());\n            }\n        }\n        logAction(\"@DirtyCheck - Revert\");\n        this.updateStore(currentValue, this._entityId);\n        this._reset.next();\n    };\n    /**\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    DirtyCheckPlugin.prototype.setHead = /**\n     * @template THIS\n     * @this {THIS}\n     * @return {THIS}\n     */\n    function () {\n        if (!(/** @type {?} */ (this)).active) {\n            (/** @type {?} */ (this)).activate();\n            (/** @type {?} */ (this)).active = true;\n        }\n        else {\n            (/** @type {?} */ (this)).head = (/** @type {?} */ (this))._getHead();\n        }\n        (/** @type {?} */ (this)).updateDirtiness(false);\n        return (/** @type {?} */ (this));\n    };\n    /**\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.isDirty = /**\n     * @return {?}\n     */\n    function () {\n        return !!this.dirty.value;\n    };\n    /**\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.hasHead = /**\n     * @return {?}\n     */\n    function () {\n        return !!this.getHead();\n    };\n    /**\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.destroy = /**\n     * @return {?}\n     */\n    function () {\n        this.head = null;\n        this.subscription && this.subscription.unsubscribe();\n        this._reset && this._reset.complete();\n    };\n    /**\n     * @param {?} path\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.isPathDirty = /**\n     * @param {?} path\n     * @return {?}\n     */\n    function (path) {\n        /** @type {?} */\n        var head = this.getHead();\n        /** @type {?} */\n        var current = ((/** @type {?} */ (this.getQuery()))).getValue();\n        /** @type {?} */\n        var currentPathValue = getNestedPath(current, path);\n        /** @type {?} */\n        var headPathValue = getNestedPath(head, path);\n        return this.params.comparator(currentPathValue, headPathValue);\n    };\n    /**\n     * @protected\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.getHead = /**\n     * @protected\n     * @return {?}\n     */\n    function () {\n        return this.head;\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.activate = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        var _this = this;\n        this.head = this._getHead();\n        /**\n         * if we are tracking specific properties select only the relevant ones\n         * @type {?}\n         */\n        var source = this.params.watchProperty\n            ? ((/** @type {?} */ (this.params.watchProperty))).map((/**\n             * @param {?} prop\n             * @return {?}\n             */\n            function (prop) {\n                return _this.query\n                    .select((/**\n                 * @param {?} state\n                 * @return {?}\n                 */\n                function (state) { return state[prop]; }))\n                    .pipe(map((/**\n                 * @param {?} val\n                 * @return {?}\n                 */\n                function (val) { return ({\n                    val: val,\n                    __akitaKey: prop\n                }); })));\n            }))\n            : [this.selectSource(this._entityId)];\n        this.subscription = combineLatest.apply(void 0, __spread(source)).pipe(skip(1))\n            .subscribe((/**\n         * @param {?} currentState\n         * @return {?}\n         */\n        function (currentState) {\n            if (isUndefined(_this.head))\n                return;\n            /**\n             * __akitaKey is used to determine if we are tracking a specific property or a store change\n             * @type {?}\n             */\n            var isChange = currentState.some((/**\n             * @param {?} state\n             * @return {?}\n             */\n            function (state) {\n                /** @type {?} */\n                var head = state.__akitaKey ? _this.head[(/** @type {?} */ (state.__akitaKey))] : _this.head;\n                /** @type {?} */\n                var compareTo = state.__akitaKey ? state.val : state;\n                return _this.params.comparator(head, compareTo);\n            }));\n            _this.updateDirtiness(isChange);\n        }));\n    };\n    /**\n     * @private\n     * @param {?} isDirty\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.updateDirtiness = /**\n     * @private\n     * @param {?} isDirty\n     * @return {?}\n     */\n    function (isDirty) {\n        this.dirty.next(isDirty);\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype._getHead = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        /** @type {?} */\n        var head = this.getSource(this._entityId);\n        if (this.params.watchProperty) {\n            head = this.getWatchedValues((/** @type {?} */ (head)));\n        }\n        return head;\n    };\n    /**\n     * @private\n     * @param {?} source\n     * @return {?}\n     */\n    DirtyCheckPlugin.prototype.getWatchedValues = /**\n     * @private\n     * @param {?} source\n     * @return {?}\n     */\n    function (source) {\n        return ((/** @type {?} */ (this.params.watchProperty))).reduce((/**\n         * @param {?} watched\n         * @param {?} prop\n         * @return {?}\n         */\n        function (watched, prop) {\n            watched[prop] = source[prop];\n            return watched;\n        }), (/** @type {?} */ ({})));\n    };\n    return DirtyCheckPlugin;\n}(AkitaPlugin));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template State, P\n */\nvar  /**\n * @template State, P\n */\nEntityDirtyCheckPlugin = /** @class */ (function (_super) {\n    __extends(EntityDirtyCheckPlugin, _super);\n    function EntityDirtyCheckPlugin(query, params) {\n        if (params === void 0) { params = {}; }\n        var _this = _super.call(this, query, params.entityIds) || this;\n        _this.query = query;\n        _this.params = params;\n        _this._someDirty = new Subject();\n        _this.someDirty$ = merge(_this.query.select((/**\n         * @param {?} state\n         * @return {?}\n         */\n        function (state) { return state.entities; })), _this._someDirty.asObservable()).pipe(auditTime(0), map((/**\n         * @return {?}\n         */\n        function () { return _this.checkSomeDirty(); })));\n        _this.params = __assign({}, dirtyCheckDefaultParams, params);\n        // TODO lazy activate?\n        _this.activate();\n        _this.selectIds()\n            .pipe(skip(1))\n            .subscribe((/**\n         * @param {?} ids\n         * @return {?}\n         */\n        function (ids) {\n            _super.prototype.rebase.call(_this, ids, { afterAdd: (/**\n                 * @param {?} plugin\n                 * @return {?}\n                 */\n                function (plugin) { return plugin.setHead(); }) });\n        }));\n        return _this;\n    }\n    /**\n     * @template THIS\n     * @this {THIS}\n     * @param {?=} ids\n     * @return {THIS}\n     */\n    EntityDirtyCheckPlugin.prototype.setHead = /**\n     * @template THIS\n     * @this {THIS}\n     * @param {?=} ids\n     * @return {THIS}\n     */\n    function (ids) {\n        if ((/** @type {?} */ (this)).params.entityIds && ids) {\n            /** @type {?} */\n            var toArray_1 = (/** @type {?} */ (coerceArray(ids)));\n            /** @type {?} */\n            var someAreWatched = coerceArray((/** @type {?} */ (this)).params.entityIds).some((/**\n             * @param {?} id\n             * @return {?}\n             */\n            function (id) { return toArray_1.indexOf(id) > -1; }));\n            if (someAreWatched === false) {\n                return (/** @type {?} */ (this));\n            }\n        }\n        (/** @type {?} */ (this)).forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.setHead(); }));\n        (/** @type {?} */ (this))._someDirty.next();\n        return (/** @type {?} */ (this));\n    };\n    /**\n     * @param {?} id\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.hasHead = /**\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        if (this.entities.has(id)) {\n            /** @type {?} */\n            var entity = this.getEntity(id);\n            return entity.hasHead();\n        }\n        return false;\n    };\n    /**\n     * @param {?=} ids\n     * @param {?=} params\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.reset = /**\n     * @param {?=} ids\n     * @param {?=} params\n     * @return {?}\n     */\n    function (ids, params) {\n        if (params === void 0) { params = {}; }\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.reset(params); }));\n    };\n    /**\n     * @param {?} id\n     * @param {?=} asObservable\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.isDirty = /**\n     * @param {?} id\n     * @param {?=} asObservable\n     * @return {?}\n     */\n    function (id, asObservable) {\n        if (asObservable === void 0) { asObservable = true; }\n        if (this.entities.has(id)) {\n            /** @type {?} */\n            var entity = this.getEntity(id);\n            return asObservable ? entity.isDirty$ : entity.isDirty();\n        }\n        return false;\n    };\n    /**\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.someDirty = /**\n     * @return {?}\n     */\n    function () {\n        return this.checkSomeDirty();\n    };\n    /**\n     * @param {?} id\n     * @param {?} path\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.isPathDirty = /**\n     * @param {?} id\n     * @param {?} path\n     * @return {?}\n     */\n    function (id, path) {\n        if (this.entities.has(id)) {\n            /** @type {?} */\n            var head = ((/** @type {?} */ (this.getEntity(id)))).getHead();\n            /** @type {?} */\n            var current = this.query.getEntity(id);\n            /** @type {?} */\n            var currentPathValue = getNestedPath(current, path);\n            /** @type {?} */\n            var headPathValue = getNestedPath(head, path);\n            return this.params.comparator(currentPathValue, headPathValue);\n        }\n        return null;\n    };\n    /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.destroy = /**\n     * @param {?=} ids\n     * @return {?}\n     */\n    function (ids) {\n        this.forEachId(ids, (/**\n         * @param {?} e\n         * @return {?}\n         */\n        function (e) { return e.destroy(); }));\n        /** complete only when the plugin destroys */\n        if (!ids) {\n            this._someDirty.complete();\n        }\n    };\n    /**\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.instantiatePlugin = /**\n     * @protected\n     * @param {?} id\n     * @return {?}\n     */\n    function (id) {\n        return (/** @type {?} */ (new DirtyCheckPlugin(this.query, this.params, id)));\n    };\n    /**\n     * @private\n     * @return {?}\n     */\n    EntityDirtyCheckPlugin.prototype.checkSomeDirty = /**\n     * @private\n     * @return {?}\n     */\n    function () {\n        var e_1, _a;\n        /** @type {?} */\n        var entitiesIds = this.resolvedIds();\n        try {\n            for (var entitiesIds_1 = __values(entitiesIds), entitiesIds_1_1 = entitiesIds_1.next(); !entitiesIds_1_1.done; entitiesIds_1_1 = entitiesIds_1.next()) {\n                var id = entitiesIds_1_1.value;\n                if (this.getEntity(id).isDirty()) {\n                    return true;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (entitiesIds_1_1 && !entitiesIds_1_1.done && (_a = entitiesIds_1.return)) _a.call(entitiesIds_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return false;\n    };\n    return EntityDirtyCheckPlugin;\n}(EntityCollectionPlugin));\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Generate random guid\n *\n * \\@example\n *\n * {\n *   id: guid()\n * }\n *\n * @return {?}\n */\nfunction guid() {\n    return 'xxxxxx4xyx'.replace(/[xy]/g, (/**\n     * @param {?} c\n     * @return {?}\n     */\n    function (c) {\n        /** @type {?} */\n        var r = (Math.random() * 16) | 0;\n        /** @type {?} */\n        var v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    }));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @template E\n * @param {?} entities\n * @param {?=} idKey\n * @return {?}\n */\nfunction toEntitiesIds(entities, idKey) {\n    if (idKey === void 0) { idKey = DEFAULT_ID_KEY; }\n    var e_1, _a;\n    /** @type {?} */\n    var ids = [];\n    try {\n        for (var entities_1 = __values(entities), entities_1_1 = entities_1.next(); !entities_1_1.done; entities_1_1 = entities_1.next()) {\n            var entity = entities_1_1.value;\n            ids.push(entity[idKey]);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (entities_1_1 && !entities_1_1.done && (_a = entities_1.return)) _a.call(entities_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return ids;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Reset stores back to their initial state\n *\n * \\@example\n *\n * resetStores()\n * resetStores({\n *   exclude: ['auth']\n * })\n * @param {?=} options\n * @return {?}\n */\nfunction resetStores(options) {\n    /** @type {?} */\n    var defaults = {\n        exclude: []\n    };\n    options = Object.assign({}, defaults, options);\n    /** @type {?} */\n    var stores = Object.keys(__stores__);\n    applyTransaction((/**\n     * @return {?}\n     */\n    function () {\n        var e_1, _a;\n        try {\n            for (var stores_1 = __values(stores), stores_1_1 = stores_1.next(); !stores_1_1.done; stores_1_1 = stores_1.next()) {\n                var store = stores_1_1.value;\n                /** @type {?} */\n                var s = __stores__[store];\n                if (!options.exclude) {\n                    s.reset();\n                }\n                else {\n                    if (options.exclude.indexOf(s.storeName) === -1) {\n                        s.reset();\n                    }\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (stores_1_1 && !stores_1_1.done && (_a = stores_1.return)) _a.call(stores_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} value\n * @return {?}\n */\nfunction isNumber(value) {\n    return !isArray(value) && value - parseFloat(value) + 1 >= 0;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/** @enum {number} */\nvar StoreActions = {\n    Update: 0,\n    AddEntities: 1,\n    SetEntities: 2,\n    UpdateEntities: 3,\n    RemoveEntities: 4,\n    UpsertEntities: 5,\n};\nStoreActions[StoreActions.Update] = 'Update';\nStoreActions[StoreActions.AddEntities] = 'AddEntities';\nStoreActions[StoreActions.SetEntities] = 'SetEntities';\nStoreActions[StoreActions.UpdateEntities] = 'UpdateEntities';\nStoreActions[StoreActions.RemoveEntities] = 'RemoveEntities';\nStoreActions[StoreActions.UpsertEntities] = 'UpsertEntities';\n/**\n * @template EntityOrState\n * @param {?} storeName\n * @param {?} action\n * @param {?} params\n * @return {?}\n */\nfunction runStoreAction(storeName, action, params) {\n    /** @type {?} */\n    var store = __stores__[storeName];\n    if (isNil(store)) {\n        throw new AkitaError(storeName + \" doesn't exist\");\n    }\n    switch (action) {\n        case StoreActions.SetEntities: {\n            var payload = (/** @type {?} */ (params)).payload;\n            ((/** @type {?} */ (store))).set(payload.data);\n            return;\n        }\n        case StoreActions.AddEntities: {\n            var payload = (/** @type {?} */ (params)).payload;\n            ((/** @type {?} */ (store))).add(payload.data, payload.params);\n            return;\n        }\n        case StoreActions.UpdateEntities: {\n            var payload = (/** @type {?} */ (params)).payload;\n            ((/** @type {?} */ (store))).update(payload.entityIds, payload.data);\n            return;\n        }\n        case StoreActions.RemoveEntities: {\n            var payload = (/** @type {?} */ (params)).payload;\n            ((/** @type {?} */ (store))).remove(payload.entityIds);\n            return;\n        }\n        case StoreActions.UpsertEntities: {\n            var payload = (/** @type {?} */ (params)).payload;\n            if (payload.entityIds) {\n                ((/** @type {?} */ (store))).upsert(payload.entityIds, payload.data);\n            }\n            else if (Array.isArray(payload.data)) {\n                ((/** @type {?} */ (store))).upsertMany(payload.data);\n            }\n            else {\n                ((/** @type {?} */ (store))).upsertMany([payload.data]);\n            }\n            return;\n        }\n        case StoreActions.Update: {\n            var payload = (/** @type {?} */ (params)).payload;\n            ((/** @type {?} */ (store))).update(payload.data);\n            return;\n        }\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template Root, Entity\n * @param {?} keyOrRoot\n * @param {?} predicateOrIds\n * @param {?} obj\n * @param {?=} idKey\n * @return {?}\n */\nfunction arrayUpdate(keyOrRoot, predicateOrIds, obj, idKey) {\n    if (idKey === void 0) { idKey = DEFAULT_ID_KEY; }\n    /** @type {?} */\n    var condition;\n    if (isFunction(predicateOrIds)) {\n        condition = predicateOrIds;\n    }\n    else {\n        /** @type {?} */\n        var ids_1 = coerceArray(predicateOrIds);\n        condition = (/**\n         * @param {?} item\n         * @return {?}\n         */\n        function (item) { return ids_1.includes(isObject(item) ? item[idKey] : item) === true; });\n    }\n    /** @type {?} */\n    var updateFn = (/**\n     * @param {?} state\n     * @return {?}\n     */\n    function (state) {\n        return state.map((/**\n         * @param {?} entity\n         * @return {?}\n         */\n        function (entity) {\n            if (condition(entity) === true) {\n                return isObject(entity)\n                    ? __assign({}, entity, obj) : obj;\n            }\n            return entity;\n        }));\n    });\n    if (isArray(keyOrRoot)) {\n        return updateFn(keyOrRoot);\n    }\n    return (/**\n     * @param {?} root\n     * @return {?}\n     */\n    function (root) {\n        var _a;\n        return _a = {},\n            _a[(/** @type {?} */ (keyOrRoot))] = updateFn(root[keyOrRoot]),\n            _a;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template Root, Entity\n * @param {?} keyOrRoot\n * @param {?} newEntity\n * @param {?=} options\n * @return {?}\n */\nfunction arrayAdd(keyOrRoot, newEntity, options) {\n    if (options === void 0) { options = {}; }\n    /** @type {?} */\n    var newEntities = coerceArray(newEntity);\n    /** @type {?} */\n    var addFn = (/**\n     * @param {?} state\n     * @return {?}\n     */\n    function (state) { return (options.prepend ? __spread(newEntities, (state || [])) : __spread((state || []), newEntities)); });\n    if (isArray(keyOrRoot)) {\n        return addFn(keyOrRoot);\n    }\n    return (/**\n     * @param {?} state\n     * @return {?}\n     */\n    function (state) {\n        var _a;\n        return _a = {},\n            _a[(/** @type {?} */ (keyOrRoot))] = addFn(state[keyOrRoot]),\n            _a;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Upsert item in a collection\n *\n * \\@example\n *\n *\n * store.update(1, entity => ({\n *   comments: arrayUpsert(entity.comments, 1, { name: 'newComment' })\n * }))\n * @template Root\n * @param {?} arr\n * @param {?} id\n * @param {?} obj\n * @param {?=} idKey\n * @return {?}\n */\nfunction arrayUpsert(arr, id, obj, idKey) {\n    if (idKey === void 0) { idKey = DEFAULT_ID_KEY; }\n    var _a;\n    /** @type {?} */\n    var entityIsObject = isObject(obj);\n    /** @type {?} */\n    var entityExists = arr.some((/**\n     * @param {?} entity\n     * @return {?}\n     */\n    function (entity) { return (entityIsObject ? entity[idKey] === id : entity === id); }));\n    if (entityExists) {\n        return arrayUpdate(arr, id, obj, idKey);\n    }\n    else {\n        return arrayAdd(arr, entityIsObject ? __assign({}, obj, (_a = {}, _a[idKey] = id, _a)) : obj);\n    }\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n// @internal\n/**\n * @param {?} pred\n * @return {?}\n */\nfunction not(pred) {\n    return (/**\n     * @param {...?} args\n     * @return {?}\n     */\n    function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        return !pred.apply(void 0, __spread(args));\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template Root, Entity\n * @param {?} keyOrRoot\n * @param {?} identifier\n * @param {?=} idKey\n * @return {?}\n */\nfunction arrayRemove(keyOrRoot, identifier, idKey) {\n    if (idKey === void 0) { idKey = DEFAULT_ID_KEY; }\n    /** @type {?} */\n    var identifiers;\n    /** @type {?} */\n    var filterFn;\n    if (isFunction(identifier)) {\n        filterFn = not(identifier);\n    }\n    else {\n        identifiers = coerceArray((/** @type {?} */ (identifier)));\n        filterFn = (/**\n         * @param {?} current\n         * @return {?}\n         */\n        function (current) {\n            return identifiers.includes(isObject(current) ? current[idKey] : current) === false;\n        });\n    }\n    if (Array.isArray(keyOrRoot)) {\n        return keyOrRoot.filter(filterFn);\n    }\n    return (/**\n     * @param {?} state\n     * @return {?}\n     */\n    function (state) {\n        var _a;\n        return _a = {},\n            _a[(/** @type {?} */ (keyOrRoot))] = state[keyOrRoot].filter(filterFn),\n            _a;\n    });\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template State\n * @param {?} initialState\n * @param {?} options\n * @return {?}\n */\nfunction createStore(initialState, options) {\n    return new Store(initialState, options);\n}\n/**\n * @template State\n * @param {?} store\n * @return {?}\n */\nfunction createQuery(store) {\n    return new Query(store);\n}\n/**\n * @template State\n * @param {?} initialState\n * @param {?} options\n * @return {?}\n */\nfunction createEntityStore(initialState, options) {\n    return new EntityStore(initialState, options);\n}\n/**\n * @template State\n * @param {?} store\n * @param {?} options\n * @return {?}\n */\nfunction createEntityQuery(store, options) {\n    return new QueryEntity(store, options);\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n *\n * Helper function for checking if we have data in cache\n *\n * export class ProductsService {\n *   constructor(private productsStore: ProductsStore) {}\n *   get(): Observable<void> {\n *     const request = this.http.get().pipe(\n *       tap(this.productsStore.set(response))\n *     );\n *\n *     return cacheable(this.productsStore, request);\n *   }\n * }\n * @template T\n * @param {?} store\n * @param {?} request$\n * @return {?}\n */\nfunction cacheable(store, request$) {\n    return store._cache().value ? EMPTY : request$;\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template R\n * @param {?} observables\n * @return {?}\n */\nfunction combineQueries(observables) {\n    return (/** @type {?} */ (combineLatest(observables).pipe(auditTime(0))));\n}\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @abstract\n * @template S\n */\nvar  /**\n * @abstract\n * @template S\n */\nEntityService = /** @class */ (function () {\n    function EntityService() {\n    }\n    return EntityService;\n}());\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { EntityStore, EntityUIStore, QueryEntity, EntityUIQuery, Query, Store, applyTransaction, transaction, commit, endBatch, isTransactionInProcess, startBatch, transactionManager, withTransaction, filterNil, DEFAULT_ID_KEY, action, setAction, setSkipAction, logAction, currentAction, resetCustomAction, SnapshotManager, snapshotManager, configKey, StoreConfig, QueryConfig, queryConfigKey, akitaConfig, getAkitaConfig, compareValues, Order, AkitaPlugin, Paginator, PaginatorPlugin, PersistNgFormPlugin, persistState, akitaDevtools, EntityCollectionPlugin, StateHistoryPlugin, EntityStateHistoryPlugin, dirtyCheckDefaultParams, DirtyCheckPlugin, getNestedPath, EntityDirtyCheckPlugin, guid, setEntities, isEntityState, toEntitiesIds, toEntitiesObject, hasEntity, hasActiveState, getExitingActives, isMultiActiveState, resolveActiveEntity, isEmpty, coerceArray, updateEntities, removeEntities, removeAllEntities, getInitialEntitiesState, getActiveEntities, addEntities, resetStores, isObject, isPlainObject, isFunction, isArray, toBoolean, isUndefined, isNil, isString, isNumber, isDefined, setValue, getValue, sortByOptions, entitiesToArray, entitiesToMap, __stores__, isDev, enableAkitaProdMode, __DEV__, isNotBrowser, runStoreAction, StoreActions, arrayUpdate, arrayAdd, arrayUpsert, arrayFind, distinctUntilArrayItemChanged, find, arrayRemove, createEntityQuery, createEntityStore, createQuery, createStore, cacheable, combineQueries, EntityService, EntityActions, dispatchDeleted, dispatchAdded, dispatchUpdate, $$deleteStore, $$addStore, $$updateStore, isBrowser as ɵa };\n\n//# sourceMappingURL=datorama-akita.js.map","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","import {\n  createEntityStore,\n} from '@datorama/akita';\n\nconst initialState = {\n  filter: \"SHOW_ALL\"\n};\n\nexport const todosStore = createEntityStore(initialState, {\n  name: 'todos'\n});","import {\n  createEntityQuery\n} from '@datorama/akita';\nimport {\n  todosStore\n} from './todos.store';\nimport {\n  combineLatest\n} from \"rxjs\";\n\nexport const todosQuery = createEntityQuery(todosStore);\n\nexport const selectFilter = todosQuery.select('filter');\n\nexport const visibleTodos = combineLatest(\n  selectFilter,\n  todosQuery.selectAll(),\n  function getVisibleTodos(filter, todos) {\n    switch (filter) {\n      case \"SHOW_COMPLETED\":\n        return todos.filter(t => t.completed);\n      case \"SHOW_ACTIVE\":\n        return todos.filter(t => !t.completed);\n      default:\n        return todos;\n    }\n  }\n);\n","import {\n  todosStore\n} from './todos.store';\nimport {\n  guid\n} from '@datorama/akita';\n\nexport async function readTodos() {\n  const todos = await Promise.resolve([{id:1, completed: true, title: 'create sample Svelte+Akita todo app'}]);\n  todosStore.set(todos);\n}\n\nexport async function addTodo(title) {\n  const todo = {\n    title,\n    completed: false,\n  };\n  const idFromServer = await Promise.resolve(guid());\n  todosStore.add({\n    id: idFromServer,\n    ...todo\n  });\n}\n\nexport async function toggleCompleted(id, completed) {\n  await Promise.resolve();\n  todosStore.update(id, {\n    completed\n  });\n}\n\nexport async function removeTodo(id) {\n  await Promise.resolve();\n  todosStore.remove(id);\n}\n\nexport function updateFilter(filter) {\n  todosStore.update({\n    filter\n  });\n}\n","<svelte:options immutable />\n\n<script>\n  export let todo;\n</script>\n\n<style>\n  li {\n    display: flex;\n    justify-content: space-between;\n  }\n</style>\n\n<li class=\"list-group-item\">\n  <div>\n    <input type=\"checkbox\" checked={todo.completed} on:change />\n     {todo.title}\n  </div>\n\n  <button type=\"button\" class=\"btn btn-sm btn-danger\" on:click>X</button>\n</li>\n","<svelte:options immutable />\n\n<script>\n  import { createEventDispatcher } from \"svelte\";\n  const dispatch = createEventDispatcher();\n\n  let todo = \"\";\n</script>\n\n<div class=\"form-group\">\n  <input\n    class=\"form-control\"\n    placeholder=\"Add todo..\"\n    on:keydown={event => {\n      if (event.key === 'Enter') {\n        dispatch('todo', todo);\n        todo = '';\n      }\n    }}\n    bind:value={todo} />\n</div>\n","<svelte:options immutable />\n\n<script>\n export let currentFilter;\n\n const filters = [{\n   id: 'SHOW_ALL',\n   label: 'All'\n },{\n   id: 'SHOW_ACTIVE',\n   label: 'Active'\n },{\n   id: 'SHOW_COMPLETED',\n   label: 'Completed'\n }]\n</script>\n\n<div class=\"btn-group\">\n  {#each filters as filter}\n   <button type=\"button\" class=\"btn btn-outline-dark\"\n          class:active={filter.id === $currentFilter ? 'active' : ''}\n          data-filter-id=\"{filter.id}\" on:click>{filter.label}</button>\n  {/each}\n</div>","<svelte:options immutable />\n\n<script>\n  import {\n    visibleTodos,\n    addTodo,\n    readTodos,\n    removeTodo,\n    selectFilter,\n    updateFilter,\n    toggleCompleted\n  } from \"./state\";\n\nimport Todo from './Todo.svelte';\nimport AddTodo from './AddTodo.svelte';\nimport Filters from './Filters.svelte';\n\n  let todo = \"\";\n  readTodos();\n</script>\n\n<style>\n  input {\n    margin-right: 10px;\n  }\n\n  section {margin-top: 20px}\n</style>\n\n<section>\n  <h1>Todos</h1>\n\n  <Filters currentFilter={selectFilter}\n    on:click={event => updateFilter(event.target.dataset.filterId)}/>\n\n  <AddTodo on:todo={ e => addTodo(e.detail) }/>\n\n  <ul class=\"list-group\">\n    {#each $visibleTodos as todo, i (todo.id)}\n      <Todo {todo}\n        on:click={() => removeTodo(todo.id)}\n        on:change={e => toggleCompleted(todo.id, e.target.checked)} />\n    {/each}\n  </ul>\n  {$visibleTodos.length}\n</section>\n","<script>\n  import { Link } from \"svelte-routing\";\n  export let to = \"\";\n  function getProps({ location, href, isPartiallyCurrent, isCurrent }) {\n    const isActive = href === \"/\" ? isCurrent : isPartiallyCurrent || isCurrent;\n    // The object returned here is spread on the anchor element's attributes\n    if (isActive) {\n      return { class: \"active\" };\n    }\n    return {};\n  }\n</script>\n\n<Link {to} {getProps}>\n  <slot />\n</Link>\n","import App from './App.svelte';\n\nimport { akitaDevtools, persistState } from '@datorama/akita';\n\nakitaDevtools();\npersistState();\n\nconst app = new App({\n  target: document.body,\n  intro: true\n});\n\nexport default app;\n"],"names":["noop","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","not_equal","component_subscribe","component","store","callback","$$","on_destroy","push","unsub","subscribe","unsubscribe","create_slot","definition","ctx","slot_ctx","get_slot_context","$$scope","get_slot_changes","changed","exclude_internal_props","props","result","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","element","name","document","createElement","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","attr","attribute","value","removeAttribute","setAttribute","set_attributes","attributes","key","style","cssText","set_data","set_input_value","input","toggle_class","toggle","classList","current_component","set_current_component","get_current_component","Error","createEventDispatcher","type","detail","callbacks","e","createEvent","initCustomEvent","custom_event","slice","call","setContext","context","set","getContext","get","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","Promise","resolve","update_scheduled","add_render_callback","flush","seen_callbacks","Set","length","shift","update","pop","i","has","add","fragment","dirty","before_update","p","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","delete","transition_out","o","d","outro_and_destroy_block","lookup","get_spread_update","levels","updates","to_null_out","accounted_for","n","undefined","get_spread_object","spread_props","mount_component","on_mount","m","new_on_destroy","map","filter","destroy_component","detaching","make_dirty","then","init","instance","create_fragment","prop_names","parent_component","bound","Map","ready","ret","hydrate","l","Array","from","childNodes","intro","SvelteComponent","[object Object]","this","$destroy","index","indexOf","splice","subscriber_queue","writable","start","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","pending","cleanup","sync","unsubscribers","LOCATION","ROUTER","getLocation","source","location","state","history","globalHistory","listeners","listener","popstateListener","action","to","replace","Date","now","replaceState","pushState","createHistory","Boolean","window","initialPathname","stack","pathname","search","states","entries","_","uri","split","createMemorySource","navigate","paramRe","SEGMENT_POINTS","STATIC_POINTS","DYNAMIC_POINTS","SPLAT_PENALTY","ROOT_POINTS","startsWith","string","substr","isSplat","segment","segmentize","stripSlashes","str","rankRoute","route","score","default","path","reduce","isRootSegment","test","isDynamic","pick","routes","match","default_","uriPathname","uriSegments","isRootUri","ranked","sort","rankRoutes","missed","params","routeSegments","max","Math","routeSegment","uriSegment","decodeURIComponent","join","dynamicMatch","exec","addQuery","query","combinePaths","basepath","url","locationContext","routerContext","activeRoute","hasActiveRoute","base","routerBase","registerRoute","$base","_path","matchingRoute","$location","rs","unregisterRoute","bestMatch","$routes","routeParams","routeProps","$activeRoute","rest","$$props","href","ariaCurrent","onClick","getProps","dispatch","isPartiallyCurrent","isCurrent","toPathname","toQuery","basePathname","toSegments","baseSegments","concat","allSegments","segments","defaultPrevented","button","metaKey","altKey","ctrlKey","shiftKey","shouldNavigate","preventDefault","shouldReplace","extendStatics","setPrototypeOf","__proto__","hasOwnProperty","__extends","__","constructor","prototype","__assign","t","arguments","apply","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__metadata","metadataKey","metadataValue","metadata","__values","Symbol","iterator","next","done","__read","ar","error","__spread","isFunction","x","_enable_super_gross_mode_that_will_cause_bad_things","config","useDeprecatedSynchronousErrorHandling","hostReportError","err","setTimeout","closed","complete","isObject","UnsubscriptionError","UnsubscriptionErrorImpl","errors","message","toString","Subscription","_parentOrParents","_subscriptions","_unsubscribe","remove","flattenUnsubscriptionErrors","len","sub","teardown","subscription","EMPTY","tmp","subscriptions","subscriptionIndex","errs","rxSubscriber","random","Subscriber","_super","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","SafeSubscriber","tslib_1.__extends","rxSubscriberSymbol","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","bind","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","parent","observable","Observable","_isScalar","_subscribe","lift","operator","sink","nextOrObserver","toSubscriber","_trySubscribe","observer","_a","closed_1","canReportError","console","warn","promiseCtor","getPromiseCtor","reject","Symbol_observable","pipe","operations","_i","prev","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","copy","asObservable","BehaviorSubject","_value","getValue","enumerable","configurable","AsyncAction","scheduler","work","schedule","delay","id","recycleAsyncId","requestAsyncId","setInterval","clearInterval","execute","_execute","errored","errorValue","actions","Action","QueueAction","Scheduler","SchedulerAction","AsyncScheduler","delegate","active","scheduled","queue","QueueScheduler","emptyScheduled","isScheduler","subscribeToArray","array","scheduleArray","fromArray","of","args","Notification","kind","hasValue","observe","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnSubscriber","arg","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","Number","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","async","identity","isObservable","obj","ArgumentOutOfRangeError","ArgumentOutOfRangeErrorImpl","project","thisArg","TypeError","MapOperator","MapSubscriber","count","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","InnerSubscriber","getSymbolIterator","isArrayLike","isPromise","subscribeTo","obs","promise","Symbol_iterator","iterable","item","return","subscribeToResult","outerSubscriber","NONE","combineLatest","observables","resultSelector","CombineLatestOperator","CombineLatestSubscriber","toRespond","unused","oldVal","_tryResultSelector","isInteropObservable","scheduleObservable","schedulePromise","isIterable","scheduleIterable","MergeMapOperator","concurrent","MergeMapSubscriber","hasCompleted","buffer","_tryNext","_innerSub","ish","innerSubscriber","mergeAll","mergeMap","ii","isNumeric","val","parseFloat","predicate","FilterOperator","FilterSubscriber","period","AuditOperator","durationSelector","AuditSubscriber","throttled","duration","innerSubscription","clearThrottle","auditTime","dueTime","periodOrScheduler","due","timer","DebounceTimeOperator","DebounceTimeSubscriber","debouncedSubscription","lastValue","clearDebounce","dispatchNext","debouncedNext","delayFor","isNaN","abs","DelayOperator","DelaySubscriber","delay_1","_schedule","scheduleNotification","DelayMessage","distinctUntilChanged","compare","keySelector","DistinctUntilChangedOperator","DistinctUntilChangedSubscriber","hasKey","y","TakeOperator","total","TakeSubscriber","PairwiseOperator","PairwiseSubscriber","hasPrev","pair","skip","SkipOperator","SkipSubscriber","switchMap","SwitchMapOperator","SwitchMapSubscriber","isEmpty","arr","hasEntity","entities","hasActiveState","isMultiActiveState","resolveActiveEntity","ids","currentActivesIds","newIds","filtered","getExitingActives","applyMiddleware","preAddEntity","e_1","mapped","_b","keys","_c","e_1_1","setEntities","newEntities","idKey","isNativePreAdd","acc","entities_1","entities_1_1","current","toEntitiesObject","isEntityState","newState","loading","AkitaError","currentAction","entityIds","customActionActive","logAction","setAction","propertyKey","descriptor","originalMethod","transactionFinished","transactionInProcess","transactionManager","activeTransactions","batchTransaction","isTransactionInProcess","applyTransaction","action$$1","transaction","deepFreeze","freeze","oIsFunction","hasOwnProp","getOwnPropertyNames","prop","isFrozen","CONFIG","resettable","getAkitaConfig","toBoolean","isPlainObject","$$deleteStore","$$addStore","$$updateStore","__DEV__","isDev","isBrowser","isNotBrowser","__stores__","__queries__","$$stores","$$queries","Store","initialState","inTransaction","cache","ttl","onInit","setLoading","_setState","setHasCache","hasCache","restartTTL","ttlConfig","cacheConfig","clearTimeout","setError","_select","storeValue","_cache","storeName","deepFreezeFn","newStateFn","_dispatchAction","handleTransaction","reset","isResettable","_initialState","stateOrCallback","merged","akitaPreUpdate","updateStoreConfig","newOptions","nextState","ngOnDestroy","destroy","hmrEnabled","className","watchTransaction","isNil","v","coerceArray","removeEntities","removeAllEntities","_d","includes","getInitialEntitiesState","isDefined","updateEntities","idToUpdate","newStateOrFn","preUpdateEntity","updatedEntities","isUpdatingIdKey","ids_1","ids_1_1","oldEntity","isIdChanged","newEntity","updatedIds","stateEntities","id_1","_e","getOwnPropertySymbols","propertyIsEnumerable","__rest","isUndefined","EntityActions","Add","Update","Remove","EntityStore","entityActions","akitaPreAddEntity","hasInitialUIState","handleUICreation","collection","hasNewEntities","entity","entityId","prepend","unshift","addEntities","idsOrFnOrState","akitaPreUpdateEntity","upsert","toArray","isUpdate","isClassBased","baseClass","updateIds","withId","upsertMany","addedIds","withPreCheckHook","akitaPreCheckEntity","nextId","withHook","hasUIStore","e_2","replaced","toArray_1","toArray_1_1","e_2_1","move","from$$1","idsOrFn","idPassed","handleUIRemove","updateActive","newStateOrCallback","setActive","idOrOptions","currentActive","wrap","currentIdIndex","isFirst","isLast","getActiveEntities","_setActive","addActive","every","uniques","removeActive","some","currentId","toggleActive","filterExists","createUIStore","storeConfig","defaults","ui","EntityUIStore","nextEntity","uiEntities","isFunc","_akitaCreateEntityFn","createFn","Function","T","setInitialEntityState","isString","Query","__store__","select","mapFn","keysOrFuncs","prevState","currState","isFns","keyOrFunc","func","selectLoading","selectError","selectHasCache","getHasCache","Order","ASC","DESC","entitiesToArray","order","filterBy","limitTo","sortBy","sortByOrder","_loop_1","_sortBy_1","varA","toUpperCase","varB","comparison","min","getEntity","hasChange","first","second","currentItem","find","prevItem","QueryEntity","selectAll","asObject","getAll","map$$1","hasLimit","length_1","finalLength","_loop_2","entitiesToMap","sortByOptions","selectMany","callbackFn","prevCollection","currentCollection","selectEntity","idOrPredicate","findEntityByPredicate","selectActiveId","getActiveId","selectActive","getActive","activeId","selectCount","getCount","selectLast","selectAt","selectFirst","selectEntityAction","selectEntityAction$","ac","projectOrIds","hasActive","createUIQuery","EntityUIQuery","filterNil","part","setValue","lastIndex","skipStorageUpdate","getSkipStorageUpdate","observify","asyncOrValue","AkitaPlugin","resetFn","onReset","getQuery","getStore","isEntityBased","selectSource","getSource","updateStore","original","paginatorDefaults","pagesControls","range","startWith","cacheTimeout","clearStoreWithCache","PaginatorPlugin","initial","clearCache","currentPage","pages","pagination","perPage","lastPage","isLoading$","page","clearCacheSubscription","withControls","withRange","response","addPage","clearStore","clearPage","setPage","isPageActive","hasPage","nextPage","prevPage","setLastPage","setFirstPage","getPage","req","selectPage","refreshCurrentPage","getFrom","getTo","pageControls","ceil","generatePages","PersistNgFormPlugin","factoryFnOrPath","debounceTime","formKey","emitEvent","arrControlFactory","builder","control","isRootKeys","isKeyBased","setForm","form","activate","initialValue","stateKey","formArray","controls","cleanArray","patchValue","removeAt","resolveInitialValue","formValue","root","factory_1","formChanges","valueChanges","capitalize","charAt","subs","EntityCollectionPlugin","removeEntity","createEntity","plugin","getIds","resolvedIds","rebase","beforeAdd","instantiatePlugin","afterAdd","beforeRemove","_ids","selectIds","forEachId","cb","StateHistoryPlugin","_entityId","clear","past","present","future","skipUpdate","maxAge","comparator","shouldUpdate","undo","previous","redo","newFuture","jumpToPast","newPast","newPresent","jumpToFuture","customUpdateFn","clearHistory","ignoreNext","dirtyCheckDefaultParams","EntityStateHistoryPlugin","hasPast","hasFuture","head","JSON","stringify","getNestedPath","nestedObj","DirtyCheckPlugin","_reset","isDirty$","reset$","watchProperty","watchProp","currentValue","updateFn","setHead","_getHead","updateDirtiness","isDirty","hasHead","getHead","isPathDirty","currentPathValue","headPathValue","__akitaKey","currentState","isChange","compareTo","getWatchedValues","watched","EntityDirtyCheckPlugin","_someDirty","someDirty$","last","merge","checkSomeDirty","someDirty","entitiesIds","entitiesIds_1","entitiesIds_1_1","todosStore","createEntityStore","todosQuery","selectFilter","visibleTodos","todos","completed","addTodo","title","todo","idFromServer","label","$currentFilter","filters","iterations","currentFilter","$visibleTodos","old_blocks","get_key","dynamic","list","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","child_ctx","will_move","did_move","new_block","old_block","new_key","old_key","readTodos","class","ngZoneOrOptions","__REDUX_DEVTOOLS_EXTENSION__","shallow","devTools","connect","appState","send","skip$$1","setSkipAction","normalize","msg","logTrace","group","trace","groupEnd","payload","rootState_1","parse","akitaDevtools","enableInNonBrowser","storage","localStorage","deserialize","serialize","include","exclude","persistOnDestroy","preStorageUpdate","preStoreUpdate","preStorageUpdateOperator","includeStores","hasInclude","hasExclude","isLocalStorage","sessionStorage","getItem","storageState","save","storeCache","storageValue","setItem","_save","setInitial","persistState","body"],"mappings":"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"}