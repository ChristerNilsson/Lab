var app=function(){"use strict";function t(){}function e(t){return t()}function s(){return Object.create(null)}function n(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function o(t,e,s){t.insertBefore(e,s||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(t,e,s){null==s?t.removeAttribute(e):t.setAttribute(e,s)}function m(t,e,s,n){t.style.setProperty(e,s,n?"important":"")}let h;function f(t){h=t}const v=[],b=[],g=[],z=[],x=Promise.resolve();let $=!1;function y(t){g.push(t)}function D(){const t=new Set;do{for(;v.length;){const t=v.shift();f(t),N(t.$$)}for(;b.length;)b.pop()();for(let e=0;e<g.length;e+=1){const s=g[e];t.has(s)||(s(),t.add(s))}g.length=0}while(v.length);for(;z.length;)z.pop()();$=!1}function N(t){t.fragment&&(t.update(t.dirty),n(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(y))}const P=new Set;function C(t,e){t.$$.dirty||(v.push(t),$||($=!0,x.then(D)),t.$$.dirty=s()),t.$$.dirty[e]=!0}function w(i,a,o,l,c,u){const d=h;f(i);const p=a.props||{},m=i.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:s(),dirty:null};let v=!1;var b,g,z;m.ctx=o?o(i,p,(t,e,s=e)=>(m.ctx&&c(m.ctx[t],m.ctx[t]=s)&&(m.bound[t]&&m.bound[t](s),v&&C(i,t)),e)):p,m.update(),v=!0,n(m.before_update),m.fragment=l(m.ctx),a.target&&(a.hydrate?m.fragment.l((z=a.target,Array.from(z.childNodes))):m.fragment.c(),a.intro&&((b=i.$$.fragment)&&b.i&&(P.delete(b),b.i(g))),function(t,s,i){const{fragment:a,on_mount:o,on_destroy:l,after_update:c}=t.$$;a.m(s,i),y(()=>{const s=o.map(e).filter(r);l?l.push(...s):n(s),t.$$.on_mount=[]}),c.forEach(y)}(i,a.target,a.anchor),D()),f(d)}class O{$destroy(){var e,s;s=1,(e=this).$$.fragment&&(n(e.$$.on_destroy),e.$$.fragment.d(s),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(e),()=>{const t=s.indexOf(e);-1!==t&&s.splice(t,1)}}$set(){}}const k=chai.assert.deepEqual,A=function(t,e){var s,n,r,i,a,o=[];return a=[],r=function(t){var e,s,n,r,a;for(a=t.split("\n"),o=[],r=e=0,s=a.length;e<s;r=++e){n=a[r],console.log(n);var l=n.lastIndexOf("#");l>=0&&(n=n.slice(0,l)),console.log(n);try{0!=n.trim().length&&i(n,r)}catch(t){o.push(t)}}return console.log(o),o},i=function(t,r){var i,l,c,u,d,p;if(u=s(t),t=t.trim(),console.log(".",t,"."),0===u)return a=[JSON.parse(t)];for(e.length=0,i=t.split(" "),p=a[u-1],c=0,d=i.length;c<d;c++)l=i[c],p=n(l,p,r);for(a[u]=p;e.length>=2;)n("==",p,r);1!==e.length||o.push(`Orphan in line ${r+1}`)},n=function(s,n,r){var i,a;if("@"===s)return e.push(n),n;const l=s.slice(1);if(Object.keys(n).includes(l))return e.push(n[l]),n;if(Object.keys(t).includes(s))return t[s](n);if("=="===s){try{i=e.pop(),a=e.pop(),k(i,a)}catch(t){o.push("Assert failure in line "+(r+1)),o.push("  Actual "+JSON.stringify(a)),o.push("  Expect "+JSON.stringify(i))}return n}try{if(""==s)return n;e.push(JSON.parse(s))}catch(t){o.push("JSON.parse failure in line "+(r+1)+" "+s),o.push("\t"+s)}return n},s=function(t){var e,s,n;for(n=0,e=0,s=t.length;e<s;e++){if("\t"!==t[e])return n;n++}return n},{run:r}};function _(e){var s,n,r,i,h,f,v,b,g,z,x,$,y,D,N,P,C,w,O,k,A,_,M,E,S,V,T,L,I,R,U,B,H,j,q,J,W,K,Q,F,G,X,Y,Z,tt,et,st,nt,rt,it,at,ot,lt,ct,ut,dt,pt,mt,ht,ft,vt,bt,gt,zt,xt,$t,yt,Dt,Nt,Pt,Ct,wt,Ot,kt,At,_t,Mt,Et;return{c(){s=c("div"),(n=c("h2")).textContent="Reducer Based Testing",r=d(),(i=c("div")).innerHTML='This is a compact format for testing <a href="https://redux.js.org/basics/reducers">Reducers</a> and an alternative to:',h=d(),(f=c("div")).textContent=" ",v=d(),b=c("ul"),g=c("li"),z=u("test('adds 1 + 2 to equal 3', () => "),x=u("{"),$=d(),(y=c("li")).textContent="  expect(sum(1, 2)).toBe(3);",D=d(),N=c("li"),P=u("}"),C=u(");"),w=d(),(O=c("div")).textContent=" ",k=d(),(A=c("div")).textContent="Reducer: State + Action => State",_=d(),(M=c("div")).textContent=" ",E=d(),(S=c("div")).textContent="Each line contains zero or more actions",V=d(),(T=c("div")).innerHTML='Each line contains zero or more <a href="https://en.wikipedia.org/wiki/Assertion_(software_development)">assertions</a>',L=d(),(I=c("div")).textContent=" ",R=d(),(U=c("div")).textContent="Lines with no indentation contains initial states",B=d(),(H=c("div")).textContent="Indented lines are based on previous states",j=d(),(q=c("div")).textContent="Alternative actions have the same indentation",J=d(),(W=c("div")).textContent=" ",K=d(),(Q=c("div")).innerHTML='<a href="https://en.wikipedia.org/wiki/JSON">JSON</a> is used to describe states',F=d(),(G=c("div")).innerHTML='<a href="https://en.wikipedia.org/wiki/Reverse_Polish_notation">RPN</a> is used for actions and getters',X=d(),(Y=c("div")).textContent=" ",Z=d(),(tt=c("div")).textContent="Implicit assertion uses ==",et=d(),(st=c("div")).textContent="== deeply compares top two stack elements",nt=d(),(rt=c("div")).textContent="Implicit assertions repeats until the stack is empty",it=d(),(at=c("div")).textContent="Alternative assertions might be defined",ot=d(),(lt=c("div")).textContent="Actions may consume parameters",ct=d(),(ut=c("div")).textContent=" ",dt=u("\n\n\tActions:\n\t"),(pt=c("ul")).innerHTML='<li class="svelte-1m9zrs0">ADD : a = a + 2</li> <li class="svelte-1m9zrs0">MUL : a = a * 2</li> <li class="svelte-1m9zrs0">DIV : a = a / 2</li> <li class="svelte-1m9zrs0">NEW</li> <li class="svelte-1m9zrs0">UNDO</li>',mt=u("\n\t\n\tGetters: \n\t"),(ht=c("ul")).innerHTML='<li class="svelte-1m9zrs0">@ : The State</li> <li class="svelte-1m9zrs0">@a : The number to be changed</li> <li class="svelte-1m9zrs0">@b : Target number</li> <li class="svelte-1m9zrs0">@hist : List for Undo</li>',ft=d(),(vt=c("div")).textContent=" ",bt=u("\n\tKnown bugs:\n\t"),(gt=c("ul")).innerHTML='<li class="svelte-1m9zrs0">Spaces are not allowed in expressions</li> <li class="svelte-1m9zrs0">Tabs must be used for indentation</li>',zt=d(),xt=c("div"),($t=c("div")).innerHTML='Chess example (<a href="https://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation">Forsyth–Edwards Notation</a>)',yt=d(),Dt=c("ul"),Nt=c("li"),Pt=u("{"),Ct=u('"board"'),wt=u(":"),Ot=u('"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"'),kt=u("}"),At=d(),(_t=c("li")).textContent="  e2e4 MOVE @board rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR",Mt=d(),(Et=c("li")).textContent="    e7e5 MOVE @board rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR",p(i,"class","svelte-1m9zrs0"),p(f,"class","svelte-1m9zrs0"),p(g,"class","svelte-1m9zrs0"),p(y,"class","svelte-1m9zrs0"),p(N,"class","svelte-1m9zrs0"),p(O,"class","svelte-1m9zrs0"),p(A,"class","svelte-1m9zrs0"),p(M,"class","svelte-1m9zrs0"),p(S,"class","svelte-1m9zrs0"),p(T,"class","svelte-1m9zrs0"),p(I,"class","svelte-1m9zrs0"),p(U,"class","svelte-1m9zrs0"),p(H,"class","svelte-1m9zrs0"),p(q,"class","svelte-1m9zrs0"),p(W,"class","svelte-1m9zrs0"),p(Q,"class","svelte-1m9zrs0"),p(G,"class","svelte-1m9zrs0"),p(Y,"class","svelte-1m9zrs0"),p(tt,"class","svelte-1m9zrs0"),p(st,"class","svelte-1m9zrs0"),p(rt,"class","svelte-1m9zrs0"),p(at,"class","svelte-1m9zrs0"),p(lt,"class","svelte-1m9zrs0"),p(ut,"class","svelte-1m9zrs0"),p(vt,"class","svelte-1m9zrs0"),m(s,"position","absolute"),m(s,"left","1050px"),m(s,"top","10px"),m(s,"width","40%"),p(s,"class","svelte-1m9zrs0"),p($t,"class","svelte-1m9zrs0"),p(Nt,"class","svelte-1m9zrs0"),p(_t,"class","svelte-1m9zrs0"),p(Et,"class","svelte-1m9zrs0"),m(xt,"position","absolute"),m(xt,"left","10px"),m(xt,"top","1015px"),m(xt,"width","80%"),p(xt,"class","svelte-1m9zrs0")},m(t,e){o(t,s,e),a(s,n),a(s,r),a(s,i),a(s,h),a(s,f),a(s,v),a(s,b),a(b,g),a(g,z),a(g,x),a(b,$),a(b,y),a(b,D),a(b,N),a(N,P),a(N,C),a(s,w),a(s,O),a(s,k),a(s,A),a(s,_),a(s,M),a(s,E),a(s,S),a(s,V),a(s,T),a(s,L),a(s,I),a(s,R),a(s,U),a(s,B),a(s,H),a(s,j),a(s,q),a(s,J),a(s,W),a(s,K),a(s,Q),a(s,F),a(s,G),a(s,X),a(s,Y),a(s,Z),a(s,tt),a(s,et),a(s,st),a(s,nt),a(s,rt),a(s,it),a(s,at),a(s,ot),a(s,lt),a(s,ct),a(s,ut),a(s,dt),a(s,pt),a(s,mt),a(s,ht),a(s,ft),a(s,vt),a(s,bt),a(s,gt),o(t,zt,e),o(t,xt,e),a(xt,$t),a(xt,yt),a(xt,Dt),a(Dt,Nt),a(Nt,Pt),a(Nt,Ct),a(Nt,wt),a(Nt,Ot),a(Nt,kt),a(Dt,At),a(Dt,_t),a(Dt,Mt),a(Dt,Et)},p:t,i:t,o:t,d(t){t&&(l(s),l(zt),l(xt))}}}function M(t){const e=[],s=(t,e)=>{const s=[...t.hist,t.a];return{...t,a:e,hist:s}},n={ADD:t=>s(t,t.a+2),MUL:t=>s(t,2*t.a),DIV:t=>s(t,t.a/2),NEW:t=>({b:e.pop(),a:e.pop(),hist:[]}),UNDO:t=>{const e=t.hist.slice();return{a:e.pop(),b:t.b,hist:e}}};let r='\n{"a":18,"b":17,"hist":[]} # initial state\n\t@a 18 ==                # assert @a deeply equals 18\n\t@b 17                   # implicit == assertion\n\tADD @a 20               # based on line 1\n\tMUL @a 36 @hist [18]    # also based on line 1\n\tDIV @ {"a":9,"b":17,"hist":[18]} # @ is the state\n\t3 4 NEW @a 3 @b 4 @hist [] # NEW takes two parameters\n{"a":17,"b":1,"hist":[]}  # another initial state\n\tMUL ADD DIV @ {"a":18,"b":1,"hist":[17,34,36]}\n\t\tUNDO @ {"a":36,"b":1,"hist":[17,34]} # based on 9\n\t\t\tUNDO @ {"a":34,"b":1,"hist":[17]}  # based on 10\n\t\t\t\tUNDO @ {"a":17,"b":1,"hist":[99]}\n\t# a solution from 17 to 1 in eleven steps\n\tMUL ADD DIV ADD DIV ADD DIV ADD DIV DIV DIV @a @b\n';const i=CodeMirror(document.body,{lineNumbers:!0,tabSize:2,indentWithTabs:!0,theme:"dracula"});i.setSize(1e3,600),i.setValue(r.trim()),i.on("change",()=>{a.setValue(o.run(i.getValue()).join("\n"))});const a=CodeMirror(document.body,{readOnly:!0,tabSize:2});a.setSize(1e3,400);const o=A(n,e);return a.setValue(o.run(i.getValue()).join("\n")),{}}return new class extends O{constructor(t){super(),w(this,t,M,_,i,[])}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
