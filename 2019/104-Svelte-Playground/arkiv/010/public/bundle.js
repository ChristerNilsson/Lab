var app=function(){"use strict";function t(){}function e(t,e){for(const n in e)t[n]=e[n];return t}function n(t){return t()}function r(){return Object.create(null)}function i(t){t.forEach(n)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e}function c(t,e,n){t.$$.on_destroy.push(function(t,e){const n=t.subscribe(e);return n.unsubscribe?()=>n.unsubscribe():n}(e,n))}function a(t,e,n){if(t){const r=h(t,e,n);return t[0](r)}}function h(t,n,r){return t[1]?e({},e(n.$$scope.ctx,t[1](r?r(n):{}))):n.$$scope.ctx}function l(t,n,r,i){return t[1]?e({},e(n.$$scope.changed||{},t[1](i?i(r):{}))):n.$$scope.changed||{}}function f(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function p(t,e){t.appendChild(e)}function d(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function b(t){return document.createTextNode(t)}function g(){return b(" ")}function m(){return b("")}function $(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function w(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function _(t,e){for(const n in e)"style"===n?t.style.cssText=e[n]:n in t?t[n]=e[n]:w(t,n,e[n])}function x(t,e){e=""+e,t.data!==e&&(t.data=e)}function S(t,e){(null!=e||t.value)&&(t.value=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}let P;function O(t){P=t}function A(){if(!P)throw new Error("Function called outside component initialization");return P}function I(){const t=P;return(e,n)=>{const r=t.$$.callbacks[e];if(r){const i=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,i)})}}}function k(t,e){A().$$.context.set(t,e)}function C(t){return A().$$.context.get(t)}function N(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const j=[],V=[],F=[],U=[],R=Promise.resolve();let D=!1;function K(t){F.push(t)}function H(){const t=new Set;do{for(;j.length;){const t=j.shift();O(t),M(t.$$)}for(;V.length;)V.pop()();for(let e=0;e<F.length;e+=1){const n=F[e];t.has(n)||(n(),t.add(n))}F.length=0}while(j.length);for(;U.length;)U.pop()();D=!1}function M(t){t.fragment&&(t.update(t.dirty),i(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(K))}const B=new Set;let L;function q(){L={r:0,c:[],p:L}}function W(){L.r||i(L.c),L=L.p}function Q(t,e){t&&t.i&&(B.delete(t),t.i(e))}function Y(t,e,n,r){if(t&&t.o){if(B.has(t))return;B.add(t),L.c.push(()=>{B.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function z(t,e){Y(t,1,1,()=>{e.delete(t.key)})}function J(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],u=e[o];if(u){for(const t in s)t in u||(r[t]=1);for(const t in u)i[t]||(n[t]=u[t],i[t]=1);t[o]=u}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function X(t){return"object"==typeof t&&null!==t?t:{}}function G(t,e,r){const{fragment:s,on_mount:u,on_destroy:c,after_update:a}=t.$$;s.m(e,r),K(()=>{const e=u.map(n).filter(o);c?c.push(...e):i(e),t.$$.on_mount=[]}),a.forEach(K)}function Z(t,e){t.$$.fragment&&(i(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function tt(t,e){t.$$.dirty||(j.push(t),D||(D=!0,R.then(H)),t.$$.dirty=r()),t.$$.dirty[e]=!0}function et(e,n,o,s,u,c){const a=P;O(e);const h=n.props||{},l=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:u,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:r(),dirty:null};let f=!1;var p;l.ctx=o?o(e,h,(t,n,r=n)=>(l.ctx&&u(l.ctx[t],l.ctx[t]=r)&&(l.bound[t]&&l.bound[t](r),f&&tt(e,t)),n)):h,l.update(),f=!0,i(l.before_update),l.fragment=s(l.ctx),n.target&&(n.hydrate?l.fragment.l((p=n.target,Array.from(p.childNodes))):l.fragment.c(),n.intro&&Q(e.$$.fragment),G(e,n.target,n.anchor),H()),O(a)}class nt{$destroy(){Z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const rt=[];function it(e,n=t){let r;const i=[];function o(t){if(s(e,t)&&(e=t,r)){const t=!rt.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),rt.push(n,e)}if(t){for(let t=0;t<rt.length;t+=2)rt[t][0](rt[t+1]);rt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,u=t){const c=[s,u];return i.push(c),1===i.length&&(r=n(o)||t),s(e),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(r(),r=null)}}}}function ot(e,n,r){const s=!Array.isArray(e),u=s?[e]:e,c=n.length<2;return{subscribe:it(r,e=>{let r=!1;const a=[];let h=0,l=t;const f=()=>{if(h)return;l();const r=n(s?a[0]:a,e);c?e(r):l=o(r)?r:t},p=u.map((t,e)=>t.subscribe(t=>{a[e]=t,h&=~(1<<e),r&&f()},()=>{h|=1<<e}));return r=!0,f(),function(){i(p),l()}}).subscribe}}const st={},ut={};function ct(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const at=function(t,e){const n=[];let r=ct(t);return{get location(){return r},listen(e){n.push(e);const i=()=>{r=ct(t),e({location:r,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const r=n.indexOf(e);n.splice(r,1)}},navigate(e,{state:i,replace:o=!1}={}){i={...i,key:Date.now()+""};try{o?t.history.replaceState(i,null,e):t.history.pushState(i,null,e)}catch(n){t.location[o?"replace":"assign"](e)}r=ct(t),n.forEach(t=>t({location:r,action:"PUSH"}))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],r=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return r[e]},pushState(t,i,o){const[s,u=""]=o.split("?");e++,n.push({pathname:s,search:u}),r.push(t)},replaceState(t,i,o){const[s,u=""]=o.split("?");n[e]={pathname:s,search:u},r[e]=t}}}}()),{navigate:ht}=at,lt=/^:(.+)/,ft=4,pt=3,dt=2,yt=1,vt=1;function bt(t,e){return t.substr(0,e.length)===e}function gt(t){return"*"===t[0]}function mt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function $t(t){return t.replace(/(^\/+|\/+$)/g,"")}function wt(t,e){return{route:t,score:t.default?0:mt(t.path).reduce((t,e)=>(t+=ft,!function(t){return""===t}(e)?!function(t){return lt.test(t)}(e)?gt(e)?t-=ft+yt:t+=pt:t+=dt:t+=vt,t),0),index:e}}function _t(t,e){let n,r;const[i]=e.split("?"),o=mt(i),s=""===o[0],u=function(t){return t.map(wt).sort((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index)}(t);for(let t=0,i=u.length;t<i;t++){const i=u[t].route;let c=!1;if(i.default){r={route:i,params:{},uri:e};continue}const a=mt(i.path),h={},l=Math.max(o.length,a.length);let f=0;for(;f<l;f++){const t=a[f],e=o[f];if(void 0!==t&&gt(t)){h["*"===t?"*":t.slice(1)]=o.slice(f).map(decodeURIComponent).join("/");break}if(void 0===e){c=!0;break}let n=lt.exec(t);if(n&&!s){const t=decodeURIComponent(e);h[n[1]]=t}else if(t!==e){c=!0;break}}if(!c){n={route:i,params:h,uri:"/"+o.slice(0,f).join("/")};break}}return n||r||null}function xt(t,e){return t+(e?`?${e}`:"")}function St(t,e){return`${$t("/"===e?t:`${$t(t)}/${$t(e)}`)}/`}function Et(t){var e;const n=t.$$slots.default,r=a(n,t,null);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&t.$$scope&&r.p(l(n,e,t,null),h(n,e,null))},i(t){e||(Q(r,t),e=!0)},o(t){Y(r,t),e=!1},d(t){r&&r.d(t)}}}function Pt(t,e,n){let r,i,o,{basepath:s="/",url:u=null}=e;const a=C(st),h=C(ut),l=it([]);c(t,l,t=>{n("$routes",o=t)});const f=it(null);let p=!1;const d=a||it(u?{pathname:u}:at.location);c(t,d,t=>{n("$location",i=t)});const y=h?h.routerBase:it({path:s,uri:s});c(t,y,t=>{n("$base",r=t)});const v=ot([y,f],([t,e])=>{if(null===e)return t;const{path:n}=t,{route:r,uri:i}=e;return{path:r.default?n:r.path.replace(/\*.*$/,""),uri:i}});var b;a||(b=(()=>at.listen(t=>{d.set(t.location)})),A().$$.on_mount.push(b),k(st,d)),k(ut,{activeRoute:f,base:y,routerBase:v,registerRoute:function(t){const{path:e}=r;let{path:n}=t;if(t._path=n,t.path=St(e,n),"undefined"==typeof window){if(p)return;const e=function(t,e){return _t([t],e)}(t,i.pathname);e&&(f.set(e),p=!0)}else l.update(e=>(e.push(t),e))},unregisterRoute:function(t){l.update(e=>{const n=e.indexOf(t);return e.splice(n,1),e})}});let{$$slots:g={},$$scope:m}=e;return t.$set=(t=>{"basepath"in t&&n("basepath",s=t.basepath),"url"in t&&n("url",u=t.url),"$$scope"in t&&n("$$scope",m=t.$$scope)}),t.$$.update=((t={$base:1,$routes:1,$location:1})=>{if(t.$base){const{path:t}=r;l.update(e=>(e.forEach(e=>e.path=St(t,e._path)),e))}if(t.$routes||t.$location){const t=_t(o,i.pathname);f.set(t)}}),{basepath:s,url:u,routes:l,location:d,base:y,$$slots:g,$$scope:m}}class Ot extends nt{constructor(t){super(),et(this,t,Pt,Et,s,["basepath","url"])}}const At=({routeParams:t,$location:e})=>({params:t,location:e}),It=({routeParams:t,$location:e})=>({params:t,location:e});function Tt(t){var e,n,r,i,o=[Ct,kt],s=[];function u(t,e){return null!==e.component?0:1}return e=u(0,t),n=s[e]=o[e](t),{c(){n.c(),r=m()},m(t,n){s[e].m(t,n),d(t,r,n),i=!0},p(t,i){var c=e;(e=u(0,i))===c?s[e].p(t,i):(q(),Y(s[c],1,1,()=>{s[c]=null}),W(),(n=s[e])||(n=s[e]=o[e](i)).c(),Q(n,1),n.m(r.parentNode,r))},i(t){i||(Q(n),i=!0)},o(t){Y(n),i=!1},d(t){s[e].d(t),t&&y(r)}}}function kt(t){var e;const n=t.$$slots.default,r=a(n,t,It);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&(t.$$scope||t.routeParams||t.$location)&&r.p(l(n,e,t,At),h(n,e,It))},i(t){e||(Q(r,t),e=!0)},o(t){Y(r,t),e=!1},d(t){r&&r.d(t)}}}function Ct(t){var n,r,i=[{location:t.$location},t.routeParams,t.routeProps],o=t.component;function s(t){let n={};for(var r=0;r<i.length;r+=1)n=e(n,i[r]);return{props:n}}if(o)var u=new o(s());return{c(){u&&u.$$.fragment.c(),n=m()},m(t,e){u&&G(u,t,e),d(t,n,e),r=!0},p(t,e){var r=t.$location||t.routeParams||t.routeProps?J(i,[t.$location&&{location:e.$location},t.routeParams&&X(e.routeParams),t.routeProps&&X(e.routeProps)]):{};if(o!==(o=e.component)){if(u){q();const t=u;Y(t.$$.fragment,1,0,()=>{Z(t,1)}),W()}o?((u=new o(s())).$$.fragment.c(),Q(u.$$.fragment,1),G(u,n.parentNode,n)):u=null}else o&&u.$set(r)},i(t){r||(u&&Q(u.$$.fragment,t),r=!0)},o(t){u&&Y(u.$$.fragment,t),r=!1},d(t){t&&y(n),u&&Z(u,t)}}}function Nt(t){var e,n,r=null!==t.$activeRoute&&t.$activeRoute.route===t.route&&Tt(t);return{c(){r&&r.c(),e=m()},m(t,i){r&&r.m(t,i),d(t,e,i),n=!0},p(t,n){null!==n.$activeRoute&&n.$activeRoute.route===n.route?r?(r.p(t,n),Q(r,1)):((r=Tt(n)).c(),Q(r,1),r.m(e.parentNode,e)):r&&(q(),Y(r,1,1,()=>{r=null}),W())},i(t){n||(Q(r),n=!0)},o(t){Y(r),n=!1},d(t){r&&r.d(t),t&&y(e)}}}function jt(t,n,r){let i,o,{path:s="",component:u=null}=n;const{registerRoute:a,unregisterRoute:h,activeRoute:l}=C(ut);c(t,l,t=>{r("$activeRoute",i=t)});const p=C(st);c(t,p,t=>{r("$location",o=t)});const d={path:s,default:""===s};let y={},v={};var b;a(d),"undefined"!=typeof window&&(b=(()=>{h(d)}),A().$$.on_destroy.push(b));let{$$slots:g={},$$scope:m}=n;return t.$set=(t=>{r("$$props",n=e(e({},n),t)),"path"in t&&r("path",s=t.path),"component"in t&&r("component",u=t.component),"$$scope"in t&&r("$$scope",m=t.$$scope)}),t.$$.update=((t={$activeRoute:1,$$props:1})=>{t.$activeRoute&&i&&i.route===d&&r("routeParams",y=i.params);{const{path:t,component:e,...i}=n;r("routeProps",v=i)}}),{path:s,component:u,activeRoute:l,location:p,route:d,routeParams:y,routeProps:v,$activeRoute:i,$location:o,$$props:n=f(n),$$slots:g,$$scope:m}}class Vt extends nt{constructor(t){super(),et(this,t,jt,Nt,s,["path","component"])}}function Ft(t){var n,r,i;const o=t.$$slots.default,s=a(o,t,null);for(var u=[{href:t.href},{"aria-current":t.ariaCurrent},t.props],c={},f=0;f<u.length;f+=1)c=e(c,u[f]);return{c(){n=v("a"),s&&s.c(),_(n,c),i=$(n,"click",t.onClick)},l(t){s&&s.l(a_nodes)},m(t,e){d(t,n,e),s&&s.m(n,null),r=!0},p(t,e){s&&s.p&&t.$$scope&&s.p(l(o,e,t,null),h(o,e,null)),_(n,J(u,[t.href&&{href:e.href},t.ariaCurrent&&{"aria-current":e.ariaCurrent},t.props&&e.props]))},i(t){r||(Q(s,t),r=!0)},o(t){Y(s,t),r=!1},d(t){t&&y(n),s&&s.d(t),i()}}}function Ut(t,e,n){let r,i,{to:o="#",replace:s=!1,state:u={},getProps:a=(()=>({}))}=e;const{base:h}=C(ut);c(t,h,t=>{n("$base",r=t)});const l=C(st);c(t,l,t=>{n("$location",i=t)});const f=I();let p,d,y,v;let b,{$$slots:g={},$$scope:m}=e;return t.$set=(t=>{"to"in t&&n("to",o=t.to),"replace"in t&&n("replace",s=t.replace),"state"in t&&n("state",u=t.state),"getProps"in t&&n("getProps",a=t.getProps),"$$scope"in t&&n("$$scope",m=t.$$scope)}),t.$$.update=((t={to:1,$base:1,$location:1,href:1,isCurrent:1,getProps:1,isPartiallyCurrent:1})=>{(t.to||t.$base)&&n("href",p="/"===o?r.uri:function(t,e){if(bt(t,"/"))return t;const[n,r]=t.split("?"),[i]=e.split("?"),o=mt(n),s=mt(i);if(""===o[0])return xt(i,r);if(!bt(o[0],"."))return xt(("/"===i?"":"/")+s.concat(o).join("/"),r);const u=s.concat(o),c=[];return u.forEach(t=>{".."===t?c.pop():"."!==t&&c.push(t)}),xt("/"+c.join("/"),r)}(o,r.uri)),(t.$location||t.href)&&n("isPartiallyCurrent",d=bt(i.pathname,p)),(t.href||t.$location)&&n("isCurrent",y=p===i.pathname),t.isCurrent&&n("ariaCurrent",b=y?"page":void 0),(t.getProps||t.$location||t.href||t.isPartiallyCurrent||t.isCurrent)&&n("props",v=a({location:i,href:p,isPartiallyCurrent:d,isCurrent:y}))}),{to:o,replace:s,state:u,getProps:a,base:h,location:l,href:p,props:v,onClick:function(t){if(f("click",t),function(t){return!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)){t.preventDefault();const e=i.pathname===p||s;ht(p,{state:u,replace:e})}},ariaCurrent:b,$$slots:g,$$scope:m}}class Rt extends nt{constructor(t){super(),et(this,t,Ut,Ft,s,["to","replace","state","getProps"])}}function Dt(e){var n;return{c(){(n=v("h1")).textContent="Home Page"},m(t,e){d(t,n,e)},p:t,i:t,o:t,d(t){t&&y(n)}}}class Kt extends nt{constructor(t){super(),et(this,t,null,Dt,s,[])}}var Ht=function(t,e){return(Ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Mt(t,e){function n(){this.constructor=t}Ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bt=function(){return(Bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Lt(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function qt(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Wt(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function Qt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Yt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qt(arguments[e]));return t}function zt(t){return"function"==typeof t}var Jt=!1,Xt={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;Jt=t},get useDeprecatedSynchronousErrorHandling(){return Jt}};function Gt(t){setTimeout(function(){throw t},0)}var Zt={closed:!0,next:function(t){},error:function(t){if(Xt.useDeprecatedSynchronousErrorHandling)throw t;Gt(t)},complete:function(){}},te=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function ee(t){return null!==t&&"object"==typeof t}var ne=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),re=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var o=0;o<n.length;++o){n[o].remove(this)}if(zt(r))try{r.call(this)}catch(t){e=t instanceof ne?ie(t.errors):[t]}if(te(i)){o=-1;for(var s=i.length;++o<s;){var u=i[o];if(ee(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof ne?e=e.concat(ie(t.errors)):e.push(t)}}}if(e)throw new ne(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=((e=new t).closed=!0,e),t}();function ie(t){return t.reduce(function(t,e){return t.concat(e instanceof ne?e.errors:e)},[])}var oe=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),se=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Zt;break;case 1:if(!n){o.destination=Zt;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new ue(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new ue(o,n,r,i)}return o}return Mt(e,t),e.prototype[oe]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(re),ue=function(t){function e(e,n,r,i){var o,s=t.call(this)||this;s._parentSubscriber=e;var u=s;return zt(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==Zt&&(zt((u=Object.create(n)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=o,s._error=r,s._complete=i,s}return Mt(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;Xt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=Xt.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Gt(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Gt(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};Xt.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),Xt.useDeprecatedSynchronousErrorHandling)throw t;Gt(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!Xt.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return Xt.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Gt(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(se);var ce=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function ae(){}var he=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof se)return t;if(t[oe])return t[oe]()}return t||e||n?new se(t,e,n):new se(Zt)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Xt.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Xt.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){Xt.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof se?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=le(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[ce]=function(){return this},t.prototype.pipe=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?this:((t=e)?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:ae)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=le(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}();function le(t){if(t||(t=Promise),!t)throw new Error("no Promise impl found");return t}var fe=function(){function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t}(),pe=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return Mt(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(re),de=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return Mt(e,t),e}(se),ye=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Mt(e,t),e.prototype[oe]=function(){return new de(this)},e.prototype.lift=function(t){var e=new ve(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new fe;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new fe;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new fe;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new fe;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new fe;return this.hasError?(t.error(this.thrownError),re.EMPTY):this.isStopped?(t.complete(),re.EMPTY):(this.observers.push(t),new pe(this,t))},e.prototype.asObservable=function(){var t=new he;return t.source=this,t},e.create=function(t,e){return new ve(t,e)},e}(he),ve=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return Mt(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):re.EMPTY},e}(ye),be=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return Mt(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fe;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(ye),ge=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return Mt(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return Mt(e,t),e.prototype.schedule=function(t,e){return this},e}(re)),me=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return Mt(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(ge),$e=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),we=function(t){function e(n,r){void 0===r&&(r=$e.now);var i=t.call(this,n,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return Mt(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}($e),_e=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mt(e,t),e}(we))(me),xe=new he(function(t){return t.complete()});function Se(t){return t?function(t){return new he(function(e){return t.schedule(function(){return e.complete()})})}(t):xe}function Ee(t){return t&&"function"==typeof t.schedule}var Pe=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function Oe(t,e){return new he(function(n){var r=new re,i=0;return r.add(e.schedule(function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function Ae(t,e){return e?Oe(t,e):new he(Pe(t))}function Ie(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Ee(n)?(t.pop(),Oe(t,n)):Ae(t)}function Te(t){var e=t.error;t.subscriber.error(e)}var ke=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){var t,e;switch(this.kind){case"N":return Ie(this.value);case"E":return t=this.error,new he(e?function(n){return e.schedule(Te,0,{error:t,subscriber:n})}:function(e){return e.error(t)});case"C":return Se()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}(),Ce=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return Mt(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new Ne(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(ke.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(ke.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(ke.createComplete()),this.unsubscribe()},e}(se),Ne=function(){return function(t,e){this.notification=t,this.destination=e}}(),je=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return Mt(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new Ve(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new fe;if(this.isStopped||this.hasError?e=re.EMPTY:(this.observers.push(t),e=new pe(this,t)),i&&t.add(t=new Ce(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||_e).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(ye),Ve=function(){return function(t,e){this.time=t,this.value=e}}(),Fe=new we(ge);function Ue(t){return t}function Re(t){return!!t&&(t instanceof he||"function"==typeof t.lift&&"function"==typeof t.subscribe)}var De=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function Ke(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new He(t,e))}}var He=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Me(t,this.project,this.thisArg))},t}(),Me=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return Mt(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(se),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mt(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(se),Le=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return Mt(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(se);function qe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var We=qe(),Qe=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Ye(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var ze=function(t){if(t&&"function"==typeof t[ce])return r=t,function(t){var e=r[ce]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Qe(t))return Pe(t);if(Ye(t))return n=t,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,Gt),t};if(t&&"function"==typeof t[We])return e=t,function(t){for(var n=e[We]();;){var r=n.next();if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t};var e,n,r,i=ee(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Je(t,e,n,r,i){if(void 0===i&&(i=new Le(t,n,r)),!i.closed)return e instanceof he?e.subscribe(i):ze(e)(i)}var Xe={};function Ge(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Ee(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&te(t[0])&&(t=t[0]),Ae(t,r).lift(new Ze(n))}var Ze=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new tn(t,this.resultSelector))},t}(),tn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return Mt(e,t),e.prototype._next=function(t){this.values.push(Xe),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Je(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],u=this.toRespond?s===Xe?--this.toRespond:this.toRespond:0;o[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Be);function en(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[ce]}(t))return function(t,e){return new he(function(n){var r=new re;return r.add(e.schedule(function(){var i=t[ce]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r})}(t,e);if(Ye(t))return function(t,e){return new he(function(n){var r=new re;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r})}(t,e);if(Qe(t))return Oe(t,e);if(function(t){return t&&"function"==typeof t[We]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(function(n){var r,i=new re;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[We](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function nn(t,e){return e?en(t,e):t instanceof he?t:new he(ze(t))}var rn=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new on(t,this.project,this.concurrent))},t}(),on=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Mt(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new Le(this,void 0,void 0);this.destination.add(r),Je(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Be);function sn(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t(function(t,r){return nn(e(t,r)).pipe(Ke(function(e,i){return n(t,e,r,i)}))},r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new rn(e,r))})}(Ue,t)}function un(t){return!te(t)&&t-parseFloat(t)+1>=0}function cn(t,e){return function(n){return n.lift(new an(t,e))}}var an=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new hn(t,this.predicate,this.thisArg))},t}(),hn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return Mt(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(se);function ln(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}var fn=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new pn(t,this.durationSelector))},t}(),pn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return Mt(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}var n=Je(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Be);function dn(t,e){return void 0===e&&(e=Fe),n=function(){return function(t,e,n){void 0===t&&(t=0);var r=-1;return un(e)?r=Number(e)<1?1:Number(e):Ee(e)&&(n=e),Ee(n)||(n=Fe),new he(function(e){var i=un(t)?t:+t-n.now();return n.schedule(ln,i,{index:0,period:r,subscriber:e})})}(t,e)},function(t){return t.lift(new fn(n))};var n}var yn=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new vn(t,this.dueTime,this.scheduler))},t}(),vn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return Mt(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(bn,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(se);function bn(t){t.debouncedNext()}function gn(t,e){void 0===e&&(e=Fe);var n,r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return function(t){return t.lift(new mn(r,e))}}var mn=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new $n(t,this.delay,this.scheduler))},t}(),$n=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return Mt(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new wn(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(ke.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(ke.createComplete()),this.unsubscribe()},e}(se),wn=function(){return function(t,e){this.time=t,this.notification=e}}();function _n(t,e){return function(n){return n.lift(new xn(t,e))}}var xn=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new Sn(t,this.compare,this.keySelector))},t}(),Sn=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return Mt(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e;try{var n=this.keySelector;e=n?n(t):t}catch(t){return this.destination.error(t)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))},e}(se);var En=function(){function t(t){if(this.total=t,this.total<0)throw new De}return t.prototype.call=function(t,e){return e.subscribe(new Pn(t,this.total))},t}(),Pn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return Mt(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(se);var On=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new An(t))},t}(),An=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return Mt(e,t),e.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},e}(se);function In(t){return function(e){return e.lift(new Tn(t))}}var Tn=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new kn(t,this.total))},t}(),kn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return Mt(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(se);function Cn(t,e){return"function"==typeof e?function(n){return n.pipe(Cn(function(n,r){return nn(t(n,r)).pipe(Ke(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new Nn(t))}}var Nn=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new jn(t,this.project))},t}(),jn=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return Mt(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new Le(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Je(this,t,e,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(Be);function Vn(t){return Array.isArray(t)}function Fn(t){return!!Vn(t)&&0===t.length}function Un(t,e){return t.hasOwnProperty(e)}function Rn(t){return t.hasOwnProperty("active")}function Dn(t){return Vn(t)}function Kn(t){var e=t.active,n=t.ids,r=t.entities;return Dn(e)?function(t,e){var n=t.filter(function(t){return e.indexOf(t)>-1});if(n.length===t.length)return t;return n}(e,n):!1===Un(r,e)?null:e}function Hn(t,e){var n,r,i={};try{for(var o=Wt(Object.keys(t)),s=o.next();!s.done;s=o.next()){var u=s.value;i[u]=e(t[u])}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Mn(t){var e,n,r=t.state,i=t.entities,o=t.idKey,s=t.preAddEntity,u=t.isNativePreAdd;if(Vn(i)){var c=function(t,e,n){var r,i,o={entities:{},ids:[]};try{for(var s=Wt(t),u=s.next();!u.done;u=s.next()){var c=n(u.value);o.entities[c[e]]=c,o.ids.push(c[e])}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}(i,o,s);e=c.entities,n=c.ids}else!function(t){return t.entities&&t.ids}(i)?(e=u?i:Hn(i,s),n=Object.keys(e).map(function(t){return isNaN(t)?t:Number(t)})):(e=u?i.entities:Hn(i.entities,s),n=i.ids);var a=Bt({},r,{entities:e,ids:n,loading:!1});return Rn(r)&&(a.active=Kn(a)),a}var Bn=function(t){function e(e){return t.call(this,e)||this}return Mt(e,t),e}(Error);var Ln={type:null,entityIds:null,skip:!1},qn=!1;function Wn(t,e){Qn(t,e),qn=!0}function Qn(t,e){!1===qn&&(Ln.type=t,Ln.entityIds=e)}function Yn(t,e){return function(n,r,i){var o=i.value;return i.value=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Wn(t,e),o.apply(this,n)},i}}var zn=new ye,Jn=new be(!1),Xn={activeTransactions:0,batchTransaction:null};function Gn(){return Xn.activeTransactions>0}function Zn(t,e){void 0===e&&(e=void 0),Gn()||(Xn.batchTransaction=new ye),Xn.activeTransactions++,Jn.next(!0);try{return t.apply(e)}finally{Wn("@Transaction"),0==--Xn.activeTransactions&&(Xn.batchTransaction.next(!0),Xn.batchTransaction.complete(),Jn.next(!1),zn.next(!0))}}function tr(){return function(t,e,n){var r=n.value;return n.value=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Zn(function(){return r.apply(t,e)},this)},n}}function er(t){Object.freeze(t);var e="function"==typeof t,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(r){!n.call(t,r)||e&&("caller"===r||"callee"===r||"arguments"===r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||Object.isFrozen(t[r])||er(t[r])}),t}var nr={resettable:!1};function rr(){return nr}function ir(t){return null!=t&&""+t!="false"}function or(t){return ir(t)&&"Object"===t.constructor.name}function sr(t){return"function"==typeof t}var ur=new ye,cr=new je(50,5e3),ar=new ye;var hr=!0;function lr(){return hr}var fr="undefined"!=typeof window,pr=!fr,dr={},yr={};fr&&lr()&&(window.$$stores=dr,window.$$queries=yr);var vr=function(){function t(t,e){void 0===e&&(e={}),this.options=e,this.inTransaction=!1,this.cache={active:new be(!1),ttl:null},this.onInit(t)}return t.prototype.setLoading=function(t){void 0===t&&(t=!1),t!==this._value().loading&&(lr()&&Qn("Set Loading"),this._setState(function(e){return Bt({},e,{loading:t})}))},t.prototype.setHasCache=function(t,e){var n=this;if(void 0===e&&(e={restartTTL:!1}),t!==this.cache.active.value&&this.cache.active.next(t),e.restartTTL){var r=this.cacheConfig&&this.cacheConfig.ttl;r&&(null!==this.cache.ttl&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(function(){return n.setHasCache(!1)},r))}},t.prototype.setError=function(t){t!==this._value().error&&(lr()&&Qn("Set Error"),this._setState(function(e){return Bt({},e,{error:t})}))},t.prototype._select=function(t){return this.store.asObservable().pipe(Ke(t),_n())},t.prototype._value=function(){return this.storeValue},t.prototype._cache=function(){return this.cache.active},Object.defineProperty(t.prototype,"config",{get:function(){return this.constructor.akitaConfig||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storeName",{get:function(){return this.config.storeName||this.options.storeName||this.options.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deepFreeze",{get:function(){return this.config.deepFreezeFn||this.options.deepFreezeFn||er},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheConfig",{get:function(){return this.config.cache||this.options.cache},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resettable",{get:function(){return this.config.resettable||this.options.resettable},enumerable:!0,configurable:!0}),t.prototype._setState=function(t,e){void 0===e&&(e=!0),this.storeValue=hr?this.deepFreeze(t(this._value())):t(this._value()),this.store?Gn()?this.handleTransaction():this.dispatch(this.storeValue,e):this.store=new be(this.storeValue)},t.prototype.reset=function(){var t=this;this.isResettable()?(lr()&&Qn("Reset"),this._setState(function(){return Object.assign({},t._initialState)}),this.setHasCache(!1)):lr()&&console.warn("You need to enable the reset functionality")},t.prototype.update=function(t){var e=this;lr()&&Qn("Update"),this._setState(function(n){var r=sr(t)?t(n):t,i=e.akitaPreUpdate(n,Bt({},n,r));return or(n)?i:new n.constructor(i)})},t.prototype.updateStoreConfig=function(t){this.options=Bt({},this.options,t)},t.prototype.akitaPreUpdate=function(t,e){return e},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.destroy=function(){var t;!!fr&&window.hmrEnabled||this!==dr[this.storeName]||(delete dr[this.storeName],t=this.storeName,ur.next(t),this.setHasCache(!1),this.cache.active.complete())},t.prototype.onInit=function(t){var e,n,r;dr[this.storeName]=this,this._setState(function(){return t}),e=this.storeName,cr.next(e),this.isResettable()&&(this._initialState=t),lr()&&(n=this.storeName,r=this.constructor.name,n||console.error("@StoreConfig({ name }) is missing in "+r))},t.prototype.dispatch=function(t,e){var n;void 0===e&&(e=!0),this.store.next(t),e&&(n=this.storeName,ar.next(n),qn=!1)},t.prototype.watchTransaction=function(){var t=this;(Xn.batchTransaction?Xn.batchTransaction.asObservable():Ie(!0)).subscribe(function(){t.inTransaction=!1,t.dispatch(t._value())})},t.prototype.isResettable=function(){return!1!==this.resettable&&(this.resettable||rr().resettable)},t.prototype.handleTransaction=function(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)},t}();function br(t){return null==t}function gr(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function mr(t){return br(t)?[]:Array.isArray(t)?t:[t]}function $r(t){var e,n,r=t.state,i=t.ids;if(br(i))return function(t){return Bt({},t,{entities:{},ids:[],active:Dn(t.active)?[]:null})}(r);var o=r.entities,s={};try{for(var u=Wt(r.ids),c=u.next();!c.done;c=u.next()){var a=c.value;!1===i.includes(a)&&(s[a]=o[a])}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}var h=Bt({},r,{entities:s,ids:r.ids.filter(function(t){return!1===i.includes(t)})});return Rn(r)&&(h.active=Kn(h)),h}var wr=function(){return{entities:{},ids:[],loading:!0,error:null}};function _r(t){return!1===br(t)}function xr(t){var e,n,r,i=t.state,o=t.ids,s=t.idKey,u=t.newStateOrFn,c=t.preUpdateEntity,a={},h=!1;try{for(var l=Wt(o),f=l.next();!f.done;f=l.next()){var p=f.value;if(!1!==Un(i.entities,p)){var d=i.entities[p],y=sr(u)?u(d):u,v=y.hasOwnProperty(s)&&y[s]!==d[s],b=void 0;r=p,v&&(h=!0,r=y[s]);var g=Bt({},d,y);b=or(d)?g:or(y)?new d.constructor(g):new y.constructor(g),a[r]=c(d,b)}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}var m=i.ids,$=i.entities;if(h){var w=Qt(o,1)[0],_=i.entities,x=w;_[x];$=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(_,["symbol"==typeof x?x:x+""]),m=i.ids.map(function(t){return t===w?r:t})}return Bt({},i,{entities:Bt({},$,a),ids:m})}function Sr(t){return void 0===t}var Er={Set:0,Add:1,Update:2,Remove:3};Er[Er.Set]="Set",Er[Er.Add]="Add",Er[Er.Update]="Update",Er[Er.Remove]="Remove";var Pr=function(t){function e(e,n){void 0===e&&(e={}),void 0===n&&(n={});var r=t.call(this,Bt({},wr(),e),n)||this;return r.options=n,r.entityActions=new ye,r}var n;return Mt(e,t),Object.defineProperty(e.prototype,"selectEntityAction$",{get:function(){return this.entityActions.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idKey",{get:function(){return this.config.idKey||this.options.idKey||"id"},enumerable:!0,configurable:!0}),e.prototype.set=function(t){var n=this;if(!br(t)){lr()&&Qn("Set Entity");var r=this.akitaPreAddEntity===e.prototype.akitaPreAddEntity;this._setState(function(e){return Mn({state:e,entities:t,idKey:n.idKey,preAddEntity:n.akitaPreAddEntity,isNativePreAdd:r})}),this.setHasCache(!0,{restartTTL:!0}),this.hasInitialUIState()&&this.handleUICreation(),this.entityActions.next({type:Er.Set,ids:this.ids})}},e.prototype.add=function(t,e){void 0===e&&(e={loading:!1});var n=mr(t);if(!Fn(n)){var r=function(t){var e,n,r=t.state,i=t.entities,o=t.idKey,s=t.options,u=void 0===s?{}:s,c=t.preAddEntity,a={},h=[],l=!1;try{for(var f=Wt(i),p=f.next();!p.done;p=f.next()){var d=p.value;if(!1===Un(r.entities,d[o])){var y=c(d),v=y[o];a[v]=y,u.prepend?h.unshift(v):h.push(v),l=!0}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}return l?{newState:Bt({},r,{entities:Bt({},r.entities,a),ids:u.prepend?Yt(h,r.ids):Yt(r.ids,h)}),newIds:h}:null}({state:this._value(),preAddEntity:this.akitaPreAddEntity,entities:n,idKey:this.idKey,options:e});r&&(lr()&&Qn("Add Entity"),r.newState.loading=e.loading,this._setState(function(){return r.newState}),this.hasInitialUIState()&&this.handleUICreation(!0),this.entityActions.next({type:Er.Add,ids:r.newIds}))}},e.prototype.update=function(e,n){var r=this;if(Sr(n))t.prototype.update.call(this,e);else{var i=[];Fn(i=sr(e)?this.ids.filter(function(t){return e(r.entities[t])}):br(e)?this.ids:mr(e))||(lr()&&Qn("Update Entity",i),this._setState(function(t){return xr({idKey:r.idKey,ids:i,preUpdateEntity:r.akitaPreUpdateEntity,state:t,newStateOrFn:n})}),this.entityActions.next({type:Er.Update,ids:i}))}},e.prototype.upsert=function(t,e,n){var r=this;void 0===n&&(n={});var i=mr(t),o=function(t){return function(e){return Un(r.entities,e)===t}},s=sr(n.baseClass),u=i.filter(o(!0)),c=i.filter(o(!1)).map(function(t){var i,o=sr(e)?e({}):e,u=Bt({},o,((i={})[r.idKey]=t,i));return s?new n.baseClass(u):u});this.update(u,e),this.add(c),lr()&&Wn("Upsert Entity")},e.prototype.upsertMany=function(t,e){var n,r;void 0===e&&(e={});var i=[],o=[],s={};try{for(var u=Wt(t),c=u.next();!c.done;c=u.next()){var a=c.value,h=this.akitaPreCheckEntity(a),l=h[this.idKey];if(Un(this.entities,l)){var f=this._value().entities[l],p=Bt({},this._value().entities[l],h),d=e.baseClass?new e.baseClass(p):p,y=(v=this.akitaPreUpdateEntity(f,d))[this.idKey];s[y]=v,o.push(y)}else{var v,b=e.baseClass?new e.baseClass(h):h;y=(v=this.akitaPreAddEntity(b))[this.idKey];i.push(y),s[y]=v}}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}lr()&&Wn("Upsert Many"),this._setState(function(t){return Bt({},t,{ids:i.length?Yt(t.ids,i):t.ids,entities:Bt({},t.entities,s),loading:!!e.loading})}),o.length&&this.entityActions.next({type:Er.Update,ids:o}),i.length&&this.entityActions.next({type:Er.Add,ids:i}),i.length&&this.hasUIStore()&&this.handleUICreation(!0)},e.prototype.replace=function(t,e){var n,r,i=mr(t);if(!Fn(i)){var o={};try{for(var s=Wt(i),u=s.next();!u.done;u=s.next()){var c=u.value;e[this.idKey]=c,o[c]=e}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}lr()&&Qn("Replace Entity",t),this._setState(function(t){return Bt({},t,{entities:Bt({},t.entities,o)})})}},e.prototype.move=function(t,e){var n=this.ids.slice();n.splice(e<0?n.length+e:e,0,n.splice(t,1)[0]),lr()&&Qn("Move Entity"),this._setState(function(t){return Bt({},t,{entities:Bt({},t.entities),ids:n})})},e.prototype.remove=function(t){var e=this;if(!Fn(this.ids)){var n=_r(t),r=[];Fn(r=sr(t)?this.ids.filter(function(n){return t(e.entities[n])}):n?mr(t):null)||(lr()&&Qn("Remove Entity",r),this._setState(function(t){return $r({state:t,ids:r})}),null===r&&this.setHasCache(!1),this.handleUIRemove(r),this.entityActions.next({type:Er.Remove,ids:r}))}},e.prototype.updateActive=function(t){var e=mr(this.active);lr()&&Qn("Update Active",e),this.update(e,t)},e.prototype.setActive=function(t){var e=function(t,e,n){var r;if(Vn(t))r=t;else if(gr(t)){if(br(n))return;t=Object.assign({wrap:!0},t);var i=e.indexOf(n);if(t.prev){var o=0===i;if(o&&!t.wrap)return;r=o?e[e.length-1]:e[i-1]}else if(t.next){var s=e.length===i+1;if(s&&!t.wrap)return;r=s?e[0]:e[i+1]}}else{if(t===n)return;r=t}return r}(t,this.ids,this.active);void 0!==e&&(lr()&&Qn("Set Active",e),this._setActive(e))},e.prototype.addActive=function(t){var e=this,n=mr(t);Fn(n)||(n.every(function(t){return e.active.indexOf(t)>-1})||(lr()&&Qn("Add Active",t),this._setState(function(t){var e=Array.from(new Set(Yt(t.active,n)));return Bt({},t,{active:e})})))},e.prototype.removeActive=function(t){var e=this,n=mr(t);Fn(n)||n.some(function(t){return e.active.indexOf(t)>-1})&&(lr()&&Qn("Remove Active",t),this._setState(function(t){return Bt({},t,{active:Array.isArray(t.active)?t.active.filter(function(t){return-1===n.indexOf(t)}):null})}))},e.prototype.toggleActive=function(t){var e=this,n=mr(t),r=function(t){return function(n){return e.active.includes(n)===t}},i=n.filter(r(!0)),o=n.filter(r(!1));this.removeActive(i),this.addActive(o),lr()&&Wn("Toggle Active")},e.prototype.createUIStore=function(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n={name:"UI/"+this.storeName,idKey:this.idKey};return this.ui=new Or(t,Bt({},n,e)),this.ui},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ui instanceof e&&this.ui.destroy(),this.entityActions.complete()},e.prototype.akitaPreUpdateEntity=function(t,e){return e},e.prototype.akitaPreAddEntity=function(t){return t},e.prototype.akitaPreCheckEntity=function(t){return t},Object.defineProperty(e.prototype,"ids",{get:function(){return this._value().ids},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this._value().entities},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._value().active},enumerable:!0,configurable:!0}),e.prototype._setActive=function(t){this._setState(function(e){return Bt({},e,{active:t})})},e.prototype.handleUICreation=function(t){var e=this;void 0===t&&(t=!1);var n,r=this.ids,i=sr(this.ui._akitaCreateEntityFn),o=function(t){var n,r=e.entities[t],o=i?e.ui._akitaCreateEntityFn(r):e.ui._akitaCreateEntityFn;return Bt(((n={})[e.idKey]=r[e.idKey],n),o)};n=t?this.ids.filter(function(t){return Sr(e.ui.entities[t])}).map(o):r.map(o),t?this.ui.add(n):this.ui.set(n)},e.prototype.hasInitialUIState=function(){return this.hasUIStore()&&!1===Sr(this.ui._akitaCreateEntityFn)},e.prototype.handleUIRemove=function(t){this.hasUIStore()&&this.ui.remove(t)},e.prototype.hasUIStore=function(){return this.ui instanceof Or},Lt([tr(),qt("design:type",Function),qt("design:paramtypes",[Object,Object,Object]),qt("design:returntype",void 0)],e.prototype,"upsert",null),Lt([tr(),qt("design:type",Function),qt("design:paramtypes",["function"==typeof(n="undefined"!=typeof T&&T)?n:Object]),qt("design:returntype",void 0)],e.prototype,"toggleActive",null),e}(vr),Or=function(t){function e(e,n){return void 0===e&&(e={}),void 0===n&&(n={}),t.call(this,e,n)||this}return Mt(e,t),e.prototype.setInitialEntityState=function(t){this._akitaCreateEntityFn=t},e}(Pr);function Ar(t){return"string"==typeof t}var Ir=function(){function t(t){this.store=t,this.__store__=t,lr()&&(yr[t.storeName]=this)}return t.prototype.select=function(t){var e,n;if(sr(t))e=t;else if(Ar(t))e=function(e){return e[t]};else{if(Array.isArray(t))return this.store._select(function(t){return t}).pipe(_n((n=t,function(t,e){var r=sr(n[0]);return!1===n.some(function(n){return r?n(t)!==n(e):t[n]!==e[n]})})),Ke(function(e){return sr(t[0])?t.map(function(t){return t(e)}):t.reduce(function(t,n){return t[n]=e[n],t},{})}));e=function(t){return t}}return this.store._select(e)},t.prototype.selectLoading=function(){return this.select(function(t){return t.loading})},t.prototype.selectError=function(){return this.select(function(t){return t.error})},t.prototype.getValue=function(){return this.store._value()},t.prototype.selectHasCache=function(){return this.store._cache().asObservable()},t.prototype.getHasCache=function(){return this.store._cache().value},Object.defineProperty(t.prototype,"config",{get:function(){return this.constructor.akitaQueryConfig},enumerable:!0,configurable:!0}),t}();var Tr={ASC:"asc",DESC:"desc"};function kr(t,e){for(var n,r,i=[],o=t.ids,s=t.entities,u=e.filterBy,c=e.limitTo,a=e.sortBy,h=e.sortByOrder,l=function(t){var e=s[o[t]];if(!u)return i.push(e),"continue";mr(u).every(function(n){return n(e,t)})&&i.push(e)},f=0;f<o.length;f++)l(f);if(a){var p=sr(a)?a:(n=a,void 0===(r=h)&&(r=Tr.ASC),function(t,e){if(!t.hasOwnProperty(n)||!e.hasOwnProperty(n))return 0;var i="string"==typeof t[n]?t[n].toUpperCase():t[n],o="string"==typeof e[n]?e[n].toUpperCase():e[n],s=0;return i>o?s=1:i<o&&(s=-1),r==Tr.DESC?-1*s:s});i=i.sort(function(e,n){return p(e,n,t)})}var d=Math.min(c||i.length,i.length);return d===i.length?i:i.slice(0,d)}function Cr(t,e){return function(n){var r=n[t];if(!Sr(r))return e?Ar(e)?r[e]:e(r):r}}function Nr(t,e){return e.some(function(e){return void 0===t.find(function(t){return t===e})})}var jr=function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e)||this;return r.options=n,r.__store__=e,r}return Mt(e,t),e.prototype.selectAll=function(t){var e=this;return void 0===t&&(t={asObject:!1}),this.select(function(t){return t.entities}).pipe(Ke(function(){return e.getAll(t)}))},e.prototype.getAll=function(t){return void 0===t&&(t={asObject:!1,filterBy:void 0,limitTo:void 0}),t.asObject?function(t,e){var n={},r=e.filterBy,i=e.limitTo,o=t.ids,s=t.entities;if(!r&&!i)return s;var u=!1===br(i);if(r&&u)for(var c=0,a=function(t,e){if(c===i)return"break";var u=o[t],a=s[u];mr(r).every(function(e){return e(a,t)})&&(n[u]=a,c++)},h=0,l=o.length;h<l&&"break"!==a(h);h++);else{var f=Math.min(i||o.length,o.length),p=function(t){var e=o[t],i=s[e];if(!r)return n[e]=i,"continue";mr(r).every(function(e){return e(i,t)})&&(n[e]=i)};for(h=0;h<f;h++)p(h)}return n}(this.getValue(),t):(function(t,e){t.sortBy=t.sortBy||e&&e.sortBy,t.sortByOrder=t.sortByOrder||e&&e.sortByOrder}(t,this.config||this.options),kr(this.getValue(),t))},e.prototype.selectMany=function(t,e){return t&&t.length?this.select(function(t){return t.entities}).pipe(Ke(function(n){return r=function(t){return Cr(t,e)(n)},t.reduce(function(t,e,n,i){var o=r(e,n,i);return void 0!==o&&t.push(o),t},[]);var r}),_n(function(t,e){return t===e||!1!==Vn(t)&&!1!==Vn(e)&&(!(!Fn(t)||!Fn(e))||!Nr(e,t)&&!1===Nr(t,e))})):Ie([])},e.prototype.selectEntity=function(t,e){var n=t;return sr(t)&&(n=function(t,e){var n,r;try{for(var i=Wt(Object.keys(e)),o=i.next();!o.done;o=i.next()){var s=o.value;if(!0===t(e[s]))return s}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(t,this.getValue().entities)),this.select(function(t){return t.entities}).pipe(Ke(Cr(n,e)),_n())},e.prototype.getEntity=function(t){return this.getValue().entities[t]},e.prototype.selectActiveId=function(){return this.select(function(t){return t.active})},e.prototype.getActiveId=function(){return this.getValue().active},e.prototype.selectActive=function(t){var e=this;return Vn(this.getActive())?this.selectActiveId().pipe(Cn(function(n){return e.selectMany(n,t)})):this.selectActiveId().pipe(Cn(function(n){return e.selectEntity(n,t)}))},e.prototype.getActive=function(){var t=this,e=this.getActiveId();return Vn(e)?e.map(function(e){return t.getValue().entities[e]}):ir(e)?this.getEntity(e):void 0},e.prototype.selectCount=function(t){var e=this;return this.select(function(t){return t.entities}).pipe(Ke(function(){return e.getCount(t)}))},e.prototype.getCount=function(t){return sr(t)?this.getAll().filter(t).length:this.getValue().ids.length},e.prototype.selectLast=function(t){return this.selectAt(function(t){return t[t.length-1]},t)},e.prototype.selectFirst=function(t){return this.selectAt(function(t){return t[0]},t)},e.prototype.selectEntityAction=function(t){return Sr(t)?this.store.selectEntityAction$:this.store.selectEntityAction$.pipe(cn(function(e){return e.type===t}),Ke(function(t){return t.ids}))},e.prototype.hasEntity=function(t){var e=this;return br(t)?this.getValue().ids.length>0:sr(t)?this.getAll().some(t):Vn(t)?t.every(function(t){return t in e.getValue().entities}):t in this.getValue().entities},e.prototype.hasActive=function(t){var e=this.getValue().active;return Array.isArray(e)?_r(t)?e.includes(t):e.length>0:_r(e)},e.prototype.createUIQuery=function(){this.ui=new Vr(this.__store__.ui)},e.prototype.selectAt=function(t,e){var n=this;return this.select(function(t){return t.ids}).pipe(Ke(t),_n(),Cn(function(t){return n.selectEntity(t,e)}))},e}(Ir),Vr=function(t){function e(e){return t.call(this,e)||this}return Mt(e,t),e}(jr),Fr=function(t){return t.pipe(cn(function(t){return null!=t}))};function Ur(t,e){return 1===e.split(".").length?t:e.split(".").slice(1).join(".").split(".").reduce(function(t,e){return t&&t[e]},t)}function Rr(t,e,n){var r=e.split(".");if(1===r.length)return n;t=Bt({},t);var i=r.length-2;return e.split(".").slice(1).reduce(function(t,e,r){return t[e]=r===i?n:Bt({},t[e]),t&&t[e]},t),t}var Dr=!1;function Kr(){return Dr}function Hr(t){return(e=t)&&sr(e.then)||Re(t)?nn(t):Ie(t);var e}var Mr=function(){function t(t,e){this.query=t,e&&e.resetFn&&rr().resettable&&this.onReset(e.resetFn)}return t.prototype.getQuery=function(){return this.query},t.prototype.getStore=function(){return this.getQuery().__store__},t.prototype.isEntityBased=function(t){return ir(t)},t.prototype.selectSource=function(t){return this.isEntityBased(t)?this.getQuery().selectEntity(t).pipe(Fr):this.getQuery().select(function(t){return t})},t.prototype.getSource=function(t){return this.isEntityBased(t)?this.getQuery().getEntity(t):this.getQuery().getValue()},t.prototype.updateStore=function(t,e){this.isEntityBased(e)?this.getStore().update(e,t):this.getStore()._setState(function(e){return Bt({},e,t)})},t.prototype.onReset=function(t){var e=this,n=this.getStore().reset;this.getStore().reset=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];setTimeout(function(){n.apply(e.getStore(),r),t()})}},t}(),Br={pagesControls:!1,range:!1,startWith:1,cacheTimeout:void 0,clearStoreWithCache:!0};!function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e,{resetFn:function(){r.initial=!1,r.destroy({clearCache:!0,currentPage:1})}})||this;r.query=e,r.config=n,r.metadata=new Map,r.pages=new Map,r.pagination={currentPage:1,perPage:0,total:0,lastPage:0,data:[]},r.initial=!0,r.isLoading$=r.query.selectLoading().pipe(gn(0)),r.config=Object.assign(Br,n);var i=r.config,o=i.startWith,s=i.cacheTimeout;return r.page=new be(o),Re(s)&&(r.clearCacheSubscription=s.subscribe(function(){return r.clearCache()})),r}Mt(e,t),Object.defineProperty(e.prototype,"pageChanges",{get:function(){return this.page.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPage",{get:function(){return this.pagination.currentPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirst",{get:function(){return 1===this.currentPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLast",{get:function(){return this.currentPage===this.pagination.lastPage},enumerable:!0,configurable:!0}),e.prototype.withControls=function(){return this.config.pagesControls=!0,this},e.prototype.withRange=function(){return this.config.range=!0,this},e.prototype.setLoading=function(t){void 0===t&&(t=!0),this.getStore().setLoading(t)},e.prototype.update=function(t){this.pagination=t,this.addPage(t.data)},e.prototype.addPage=function(t){var e=this;this.pages.set(this.currentPage,{ids:t.map(function(t){return t[e.getStore().idKey]})}),this.getStore().add(t)},e.prototype.clearCache=function(t){void 0===t&&(t={}),this.initial||(Wn("@Pagination - Clear Cache"),!1!==t.clearStore&&(this.config.clearStoreWithCache||t.clearStore)&&this.getStore().remove(),this.pages=new Map,this.metadata=new Map),this.initial=!1},e.prototype.clearPage=function(t){this.pages.delete(t)},e.prototype.destroy=function(t){var e=void 0===t?{}:t,n=e.clearCache,r=e.currentPage;this.clearCacheSubscription&&this.clearCacheSubscription.unsubscribe(),n&&this.clearCache(),Sr(r)||this.setPage(r),this.initial=!0},e.prototype.isPageActive=function(t){return this.currentPage===t},e.prototype.setPage=function(t){t===this.currentPage&&this.hasPage(t)||this.page.next(this.pagination.currentPage=t)},e.prototype.nextPage=function(){this.currentPage!==this.pagination.lastPage&&this.setPage(this.pagination.currentPage+1)},e.prototype.prevPage=function(){this.pagination.currentPage>1&&this.setPage(this.pagination.currentPage-1)},e.prototype.setLastPage=function(){this.setPage(this.pagination.lastPage)},e.prototype.setFirstPage=function(){this.setPage(1)},e.prototype.hasPage=function(t){return this.pages.has(t)},e.prototype.getPage=function(t){var e=this,n=this.pagination.currentPage;return this.hasPage(n)?this.selectPage(n):(this.setLoading(!0),nn(t()).pipe(Cn(function(t){return n=t.currentPage,Zn(function(){e.setLoading(!1),e.update(t)}),e.selectPage(n)})))},e.prototype.getQuery=function(){return this.query},e.prototype.refreshCurrentPage=function(){!1===br(this.currentPage)&&(this.clearPage(this.currentPage),this.setPage(this.currentPage))},e.prototype.getFrom=function(){return this.isFirst?1:(this.currentPage-1)*this.pagination.perPage+1},e.prototype.getTo=function(){return this.isLast?this.pagination.total:this.currentPage*this.pagination.perPage},e.prototype.selectPage=function(t){var e,n=this;return this.query.selectAll({asObject:!0}).pipe((e=1,function(t){return 0===e?Se():t.lift(new En(e))}),Ke(function(e){var r=Bt({},n.pagination,{data:n.pages.get(t).ids.map(function(t){return e[t]})}),i=n.config,o=i.range,s=i.pagesControls;return isNaN(n.pagination.total)&&(1===r.lastPage?r.total=r.data?r.data.length:0:r.total=r.perPage*r.lastPage,n.pagination.total=r.total),o&&(r.from=n.getFrom(),r.to=n.getTo()),s&&(r.pageControls=function(t,e){for(var n=Math.ceil(t/e),r=[],i=0;i<n;i++)r.push(i+1);return r}(n.pagination.total,n.pagination.perPage)),r}))},Lt([Yn("@Pagination - New Page"),qt("design:type",Function),qt("design:paramtypes",[Object]),qt("design:returntype",void 0)],e.prototype,"update",null)}(Mr);!function(t){function e(e,n,r){void 0===r&&(r={});var i=t.call(this,e)||this;return i.query=e,i.factoryFnOrPath=n,i.params=r,i.params=Bt({debounceTime:300,formKey:"akitaForm",emitEvent:!1,arrControlFactory:function(t){return i.builder.control(t)}},r),i.isRootKeys=!1===ir(n),i.isKeyBased=Ar(n)||i.isRootKeys,i}Mt(e,t),e.prototype.setForm=function(t,e){return this.form=t,this.builder=e,this.activate(),this},e.prototype.reset=function(t){var e,n,r=this;n=t||(this.isKeyBased?this.initialValue:this.factoryFnOrPath()),this.isKeyBased&&Object.keys(this.initialValue).forEach(function(t){var e=r.initialValue[t];if(Array.isArray(e)&&r.builder){var n=r.form.controls[t];r.cleanArray(n),e.forEach(function(e,n){r.form.get(t).insert(n,r.params.arrControlFactory(e))})}}),this.form.patchValue(n,{emitEvent:this.params.emitEvent});var i=this.isKeyBased?Rr(this.getQuery().getValue(),this.getStore().storeName+"."+this.factoryFnOrPath,n):((e={})[this.params.formKey]=n,e);this.updateStore(i)},e.prototype.cleanArray=function(t){for(;0!==t.length;)t.removeAt(0)},e.prototype.resolveInitialValue=function(t,e){var n=this;if(t)return Object.keys(t).reduce(function(t,r){var i=e[r];if(Array.isArray(i)&&n.builder){var o=n.params.arrControlFactory;n.cleanArray(n.form.get(r)),i.forEach(function(t,e){n.form.get(r).insert(e,o(t))})}return t[r]=e[r],t},{})},e.prototype.activate=function(){var t,e,n,r,i=this;if(this.isKeyBased)if(this.isRootKeys)this.initialValue=this.resolveInitialValue(this.form.value,this.getQuery().getValue()),this.form.patchValue(this.initialValue,{emitEvent:this.params.emitEvent});else{e=this.getStore().storeName+"."+this.factoryFnOrPath;var o=Ur(this.getQuery().getValue(),e);this.initialValue=this.resolveInitialValue(o,o),this.form.patchValue(this.initialValue,{emitEvent:this.params.emitEvent})}else{this.getQuery().getValue()[this.params.formKey]||(Wn("@PersistNgFormPlugin activate"),this.updateStore(((t={})[this.params.formKey]=this.factoryFnOrPath(),t)));var s=this.getQuery().getValue()[this.params.formKey];this.form.patchValue(s)}this.formChanges=this.form.valueChanges.pipe((n=this.params.debounceTime,void 0===r&&(r=Fe),function(t){return t.lift(new yn(n,r))})).subscribe(function(t){var n;Wn("@PersistForm - Update"),n=i.isKeyBased?i.isRootKeys?function(e){return Bt({},e,t)}:function(n){return Rr(n,e,t)}:function(){var e;return(e={})[i.params.formKey]=t,e},i.updateStore(n(i.getQuery().getValue()))})},e.prototype.destroy=function(){this.formChanges&&this.formChanges.unsubscribe(),this.form=null,this.builder=null}}(Mr);function Lr(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}var qr=[];var Wr=function(){function t(t,e){this.query=t,this.entityIds=e,this.entities=new Map}return t.prototype.getEntity=function(t){return this.entities.get(t)},t.prototype.hasEntity=function(t){return this.entities.has(t)},t.prototype.removeEntity=function(t){return this.destroy(t),this.entities.delete(t)},t.prototype.createEntity=function(t,e){return this.entities.set(t,e)},t.prototype.getIds=function(){return Sr(this.entityIds)?this.query.getValue().ids:mr(this.entityIds)},t.prototype.resolvedIds=function(t){return Sr(t)?this.getIds():mr(t)},t.prototype.rebase=function(t,e){var n=this;if(void 0===e&&(e={}),ir(t))if(Sr(this.entityIds)){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(!1===this.hasEntity(o)){sr(e.beforeAdd)&&e.beforeAdd(o);var s=this.instantiatePlugin(o);this.entities.set(o,s),sr(e.afterAdd)&&e.afterAdd(s)}}this.entities.forEach(function(r,i){-1===t.indexOf(i)&&(sr(e.beforeRemove)&&e.beforeRemove(r),n.removeEntity(i))})}else{var u=mr(this.entityIds);for(r=0,i=u.length;r<i;r++){o=u[r];if(t.indexOf(o)>-1&&!1===this.hasEntity(o)){sr(e.beforeAdd)&&e.beforeAdd(o);s=this.instantiatePlugin(o);this.entities.set(o,s),sr(e.afterAdd)&&e.afterAdd(s)}else this.entities.forEach(function(r,i){-1===t.indexOf(i)&&!0===n.hasEntity(i)&&(sr(e.beforeRemove)&&e.beforeRemove(r),n.removeEntity(i))})}}else this.getIds().forEach(function(t){n.hasEntity(t)||n.createEntity(t,n.instantiatePlugin(t))})},t.prototype.selectIds=function(){return this.query.select(function(t){return t.ids})},t.prototype.activate=function(t){this.rebase(t)},t.prototype.forEachId=function(t,e){for(var n=this.resolvedIds(t),r=0,i=n.length;r<i;r++){var o=n[r];this.hasEntity(o)&&e(this.getEntity(o))}},t}(),Qr=function(t){function e(e,n,r){void 0===n&&(n={});var i=t.call(this,e,{resetFn:function(){return i.clear()}})||this;return i.query=e,i.params=n,i._entityId=r,i.skip=!1,i.history={past:[],present:null,future:[]},i.skipUpdate=!1,n.maxAge=n.maxAge?n.maxAge:10,n.comparator=n.comparator||function(){return!0},i.activate(),i}return Mt(e,t),Object.defineProperty(e.prototype,"hasPast",{get:function(){return this.history.past.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasFuture",{get:function(){return this.history.future.length>0},enumerable:!0,configurable:!0}),e.prototype.activate=function(){var t=this;this.history.present=this.getSource(this._entityId),this.subscription=this.selectSource(this._entityId).pipe(function(t){return t.lift(new On)}).subscribe(function(e){var n=Qt(e,2),r=n[0],i=n[1];if(t.skip)t.skip=!1;else{var o=t.params.comparator(r,i);!t.skipUpdate&&o&&(t.history.past.length===t.params.maxAge&&(t.history.past=t.history.past.slice(1)),t.history.past=Yt(t.history.past,[r]),t.history.present=i)}})},e.prototype.undo=function(){if(this.history.past.length>0){var t=this.history,e=t.past,n=t.present,r=e[e.length-1];this.history.past=e.slice(0,e.length-1),this.history.present=r,this.history.future=Yt([n],this.history.future),this.update()}},e.prototype.redo=function(){if(this.history.future.length>0){var t=this.history,e=t.past,n=t.present,r=this.history.future[0],i=this.history.future.slice(1);this.history.past=Yt(e,[n]),this.history.present=r,this.history.future=i,this.update("Redo")}},e.prototype.jumpToPast=function(t){if(!(t<0||t>=this.history.past.length)){var e=this.history,n=e.past,r=e.future,i=n.slice(0,t),o=Yt(n.slice(t+1),r),s=n[t];this.history.past=i,this.history.present=s,this.history.future=o,this.update()}},e.prototype.jumpToFuture=function(t){if(!(t<0||t>=this.history.future.length)){var e=this.history,n=e.past,r=e.future,i=Yt(n,r.slice(0,t)),o=r[t],s=r.slice(t+1);this.history.past=i,this.history.present=o,this.history.future=s,this.update("Redo")}},e.prototype.clear=function(t){this.history=sr(t)?t(this.history):{past:[],present:null,future:[]}},e.prototype.destroy=function(t){void 0===t&&(t=!1),t&&this.clear(),this.subscription.unsubscribe()},e.prototype.ignoreNext=function(){this.skip=!0},e.prototype.update=function(t){void 0===t&&(t="Undo"),this.skipUpdate=!0,Wn("@StateHistory - "+t),this.updateStore(this.history.present,this._entityId),this.skipUpdate=!1},e}(Mr),Yr=(function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e,n.entityIds)||this;return r.query=e,r.params=n,n.maxAge=ir(n.maxAge)?n.maxAge:10,r.activate(),r.selectIds().pipe(In(1)).subscribe(function(t){return r.activate(t)}),r}Mt(e,t),e.prototype.redo=function(t){this.forEachId(t,function(t){return t.redo()})},e.prototype.undo=function(t){this.forEachId(t,function(t){return t.undo()})},e.prototype.hasPast=function(t){if(this.hasEntity(t))return this.getEntity(t).hasPast},e.prototype.hasFuture=function(t){if(this.hasEntity(t))return this.getEntity(t).hasFuture},e.prototype.jumpToFuture=function(t,e){this.forEachId(t,function(t){return t.jumpToFuture(e)})},e.prototype.jumpToPast=function(t,e){this.forEachId(t,function(t){return t.jumpToPast(e)})},e.prototype.clear=function(t){this.forEachId(t,function(t){return t.clear()})},e.prototype.destroy=function(t,e){void 0===e&&(e=!1),this.forEachId(t,function(t){return t.destroy(e)})},e.prototype.ignoreNext=function(t){this.forEachId(t,function(t){return t.ignoreNext()})},e.prototype.instantiatePlugin=function(t){return new Qr(this.query,this.params,t)}}(Wr),{comparator:function(t,e){return JSON.stringify(t)!==JSON.stringify(e)}});function zr(t,e){return e.split(".").reduce(function(t,e){return t&&"undefined"!==t[e]?t[e]:void 0},t)}var Jr=function(t){function e(e,n,r){var i=t.call(this,e)||this;if(i.query=e,i.params=n,i._entityId=r,i.dirty=new be(!1),i.active=!1,i._reset=new ye,i.isDirty$=i.dirty.asObservable().pipe(_n()),i.reset$=i._reset.asObservable(),i.params=Bt({},Yr,n),i.params.watchProperty){var o=mr(i.params.watchProperty);e instanceof jr&&o.includes("entities")&&!o.includes("ids")&&o.push("ids"),i.params.watchProperty=o}return i}return Mt(e,t),e.prototype.reset=function(t){void 0===t&&(t={});var e=this.head;sr(t.updateFn)&&(e=this.isEntityBased(this._entityId)?t.updateFn(this.head,this.getQuery().getEntity(this._entityId)):t.updateFn(this.head,this.getQuery().getValue())),Wn("@DirtyCheck - Revert"),this.updateStore(e,this._entityId),this._reset.next()},e.prototype.setHead=function(){return this.active?this.head=this._getHead():(this.activate(),this.active=!0),this.updateDirtiness(!1),this},e.prototype.isDirty=function(){return!!this.dirty.value},e.prototype.hasHead=function(){return!!this.getHead()},e.prototype.destroy=function(){this.head=null,this.subscription&&this.subscription.unsubscribe(),this._reset&&this._reset.complete()},e.prototype.isPathDirty=function(t){var e=this.getHead(),n=zr(this.getQuery().getValue(),t),r=zr(e,t);return this.params.comparator(n,r)},e.prototype.getHead=function(){return this.head},e.prototype.activate=function(){var t=this;this.head=this._getHead();var e=this.params.watchProperty?this.params.watchProperty.map(function(e){return t.query.select(function(t){return t[e]}).pipe(Ke(function(t){return{val:t,__akitaKey:e}}))}):[this.selectSource(this._entityId)];this.subscription=Ge.apply(void 0,Yt(e)).pipe(In(1)).subscribe(function(e){if(!Sr(t.head)){var n=e.some(function(e){var n=e.__akitaKey?t.head[e.__akitaKey]:t.head,r=e.__akitaKey?e.val:e;return t.params.comparator(n,r)});t.updateDirtiness(n)}})},e.prototype.updateDirtiness=function(t){this.dirty.next(t)},e.prototype._getHead=function(){var t=this.getSource(this._entityId);return this.params.watchProperty&&(t=this.getWatchedValues(t)),t},e.prototype.getWatchedValues=function(t){return this.params.watchProperty.reduce(function(e,n){return e[n]=t[n],e},{})},e}(Mr);!function(t){function e(e,n){void 0===n&&(n={});var r=t.call(this,e,n.entityIds)||this;return r.query=e,r.params=n,r._someDirty=new ye,r.someDirty$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return Ee(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof he?t[0]:sn(n)(Ae(t,r))}(r.query.select(function(t){return t.entities}),r._someDirty.asObservable()).pipe(dn(0),Ke(function(){return r.checkSomeDirty()})),r.params=Bt({},Yr,n),r.activate(),r.selectIds().pipe(In(1)).subscribe(function(e){t.prototype.rebase.call(r,e,{afterAdd:function(t){return t.setHead()}})}),r}Mt(e,t),e.prototype.setHead=function(t){if(this.params.entityIds&&t){var e=mr(t);if(!1===mr(this.params.entityIds).some(function(t){return e.indexOf(t)>-1}))return this}return this.forEachId(t,function(t){return t.setHead()}),this._someDirty.next(),this},e.prototype.hasHead=function(t){return!!this.entities.has(t)&&this.getEntity(t).hasHead()},e.prototype.reset=function(t,e){void 0===e&&(e={}),this.forEachId(t,function(t){return t.reset(e)})},e.prototype.isDirty=function(t,e){if(void 0===e&&(e=!0),this.entities.has(t)){var n=this.getEntity(t);return e?n.isDirty$:n.isDirty()}return!1},e.prototype.someDirty=function(){return this.checkSomeDirty()},e.prototype.isPathDirty=function(t,e){if(this.entities.has(t)){var n=this.getEntity(t).getHead(),r=zr(this.query.getEntity(t),e),i=zr(n,e);return this.params.comparator(r,i)}return null},e.prototype.destroy=function(t){this.forEachId(t,function(t){return t.destroy()}),t||this._someDirty.complete()},e.prototype.instantiatePlugin=function(t){return new Jr(this.query,this.params,t)},e.prototype.checkSomeDirty=function(){var t,e,n=this.resolvedIds();try{for(var r=Wt(n),i=r.next();!i.done;i=r.next()){var o=i.value;if(this.getEntity(o).isDirty())return!0}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return!1}}(Wr);const Xr=function(t,e){return new Pr(t,e)}({filter:"SHOW_ALL"},{name:"todos"}),Gr=new jr(Xr,Zr);var Zr;const ti=Gr.select("filter"),ei=Ge(ti,Gr.selectAll(),function(t,e){switch(t){case"SHOW_COMPLETED":return e.filter(t=>t.completed);case"SHOW_ACTIVE":return e.filter(t=>!t.completed);default:return e}});async function ni(t){const e={title:t,completed:!1},n=await Promise.resolve("xxxxxx4xyx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));Xr.add({id:n,...e})}function ri(e){var n,r,o,s,u,c,a,h,l,f=e.todo.title+"";return{c(){n=v("li"),r=v("div"),o=v("input"),u=g(),c=b(f),a=g(),(h=v("button")).textContent="X",w(o,"type","checkbox"),o.checked=s=e.todo.completed,w(h,"type","button"),w(h,"class","btn btn-sm btn-danger"),w(n,"class","list-group-item svelte-1kjaqhi"),l=[$(o,"change",e.change_handler),$(h,"click",e.click_handler)]},m(t,e){d(t,n,e),p(n,r),p(r,o),p(r,u),p(r,c),p(n,a),p(n,h)},p(t,e){t.todo&&s!==(s=e.todo.completed)&&(o.checked=s),t.todo&&f!==(f=e.todo.title+"")&&x(c,f)},i:t,o:t,d(t){t&&y(n),i(l)}}}function ii(t,e,n){let{todo:r}=e;return t.$set=(t=>{"todo"in t&&n("todo",r=t.todo)}),{todo:r,change_handler:function(e){N(t,e)},click_handler:function(e){N(t,e)}}}class oi extends nt{constructor(t){super(),et(this,t,ii,ri,u,["todo"])}}function si(e){var n,r,o;return{c(){n=v("div"),w(r=v("input"),"class","form-control"),w(r,"placeholder","Add todo.."),w(n,"class","form-group"),o=[$(r,"input",e.input_input_handler),$(r,"keydown",e.keydown_handler)]},m(t,i){d(t,n,i),p(n,r),S(r,e.todo)},p(t,e){t.todo&&r.value!==e.todo&&S(r,e.todo)},i:t,o:t,d(t){t&&y(n),i(o)}}}function ui(t,e,n){const r=I();let i="";return{dispatch:r,todo:i,input_input_handler:function(){i=this.value,n("todo",i)},keydown_handler:t=>{"Enter"===t.key&&(r("todo",i),n("todo",i=""))}}}class ci extends nt{constructor(t){super(),et(this,t,ui,si,u,[])}}function ai(t,e,n){const r=Object.create(t);return r.filter=e[n],r}function hi(t){var e,n,r,i=t.filter.label+"";return{c(){e=v("button"),n=b(i),w(e,"type","button"),w(e,"class","btn btn-outline-dark"),w(e,"data-filter-id",t.filter.id),E(e,"active",t.filter.id===t.$currentFilter?"active":""),r=$(e,"click",t.click_handler)},m(t,r){d(t,e,r),p(e,n)},p(t,n){(t.filters||t.$currentFilter)&&E(e,"active",n.filter.id===n.$currentFilter?"active":"")},d(t){t&&y(e),r()}}}function li(e){var n;let r=e.filters,i=[];for(let t=0;t<r.length;t+=1)i[t]=hi(ai(e,r,t));return{c(){n=v("div");for(let t=0;t<i.length;t+=1)i[t].c();w(n,"class","btn-group")},m(t,e){d(t,n,e);for(let t=0;t<i.length;t+=1)i[t].m(n,null)},p(t,e){if(t.filters||t.$currentFilter){let o;for(r=e.filters,o=0;o<r.length;o+=1){const s=ai(e,r,o);i[o]?i[o].p(t,s):(i[o]=hi(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&y(n),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t)}}}function fi(t,e,n){let r,{currentFilter:i}=e;c(t,i,t=>{n("$currentFilter",r=t)});return t.$set=(t=>{"currentFilter"in t&&n("currentFilter",i=t.currentFilter)}),{currentFilter:i,filters:[{id:"SHOW_ALL",label:"All"},{id:"SHOW_ACTIVE",label:"Active"},{id:"SHOW_COMPLETED",label:"Completed"}],$currentFilter:r,click_handler:function(e){N(t,e)}}}class pi extends nt{constructor(t){super(),et(this,t,fi,li,u,["currentFilter"])}}function di(t,e,n){const r=Object.create(t);return r.todo=e[n],r.i=n,r}function yi(t,e){var n,r;var i=new oi({props:{todo:e.todo}});return i.$on("click",function(){return e.click_handler_1(e)}),i.$on("change",function(...t){return e.change_handler(e,...t)}),{key:t,first:null,c(){n=m(),i.$$.fragment.c(),this.first=n},m(t,e){d(t,n,e),G(i,t,e),r=!0},p(t,n){e=n;var r={};t.$visibleTodos&&(r.todo=e.todo),i.$set(r)},i(t){r||(Q(i.$$.fragment,t),r=!0)},o(t){Y(i.$$.fragment,t),r=!1},d(t){t&&y(n),Z(i,t)}}}function vi(t){var e,n,r,i,o,s,u,c,a,h=[],l=new Map,f=t.$visibleTodos.length+"",m=new pi({props:{currentFilter:ti}});m.$on("click",t.click_handler);var $=new ci({});$.$on("todo",t.todo_handler);let _=t.$visibleTodos;const S=t=>t.todo.id;for(let e=0;e<_.length;e+=1){let n=di(t,_,e),r=S(n);l.set(r,h[e]=yi(r,n))}return{c(){e=v("section"),(n=v("h1")).textContent="Todos",r=g(),m.$$.fragment.c(),i=g(),$.$$.fragment.c(),o=g(),s=v("ul");for(let t=0;t<h.length;t+=1)h[t].c();u=g(),c=b(f),w(s,"class","list-group"),w(e,"class","svelte-sog0wn")},m(t,l){d(t,e,l),p(e,n),p(e,r),G(m,e,null),p(e,i),G($,e,null),p(e,o),p(e,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);p(e,u),p(e,c),a=!0},p(t,e){const n=e.$visibleTodos;q(),h=function(t,e,n,r,i,o,s,u,c,a,h,l){let f=t.length,p=o.length,d=f;const y={};for(;d--;)y[t[d].key]=d;const v=[],b=new Map,g=new Map;for(d=p;d--;){const t=l(i,o,d),u=n(t);let c=s.get(u);c?r&&c.p(e,t):(c=a(u,t)).c(),b.set(u,v[d]=c),u in y&&g.set(u,Math.abs(d-y[u]))}const m=new Set,$=new Set;function w(t){Q(t,1),t.m(u,h),s.set(t.key,t),h=t.first,p--}for(;f&&p;){const e=v[p-1],n=t[f-1],r=e.key,i=n.key;e===n?(h=e.first,f--,p--):b.has(i)?!s.has(r)||m.has(r)?w(e):$.has(i)?f--:g.get(r)>g.get(i)?($.add(r),w(e)):(m.add(i),f--):(c(n,s),f--)}for(;f--;){const e=t[f];b.has(e.key)||c(e,s)}for(;p;)w(v[p-1]);return v}(h,t,S,1,e,n,l,s,z,yi,null,di),W(),a&&!t.$visibleTodos||f===(f=e.$visibleTodos.length+"")||x(c,f)},i(t){if(!a){Q(m.$$.fragment,t),Q($.$$.fragment,t);for(let t=0;t<_.length;t+=1)Q(h[t]);a=!0}},o(t){Y(m.$$.fragment,t),Y($.$$.fragment,t);for(let t=0;t<h.length;t+=1)Y(h[t]);a=!1},d(t){t&&y(e),Z(m),Z($);for(let t=0;t<h.length;t+=1)h[t].d()}}}function bi(t,e,n){let r;c(t,ei,t=>{n("$visibleTodos",r=t)}),async function(){const t=await Promise.resolve([{id:1,completed:!0,title:"create sample Svelte+Akita todo app"}]);Xr.set(t)}();return{$visibleTodos:r,click_handler:t=>(function(t){Xr.update({filter:t})})(t.target.dataset.filterId),todo_handler:t=>ni(t.detail),click_handler_1:({todo:t})=>(async function(t){await Promise.resolve(),Xr.remove(t)})(t.id),change_handler:({todo:t},e)=>(async function(t,e){await Promise.resolve(),Xr.update(t,{completed:e})})(t.id,e.target.checked)}}class gi extends nt{constructor(t){super(),et(this,t,bi,vi,u,[])}}function mi(t){var e;const n=t.$$slots.default,r=a(n,t,null);return{c(){r&&r.c()},l(t){r&&r.l(t)},m(t,n){r&&r.m(t,n),e=!0},p(t,e){r&&r.p&&t.$$scope&&r.p(l(n,e,t,null),h(n,e,null))},i(t){e||(Q(r,t),e=!0)},o(t){Y(r,t),e=!1},d(t){r&&r.d(t)}}}function $i(t){var e,n=new Rt({props:{to:t.to,getProps:wi,$$slots:{default:[mi]},$$scope:{ctx:t}}});return{c(){n.$$.fragment.c()},m(t,r){G(n,t,r),e=!0},p(t,e){var r={};t.to&&(r.to=e.to),t.$$scope&&(r.$$scope={changed:t,ctx:e}),n.$set(r)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){Z(n,t)}}}function wi({location:t,href:e,isPartiallyCurrent:n,isCurrent:r}){return("/"===e?r:n||r)?{class:"active"}:{}}function _i(t,e,n){let{to:r=""}=e,{$$slots:i={},$$scope:o}=e;return t.$set=(t=>{"to"in t&&n("to",r=t.to),"$$scope"in t&&n("$$scope",o=t.$$scope)}),{to:r,$$slots:i,$$scope:o}}class xi extends nt{constructor(t){super(),et(this,t,_i,$i,s,["to"])}}function Si(t){var e;return{c(){e=b("Home")},m(t,n){d(t,e,n)},d(t){t&&y(e)}}}function Ei(t){var e;return{c(){e=b("Todos")},m(t,n){d(t,e,n)},d(t){t&&y(e)}}}function Pi(t){var e,n=new Kt({});return{c(){n.$$.fragment.c()},m(t,r){G(n,t,r),e=!0},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){Z(n,t)}}}function Oi(t){var e,n=new gi({});return{c(){n.$$.fragment.c()},m(t,r){G(n,t,r),e=!0},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){Z(n,t)}}}function Ai(t){var e,n,r,i,o,s,u=new xi({props:{to:"/",$$slots:{default:[Si]},$$scope:{ctx:t}}}),c=new xi({props:{to:"todos",$$slots:{default:[Ei]},$$scope:{ctx:t}}}),a=new Vt({props:{path:"/",$$slots:{default:[Pi]},$$scope:{ctx:t}}}),h=new Vt({props:{path:"/todos",$$slots:{default:[Oi]},$$scope:{ctx:t}}});return{c(){e=v("nav"),u.$$.fragment.c(),n=g(),c.$$.fragment.c(),r=g(),i=v("div"),a.$$.fragment.c(),o=g(),h.$$.fragment.c(),w(i,"class","container")},m(t,l){d(t,e,l),G(u,e,null),p(e,n),G(c,e,null),d(t,r,l),d(t,i,l),G(a,i,null),p(i,o),G(h,i,null),s=!0},p(t,e){var n={};t.$$scope&&(n.$$scope={changed:t,ctx:e}),u.$set(n);var r={};t.$$scope&&(r.$$scope={changed:t,ctx:e}),c.$set(r);var i={};t.$$scope&&(i.$$scope={changed:t,ctx:e}),a.$set(i);var o={};t.$$scope&&(o.$$scope={changed:t,ctx:e}),h.$set(o)},i(t){s||(Q(u.$$.fragment,t),Q(c.$$.fragment,t),Q(a.$$.fragment,t),Q(h.$$.fragment,t),s=!0)},o(t){Y(u.$$.fragment,t),Y(c.$$.fragment,t),Y(a.$$.fragment,t),Y(h.$$.fragment,t),s=!1},d(t){t&&y(e),Z(u),Z(c),t&&(y(r),y(i)),Z(a),Z(h)}}}function Ii(t){var e,n=new Ot({props:{$$slots:{default:[Ai]},$$scope:{ctx:t}}});return{c(){n.$$.fragment.c()},m(t,r){G(n,t,r),e=!0},p(t,e){var r={};t.$$scope&&(r.$$scope={changed:t,ctx:e}),n.$set(r)},i(t){e||(Q(n.$$.fragment,t),e=!0)},o(t){Y(n.$$.fragment,t),e=!1},d(t){Z(n,t)}}}return function(t,e){if(void 0===e&&(e={}),!pr&&window.__REDUX_DEVTOOLS_EXTENSION__){qr.length&&qr.forEach(function(t){t.unsubscribe?t.unsubscribe():t&&t()}),t&&t.run||((t=t||{}).run=function(t){return t()},e=t);var n=Object.assign({},{name:"Akita",shallow:!0},e),r=window.__REDUX_DEVTOOLS_EXTENSION__.connect(n),i={};qr.push(cr.subscribe(function(t){var e;i=Bt({},i,((e={})[t]=dr[t]._value(),e)),r.send({type:"["+Lr(t)+"] - @@INIT"},i)})),qr.push(ur.subscribe(function(t){delete i[t],r.send({type:"["+t+"] - Delete Store"},i)})),qr.push(ar.subscribe(function(t){var n,o=Ln.type,s=Ln.entityIds;if(Ln.skip)!function(t){void 0===t&&(t=!0),Ln.skip=t}(!1);else{var u=dr[t];if(u){if(!1===e.shallow&&i[t]&&JSON.stringify(u._value())===JSON.stringify(i[t]))return;i=Bt({},i,((n={})[t]=u._value(),n));var c=Lr(t),a=_r(s)?"["+c+"] - "+o+" (ids: "+s+")":"["+c+"] - "+o;e.logTrace&&(console.group(a),console.trace(),console.groupEnd()),r.send({type:a},i)}}})),qr.push(r.subscribe(function(e){if("DISPATCH"===e.type){if("COMMIT"===e.payload.type)return void r.init(i);if(e.state)for(var n=JSON.parse(e.state),o=function(e,r){var i=r[e];dr[i]&&t.run(function(){dr[i]._setState(function(){return n[i]},!1)})},s=0,u=Object.keys(n);s<u.length;s++)o(s,u)}}))}}(),function(t){var e={key:"AkitaStores",enableInNonBrowser:!1,storage:"undefined"==typeof localStorage?t.storage:localStorage,deserialize:JSON.parse,serialize:JSON.stringify,include:[],exclude:[],persistOnDestroy:!1,preStorageUpdate:function(t,e){return e},preStoreUpdate:function(t,e){return e},skipStorageUpdate:Kr,preStorageUpdateOperator:function(){return function(t){return t}}},n=Object.assign({},e,t),r=n.storage,i=n.enableInNonBrowser,o=n.deserialize,s=n.serialize,u=n.include,c=n.exclude,a=n.key,h=n.preStorageUpdate,l=n.persistOnDestroy,f=n.preStorageUpdateOperator,p=n.preStoreUpdate,d=n.skipStorageUpdate;if(!pr||i){var y,v=u.length>0,b=c.length>0;if(v&&b)throw new Bn("You can't use both include and exclude");v&&(y=u.reduce(function(t,e){return sr(e)?t.fns.push(e):t[e.split(".")[0]]=e,t},{fns:[]}));var g={},m={},$=[],w=[],_="undefined"!=typeof localStorage&&(r===localStorage||r===sessionStorage);Hr(r.getItem(a)).subscribe(function(t){var e=gr(t)?t:o(t||"{}");function n(t){e.$cache=Bt({},e.$cache||{},t);var n=Object.assign({},e,m);w.push(r.setItem(a,_?s(n):n)),function t(e){Hr(e).subscribe(function(){var e=w.shift();e&&t(e)})}(w.shift())}function i(t,e){g[t]=dr[t]._select(function(t){return Ur(t,e)}).pipe(In(1),cn(function(){return!1===d()}),f()).subscribe(function(e){m[t]=h(t,e),Promise.resolve().then(function(){var e;return n(((e={})[t]=dr[t]._cache().getValue(),e))})})}function u(t,n,r){if(t in e){Qn("@PersistState"),n._setState(function(n){return Rr(n,r,p(t,e[t]))});var i=!!e.$cache&&e.$cache[t];dr[t].setHasCache(i)}}$.push(ur.subscribe(function(t){g[t]&&(!1===l&&n(!1),g[t].unsubscribe(),delete g[t])})),$.push(cr.subscribe(function(t){if(!b||!c.includes(t)){var e=dr[t];if(v){var n=y[t];if(!n){if(!y.fns.some(function(e){return e(t)}))return;n=t}u(t,e,n),i(t,n)}else u(t,e,t),i(t,t)}}))})}}(),new class extends nt{constructor(t){super(),et(this,t,null,Ii,s,[])}}({target:document.body,intro:!0})}();
//# sourceMappingURL=bundle.js.map
