// Generated by CoffeeScript 2.3.2
var MARKERS, MAX, Marker, Tile, createAllTiles, createPlayer0, createPlayer1, dice, draw, helper, mousePressed, p0, p1, player, setup, tiles;

MARKERS = 7;

MAX = {
  P: 1, // Promotion
  R: 1, // Replay
  I: 1, // Promoted Protection
  S: 4, // Stack 4 
  M: 4, // Mixed 4
  A: 1 // Attack
};

p0 = []; // Path of player 0

p1 = []; // Path of player 1

tiles = []; // Twenty tiles

player = 0; // 0 or 1

dice = 1; // 0..4 Probability [0,1,2,3,4] == [1,4,6,4,1]

Marker = class Marker {
  constructor(player1, promoted = false) { // promoted marker is indicated by five dots	
    this.player = player1;
    this.promoted = promoted;
  }

};

Tile = class Tile {
  constructor(x1, y1, markers = [], letter1 = ' ') {
    this.x = x1;
    this.y = y1;
    this.markers = markers;
    this.letter = letter1;
  }

  inside(mx, my) {
    var x, y;
    x = width / 2 - 100 + 100 * this.x;
    y = 200 + 100 * this.y;
    return (x - 50 < mx && mx < x + 50) && (y - 50 < my && my < y + 50) && this.markers.length !== 0;
  }

  click(target) {
    if (this.legal(target)) {
      return this.move(target);
    }
  }

  legal(target) {
    if (target.markers.length === 4 && MAX[target.letter] === 4) {
      return false;
    }
    return true;
  }

  move(target) {
    var enemy, marker;
    if (MAX[target.letter] === 1) {
      if (target.markers.length === 1) {
        if (target.markers[0].player === this.player) {
          return false; // throw enemy marker
        } else {
          enemy = target.markers.pop();
          enemy.promoted = false;
          tiles[20 + enemy.player].markers.push(enemy);
        }
      }
    }
    marker = this.markers.pop();
    target.markers.push(marker);
    if (target.letter !== 'R') {
      return player = 1 - player;
    }
  }

  draw() {
    var i, j, len, marker, ref, results, x, y;
    if (this.letter === ' ') {
      fc(0, 0, 0);
    }
    if (this.letter === 'P') {
      fc(1, 0, 0);
    }
    if (this.letter === 'R') {
      fc(1, 0, 1);
    }
    if (this.letter === 'I') {
      fc(0, 1, 0);
    }
    if (this.letter === 'S') {
      fc(1, 1, 0);
    }
    if (this.letter === 'M') {
      fc(0, 1, 1);
    }
    if (this.letter === 'A') {
      fc(1, 1, 1);
    }
    x = width / 2 - 100 + 100 * this.x;
    y = 200 + 100 * this.y;
    rect(x, y, 90, 90);
    fc(0);
    text(this.letter, x, y + 9);
    ref = this.markers;
    results = [];
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      marker = ref[i];
      if (marker.player === 0) {
        fc(1, 0, 0, 0.75);
      } else {
        fc(0.5, 0.5, 0.5, 0.75);
      }
      circle(x + 10 * (i % 2), -30 + y + 7 * (7 - i), 25);
      if (marker.promoted) {
        fc(1, 1, 0);
        results.push(circle(-20 + x + 7 * i, -20 + y + 7 * i, 10));
      } else {
        results.push(void 0);
      }
    }
    return results;
  }

};

createAllTiles = function() {
  var i, j, k, l, len, len1, len2, ref, ref1, ref2;
  ref = range(4);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    tiles.push(new Tile(0, 3 - i)); // 0 1 2 3
  }
  ref1 = range(6);
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    i = ref1[k];
    tiles.push(new Tile(1, i)); // 4 5 6 7 8 9
  }
  tiles.push(new Tile(1, 6)); // 10
  tiles.push(new Tile(0, 6)); // 11
  tiles.push(new Tile(0, 7)); // 12
  tiles.push(new Tile(1, 7)); // 13
  tiles.push(new Tile(2, 7)); // 14
  tiles.push(new Tile(2, 6)); // 15
  ref2 = range(4);
  for (l = 0, len2 = ref2.length; l < len2; l++) {
    i = ref2[l];
    tiles.push(new Tile(2, 3 - i)); // 16 17 18 19
  }
  tiles.push(new Tile(0, 4)); // 20 IN 0
  tiles.push(new Tile(2, 4)); // 21 IN 1
  tiles.push(new Tile(0, -1)); // 22 OUT 0
  return tiles.push(new Tile(2, -1)); // 23 OUT 1
};

createPlayer0 = function() {
  var i, j, len, ref, results;
  ref = [20, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 10, 9, 8, 7, 6, 5, 4, 22];
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(p0.push(tiles[i]));
  }
  return results;
};

createPlayer1 = function() {
  var i, j, len, ref, results;
  ref = [21, 16, 17, 18, 19, 4, 5, 6, 7, 8, 9, 10, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 23];
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(p1.push(tiles[i]));
  }
  return results;
};

setup = function() {
  var i, j, k, len, len1, letter, ref, ref1, results;
  createCanvas(windowWidth, windowHeight);
  rectMode(CENTER);
  textAlign(CENTER, CENTER);
  textSize(100);
  createAllTiles();
  createPlayer0();
  createPlayer1();
  ref = 'SASRIAMRAMSRPAPRSASR';
  for (i = j = 0, len = ref.length; j < len; i = ++j) {
    letter = ref[i];
    tiles[i].letter = letter;
  }
  ref1 = range(MARKERS);
  results = [];
  for (k = 0, len1 = ref1.length; k < len1; k++) {
    i = ref1[k];
    tiles[20].markers.push(new Marker(0));
    results.push(tiles[21].markers.push(new Marker(1)));
  }
  return results;
};

draw = function() {
  var j, len, results, tile;
  bg(0);
  results = [];
  for (j = 0, len = tiles.length; j < len; j++) {
    tile = tiles[j];
    results.push(tile.draw());
  }
  return results;
};

helper = function(player) { // a,b anger index till player-vektorn
  var a, b, i, j, len, marker, p, tileA, tileB;
  a = null;
  for (i = j = 0, len = player.length; j < len; i = ++j) {
    p = player[i];
    if (p.inside(mouseX, mouseY)) {
      a = i;
      if (_.last(p.markers).promoted) {
        if (a >= 12) {
          break;
        }
      } else {
        break;
      }
    }
  }
  if (a === null) {
    return;
  }
  b = a + dice;
  tileA = player[a];
  if (tileA.markers.length === 0) {
    return;
  }
  if (a === 0) {
    tileB = player[b];
    return tileA.click(tileB);
  } else {
    marker = _.last(tileA.markers);
    tileB = player[b];
    if (a >= 12) {
      marker.promoted = true;
    }
    if (b < player.length) {
      return tileA.click(tileB);
    }
  }
};

mousePressed = function() {
  if (player === 0) {
    return helper(p0);
  } else {
    return helper(p1);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLGNBQUEsRUFBQSxhQUFBLEVBQUEsYUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBLFlBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsT0FBQSxHQUFVOztBQUNWLEdBQUEsR0FDQztFQUFBLENBQUEsRUFBRSxDQUFGO0VBQ0EsQ0FBQSxFQUFFLENBREY7RUFFQSxDQUFBLEVBQUUsQ0FGRjtFQUdBLENBQUEsRUFBRSxDQUhGO0VBSUEsQ0FBQSxFQUFFLENBSkY7RUFLQSxDQUFBLEVBQUUsQ0FMRjtBQUFBOztBQU9ELEVBQUEsR0FBSyxHQVRMOztBQVVBLEVBQUEsR0FBSyxHQVZMOztBQVlBLEtBQUEsR0FBUSxHQVpSOztBQWNBLE1BQUEsR0FBUyxFQWRUOztBQWVBLElBQUEsR0FBTyxFQWZQOztBQWlCTSxTQUFOLE1BQUEsT0FBQTtFQUNDLFdBQWMsUUFBQSxhQUFvQixLQUFwQixDQUFBLEVBQUE7SUFBQyxJQUFDLENBQUE7SUFBUSxJQUFDLENBQUE7RUFBWDs7QUFEZjs7QUFHTSxPQUFOLE1BQUEsS0FBQTtFQUNDLFdBQWMsR0FBQSxJQUFBLFlBQWlCLEVBQWpCLFlBQTRCLEdBQTVCLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBVyxJQUFDLENBQUE7RUFBckI7O0VBRWQsTUFBUyxDQUFDLEVBQUQsRUFBSSxFQUFKLENBQUE7QUFDUixRQUFBLENBQUEsRUFBQTtJQUFBLENBQUEsR0FBSSxLQUFBLEdBQU0sQ0FBTixHQUFRLEdBQVIsR0FBWSxHQUFBLEdBQUksSUFBQyxDQUFBO0lBQ3JCLENBQUEs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QWdCLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLEtBQWxDOztJQUNBLElBQUcsQ0FBQSxHQUFJLE1BQU0sQ0FBQyxNQUFkO2FBQ0MsS0FBSyxDQUFDLEtBQU4sQ0FBWSxLQUFaLEVBREQ7S0FQRDs7QUFkUTs7QUF3QlQsWUFBQSxHQUFlLFFBQUEsQ0FBQSxDQUFBO0VBQUcsSUFBRyxNQUFBLEtBQVUsQ0FBYjtXQUFvQixNQUFBLENBQU8sRUFBUCxFQUFwQjtHQUFBLE1BQUE7V0FBbUMsTUFBQSxDQUFPLEVBQVAsRUFBbkM7O0FBQUgiLCJzb3VyY2VzQ29udGVudCI6WyJNQVJLRVJTID0gN1xyXG5NQVggPSBcclxuXHRQOjEgIyBQcm9tb3Rpb25cclxuXHRSOjEgIyBSZXBsYXlcclxuXHRJOjEgIyBQcm9tb3RlZCBQcm90ZWN0aW9uXHJcblx0Uzo0ICMgU3RhY2sgNCBcclxuXHRNOjQgIyBNaXhlZCA0XHJcblx0QToxICMgQXR0YWNrXHJcblxyXG5wMCA9IFtdICMgUGF0aCBvZiBwbGF5ZXIgMFxyXG5wMSA9IFtdICMgUGF0aCBvZiBwbGF5ZXIgMVxyXG5cclxudGlsZXMgPSBbXSAjIFR3ZW50eSB0aWxlc1xyXG5cclxucGxheWVyID0gMCAjIDAgb3IgMVxyXG5kaWNlID0gMSAjIDAuLjQgUHJvYmFiaWxpdHkgWzAsMSwyLDMsNF0gPT0gWzEsNCw2LDQsMV1cclxuXHJcbmNsYXNzIE1hcmtlciBcclxuXHRjb25zdHJ1Y3RvciA6IChAcGxheWVyLCBAcHJvbW90ZWQ9ZmFsc2UpIC0+XHQjIHByb21vdGVkIG1hcmtlciBpcyBpbmRpY2F0ZWQgYnkgZml2ZSBkb3RzXHRcclxuXHJcbmNsYXNzIFRpbGVcclxuXHRjb25zdHJ1Y3RvciA6IChAeCxAeSwgQG1hcmtlcnM9W10sQGxldHRlcj0nICcpIC0+XHJcblxyXG5cdGluc2lkZSA6IChteCxteSkgLT4gXHJcblx0XHR4ID0gd2lkdGgvMi0xMDArMTAwKkB4XHJcblx0XHR5ID0gMjAwKzEwMCpAeVxyXG5cdFx0eC01MCA8IG14IDwgeCs1MCBhbmQgeS01MCA8IG15IDwgeSs1MCBhbmQgQG1hcmtlcnMubGVuZ3RoICE9MCBcclxuXHRcclxuXHRjbGljayA6ICh0YXJnZXQpIC0+IGlmIEBsZWdhbCB0YXJnZXQgdGhlbiBAbW92ZSB0YXJnZXRcclxuXHJcblx0bGVnYWwgOiAodGFyZ2V0KSAtPlxyXG5cdFx0aWYgdGFyZ2V0Lm1hcmtlcnMubGVuZ3RoID09IDQgYW5kIE1BWFt0YXJnZXQubGV0dGVyXSA9PSA0IHRoZW4gcmV0dXJuIGZhbHNlXHJcblx0XHR0cnVlXHJcblxyXG5cdG1vdmUgOiAodGFyZ2V0KSAtPiBcclxuXHRcdGlmIE1BWFt0YXJnZXQubGV0dGVyXSA9PSAxXHJcblx0XHRcdGlmIHRhcmdldC5tYXJrZXJzLmxlbmd0aCA9PSAxXHJcblx0XHRcdFx0aWYgdGFyZ2V0Lm1hcmtlcnNbMF0ucGxheWVyID09IEBwbGF5ZXIgXHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2VcclxuXHRcdFx0XHRlbHNlICMgdGhyb3cgZW5lbXkgbWFya2VyXHJcblx0XHRcdFx0XHRlbmVteSA9IHRhcmdldC5tYXJrZXJzLnBvcCgpXHJcblx0XHRcdFx0XHRlbmVteS5wcm9tb3RlZCA9IGZhbHNlXHJcblx0XHRcdFx0XHR0aWxlc1syMCArIGVuZW15LnBsYXllcl0ubWFya2Vycy5wdXNoIGVuZW15XHJcblx0XHRtYXJrZXIgPSBAbWFya2Vycy5wb3AoKVxyXG5cdFx0dGFyZ2V0Lm1hcmtlcnMucHVzaCBtYXJrZXJcclxuXHRcdGlmIHRhcmdldC5sZXR0ZXIgIT0gJ1InIHRoZW4gcGxheWVyID0gMSAtcGxheWVyXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0aWYgQGxldHRlcj09JyAnIHRoZW4gZmMgMCwwLDAgXHJcblx0XHRpZiBAbGV0dGVyPT0nUCcgdGhlbiBmYyAxLDAsMCBcclxuXHRcdGlmIEBsZXR0ZXI9PSdSJyB0aGVuIGZjIDEsMCwxXHJcblx0XHRpZiBAbGV0dGVyPT0nSScgdGhlbiBmYyAwLDEsMFxyXG5cdFx0aWYgQGxldHRlcj09J1MnIHRoZW4gZmMgMSwxLDBcclxuXHRcdGlmIEBsZXR0ZXI9PSdNJyB0aGVuIGZjIDAsMSwxIFxyXG5cdFx0aWYgQGxldHRlcj09J0EnIHRoZW4gZmMgMSwxLDEgXHJcblx0XHR4ID0gd2lkdGgvMi0xMDArMTAwKkB4XHJcblx0XHR5ID0gMjAwKzEwMCpAeVxyXG5cdFx0cmVjdCB4LHksOTAsOTBcclxuXHRcdGZjIDBcclxuXHRcdHRleHQgQGxldHRlcix4LHkrOVxyXG5cdFx0Zm9yIG1hcmtlcixpIGluIEBtYXJrZXJzXHJcblx0XHRcdGlmIG1hcmtlci5wbGF5ZXIgPT0gMCB0aGVuIGZjIDEsMCwwLDAuNzUgZWxzZSBmYyAwLjUsMC41LDAuNSwwLjc1XHJcblx0XHRcdGNpcmNsZSB4KzEwKihpJTIpLC0zMCt5KzcqKDctaSksMjVcclxuXHRcdFx0aWYgbWFya2VyLnByb21vdGVkXHJcblx0XHRcdFx0ZmMgMSwxLDBcclxuXHRcdFx0XHRjaXJjbGUgLTIwK3grNyppLC0yMCt5KzcqaSwxMFxyXG5cclxuY3JlYXRlQWxsVGlsZXMgPSAoKSAtPlxyXG5cdGZvciBpIGluIHJhbmdlIDRcclxuXHRcdHRpbGVzLnB1c2ggbmV3IFRpbGUgMCwzLWkgIyAwIDEgMiAzXHJcblxyXG5cdGZvciBpIGluIHJhbmdlIDZcclxuXHRcdHRpbGVzLnB1c2ggbmV3IFRpbGUgMSxpICMgNCA1IDYgNyA4IDlcclxuXHJcblx0dGlsZXMucHVzaCBuZXcgVGlsZSAxLDYgIyAxMFxyXG5cdHRpbGVzLnB1c2ggbmV3IFRpbGUgMCw2ICMgMTFcclxuXHR0aWxlcy5wdXNoIG5ldyBUaWxlIDAsNyAjIDEyXHJcblx0dGlsZXMucHVzaCBuZXcgVGlsZSAxLDcgIyAxM1xyXG5cdHRpbGVzLnB1c2ggbmV3IFRpbGUgMiw3ICMgMTRcclxuXHR0aWxlcy5wdXNoIG5ldyBUaWxlIDIsNiAjIDE1XHJcblxyXG5cdGZvciBpIGluIHJhbmdlIDRcclxuXHRcdHRpbGVzLnB1c2ggbmV3IFRpbGUgMiwzLWkgIyAxNiAxNyAxOCAxOVxyXG5cclxuXHR0aWxlcy5wdXNoIG5ldyBUaWxlIDAsNCAjIDIwIElOIDBcclxuXHR0aWxlcy5wdXNoIG5ldyBUaWxlIDIsNCAjIDIxIElOIDFcclxuXHR0aWxlcy5wdXNoIG5ldyBUaWxlIDAsLTEgIyAyMiBPVVQgMFxyXG5cdHRpbGVzLnB1c2ggbmV3IFRpbGUgMiwtMSAjIDIzIE9VVCAxXHJcblxyXG5jcmVhdGVQbGF5ZXIwID0gLT5cclxuXHRmb3IgaSBpbiBbMjAsMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxMCw5LDgsNyw2LDUsNCwyMl1cclxuXHRcdHAwLnB1c2ggdGlsZXNbaV0gXHJcblxyXG5jcmVhdGVQbGF5ZXIxID0gLT5cclxuXHRmb3IgaSBpbiBbMjEsMTYsMTcsMTgsMTksNCw1LDYsNyw4LDksMTAsMTUsMTQsMTMsMTIsMTEsMTAsOSw4LDcsNiw1LDQsMjNdXHJcblx0XHRwMS5wdXNoIHRpbGVzW2ldIFxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aCx3aW5kb3dIZWlnaHRcclxuXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHR0ZXh0U2l6ZSAxMDBcclxuXHJcblx0Y3JlYXRlQWxsVGlsZXMoKVxyXG5cdGNyZWF0ZVBsYXllcjAoKVxyXG5cdGNyZWF0ZVBsYXllcjEoKVxyXG5cclxuXHR0aWxlc1tpXS5sZXR0ZXIgPSBsZXR0ZXIgZm9yIGxldHRlcixpIGluICdTQVNSSUFNUkFNU1JQQVBSU0FTUidcdFx0XHJcblxyXG5cdGZvciBpIGluIHJhbmdlIE1BUktFUlNcclxuXHRcdHRpbGVzWzIwXS5tYXJrZXJzLnB1c2ggbmV3IE1hcmtlciAwXHJcblx0XHR0aWxlc1syMV0ubWFya2Vycy5wdXNoIG5ldyBNYXJrZXIgMVxyXG5cdFx0XHJcbmRyYXcgPSAtPlxyXG5cdGJnIDBcclxuXHRmb3IgdGlsZSBpbiB0aWxlc1xyXG5cdFx0dGlsZS5kcmF3KClcclxuXHJcbmhlbHBlciA9IChwbGF5ZXIpIC0+ICMgYSxiIGFuZ2VyIGluZGV4IHRpbGwgcGxheWVyLXZla3Rvcm5cclxuXHRhID0gbnVsbFxyXG5cdGZvciBwLGkgaW4gcGxheWVyXHJcblx0XHRpZiBwLmluc2lkZSBtb3VzZVgsbW91c2VZIFxyXG5cdFx0XHRhID0gaVx0XHJcblx0XHRcdGlmIF8ubGFzdChwLm1hcmtlcnMpLnByb21vdGVkIFxyXG5cdFx0XHRcdGlmIGEgPj0gMTIgdGhlbiBicmVha1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0YnJlYWtcclxuXHRpZiBhID09IG51bGwgdGhlbiByZXR1cm4gXHJcblx0YiA9IGEgKyBkaWNlXHJcblxyXG5cdHRpbGVBID0gcGxheWVyW2FdXHJcblx0aWYgdGlsZUEubWFya2Vycy5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdGlmIGEgPT0gMFxyXG5cdFx0dGlsZUIgPSBwbGF5ZXJbYl1cclxuXHRcdHRpbGVBLmNsaWNrIHRpbGVCXHJcblx0ZWxzZVxyXG5cdFx0bWFya2VyID0gXy5sYXN0IHRpbGVBLm1hcmtlcnNcclxuXHRcdHRpbGVCID0gcGxheWVyW2JdXHJcblx0XHRpZiBhID49IDEyIHRoZW4gbWFya2VyLnByb21vdGVkID0gdHJ1ZVxyXG5cdFx0aWYgYiA8IHBsYXllci5sZW5ndGhcclxuXHRcdFx0dGlsZUEuY2xpY2sgdGlsZUJcclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+IGlmIHBsYXllciA9PSAwIHRoZW4gaGVscGVyIHAwIGVsc2UgaGVscGVyIHAxXHJcbiJdfQ==
//# sourceURL=c:\Lab\2019\057-RoyalGameOfUr\coffee\sketch.coffee