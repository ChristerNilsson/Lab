// Generated by CoffeeScript 2.4.1
var Game, _;

_ = require('lodash');

Game = class Game {
  constructor(level) {
    this.init = this.init.bind(this);
    this.action = this.action.bind(this);
    this.init(level);
  }

  init(level1) {
    this.level = level1;
    if (this.level < 2) {
      this.level = 2;
    }
    this.low = 1;
    this.high = 2 ** this.level - 1;
    this.secret = _.random(this.low, this.high);
    return this.hist = [];
  }

  action(value) {
    value = parseInt(value);
    this.hist.push(value);
    if (value < this.secret && value >= this.low) {
      this.low = value + 1;
    }
    if (value > this.secret && value <= this.high) {
      this.high = value - 1;
    }
    if (value === this.secret) {
      return this.init(this.level + (this.hist.length <= this.level ? 1 : -1));
    }
  }

};

module.exports = Game;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiIuLiIsInNvdXJjZXMiOlsiY29mZmVlXFxnYW1lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQSxJQUFBLEVBQUE7O0FBQUEsQ0FBQSxHQUFJLE9BQUEsQ0FBUSxRQUFSOztBQUVFLE9BQU4sTUFBQSxLQUFBO0VBQ0MsV0FBYyxDQUFDLEtBQUQsQ0FBQTtRQUVkLENBQUEsV0FBQSxDQUFBO1FBT0EsQ0FBQSxhQUFBLENBQUE7SUFUeUIsSUFBQyxDQUFBLElBQUQsQ0FBTSxLQUFOO0VBQVg7O0VBRWQsSUFBTyxPQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFDUixJQUFHLElBQUMsQ0FBQSxLQUFELEdBQVMsQ0FBWjtNQUFtQixJQUFDLENBQUEsS0FBRCxHQUFTLEVBQTVCOztJQUNBLElBQUMsQ0FBQSxHQUFELEdBQU87SUFDUCxJQUFDLENBQUEsSUFBRCxHQUFRLENBQUEsSUFBRyxJQUFDLENBQUEsS0FBSixHQUFZO0lBQ3BCLElBQUMsQ0FBQSxNQUFELEdBQVUsQ0FBQyxDQUFDLE1BQUYsQ0FBUyxJQUFDLENBQUEsR0FBVixFQUFlLElBQUMsQ0FBQSxJQUFoQjtXQUNWLElBQUMsQ0FBQSxJQUFELEdBQVE7RUFMRjs7RUFPUCxNQUFTLENBQUMsS0FBRCxDQUFBO0lBQ1IsS0FBQSxHQUFRLFFBQUEsQ0FBUyxLQUFUO0lBQ1IsSUFBQyxDQUFBLElBQUksQ0FBQyxJQUFOLENBQVcsS0FBWDtJQUNBLElBQUcsS0FBQSxHQUFRLElBQUMsQ0FBQSxNQUFULElBQW9CLEtBQUEsSUFBUyxJQUFDLENBQUEsR0FBakM7TUFBMEMsSUFBQyxDQUFBLEdBQUQsR0FBTyxLQUFBLEdBQVEsRUFBekQ7O0lBQ0EsSUFBRyxLQUFBLEdBQVEsSUFBQyxDQUFBLE1BQVQsSUFBb0IsS0FBQSxJQUFTLElBQUMsQ0FBQSxJQUFqQztNQUEyQyxJQUFDLENBQUEsSUFBRCxHQUFRLEtBQUEsR0FBUSxFQUEzRDs7SUFDQSxJQUFHLEtBQUEsS0FBUyxJQUFDLENBQUEsTUFBYjthQUNDLElBQUMsQ0FBQSxJQUFELENBQU0sSUFBQyxDQUFBLEtBQUQsR0FBUyxDQUFHLElBQUMsQ0FBQSxJQUFJLENBQUMsTUFBTixJQUFnQixJQUFDLENBQUEsS0FBcEIsR0FBK0IsQ0FBL0IsR0FBc0MsQ0FBQyxDQUF2QyxDQUFmLEVBREQ7O0VBTFE7O0FBVlY7O0FBa0JBLE1BQU0sQ0FBQyxPQUFQLEdBQWlCIiwic291cmNlc0NvbnRlbnQiOlsiXyA9IHJlcXVpcmUgJ2xvZGFzaCdcclxuXHJcbmNsYXNzIEdhbWUgIFxyXG5cdGNvbnN0cnVjdG9yIDogKGxldmVsKSAtPiBAaW5pdCBsZXZlbFxyXG5cclxuXHRpbml0IDogKEBsZXZlbCkgPT5cclxuXHRcdGlmIEBsZXZlbCA8IDIgdGhlbiBAbGV2ZWwgPSAyXHJcblx0XHRAbG93ID0gMVxyXG5cdFx0QGhpZ2ggPSAyKipAbGV2ZWwgLSAxXHJcblx0XHRAc2VjcmV0ID0gXy5yYW5kb20gQGxvdywgQGhpZ2hcclxuXHRcdEBoaXN0ID0gW11cclxuXHRcclxuXHRhY3Rpb24gOiAodmFsdWUpID0+XHJcblx0XHR2YWx1ZSA9IHBhcnNlSW50IHZhbHVlXHJcblx0XHRAaGlzdC5wdXNoIHZhbHVlXHJcblx0XHRpZiB2YWx1ZSA8IEBzZWNyZXQgYW5kIHZhbHVlID49IEBsb3cgdGhlbiBAbG93ID0gdmFsdWUgKyAxXHJcblx0XHRpZiB2YWx1ZSA+IEBzZWNyZXQgYW5kIHZhbHVlIDw9IEBoaWdoIHRoZW4gQGhpZ2ggPSB2YWx1ZSAtIDFcclxuXHRcdGlmIHZhbHVlID09IEBzZWNyZXQgXHJcblx0XHRcdEBpbml0IEBsZXZlbCArIGlmIEBoaXN0Lmxlbmd0aCA8PSBAbGV2ZWwgdGhlbiAxIGVsc2UgLTFcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZSJdfQ==
//# sourceURL=c:\Lab\2019\100I-Guess-Express-Teacup\coffee\game.coffee