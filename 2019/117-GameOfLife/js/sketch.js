// Generated by CoffeeScript 2.4.1
var b1, b2, count, draw, output, s, setup,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

b1 = ['  .     '.split(''), '. .     '.split(''), ' ..     '.split(''), '        '.split(''), '        '.split(''), '        '.split(''), '        '.split(''), '        '.split('')];

b2 = [];

s = [];

setup = function() {
  createCanvas(200, 200);
  return frameRate(1);
};

//xdraw()
count = function(i, j) {
  var di, dj, k, l, len, len1, ref, ref1, result;
  result = 0;
  ref = [-1, 0, 1];
  for (k = 0, len = ref.length; k < len; k++) {
    di = ref[k];
    ref1 = [-1, 0, 1];
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      dj = ref1[l];
      if (di === 0 && dj === 0) {
        continue;
      }
      if (b1[modulo(i + di, 8)][modulo(j + dj, 8)] === '.') {
        result++;
      }
    }
  }
  return result;
};

draw = function() {
  var c, cell, frame, i, j, k, l, len, len1, len2, len3, len4, m, n, o, ref, ref1, ref2, ref3, ref4, results;
  // s.push "# https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"
  // s.push "# https://github.com/ChristerNilsson/Lab/blob/master/2019/117-GameOfLife/coffee/sketch.coffee"
  // s.push 'a = Animation()'
  b2 = [];
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    b2.push('        '.split(''));
  }
  output(b2, b1);
  ref1 = range(1);
  // 30
  results = [];
  for (l = 0, len1 = ref1.length; l < len1; l++) {
    frame = ref1[l];
    b2 = [];
    ref2 = range(8);
    for (m = 0, len2 = ref2.length; m < len2; m++) {
      i = ref2[m];
      b2.push('        '.split(''));
    }
    ref3 = range(8);
    for (n = 0, len3 = ref3.length; n < len3; n++) {
      i = ref3[n];
      ref4 = range(8);
      for (o = 0, len4 = ref4.length; o < len4; o++) {
        j = ref4[o];
        c = count(i, j);
        cell = b1[i][j];
        b2[i][j] = ' ';
        if (cell === '.' && (2 <= c && c <= 3)) {
          b2[i][j] = '.'; // continue
        }
        if (cell === ' ' && c === 3) {
          b2[i][j] = '.'; // born
        }
        fc(b2[i][j] === '.' ? 0 : 1);
        rect(20 * i, 20 * j, 20, 20);
      }
    }
    // output b1,b2
    results.push(b1 = b2);
  }
  return results;
};

//console.log s.join '\n'
output = function(b1, b2) {
  var ab, i, j, k, l, len, len1, ref, ref1;
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      j = ref1[l];
      ab = b1[i][j] + b2[i][j];
      if (ab === ' .') {
        s.push(`m[${i}][${j}] = on`);
      }
      if (ab === '. ') {
        s.push(`m[${i}][${j}] = off`);
      }
    }
  }
  return s.push('a.add_frame(m)');
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsS0FBQTtFQUFBOztBQUFBLEVBQUEsR0FBSyxDQUNKLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBREksRUFFSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQUZJLEVBR0osVUFBVSxDQUFDLEtBQVgsQ0FBaUIsRUFBakIsQ0FISSxFQUlKLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBSkksRUFLSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQUxJLEVBTUosVUFBVSxDQUFDLEtBQVgsQ0FBaUIsRUFBakIsQ0FOSSxFQU9KLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBUEksRUFRSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQVJJOztBQVdMLEVBQUEsR0FBSzs7QUFDTCxDQUFBLEdBQUk7O0FBRUosS0FBQSxHQUFRLFFBQUEsQ0FBQSxDQUFBO0VBQ1AsWUFBQSxDQUFhLEdBQWIsRUFBaUIsR0FBakI7U0FDQSxTQUFBLENBQVUsQ0FBVjtBQUZPLEVBZFI7OztBQW1CQSxLQUFBLEdBQVEsUUFBQSxDQUFDLENBQUQsRUFBRyxDQUFILENBQUE7QUFDUCxNQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUE7RUFBQSxNQUFBLEdBQVM7QUFDVDtFQUFBLEtBQUEscUNBQUE7O0FBQ0M7SUFBQSxLQUFBLHdDQUFBOztNQUNDLElBQUcsRUFBQSxLQUFJLENBQUosSUFBVSxFQUFBLEtBQUksQ0FBakI7QUFBd0IsaUJBQXhCOztNQUNBLElBQUcsRUFBRyxR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bnRlbnQiOlsiYjEgPSBbXHJcblx0JyAgLiAgICAgJy5zcGxpdCAnJ1xyXG5cdCcuIC4gICAgICcuc3BsaXQgJydcclxuXHQnIC4uICAgICAnLnNwbGl0ICcnXHJcblx0JyAgICAgICAgJy5zcGxpdCAnJ1xyXG5cdCcgICAgICAgICcuc3BsaXQgJydcclxuXHQnICAgICAgICAnLnNwbGl0ICcnXHJcblx0JyAgICAgICAgJy5zcGxpdCAnJ1xyXG5cdCcgICAgICAgICcuc3BsaXQgJydcclxuXVxyXG5cclxuYjIgPSBbXVxyXG5zID0gW11cclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgMjAwLDIwMFxyXG5cdGZyYW1lUmF0ZSAxXHJcblx0I3hkcmF3KClcclxuXHJcbmNvdW50ID0gKGksaikgLT5cclxuXHRyZXN1bHQgPSAwXHJcblx0Zm9yIGRpIGluIFstMSwwLDFdXHJcblx0XHRmb3IgZGogaW4gWy0xLDAsMV1cclxuXHRcdFx0aWYgZGk9PTAgYW5kIGRqPT0wIHRoZW4gY29udGludWVcclxuXHRcdFx0aWYgYjFbKGkrZGkpICUlIDhdWyhqK2RqKSAlJSA4XSA9PSAnLicgdGhlbiByZXN1bHQrK1xyXG5cdHJlc3VsdFxyXG5cclxuZHJhdyA9IC0+XHJcblx0IyBzLnB1c2ggXCIjIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbndheSUyN3NfR2FtZV9vZl9MaWZlXCJcclxuXHQjIHMucHVzaCBcIiMgaHR0cHM6Ly9naXRodWIuY29tL0NocmlzdGVyTmlsc3Nvbi9MYWIvYmxvYi9tYXN0ZXIvMjAxOS8xMTctR2FtZU9mTGlmZS9jb2ZmZWUvc2tldGNoLmNvZmZlZVwiXHJcblx0IyBzLnB1c2ggJ2EgPSBBbmltYXRpb24oKSdcclxuXHRiMiA9IFtdXHJcblx0Zm9yIGkgaW4gcmFuZ2UgOFxyXG5cdFx0YjIucHVzaCAnICAgICAgICAnLnNwbGl0ICcnXHJcblx0b3V0cHV0IGIyLGIxXHJcblx0Zm9yIGZyYW1lIGluIHJhbmdlIDEgIyAzMFxyXG5cdFx0YjIgPSBbXVxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgOFxyXG5cdFx0XHRiMi5wdXNoICcgICAgICAgICcuc3BsaXQgJydcclxuXHRcdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgOFxyXG5cdFx0XHRcdGMgPSBjb3VudCBpLGpcclxuXHRcdFx0XHRjZWxsID0gYjFbaV1bal1cclxuXHRcdFx0XHRiMltpXVtqXSA9ICcgJ1xyXG5cdFx0XHRcdGlmIGNlbGwgPT0gJy4nIGFuZCAyIDw9IGMgPD0gMyB0aGVuIGIyW2ldW2pdID0gJy4nICMgY29udGludWVcclxuXHRcdFx0XHRpZiBjZWxsID09ICcgJyBhbmQgYyA9PSAzIHRoZW4gYjJbaV1bal0gPSAnLicgIyBib3JuXHJcblx0XHRcdFx0ZmMgaWYgYjJbaV1bal0gPT0gJy4nIHRoZW4gMCBlbHNlIDFcclxuXHRcdFx0XHRyZWN0IDIwKmksMjAqaiwyMCwyMFxyXG5cdFx0IyBvdXRwdXQgYjEsYjJcclxuXHRcdGIxID0gYjJcclxuXHQjY29uc29sZS5sb2cgcy5qb2luICdcXG4nXHJcblxyXG5vdXRwdXQgPSAoYjEsYjIpIC0+XHJcblx0Zm9yIGkgaW4gcmFuZ2UgOFxyXG5cdFx0Zm9yIGogaW4gcmFuZ2UgOFxyXG5cdFx0XHRhYiA9IGIxW2ldW2pdICsgYjJbaV1bal1cclxuXHRcdFx0aWYgYWIgPT0gJyAuJyB0aGVuIHMucHVzaCBcIm1bI3tpfV1bI3tqfV0gPSBvblwiXHJcblx0XHRcdGlmIGFiID09ICcuICcgdGhlbiBzLnB1c2ggXCJtWyN7aX1dWyN7an1dID0gb2ZmXCJcclxuXHRzLnB1c2ggJ2EuYWRkX2ZyYW1lKG0pJ1xyXG5cclxuIl19
//# sourceURL=c:\Lab\2019\117-GameOfLife\coffee\sketch.coffee