// Generated by CoffeeScript 2.4.1
var b1, b2, count, output, s, setup, xdraw,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

b1 = ['  .     '.split(''), '. .     '.split(''), ' ..     '.split(''), '        '.split(''), '        '.split(''), '        '.split(''), '        '.split(''), '        '.split('')];

b2 = [];

s = [];

setup = function() {
  createCanvas(200, 200);
  frameRate(1);
  return xdraw();
};

count = function(i, j) {
  var di, dj, k, l, len, len1, ref, ref1, result;
  result = 0;
  ref = [-1, 0, 1];
  for (k = 0, len = ref.length; k < len; k++) {
    di = ref[k];
    ref1 = [-1, 0, 1];
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      dj = ref1[l];
      if (di === 0 && dj === 0) {
        continue;
      }
      if (b1[modulo(i + di, 8)][modulo(j + dj, 8)] === '.') {
        result++;
      }
    }
  }
  return result;
};

xdraw = function() {
  var c, cell, frame, i, j, k, l, len, len1, len2, len3, len4, m, n, o, ref, ref1, ref2, ref3, ref4;
  s.push("# https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life");
  s.push("# https://github.com/ChristerNilsson/Lab/blob/master/2019/117-GameOfLife/coffee/sketch.coffee");
  s.push('a = Animation()');
  b2 = [];
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    b2.push('        '.split(''));
  }
  output(b2, b1);
  ref1 = range(30);
  for (l = 0, len1 = ref1.length; l < len1; l++) {
    frame = ref1[l];
    b2 = [];
    ref2 = range(8);
    for (m = 0, len2 = ref2.length; m < len2; m++) {
      i = ref2[m];
      b2.push('        '.split(''));
    }
    ref3 = range(8);
    for (n = 0, len3 = ref3.length; n < len3; n++) {
      i = ref3[n];
      ref4 = range(8);
      for (o = 0, len4 = ref4.length; o < len4; o++) {
        j = ref4[o];
        c = count(i, j);
        cell = b1[i][j];
        b2[i][j] = ' ';
        if (cell === '.' && (2 <= c && c <= 3)) {
          b2[i][j] = '.'; // continue
        }
        if (cell === ' ' && c === 3) {
          b2[i][j] = '.'; // born
        }
        fc(b2[i][j] === '.' ? 0 : 1);
        rect(20 * i, 20 * j, 20, 20);
      }
    }
    output(b1, b2);
    b1 = b2;
  }
  return console.log(s.join('\n'));
};

output = function(b1, b2) {
  var ab, i, j, k, l, len, len1, ref, ref1;
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      j = ref1[l];
      ab = b1[i][j] + b2[i][j];
      if (ab === ' .') {
        s.push(`m[${i}][${j}] = on`);
      }
      if (ab === '. ') {
        s.push(`m[${i}][${j}] = off`);
      }
    }
  }
  return s.push('a.add_frame(m)');
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQTtFQUFBOztBQUFBLEVBQUEsR0FBSyxDQUNKLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBREksRUFFSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQUZJLEVBR0osVUFBVSxDQUFDLEtBQVgsQ0FBaUIsRUFBakIsQ0FISSxFQUlKLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBSkksRUFLSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQUxJLEVBTUosVUFBVSxDQUFDLEtBQVgsQ0FBaUIsRUFBakIsQ0FOSSxFQU9KLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBUEksRUFRSixVQUFVLENBQUMsS0FBWCxDQUFpQixFQUFqQixDQVJJOztBQVdMLEVBQUEsR0FBSzs7QUFDTCxDQUFBLEdBQUk7O0FBRUosS0FBQSxHQUFRLFFBQUEsQ0FBQSxDQUFBO0VBQ1AsWUFBQSxDQUFhLEdBQWIsRUFBaUIsR0FBakI7RUFDQSxTQUFBLENBQVUsQ0FBVjtTQUNBLEtBQUEsQ0FBQTtBQUhPOztBQUtSLEtBQUEsR0FBUSxRQUFBLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQTtBQUNQLE1BQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQTtFQUFBLE1BQUEsR0FBUztBQUNUO0VBQUEsS0FBQSxxQ0FBQTs7QUFDQztJQUFBLEtBQUEsd0NBQUE7O01BQ0MsSUFBRyxFQUFBLEtBQUksQ0FBSixJQUFVLEVBQUEsS0FBSSxDQUFqQjtBQUF3QixpQkFBeEI7O01BQ0EsSUFBRyxFQUFHLFFBQUMsQ0FBQSxHQUFFLElBQU8sRUFBVixDQUFhLFFBQUMsQ0FBQSxHQUFFLElBQU8sRUFBVixDQUFoQixLQUFnQyxHQUFuQztRQUE0QyxNQUFBLEdBQTVDOztJQUZEO0VBREQ7U0FJQTtBQU5POztBQVFSLEtBQUEsR0FBUSxRQUFBLENBQUEsQ0FBQTtBQUNQLE1BQUEsQ0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBO0VBQUEsQ0FBQyxDQUFDLElBQUYsQ0FBTyx5REFBUDtFQUNBLENBQUMsQ0FBQyxJQUFGLENBQU8sK0ZBQVA7RUFDQSxDQUFDLENBQUMsSUFBRixDQUFPLGlCQUFQO0VBQ0EsRUFBQSxHQUFLO0FBQ0w7RUFBQSxLQUFBLHFDQUFBOztJQUNDLEVBQUUsQ0FBQyxJQUFILENBQVEsVUFBVSxDQUFDLEtBQVgsQ0FBaUIsRUFBakIsQ0FBUjtFQUREO0VBRUEsTUFBQSxDQUFPLEVBQVAsRUFBVSxFQUFWO0FBQ0E7RUFBQSxLQUFBLHdDQUFBOztJQUNDLEVBQUEsR0FBSztBQUNMO0lBQUEsS0FBQSx3Q0FBQTs7TUFDQyxFQUFFLENBQUMsSUFBSCxDQUFRLFVBQVUsQ0FBQyxLQUFYLENBQWlCLEVBQWpCLENBQVI7SUFERDtBQUVBO0lBQUEsS0FBQSx3Q0FBQTs7QUFDQztNQUFBLEtBQUEsd0NBQUE7O1FBQ0MsQ0FBQSxHQUFJLEtBQUEsQ0FBTSxDQUFOLEVBQVEsQ0FBUjtRQUNKLElBQUEsR0FBTyxFQUFHLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQTtRQUNiLEVBQUcsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQU4sR0FBVztRQUNYLElBQUcsSUFBQSxLQUFRLEdBQVIsSUFBZ0IsQ0FBQSxDQUFBLElBQUssQ0FBTCxJQUFLLENBQUwsSUFBVSxDQUFWLENBQW5CO1VBQW9DLEVBQUcsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQU4sR0FBVyxJQUEvQzs7UUFDQSxJQUFHLElBQUEsS0FBUSxHQUFSLElBQWdCLENBQUEsS0FBSyxDQUF4QjtVQUErQixFQUFHLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFOLEdBQVcsSUFBMUM7O1FBQ0EsRUFBQSxDQUFNLEVBQUcsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQU4sS0FBWSxHQUFmLEdBQXdCLENBQXhCLEdBQStCLENBQWxDO1FBQ0EsSUFBQSxDQUFLLEVBQUEsR0FBRyxDQUFSLEVBQVUsRUFBQSxHQUFHLENBQWIsRUFBZSxFQUFmLEVBQWtCLEVBQWxCO01BUEQ7SUFERDtJQVNBLE1BQUEsQ0FBTyxFQUFQLEVBQVUsRUFBVjtJQUNBLEVBQUEsR0FBSztFQWROO1NBZUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUFDLENBQUMsSUFBRixDQUFPLElBQVAsQ0FBWjtBQXZCTzs7QUF5QlIsTUFBQSxHQUFTLFFBQUEsQ0FBQyxFQUFELEVBQUksRUFBSixDQUFBO0FBQ1IsTUFBQSxFQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBO0FBQUE7RUFBQSxLQUFBLHFDQUFBOztBQUNDO0lBQUEsS0FBQSx3Q0FBQTs7TUFDQyxFQUFBLEdBQUssRUFBRyxDQUFBLENBQUEsQ0FBRyxDQUFBLENBQUEsQ0FBTixHQUFXLEVBQUcsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBO01BQ3RCLElBQUcsRUFBQSxLQUFNLElBQVQ7UUFBbUIsQ0FBQyxDQUFDLElBQUYsQ0FBTyxDQUFBLEVBQUEsQ0FBQSxDQUFLLENBQUwsQ0FBTyxFQUFQLENBQUEsQ0FBVyxDQUFYLENBQWEsTUFBYixDQUFQLEVBQW5COztNQUNBLElBQUcsRUFBQSxLQUFNLElBQVQ7UUFBbUIsQ0FBQyxDQUFDLElBQUYsQ0FBTyxDQUFBLEVBQUEsQ0FBQSxDQUFLLENBQUwsQ0FBTyxFQUFQLENBQUEsQ0FBVyxDQUFYLENBQWEsT0FBYixDQUFQLEVBQW5COztJQUhEO0VBREQ7U0FLQSxDQUFDLENBQUMsSUFBRixDQUFPLGdCQUFQO0FBTlEiLCJzb3VyY2VzQ29udGVudCI6WyJiMSA9IFtcclxuXHQnICAuICAgICAnLnNwbGl0ICcnXHJcblx0Jy4gLiAgICAgJy5zcGxpdCAnJ1xyXG5cdCcgLi4gICAgICcuc3BsaXQgJydcclxuXHQnICAgICAgICAnLnNwbGl0ICcnXHJcblx0JyAgICAgICAgJy5zcGxpdCAnJ1xyXG5cdCcgICAgICAgICcuc3BsaXQgJydcclxuXHQnICAgICAgICAnLnNwbGl0ICcnXHJcblx0JyAgICAgICAgJy5zcGxpdCAnJ1xyXG5dXHJcblxyXG5iMiA9IFtdXHJcbnMgPSBbXVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyAyMDAsMjAwXHJcblx0ZnJhbWVSYXRlIDFcclxuXHR4ZHJhdygpXHJcblxyXG5jb3VudCA9IChpLGopIC0+XHJcblx0cmVzdWx0ID0gMFxyXG5cdGZvciBkaSBpbiBbLTEsMCwxXVxyXG5cdFx0Zm9yIGRqIGluIFstMSwwLDFdXHJcblx0XHRcdGlmIGRpPT0wIGFuZCBkaj09MCB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdGlmIGIxWyhpK2RpKSAlJSA4XVsoaitkaikgJSUgOF0gPT0gJy4nIHRoZW4gcmVzdWx0KytcclxuXHRyZXN1bHRcclxuXHJcbnhkcmF3ID0gLT5cclxuXHRzLnB1c2ggXCIjIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0NvbndheSUyN3NfR2FtZV9vZl9MaWZlXCJcclxuXHRzLnB1c2ggXCIjIGh0dHBzOi8vZ2l0aHViLmNvbS9DaHJpc3Rlck5pbHNzb24vTGFiL2Jsb2IvbWFzdGVyLzIwMTkvMTE3LUdhbWVPZkxpZmUvY29mZmVlL3NrZXRjaC5jb2ZmZWVcIlxyXG5cdHMucHVzaCAnYSA9IEFuaW1hdGlvbigpJ1xyXG5cdGIyID0gW11cclxuXHRmb3IgaSBpbiByYW5nZSA4XHJcblx0XHRiMi5wdXNoICcgICAgICAgICcuc3BsaXQgJydcclxuXHRvdXRwdXQgYjIsYjFcclxuXHRmb3IgZnJhbWUgaW4gcmFuZ2UgMzBcclxuXHRcdGIyID0gW11cclxuXHRcdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdFx0YjIucHVzaCAnICAgICAgICAnLnNwbGl0ICcnXHJcblx0XHRmb3IgaSBpbiByYW5nZSA4XHJcblx0XHRcdGZvciBqIGluIHJhbmdlIDhcclxuXHRcdFx0XHRjID0gY291bnQgaSxqXHJcblx0XHRcdFx0Y2VsbCA9IGIxW2ldW2pdXHJcblx0XHRcdFx0YjJbaV1bal0gPSAnICdcclxuXHRcdFx0XHRpZiBjZWxsID09ICcuJyBhbmQgMiA8PSBjIDw9IDMgdGhlbiBiMltpXVtqXSA9ICcuJyAjIGNvbnRpbnVlXHJcblx0XHRcdFx0aWYgY2VsbCA9PSAnICcgYW5kIGMgPT0gMyB0aGVuIGIyW2ldW2pdID0gJy4nICMgYm9yblxyXG5cdFx0XHRcdGZjIGlmIGIyW2ldW2pdID09ICcuJyB0aGVuIDAgZWxzZSAxXHJcblx0XHRcdFx0cmVjdCAyMCppLDIwKmosMjAsMjBcclxuXHRcdG91dHB1dCBiMSxiMlxyXG5cdFx0YjEgPSBiMlxyXG5cdGNvbnNvbGUubG9nIHMuam9pbiAnXFxuJ1xyXG5cclxub3V0cHV0ID0gKGIxLGIyKSAtPlxyXG5cdGZvciBpIGluIHJhbmdlIDhcclxuXHRcdGZvciBqIGluIHJhbmdlIDhcclxuXHRcdFx0YWIgPSBiMVtpXVtqXSArIGIyW2ldW2pdXHJcblx0XHRcdGlmIGFiID09ICcgLicgdGhlbiBzLnB1c2ggXCJtWyN7aX1dWyN7an1dID0gb25cIlxyXG5cdFx0XHRpZiBhYiA9PSAnLiAnIHRoZW4gcy5wdXNoIFwibVsje2l9XVsje2p9XSA9IG9mZlwiXHJcblx0cy5wdXNoICdhLmFkZF9mcmFtZShtKSdcclxuXHJcbiJdfQ==
//# sourceURL=c:\Lab\2019\117-GameOfLife\coffee\sketch.coffee