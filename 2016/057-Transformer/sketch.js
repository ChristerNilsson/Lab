// Generated by CoffeeScript 1.11.1
var Game, g, mousePressed, setup, xdraw;

g = 0;

Game = (function() {
  function Game() {
    this.players = [];
    this.players.push(new Player("WASD", color(255, 0, 0)));
    this.players.push(new Player("&%('", color(0, 255, 0)));
    this.x = 0;
    this.y = 0;
    this.a = 0;
    this.s = 1;
    this.stack = [];
  }

  Game.prototype.push = function() {
    this.stack.push([this.x, this.y, this.a, this.s]);
    return push();
  };

  Game.prototype.pop = function() {
    var ref;
    ref = this.stack.pop(), this.x = ref[0], this.y = ref[1], this.a = ref[2], this.s = ref[3];
    return pop();
  };

  Game.prototype.rotate = function(d) {
    rotate(radians(d));
    return this.a += d;
  };

  Game.prototype.scale = function(ds) {
    scale(ds);
    return this.s *= ds;
  };

  Game.prototype.translate = function(dx, dy) {
    var v;
    v = radians(this.a);
    this.x += this.s * dx * cos(v) - this.s * dy * sin(v);
    this.y += this.s * dy * cos(v) + this.s * dx * sin(v);
    return translate(dx, dy);
  };

  Game.prototype.dump = function(txt) {
    return console.log([txt, this.x, this.y]);
  };

  return Game;

})();

setup = function() {
  createCanvas(600, 300);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  g = new Game();
  return xdraw();
};

xdraw = function() {
  var i, j, len, player, ref, results;
  g.translate(width / 2, height / 2);
  ref = g.players;
  results = [];
  for (i = j = 0, len = ref.length; j < len; i = ++j) {
    player = ref[i];
    g.push();
    if (i === 0) {
      g.translate(-width / 4, 0);
      g.rotate(90);
    }
    if (i === 1) {
      g.translate(width / 4, 0);
      g.rotate(-90);
      g.scale(0.5);
    }
    player.draw();
    results.push(g.pop());
  }
  return results;
};

mousePressed = function() {
  var j, len, player, ref, results;
  console.log([mouseX, mouseY]);
  ref = g.players;
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    player = ref[j];
    results.push(player.mousePressed());
  }
  return results;
};
