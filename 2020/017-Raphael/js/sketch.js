// Generated by CoffeeScript 2.4.1
var Box, boxes, p, startup;

boxes = [];

//values that define the graphical properties of the page
p = null;

Box = class Box {
  constructor(x, y, w, h, name) {
    var Rect, Text, image;
    //deal with this individual box, position it and show a status based on color
    Rect = p.rect(x, y, w, h).attr({
      fill: '#aaa'
    });
    Text = p.text(x + w / 2, y + h / 2, name).attr({
      font: '40px Arial',
      fill: '#000'
    });
    image = p.image("skarpnÃ¤ck.png", 0, 0, w, h);
    
    //create the drag icon for this box
    // SIZE = h*0.5
    // Rect.resizer = p.rect x + w - SIZE, y + h - SIZE, SIZE, SIZE
    // 	.attr { fill: '#0ab', stroke: 'solid', opacity: 1}

    //define relations and functions for moving and positioning
    //move the boxes
    Rect.drag(this.move_drag, this.move_start, this.move_up);
    Rect.boxtext = Text;
    Rect.image = image;
  }

  
  //resize the boxes
  // Rect.resizer.drag @resize_drag, @resize_start, @resize_up
  // Rect.resizer.resizer = Rect
  // Rect.resizer.boxtext = Text

  //start, move, and up are the drag functions
  move_start() {
    //storing original coordinates
    this.ox = this.attr('x');
    this.oy = this.attr('y');
    this.attr({
      opacity: 0.5
    });
    
    //the resizer box
    // @resizer.ox = @resizer.attr 'x'
    // @resizer.oy = @resizer.attr 'y'
    // @resizer.attr {opacity: 0.5}

    //the box text
    this.boxtext.ox = this.attr('x') + this.attr('width') / 2;
    this.boxtext.oy = this.attr('y') + this.attr('height') / 2;
    this.boxtext.attr({
      opacity: 0.5
    });
    this.image.ox = this.attr('x') + this.attr('width') / 2;
    return this.image.oy = this.attr('y') + this.attr('height') / 2;
  }

  //@boxtext.attr {opacity: 0.5}

  //visually change the box when it is being moved
  move_drag(dx, dy) {
    //move will be called with dx and dy
    this.attr({
      x: this.ox + dx,
      y: this.oy + dy
    });
    // @resizer.attr {x: @resizer.ox + dx, y: @resizer.oy + dy}
    this.boxtext.attr({
      x: this.boxtext.ox + dx,
      y: this.boxtext.oy + dy
    });
    return this.image.attr({
      x: this.image.ox + dx,
      y: this.image.oy + dy
    });
  }

  //when the user lets go of the mouse button, reset the square's properties
  move_up() {
    //restoring the visual state
    this.attr({
      opacity: 1
    });
    // @resizer.attr {opacity: 1}
    return this.boxtext.attr({
      opacity: 1
    });
  }

};


// resize_start : ->
// 	#storing original coordinates
// 	@ox = @attr 'x'
// 	@oy = @attr 'y'

// 	#the resizer box
// 	@resizer.ow = @resizer.attr 'width'
// 	@resizer.oh = @resizer.attr 'height'

// 	#the box text
// 	@boxtext.ox = @resizer.attr('x') + @resizer.attr('width') / 2
// 	@boxtext.oy = @resizer.attr('y') + @resizer.attr('height') / 2

// resize_drag : (dx, dy) ->
// 	# move will be called with dx and dy
// 	@attr {x: @ox + dx, y: @oy + dy}
// 	@resizer.attr {width: @resizer.ow + dx, height: @resizer.oh + dy}
// 	@boxtext.attr {x: @boxtext.ox + (dx / 2), y: @boxtext.oy + (dy / 2)}

// resize_up : ->
// 	#here is where you would update the box's position externally
// 	#...
startup = function() {
  p = Raphael('canvasdiv', window.innerWidth, window.innerHeight);
  p.rect(0, 0, window.innerWidth, window.innerHeight).attr({
    fill: '#ff0'
  });
  return boxes.push(new Box(100, 100, 1000, 1000, 'A004'));
};

// boxes.push new Box 200, 200, 200, 200, 'B'
// boxes.push new Box 400, 400, 300, 300, 'C'
// boxes.push new Box 700, 700, 400, 400, 'D'

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsR0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUE7O0FBQUEsS0FBQSxHQUFRLEdBQVI7OztBQUdBLENBQUEsR0FBSTs7QUFFRSxNQUFOLE1BQUEsSUFBQTtFQUNDLFdBQWMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQVMsSUFBVCxDQUFBO0FBR2IsUUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLEtBQUE7O0lBQUEsSUFBQSxHQUFPLENBQUMsQ0FBQyxJQUFGLENBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLEVBQWdCLENBQWhCLENBQ04sQ0FBQyxJQURLLENBQ0E7TUFBQyxJQUFBLEVBQU07SUFBUCxDQURBO0lBR1AsSUFBQSxHQUFPLENBQUMsQ0FBQyxJQUFGLENBQU8sQ0FBQSxHQUFJLENBQUEsR0FBSSxDQUFmLEVBQWtCLENBQUEsR0FBSSxDQUFBLEdBQUksQ0FBMUIsRUFBNkIsSUFBN0IsQ0FDTixDQUFDLElBREssQ0FDQTtNQUFDLElBQUEsRUFBTSxZQUFQO01BQXFCLElBQUEsRUFBTTtJQUEzQixDQURBO0lBR1AsS0FBQSxHQUFRLENBQUMsQ0FBQyxLQUFGLENBQVEsZUFBUixFQUF5QixDQUF6QixFQUE0QixDQUE1QixFQUErQixDQUEvQixFQUFpQyxDQUFqQyxFQU5SOzs7Ozs7Ozs7SUFlQSxJQUFJLENBQUMsSUFBTCxDQUFVLElBQUMsQ0FBQSxTQUFYLEVBQXNCLElBQUMsQ0FBQSxVQUF2QixFQUFtQyxJQUFDLENBQUEsT0FBcEM7SUFDQSxJQUFJLENBQUMsT0FBTCxHQUFlO0lBQ2YsSUFBSSxDQUFDLEtBQUwsR0FBYTtFQXBCQSxDQUFkOzs7Ozs7Ozs7RUE0QkEsVUFBYSxDQUFBLENBQUEsRUFBQTs7SUFFWixJQUFDLENBQUEsRUFBRCxHQUFNLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTjtJQUNOLElBQUMsQ0FBQSxFQUFELEdBQU0sSUFBQyxDQUFBLElBQUQsQ0FBTSxHQUFOO0lBQ04sSUFBQyxDQUFBLElBQUQsQ0FBTTtNQUFDLE9BQUEsRUFBUztJQUFWLENBQU4sRUFGQTs7Ozs7Ozs7SUFVQSxJQUFDLENBQUEsT0FBTyxDQUFDLEVBQVQsR0FBYyxJQUFDLENBQUEsSUFBRCxDQUFNLEdBQU4sQ0FBQSxHQUFhLElBQUMsQ0FBQSxJQUFELENBQU0sT0FBTixDQUFBLEdBQWlCO0lBQzVDLElBQUMsQ0FBQSxPQUFPLENBQUMsRUFBVCxHQUFjLElBQUMsQ0FBQSxJQUFELENBQU0sR0FBTixDQUFBLEdBQWEsSUFBQyxDQUFBLElBQUQsQ0FBTSxRQUFOLENBQUEsR0FBa0I7SUFDN0MsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUFULENBQWM7TUFBQyxPQUFBLEVBQVM7SUFBVixDQUFkO0lBRUEsSUFBQyxDQUFBLEtBQUssQ0FBQyxFQUFQLEdBQVksSUFBQyxDQUFBLElBQUQsQ0FBTSxHQUFOLENBQUEsR0FBYSxJQUFDLENBQUEsSUFBRCxDQUFNLE9BQU4sQ0FBQSxHQUFpQjtXQUMxQyxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQVAsR0FBWSxJQUFDLENBQUEsSUFBRCxDQUFNLEdBQU4sQ0FBQSxHQUFhLElBQUMsQ0FBQSxJQUFELENBQU0sUUFBTixDQUFBLEdBQWtCO0VBakIvQixDQTVCYjs7Ozs7RUFpREEsU0FBWSxDQUFDLEVBQUQsRUFBSyxFQUFMLENBQUEsRUFBQTs7SUFFWCxJQUFDLENBQUEsSUFBRCxDQUFNO01BQUMsQ0FBQSxFQUFHLElBQUMsQ0FBQSxFQUFELEdBQU0sRUFBVjtNQUFjLENBQUEsRUFBRyxJQUFDLENBQUEsRUFBRCxHQUFNO0lBQXZCLENBQU4sRUFBQTs7SUFHQSxJQUFDLENBQUEsT0FBTyxDQUFDLElBQVQsQ0FBYztNQUFDLENBQUEsRUFBRyxJQUFDLENBQUEsT0FBTyxDQUFDLEVBQVQsR0FBYyxFQUFsQjtNQUFzQixDQUFBLEVBQUcsSUFBQyxDQUFBLE9BQU8sQ0FBQyxFQUFULEdBQWM7SUFBdkMsQ0FBZDtXQUNBLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBUCxDQUFZO01BQUMsQ0FBQSxFQUFHLElBQUMsQ0FBQSxLQUFLLENBQUMsRUFBUCxHQUFZLEVBQWhCO01BQW9CLENBQUEsRUFBRyxJQUFDLENBQUEsS0FBSyxDQUFDLEVBQVAsR0FBWTtJQUFuQyxDQUFaO0VBTlcsQ0FqRFo7OztFQTBEQSxPQUFVLENBQUEsQ0FBQSxFQUFBOztJQUVULElBQUMsQ0FBQSxJQUFELENBQU07TUFBQyxPQUFBLEVBQVM7SUFBVixDQUFOLEVBQUE7O1dBRUEsSUFBQyxDQUFBLE9BQU8sQ0FBQyxJQUFULENBQWM7TUFBQyxPQUFBLEVBQVM7SUFBVixDQUFkO0VBSlM7O0FBM0RYLEVBTEE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUE2RkEsT0FBQSxHQUFVLFFBQUEsQ0FBQSxDQUFBO0VBQ1QsQ0FBQSxHQUFJLE9BQUEsQ0FBUSxXQUFSLEVBQXFCLE1BQU0sQ0FBQyxVQUE1QixFQUF3QyxNQUFNLENBQUMsV0FBL0M7RUFDSixDQUFDLENBQUMsSUFBRixDQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsTUFBTSxDQUFDLFVBQXBCLEVBQWdDLE1BQU0sQ0FBQyxXQUF2QyxDQUNDLENBQUMsSUFERixDQUNPO0lBQUMsSUFBQSxFQUFNO0VBQVAsQ0FEUDtTQUVBLEtBQUssQ0FBQyxJQUFOLENBQVcsSUFBSSxHQUFKLENBQVEsR0FBUixFQUFhLEdBQWIsRUFBa0IsSUFBbEIsRUFBd0IsSUFBeEIsRUFBOEIsTUFBOUIsQ0FBWDtBQUpTOztBQTdGViIsInNvdXJjZXNDb250ZW50IjpbImJveGVzID0gW11cclxuXHJcbiN2YWx1ZXMgdGhhdCBkZWZpbmUgdGhlIGdyYXBoaWNhbCBwcm9wZXJ0aWVzIG9mIHRoZSBwYWdlXHJcbnAgPSBudWxsIFxyXG5cclxuY2xhc3MgQm94IFxyXG5cdGNvbnN0cnVjdG9yIDogKHgseSx3LGgsbmFtZSkgLT5cclxuXHJcblx0XHQjZGVhbCB3aXRoIHRoaXMgaW5kaXZpZHVhbCBib3gsIHBvc2l0aW9uIGl0IGFuZCBzaG93IGEgc3RhdHVzIGJhc2VkIG9uIGNvbG9yXHJcblx0XHRSZWN0ID0gcC5yZWN0IHgsIHksIHcsIGhcclxuXHRcdFx0LmF0dHIge2ZpbGw6ICcjYWFhJ31cclxuXHJcblx0XHRUZXh0ID0gcC50ZXh0IHggKyB3IC8gMiwgeSArIGggLyAyLCBuYW1lXHJcblx0XHRcdC5hdHRyIHtmb250OiAnNDBweCBBcmlhbCcsIGZpbGw6ICcjMDAwJ31cclxuXHJcblx0XHRpbWFnZSA9IHAuaW1hZ2UgXCJza2FycG7DpGNrLnBuZ1wiLCAwLCAwLCB3LGhcclxuXHRcdFx0XHRcclxuXHRcdCNjcmVhdGUgdGhlIGRyYWcgaWNvbiBmb3IgdGhpcyBib3hcclxuXHRcdCMgU0laRSA9IGgqMC41XHJcblx0XHQjIFJlY3QucmVzaXplciA9IHAucmVjdCB4ICsgdyAtIFNJWkUsIHkgKyBoIC0gU0laRSwgU0laRSwgU0laRVxyXG5cdFx0IyBcdC5hdHRyIHsgZmlsbDogJyMwYWInLCBzdHJva2U6ICdzb2xpZCcsIG9wYWNpdHk6IDF9XHJcblx0XHRcclxuXHRcdCNkZWZpbmUgcmVsYXRpb25zIGFuZCBmdW5jdGlvbnMgZm9yIG1vdmluZyBhbmQgcG9zaXRpb25pbmdcclxuXHRcdCNtb3ZlIHRoZSBib3hlc1xyXG5cdFx0UmVjdC5kcmFnIEBtb3ZlX2RyYWcsIEBtb3ZlX3N0YXJ0LCBAbW92ZV91cFxyXG5cdFx0UmVjdC5ib3h0ZXh0ID0gVGV4dFxyXG5cdFx0UmVjdC5pbWFnZSA9IGltYWdlXHJcblx0XHRcclxuXHRcdCNyZXNpemUgdGhlIGJveGVzXHJcblx0XHQjIFJlY3QucmVzaXplci5kcmFnIEByZXNpemVfZHJhZywgQHJlc2l6ZV9zdGFydCwgQHJlc2l6ZV91cFxyXG5cdFx0IyBSZWN0LnJlc2l6ZXIucmVzaXplciA9IFJlY3RcclxuXHRcdCMgUmVjdC5yZXNpemVyLmJveHRleHQgPSBUZXh0XHJcblxyXG5cdCNzdGFydCwgbW92ZSwgYW5kIHVwIGFyZSB0aGUgZHJhZyBmdW5jdGlvbnNcclxuXHRtb3ZlX3N0YXJ0IDogLT5cclxuXHRcdCNzdG9yaW5nIG9yaWdpbmFsIGNvb3JkaW5hdGVzXHJcblx0XHRAb3ggPSBAYXR0ciAneCdcclxuXHRcdEBveSA9IEBhdHRyICd5J1xyXG5cdFx0QGF0dHIge29wYWNpdHk6IDAuNX1cclxuXHRcdCBcclxuXHRcdCN0aGUgcmVzaXplciBib3hcclxuXHRcdCMgQHJlc2l6ZXIub3ggPSBAcmVzaXplci5hdHRyICd4J1xyXG5cdFx0IyBAcmVzaXplci5veSA9IEByZXNpemVyLmF0dHIgJ3knXHJcblx0XHQjIEByZXNpemVyLmF0dHIge29wYWNpdHk6IDAuNX1cclxuXHRcdFxyXG5cdFx0I3RoZSBib3ggdGV4dFxyXG5cdFx0QGJveHRleHQub3ggPSBAYXR0cigneCcpICsgQGF0dHIoJ3dpZHRoJykgLyAyXHJcblx0XHRAYm94dGV4dC5veSA9IEBhdHRyKCd5JykgKyBAYXR0cignaGVpZ2h0JykgLyAyXHJcblx0XHRAYm94dGV4dC5hdHRyIHtvcGFjaXR5OiAwLjV9XHJcblxyXG5cdFx0QGltYWdlLm94ID0gQGF0dHIoJ3gnKSArIEBhdHRyKCd3aWR0aCcpIC8gMlxyXG5cdFx0QGltYWdlLm95ID0gQGF0dHIoJ3knKSArIEBhdHRyKCdoZWlnaHQnKSAvIDJcclxuXHRcdCNAYm94dGV4dC5hdHRyIHtvcGFjaXR5OiAwLjV9XHJcblxyXG5cdCN2aXN1YWxseSBjaGFuZ2UgdGhlIGJveCB3aGVuIGl0IGlzIGJlaW5nIG1vdmVkXHJcblx0bW92ZV9kcmFnIDogKGR4LCBkeSkgLT5cclxuXHRcdCNtb3ZlIHdpbGwgYmUgY2FsbGVkIHdpdGggZHggYW5kIGR5XHJcblx0XHRAYXR0ciB7eDogQG94ICsgZHgsIHk6IEBveSArIGR5fVxyXG5cclxuXHRcdCMgQHJlc2l6ZXIuYXR0ciB7eDogQHJlc2l6ZXIub3ggKyBkeCwgeTogQHJlc2l6ZXIub3kgKyBkeX1cclxuXHRcdEBib3h0ZXh0LmF0dHIge3g6IEBib3h0ZXh0Lm94ICsgZHgsIHk6IEBib3h0ZXh0Lm95ICsgZHl9XHJcblx0XHRAaW1hZ2UuYXR0ciB7eDogQGltYWdlLm94ICsgZHgsIHk6IEBpbWFnZS5veSArIGR5fVxyXG5cclxuXHQjd2hlbiB0aGUgdXNlciBsZXRzIGdvIG9mIHRoZSBtb3VzZSBidXR0b24sIHJlc2V0IHRoZSBzcXVhcmUncyBwcm9wZXJ0aWVzXHJcblx0bW92ZV91cCA6IC0+XHJcblx0XHQjcmVzdG9yaW5nIHRoZSB2aXN1YWwgc3RhdGVcclxuXHRcdEBhdHRyIHtvcGFjaXR5OiAxfVxyXG5cdFx0IyBAcmVzaXplci5hdHRyIHtvcGFjaXR5OiAxfVxyXG5cdFx0QGJveHRleHQuYXR0ciB7b3BhY2l0eTogMX1cclxuXHRcdFxyXG5cdCMgcmVzaXplX3N0YXJ0IDogLT5cclxuXHQjIFx0I3N0b3Jpbmcgb3JpZ2luYWwgY29vcmRpbmF0ZXNcclxuXHQjIFx0QG94ID0gQGF0dHIgJ3gnXHJcblx0IyBcdEBveSA9IEBhdHRyICd5J1xyXG5cdFx0XHJcblx0IyBcdCN0aGUgcmVzaXplciBib3hcclxuXHQjIFx0QHJlc2l6ZXIub3cgPSBAcmVzaXplci5hdHRyICd3aWR0aCdcclxuXHQjIFx0QHJlc2l6ZXIub2ggPSBAcmVzaXplci5hdHRyICdoZWlnaHQnXHJcblx0XHRcclxuXHQjIFx0I3RoZSBib3ggdGV4dFxyXG5cdCMgXHRAYm94dGV4dC5veCA9IEByZXNpemVyLmF0dHIoJ3gnKSArIEByZXNpemVyLmF0dHIoJ3dpZHRoJykgLyAyXHJcblx0IyBcdEBib3h0ZXh0Lm95ID0gQHJlc2l6ZXIuYXR0cigneScpICsgQHJlc2l6ZXIuYXR0cignaGVpZ2h0JykgLyAyXHJcblxyXG5cdCMgcmVzaXplX2RyYWcgOiAoZHgsIGR5KSAtPlxyXG5cdCMgXHQjIG1vdmUgd2lsbCBiZSBjYWxsZWQgd2l0aCBkeCBhbmQgZHlcclxuXHQjIFx0QGF0dHIge3g6IEBveCArIGR4LCB5OiBAb3kgKyBkeX1cclxuXHQjIFx0QHJlc2l6ZXIuYXR0ciB7d2lkdGg6IEByZXNpemVyLm93ICsgZHgsIGhlaWdodDogQHJlc2l6ZXIub2ggKyBkeX1cclxuXHQjIFx0QGJveHRleHQuYXR0ciB7eDogQGJveHRleHQub3ggKyAoZHggLyAyKSwgeTogQGJveHRleHQub3kgKyAoZHkgLyAyKX1cclxuXHJcblx0IyByZXNpemVfdXAgOiAtPlxyXG5cdCMgXHQjaGVyZSBpcyB3aGVyZSB5b3Ugd291bGQgdXBkYXRlIHRoZSBib3gncyBwb3NpdGlvbiBleHRlcm5hbGx5XHJcblx0IyBcdCMuLi5cclxuXHJcbnN0YXJ0dXAgPSAtPlxyXG5cdHAgPSBSYXBoYWVsICdjYW52YXNkaXYnLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0XHJcblx0cC5yZWN0IDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHRcclxuXHRcdC5hdHRyIHtmaWxsOiAnI2ZmMCd9XHJcblx0Ym94ZXMucHVzaCBuZXcgQm94IDEwMCwgMTAwLCAxMDAwLCAxMDAwLCAnQTAwNCdcclxuXHQjIGJveGVzLnB1c2ggbmV3IEJveCAyMDAsIDIwMCwgMjAwLCAyMDAsICdCJ1xyXG5cdCMgYm94ZXMucHVzaCBuZXcgQm94IDQwMCwgNDAwLCAzMDAsIDMwMCwgJ0MnXHJcblx0IyBib3hlcy5wdXNoIG5ldyBCb3ggNzAwLCA3MDAsIDQwMCwgNDAwLCAnRCdcclxuIl19
//# sourceURL=c:\Lab\2020\017-Raphael\coffee\sketch.coffee