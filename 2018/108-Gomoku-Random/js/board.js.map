{
  "version": 3,
  "file": "board.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\board.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "N = 10\r\nWINSIZE = 5 # number of markers to win\r\n\r\nclass Board\r\n\r\n\tconstructor : (moves='') -> \r\n\t\t@clear()\r\n\t\tfor digit in moves\r\n\t\t\t@move parseInt digit\r\n \r\n\tcopy : ->\r\n\t\tb = new Board()\r\n\t\tb.board = @board.slice() # 1D\r\n\t\tb.moves = @moves.slice() # 1D\r\n\t\tb.surr = @surr.slice() # 1D\r\n\t\tb\r\n\r\n\textendSurr : -> # one step neighbours in eight directions \r\n\t\tmove = _.last @moves\r\n\t\trow = move // N\r\n\t\tcol = move %% N\r\n\t\tfor dr in [-1,0,1]\r\n\t\t\tfor dc in [-1,0,1]\r\n\t\t\t\tif dr!=0 or dc!=0\r\n\t\t\t\t\tif 0<=row+dr<N and 0<=col+dc<N\r\n\t\t\t\t\t\tindex = N*(row+dr)+col+dc \r\n\t\t\t\t\t\tif @board[index] == 0 and index not in @surr\r\n\t\t\t\t\t\t\t@surr.push index \r\n\r\n\t\t# for move in @moves\r\n\t\t# \t@surr = _.without @surr, move # 20 ggr lÃ¥ngsammare\r\n\r\n\t\tnewSurr = []\r\n\t\tfor s in @surr\r\n\t\t\tif s not in @moves\r\n\t\t\t\tnewSurr.push s\r\n\t\t@surr = newSurr\r\n\r\n\tclear : ->\r\n\t\t@moves = []\r\n\t\t@board = (0 for i in range N*N)\r\n\t\t@surr = []\r\n\r\n\tmove : (play) ->\r\n\t\t@board[play] = @nextMarker()\r\n\t\t@moves.push parseInt play\r\n\t\t@extendSurr()\r\n\r\n\tnextBoard : (play) ->\r\n\t\tb = @copy()\r\n\t\tb.move play\r\n\t\tb\r\n\r\n\tlastMarker : -> [1,2][@moves.length % 2]\r\n\tnextMarker : -> [2,1][@moves.length % 2]\r\n\r\n\tcalc : (dr,dc) ->\r\n\t\thelper = =>\r\n\t\t\trow = dr + index // N\r\n\t\t\tcol = dc + index %% N\r\n\t\t\tres = 0\r\n\t\t\twhile 0 <= row < N and 0 <= col < N and @board[row*N+col] == marker\r\n\t\t\t\tres++\r\n\t\t\t\trow += dr\r\n\t\t\t\tcol += dc\r\n\t\t\tres\r\n\t\tmarker = @lastMarker()\r\n\t\tindex = _.last @moves\r\n\t\t1 + helper() >= WINSIZE\r\n\r\n\tdone : ->\r\n\t\tif @moves.length <= 2 * (WINSIZE-1) then return false\r\n\t\tfor dr in [-1,0,1]\r\n\t\t\tfor dc in [-1,0,1]\r\n\t\t\t\tif dr!=0 or dc!=0\r\n\t\t\t\t\tif @calc dr,dc then return true \r\n\t\tfalse\r\n\r\n\tdraw : -> @moves.length == N*N # OBS! Kan vara vinst!\r\n\r\n\twinner : -> \r\n\t\tif @draw() then return 0.5\r\n\t\tif @done() then return [1,0][@moves.length % 2] \r\n\t\tnull\r\n\t"
  ]
}