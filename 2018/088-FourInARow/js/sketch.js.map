{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": ";;;;;;;AAAA,IAAA,QAAA,MAAA,GAAA,KAAA,GAAA,IAAA,SAAA,MAAA,MAAA,aAAA,SAAA,SAAA,cAAA,SAAA,KAAA;;AAAA,AAAM;AACL,AAAc,kBAAA,IAAA,IAAA,OAAA;;;AAAC,AAAC,SAAA;AAAE,AAAC,SAAA;AAAE,AAAC,SAAA;AAAM,AAAC,SAAA;AAAY,AAAC,SAAD,AAAC,IAA5B,AAA8B;AAC5C,AAAO;;;;;AACN,WAAK,AAAC,KAAN,AAAM,GAAE,AAAC,KAAT,AAAS,GAAE,AAAC,KAAZ,AAAY,GAAE,AAAC,KAAf,AAAe;aACf,KAAK,AAAC,KAAN,AAAM,OAAM,AAAC,KAAb,AAAa,GAAE,AAAC,KAFV,AAEN,AAAgB;AACjB,AAAS;;;2BAAA,AAAC,IAAD,AAAI;aAAO,AAAC,KAAD,AAAC,IAAE,AAAC,KAAD,AAAC,IAAJ,AAAM,IAAN,AAAU,MAAV,AAAU,KAAK,AAAC,KAAD,AAAC,IAAE,AAAC,KAAD,AAAC,IAAnB,AAAqB,AAAM,CAA3B,IAA2B,AAAC,KAAD,AAAC,IAAE,AAAC,KAAD,AAAC,IAAJ,AAAM,IAAN,AAAU,MAAV,AAAU,KAAK,AAAC,KAAD,AAAC,IAAE,AAAC,KAAD,AAAC,IAAzD,AAAsC,AAAqB;AALrE,AAOA;;;;;;AAAA,AAAC,OAAY,AAAC;AAAd,AAAM,IAAO,AAAK;AAAlB,AAAQ,AAAK,IAAA,AAAS;;;AACtB,MAAM;;AACN,UAAU;;AACV,UAAU;;AAEV,UAAU,mBACT;MAAA,KAAA,IAAA,GAAA,KAAA,MAAA;AAAA,QAAM,AAAmD,oDAAnD,AAAoD,MAApD,AAA0D,AAChE;;AAAA,OAAA,kCAAA;;qBACC,AAAI;mBAAM;;AAAA,WAAA,qCAAA;;sBAAA,AAAkB,mBAAlB,AAAmB,QAAnB,AAA2B;AAA3B;;AADX,AACC,OAAA,AAAG;AADJ;SAFS;;;AAKV,QAAQ,iBACP;MAAA,GAAA,GAAA,GAAA,KAAA,KAAA,SAAA,GAAA;AAAA,eAAA,AAAa,KAAb,AAAiB;AACjB,WAAA,AAAS;AACT,YAAA,AAAU,QAAV,AAAiB;AACjB,WAAA,AAAS;AACT,AACA;cAAA;;AAAA,OAAA,kCAAA;;;yBACC;mBAAA;;AAAA,WAAA,qCAAA;iBACC;AAAA,AAAC,YAAQ,MAAI,MAAL,AAAS;AAAjB,AAAG,AAAK,YAAW,MAAI,MAAf,AAAmB;;8BAC3B,AAAQ,SAAK,AAAI,OAAJ,AAAW,GAAX,AAAa,GAAb,AAAe,MAAK;AAChC,cAAG,YAAH,AAAc,IAAQ;mBAAtB,AAA6B;;AAC7B,AAAC,eAAD,AAAC,QAAQ;AACT,cAAG,KAAK,IAAR,AAAG,AAAK,AAAI,KAAO;mBAAO,UAA1B,AAAoC;;AACpC;AACA,cAAG,KAAK,IAAR,AAAG,AAAK,AAAI;AAAO,sBAAnB,AAA6B;;AAC7B,cAAI,IAAD,AAAC,AAAI,AAAK,KAAV,CAAA,AAAW,WAAd,AAAsB,GAAO;mBAAO,UAApC,AAA8C;AANd;AAFlC,AAEC,AAAa,SAAA,CAAb,AAAO;AAFR;;AADD;AAAA;SANO;;;AAiBR,UAAU,mBACT;MAAA,QAAA,GAAA;AAAA,OAAA,sCAAA;;AACC,AAAM,WAAN,AAAO,QADR,AACgB;;SAChB,UAHS,AAGC;;;AAEX,MAAM,aAAA,AAAC,GAAM;MAAA,GAAA,GAAA,GAAA,KAAA;;AAAA,OAAA,gDAAA;;QAA0B,AAAC,EAAD,AAAE,UAAO;mBAAnC;AAAA;AAAA;SAAP;;;AAEN,cAAc,qBAAA,AAAC,QACd;MAAA,GAAA,GAAA,KAAA,SAAA;AAAA,YAAU,IAAA,AAAI,AACd;;AAAA,OAAA,kCAAA;;AACC,QAAG,KAAK,AAAO,QAAP,AAAQ,OAAhB,AAAG,AAAK,AAAe;AACtB,AAAQ,cAAA,AAAE,GAAV,AAAW,QAAQ,AACnB;aAFD,AAEQ;AAHT;;SAFa,AAMb;;;AAED,KAAK,cAAA;AACJ;MAAA;AAAA,MAAG,YAAH,AAAG,AAAY;AAAO;AAAtB;;AACA,MAAG,YAAH,AAAG,AAAY;AAAO;AAAtB;;AACA,UAAQ,AAAC,EAAD,AAAE,OAAO,IAFjB,AAEQ,AAAS,AAAI;SACrB,AAAQ,QAAA,AAAM,OAAd,AAAe,QAJX,AAImB;;;AAExB,OAAO,cAAA,AAAC,GACP;MAAA,GAAA,KAAA;AAAA,OAAA,kCAAA;;AACC,QAAG,AAAC,EAAD,AAAE,aAAF,AAAe,SAAf,AAAuB,AAAE,GAAzB,AAA0B,WAA7B,AAAuC,GAAO;aAA9C,AAAqD;AADtD;;SADM,AAGN;;;AAED,OAAO,gBACN;MAAA,QAAA,GAAA;AAAA,KAAA,AAAG;AACH,OAAA,sCAAA;;AAAA,AAAM,WAAN,AAAO;;AACP;AACA,WAAA,AAAS;AACT,KAAA,AAAG,GAAH,AAAK,GAAL,AAAO;AACP,OAAA,AAAK,SAAQ,QAAb,AAAmB,GAAE,SAArB,AAA4B;SANtB,AAON;;;AAED,eAAe,wBACd;MAAA,QAAA,GAAA,KAAA;;AAAA,OAAA,sCAAA;;AACC,QAAG,AAAM,OAAN,AAAO,OAAP,AAAc,QAAjB,AAAG,AAAqB;mBAAY,AAAM,OAA1C,AAAoC,AAAO;AAA3C,WAAA;wBAAA;AADD;AAAA;SADc",
  "sourcesContent": [
    "class Button\r\n\tconstructor : (@x,@y,@title,@execute) -> @w=95\r\n\tdraw : ->\r\n\t\trect @x,@y,@w,@w\r\n\t\ttext @title,@x,@y\r\n\tinside : (mx,my) -> @x-@w/2 < mx < @x+@w/2 and @y-@w/2 < my < @y+@w/2\r\n\r\n[FREE,X,O] = [' ','X','O']\r\nWIN = [] \r\nbuttons = []\r\nmessage = ''\r\n\r\nmakeWIN = ->\r\n\tarr = 'abcd efgh ijkl mnop aeim bfjn cgko dhlp afkp dgjm'.split ' '\r\n\tfor quad in arr\r\n\t\tWIN.push ('abcdefghijklmnop'.indexOf ch for ch in quad)\r\n\r\nsetup = ->\r\n\tcreateCanvas 500,500\r\n\trectMode CENTER\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 100\r\n\tmakeWIN()\r\n\tfor i in range 4\r\n\t\tfor j in range 4\r\n\t\t\t[x,y] = [100+100*i,100+100*j]\r\n\t\t\tbuttons.push new Button x,y,FREE,->\r\n\t\t\t\tif message != '' then return newGame()\r\n\t\t\t\t@title = O\r\n\t\t\t\tif four sel O then return message = 'human wins!'\r\n\t\t\t\tai()\r\n\t\t\t\tif four sel X then message = 'computer wins!'\r\n\t\t\t\tif (sel FREE).length==0 then return message = 'remi!'\r\n\r\nnewGame = ->\r\n\tfor button in buttons\r\n\t\tbutton.title = FREE\r\n\tmessage = ''\r\n\r\nsel = (m) -> i for b,i in buttons when b.title==m\r\n\r\ninvestigate = (marker) ->\r\n\tmarkers = sel marker \r\n\tfor i in sel FREE\r\n\t\tif four markers.concat i\r\n\t\t\tbuttons[i].title = X\r\n\t\t\treturn true\r\n\tfalse\r\n\r\nai = -> # computer is X\r\n\tif investigate X then return # try winning\r\n\tif investigate O then return # avoid losing\r\n\tindex = _.sample sel FREE # random move\r\n\tbuttons[index].title = X\r\n\r\nfour = (b) -> \r\n\tfor pattern in WIN\r\n\t\tif _.intersection(pattern,b).length == 4 then return true\r\n\tfalse\r\n\r\ndraw = ->\r\n\tbg 0.5\r\n\tbutton.draw() for button in buttons\r\n\tpush()\r\n\ttextSize 50\r\n\tfc 1,0,0\r\n\ttext message,width/2,height/2\r\n\tpop()\r\n\r\nmousePressed = ->\r\n\tfor button in buttons \r\n\t\tif button.inside mouseX,mouseY then button.execute()"
  ]
}