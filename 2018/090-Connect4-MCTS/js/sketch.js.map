{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "SIZE = 600/(N+1)\r\nthinkingTime = 10 # milliseconds\r\n\r\nlevel = 0\r\nlist = null\r\nmoves = null\r\nboard = null\r\ndelta = 0\r\nmontecarlo = null\r\n\r\nsetup = ->\r\n\tcreateCanvas 600,600\r\n\tnewGame()\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize SIZE/2\r\n\r\nnewGame = () ->\r\n\tlevel += delta\r\n\tif level < 0 then level = 0\r\n\tdelta = -2\r\n\tboard = new Board()\r\n\tlist = ([] for i in range 7)\r\n\tmoves = []\r\n\tmontecarlo = new MonteCarlo new Node null,null,board,list\r\n\r\ndraw = ->\r\n\tbg 0\r\n\tfc()\r\n\tsc 0.1,0.3,1\r\n\tsw 0.2 * SIZE\r\n\tfor i in range N\r\n\t\tx = SIZE + i*SIZE\r\n\t\tfor j in range M\r\n\t\t\ty = height-SIZE - SIZE*j\r\n\t\t\tcircle x, y, SIZE/2\r\n\r\n\tfor column,i in list\r\n\t\tx = SIZE + i*SIZE\r\n\t\tfor nr,j in column\r\n\t\t\ty = height-SIZE - SIZE*j\r\n\t\t\tfc 1,nr%2,0\r\n\t\t\tsw 1\r\n\t\t\tcircle x, y, SIZE*0.4\r\n\t\t\tfc 0\r\n\t\t\tsc()\r\n\t\t\ttext nr, x, y\r\n\tsc()\r\n\tfc 1\r\n\tmsg = ['','Datorn vann!','Remis!','Du vann!'][delta+2]\r\n\ttext msg,width/2,SIZE/2-10\r\n\ttext level,SIZE/2,SIZE/2-10\r\n\r\nmousePressed = ->\r\n\tif delta != -2 then return newGame()\r\n\tif mouseX<SIZE/2 or mouseX>=width-SIZE/2 or mouseY>=height then return\r\n\tnr = int (mouseX-SIZE/2)/SIZE\r\n\r\n\tif 0 <= nr <= N\r\n\t\tif list[nr].length == M then return\r\n\t\tmoves.push nr\r\n\t\tboard.move nr\r\n\t\tlist[nr].push moves.length\r\n\r\n\tif board.done() then return delta = 1\r\n\tmontecarlo = new MonteCarlo new Node null,null,board,list\r\n\tprint montecarlo\t\r\n\tresult = montecarlo.runSearch()\r\n\tm = montecarlo.bestPlay montecarlo.root\r\n\r\n\tmoves.push m\r\n\tboard.move m\r\n\tlist[m].push moves.length\r\n\tif board.done() then return delta = -1\r\n\tif board.moves.length == M*N then delta = 0\r\n\r\nundo : -> if moves.length > 0 then list[moves.pop()].pop()\r\n"
  ]
}