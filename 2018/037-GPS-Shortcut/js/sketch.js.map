{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# file:///C:/Lab/2018/037-GPS-Shortcut/index.html?radius=50&level=3&seed=0.5&nr=1\r\n\r\nreleased = true\r\nsystem = null\r\n\r\nposition = {x:0,y:0} \r\n\r\nrotation = 0 # degrees\r\nrotation2 = 0 # degrees\r\n\r\nSCALE = null\r\nkilled = false \r\n\r\n# inparametrar\r\nRmeter = 10 # stora radien i meter\r\nRADIUS = null # stora radien i pixlar\r\nradius = null # lilla radien i pixlar\r\nlevel = null\r\nseed = null\r\nnr = null\r\n\r\nTRACKED = 5\r\n\r\n#LAT = 59.265205 # SkarpnÃ¤ck\r\n#LON = 18.132735\r\n\r\nbuttons = []\r\nhist = []\r\ntrack = []\r\n\r\na = 8\r\nb = 9\r\ncount = 0\r\nsteps = 3\r\nstart = null\r\nstopp = null\r\ndw = null\r\ndh = null\r\n\r\nclass System\r\n\tconstructor : (@lat,@lon,@w,@h) ->\r\n\t\tp0 = LatLon @lat,@lon\r\n\t\tp1 = p0.destinationPoint @h/2, 0\r\n\t\t@lat2 = p1.lat\r\n\t\tp2 = p0.destinationPoint @w/2, 90\r\n\t\t@lon2 = p2.lon\r\n\t\tp3 = p0.destinationPoint @h/2, 180\r\n\t\t@lat1 = p3.lat\r\n\t\tp4 = p0.destinationPoint @w/2, 270\r\n\t\t@lon1 = p4.lon\r\n\ttoXY : (lat,lon) ->\r\n\t\tx = round map lon, @lon1, @lon2, -@w/2, @w/2\r\n\t\ty = round map lat, @lat2, @lat1, -@h/2, @h/2 # turned\r\n\t\t{x,y}\r\n\ttoWGS84 : (x,y) ->\r\n\t\tlon = map x, -@w/2, @w/2, @lon1, @lon2\r\n\t\tlat = map y, -@h/2, @h/2, @lat1, @lat2\r\n\t\t{lat,lon}\r\n\r\nclass Button\r\n\tconstructor : (@x,@y,@radius,@txt,@r=0,@g=0,@b=0) ->\r\n\t\t@rotates = false \r\n\r\n\tdraw : ->\r\n\t\tpush()\r\n\t\ttranslate @x,@y\r\n\t\tif @inCircle()\r\n\t\t\tif @inRedHalf() then killed = true\r\n\t\t\tfc 0.25 \r\n\t\telse \r\n\t\t\tfc 0.75\r\n\t\tif stopp? then fc 0,1,0\r\n\t\tsc()\r\n\t\tif @radius > 0\r\n\t\t\tif @rotates\r\n\t\t\t\trotate rotation2\r\n\t\t\t\td = 2 * @radius\r\n\t\t\t\tfc 0.75\r\n\t\t\t\tarc 0,0,d,d,0,180\r\n\t\t\t\tfc 1,0,0\r\n\t\t\t\tarc 0,0,d,d,180,0\r\n\t\t\telse\r\n\t\t\t\tcircle 0,0,@radius\r\n\t\tif a==b then fc 0,1,0 else fc @r,@g,@b\r\n\t\ttext @txt,0,0\r\n\t\tpop()\r\n\r\n\texecute : ->\r\n\t\tif @inCircle()\r\n\t\t\t@event()\r\n\t\t\tif a==b then stopp = millis()\r\n\r\n\tsetColor : (r,g,b) -> [@r,@g,@b] = [r,g,b]\r\n\r\n\tinCircle : ->\r\n\t\tx = width/2\r\n\t\ty = height/2\r\n\t\tx += RADIUS * cos rotation\r\n\t\ty += RADIUS * sin rotation\r\n\t\t@radius > dist position.x,position.y,x,y\r\n\r\n\tinRedHalf : ->\r\n\t\tx = width/2\r\n\t\ty = height/2\r\n\t\tx += RADIUS * cos rotation\r\n\t\ty += RADIUS * sin rotation\r\n\t\tvinkel = atan2 position.y-y, position.x-x\r\n\t\trotation2 < vinkel < rotation2+180 and @radius > dist position.x,position.y,x,y\r\n\r\nspara = (value) ->\r\n\tcount++\r\n\thist.push a\r\n\ta = value\r\n\tbuttons[3+0].txt = steps - count\r\n\tbuttons[4+0].txt = a\r\n\r\nlocationUpdate = (p) ->\r\n\tlat = p.coords.latitude\r\n\tlon = p.coords.longitude\r\n\tif system == null\r\n\t\tsystem = new System lat,lon,width,height\r\n\telse\r\n\t\tposition = system.toXY lat,lon\r\n\t\ttrack.push position\r\n\t\tif track.length > TRACKED then track.shift()\r\n\r\nlocationUpdateFail = (error) ->\r\n\r\nsetup = ->\r\n\tcreateCanvas windowWidth,windowHeight\r\n\r\n\t# args = getParameters()\r\n\t# nr = args.nr\r\n\t## lat = parseFloat args.lat\r\n\t## lon = parseFloat args.lon\r\n\t# RADIUS = parseInt args.radius \r\n\t# level = parseInt args.level\r\n\t# seed = parseFloat args.seed\r\n\r\n\tnr = '1'\r\n\t#lat = 59.265205 \r\n\t#lon = 18.132735\r\n\tRADIUS = 25\r\n\tlevel = 3\r\n\tseed = 0.5\r\n\r\n\td = new Date()\r\n\tseed += 31 * d.getMonth() + d.getDate()\r\n\r\n\tcreateProblem level,seed\r\n\r\n#\tsystem = new System lat,lon,width,height\r\n\r\n\tSCALE = min(width,height)/RADIUS/3\r\n\tprint SCALE\r\n\tradius = 0.3 * RADIUS\r\n\r\n\tnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\t\tenableHighAccuracy: true\r\n\t\tmaximumAge: 30000\r\n\t\ttimeout: 27000\r\n\r\n\tstart = millis()\r\n\r\n\tangleMode DEGREES\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 1*radius\r\n\tlabels = \"+2 *2 /2\".split ' '\r\n\tn = labels.length\r\n\r\n\tfor txt,i in labels\r\n\t\tx = RADIUS * cos i*360/n\r\n\t\ty = RADIUS * sin i*360/n\r\n\t\tbutton = new Button x,y,radius,txt\r\n\t\tbutton.rotates = true\r\n\t\tbuttons.push button\r\n\tbuttons[0].event = -> spara a+2\r\n\tbuttons[1].event = -> spara a*2\r\n\tbuttons[2].event = -> if a%2==0 then spara a//2\r\n\t#buttons[3].event = -> spara a+3\r\n\r\n\tbuttons.push new Button 0,0,radius,steps\r\n\tbuttons[3+0].event = ->\r\n\t\tif hist.length > 0\r\n\t\t\ta = hist.pop()\r\n\t\t\tbuttons[4+1].txt = a\r\n\r\n\tws = 0.4*width/SCALE\r\n\ths = 0.4*height/SCALE\r\n\trs = radius/SCALE\r\n\r\n\tbuttons.push new Button -ws,-hs,-rs,a\r\n\tbuttons.push new Button ws,-hs,-rs,b\r\n\tbuttons[4+0].setColor 1,0,0\r\n\tbuttons[5+0].setColor 0,1,0\r\n\r\n\tbuttons.push new Button -ws,hs,-rs,'#'+nr\r\n\tbuttons.push new Button 0,hs,-rs,'0' # sekunder\r\n\tbuttons.push new Button ws,hs,-rs,'0' # count\r\n\r\ndraw = ->\r\n\tif killed \r\n\t\tbg 1,0,0\r\n\t\treturn \r\n\ttranslate width/2,height/2\r\n\tscale SCALE\r\n\tbg 0.5\r\n\tfc()\r\n\tsc 0\r\n\tcircle 0,0,RADIUS\r\n\tif stopp?\r\n\t\tbuttons[7+0].txt = round(stopp-start)/1000\r\n\telse\r\n\t\tbuttons[7+0].txt = round (millis()-start)/1000\r\n\tbuttons[8+0].txt = count\r\n\r\n\trotate rotation\r\n\tfor i in range 0,3\r\n\t\tbuttons[i].draw()\r\n\r\n\trotate -rotation\r\n\tfor i in range 3,9\r\n\t\tbuttons[i].draw()\r\n\r\n\tfc()\r\n\tsc 1,1,0\r\n\tsw 1/SCALE\r\n\tfor p,i in track\r\n\t\tcircle p.x, p.y, 5*(track.length-i)/SCALE\r\n\r\n\trotation = (rotation + 0.01) % 360\r\n\trotation2 = (rotation2 + 0.05) % 360\r\n\r\ncreateProblem = (level,seed) ->\r\n\tn = int Math.pow 2, 4+level/3 # nodes\r\n\ta = myrandom 1,n/2\r\n\tlst = [a]\r\n\ttree = [a]\r\n\tlst2 = []\r\n\tsave = (item) ->\r\n\t\tif item <= n and item not in tree\r\n\t\t\tlst2.push item\r\n\t\t\ttree.push item\r\n\tfor j in range level\r\n\t\tlst2 = []\r\n\t\tfor item in lst\r\n\t\t\tsave item + 2 \r\n\t\t\tsave item * 2\r\n\t\t\tif item%2 == 0 then save item / 2\r\n\t\tlst = lst2\r\n\ti = myrandom 0,lst.length\r\n\tb = lst[i]\r\n\r\nmyrandom = (a,b) ->\r\n  x = 10000 * Math.sin seed\r\n  x = x - Math.floor(x)\r\n  int a+x*(b-a)\r\n\r\nmouseReleased = -> # to make Android work\r\n\treleased = true\r\n\tfalse\r\n\r\nmousePressed = ->\r\n\tif !released then return # to make Android work\r\n\treleased = false\r\n\tif stopp? then return\r\n\tfor button in buttons\r\n\t\tbutton.execute()\r\n"
  ]
}