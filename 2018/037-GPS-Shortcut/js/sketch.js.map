{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "released = true\r\n\r\nposition = {x:0,y:0} # home\r\n\r\n# inparametrar\r\nRmeter = 100 # stora radien i meter\r\nrmeter = 30 # lilla radien meter\r\nRADIUS = null # stora radien i pixlar\r\nradius = null # lilla radien i pixlar\r\n# level\r\n# seed\r\n\r\nLAT = 59.265205 # SkarpnÃ¤ck\r\nLNG = 18.132735\r\n\r\nbuttons = []\r\nhist = []\r\ntrack = []\r\n\r\na = 8\r\nb = 9\r\ncount = 0\r\nsteps = 3\r\nstart = null\r\nstopp = null\r\ndw = null\r\ndh = null\r\n\r\nclass Button\r\n\tconstructor : (@x,@y,@radius,@txt,@r=0.5,@g=0.5,@b=0.5) -> \r\n\tdraw : ->\r\n\t\tif @radius > dist position.x,position.y,@x,@y then fc 1,1,0,0.5 else fc 1,1,1,0.5 \r\n\t\tif stopp? then fc 0,1,0\r\n\t\tsc 0\r\n\t\tif @radius > 0 then circle @x,@y,@radius\r\n\t\tfc @r,@g,@b\r\n\t\tsc()\r\n\t\ttext @txt,@x,@y\r\n\texecute : ->\r\n\t\tif @radius > dist position.x,position.y,@x,@y\r\n\t\t\t@event()\r\n\t\t\tif a==b then stopp = millis()\r\n\r\n\tspara : (value) ->\r\n\t\tcount++\r\n\t\thist.push a\r\n\t\ta = value\r\n\t\tbuttons[3+1].txt = steps - count\r\n\t\tbuttons[4+1].txt = a\r\n\tsetColor : (r,g,b) -> [@r,@g,@b] = [r,g,b]\r\n\r\nlocationUpdate = (p) ->\r\n\tp1 = \r\n\t\tlat : p.coords.latitude\r\n\t\tlng : p.coords.longitude\r\n\t\ttimestamp : p.timestamp # milliseconds since 1970\r\n\tposition = wgs84ToXY p1\r\n\ttrack.push position\r\n\tif track.length > 10 then track.shift()\r\n\r\nlocationUpdateFail = (error) ->\r\n\r\nwgs84ToXY = (p) ->\r\n\tx = int map p.lng, LNG-dw/2, LNG+dw/2, 0, width\r\n\ty = int map p.lat, LAT+dh/2, LAT-dh/2, 0,height\r\n\ttimestamp = p.timestamp\r\n\t{x,y,timestamp}\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,800  # windowWidth,windowHeight\r\n\t# dx = 0.01/(1136.6/width) # meter per grad Stockholm\r\n\t# dy = 0.01/(2223.9/height) # meter per grad Stockholm\r\n\t#dh = height/113660 # grader vertikalt Stockholm\r\n\t#dw = width/222390 # grader horisontellt Stockholm\r\n\tdh = height/389000 # grader vertikalt Stockholm\r\n\tdw = width/209500 # grader horisontellt Stockholm\r\n\tmeterPerPixlar = 2 * (rmeter+Rmeter) / Math.min width,height\r\n\tRADIUS = Rmeter / meterPerPixlar\r\n\tradius = 0.3 * RADIUS\r\n\tprint 'RADIUS',RADIUS\r\n\tprint 'radius',radius\r\n\tprint 'meterPerPixlar',meterPerPixlar\r\n\tprint 'dw',dw\r\n\tprint 'dh',dh\r\n\r\n\tp0 = {lat: LAT, lng: LNG, timestamp:0}\r\n\tp1 = {lat: LAT-dh/2, lng: LNG-dw/2, timestamp:0}\r\n\tp2 = {lat: LAT-dh/2, lng: LNG+dw/2, timestamp:0}\r\n\tp3 = {lat: LAT+dh/2, lng: LNG-dw/2, timestamp:0}\r\n\tp4 = {lat: LAT+dh/2, lng: LNG+dw/2, timestamp:0}\r\n\r\n\tp5 = {lat: 59.2661136, lng: 18.1326854}\r\n\r\n\tp6 = {lat: LAT+dh/2, lng: LNG, timestamp:0}\r\n\tp7 = {lat: LAT-dh/2, lng: LNG, timestamp:0}\r\n\tp9 = {lat: LAT, lng: LNG+dw/2, timestamp:0}\r\n\r\n\tp10 = {lat: 59.2652257, lng: 18.1344284}\r\n\r\n\tprint wgs84ToXY p0 \r\n\tprint wgs84ToXY p1 \r\n\tprint wgs84ToXY p2 \r\n\tprint wgs84ToXY p3\r\n\tprint wgs84ToXY p4\r\n\r\n\tprint 'p5',wgs84ToXY p5 \r\n\tprint 'p6',wgs84ToXY p6 \r\n\tprint 'p7',wgs84ToXY p7 \r\n\tprint 'p9',wgs84ToXY p9 \r\n\tprint 'p10',wgs84ToXY p10 \r\n\r\n\tll1 = LatLon p1.lat,p1.lng \r\n\tll2 = LatLon p2.lat,p2.lng \r\n\tll3 = LatLon p3.lat,p3.lng \r\n\tll4 = LatLon p4.lat,p4.lng \r\n\tprint ll1.bearingTo ll4\r\n\tprint ll2.bearingTo ll3\r\n\r\n\tnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\t\tenableHighAccuracy: true\r\n\t\tmaximumAge: 30000\r\n\t\ttimeout: 27000\r\n\r\n\tstart = millis()\r\n\r\n\tangleMode DEGREES\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 1*radius\r\n\tlabels = \"+2 *2 /2 +3\".split ' '\r\n\tn = labels.length\r\n\tfor txt,i in labels\r\n\t\tx = width/2  + RADIUS * cos i*360/n # -90\r\n\t\ty = height/2 + RADIUS * sin i*360/n # -90\r\n\t\tbuttons.push new Button x,y,radius,txt\r\n\tbuttons[0].event = -> @spara a+2\r\n\tbuttons[1].event = -> @spara a*2\r\n\tbuttons[2].event = -> if a%2==0 then @spara a//2\r\n\tbuttons[3].event = -> @spara a+3\r\n\r\n\tbuttons.push new Button width/2,height/2,radius,steps\r\n\tbuttons[3+1].event = ->\r\n\t\tif hist.length > 0\r\n\t\t\ta = hist.pop()\r\n\t\t\tbuttons[4+1].txt = a\r\n\tbuttons.push new Button 100,100,-radius,a\r\n\tbuttons.push new Button width-100,100,-radius,b\r\n\tbuttons[4+1].setColor 0,0,0\r\n\tbuttons[5+1].setColor 0,0,0\r\n\tbuttons.push new Button 120,height-radius,-radius,'time'\r\n\tbuttons.push new Button width-120,height-radius,-radius,'count'\r\n\tbuttons[6+1].setColor 0,0,0\r\n\tbuttons[7+1].setColor 0,0,0\r\n\r\n\tfor i in range 4\r\n\t\t\tprint 'dist', dist width/2,height/2,buttons[i].x,buttons[i].y\r\n\r\ndraw = ->\r\n\tbg 0.5\r\n\tfc()\r\n\tcircle width/2,height/2,RADIUS\r\n\tfor button in buttons\r\n\t\tbutton.draw()\r\n\tif stopp?\r\n\t\tbuttons[6+1].txt = round(stopp-start)/1000\r\n\t\tbuttons[7+1].txt = count\r\n\tfc()\r\n\tsc 0\r\n\tsw 1\r\n\tfor p,i in track\r\n\t\tcircle p.x,p.y,3*(10-i)\r\n\r\n\tfc 1,0,0\r\n\ttext \"#{position.x}, #{position.y}\",0.5*width,0.35*height\r\n\r\nmouseReleased = -> # to make Android work\r\n\treleased = true\r\n\tfalse\r\n\r\nmousePressed = ->\r\n\tif !released then return # to make Android work\r\n\treleased = false\r\n\tif stopp? then return\r\n\tfor button in buttons\r\n\t\tbutton.execute()\r\n"
  ]
}