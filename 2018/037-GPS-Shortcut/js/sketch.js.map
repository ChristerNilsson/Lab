{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "position = [59.265205, 18.132735] # home\r\n\r\n#OMKRETS = 40075000 # meter\r\nR = 80\r\n\r\nbuttons = []\r\nhist = []\r\ntrack = []\r\n\r\na = 7\r\nb = 9\r\ncount = 0\r\nstart = null\r\nstopp = null\r\nwgs84 = null\r\n\r\nclass Button\r\n\tconstructor : (@x,@y,@r,@txt) -> \r\n\tdraw : ->\r\n\t\tif @r > dist mouseX,mouseY,@x,@y then fc 1,1,0,0.5 else fc 1,1,1,0.5 \r\n\t\tif stopp? then fc 0,1,0\r\n\t\tif @r > 0 then circle @x,@y,@r\r\n\t\tfc 0\r\n\t\ttext @txt,@x,@y\r\n\texecute : ->\r\n\t\tif @r > dist mouseX,mouseY,@x,@y\r\n\t\t\t@event()\r\n\t\t\tif a==b then stopp = millis()\r\n\r\n\tspara : (value) ->\r\n\t\tcount++\r\n\t\thist.push a\r\n\t\ta = value\r\n\t\tbuttons[4].txt = a\r\n\r\nlocationUpdate = (p) ->\r\n\t#logg.push 'locationUpdate ' + position.timestamp\r\n\t#print 'locationUpdate', position\r\n\tp1 = \r\n\t\tlat : p.coords.latitude\r\n\t\tlng : p.coords.longitude\r\n\t\ttimestamp : p.timestamp # milliseconds since 1970\r\n\tposition = wgs84ToXY p1.lat,p1.lng\r\n\ttrack.push position\r\n\tif track.length > 10 then track.shift()\r\n\t#heading_12 = calcHeading p1,place()\r\n\t#lastObservation = millis()\r\n\r\n\r\n\t# texts[0] = prettyDist distance_on_geoid p1,place()\r\n\t# texts[1] = \"#{Math.round heading_12}Â°\"\r\n\t# texts[6] = track.length \r\n\t# if track.length > 1\r\n\t# \tspeed     = calcSpeed     start, millis(), track[0], _.last(track), place()\r\n\t# \ttotalTime = calcTotalTime start, millis(), track[0], _.last(track), place()\r\n\t# \t#texts[3] = \"#{precisionRound 3.6*speed,1} km/h\"  \r\n\t# \ttexts[2] = prettyETA startDate, totalTime\r\n\r\n\t# \tts = prettyDate d = new Date p1.timestamp\r\n\t# \tlat = precisionRound p1.lat,6\r\n\t# \tlng = precisionRound p1.lng,6\r\n\t# \theading = precisionRound heading_12,0\r\n\t# \tmark00 = if d.getSeconds() == 0 then '*' else ''\r\n\t\t\r\n\t# \tlogg.push \"#{ts} #{lat} #{lng} #{texts[0]} #{heading} #{texts[3]} #{texts[2]} #{mark00}\"\r\n\r\nlocationUpdateFail = (error) ->\r\n\t#logg.push error\t\r\n\r\nwgs84ToXY = (lat,lon) ->\r\n\tdx = 0.01/1.136\r\n\tdy = 0.01/2.224\r\n\tx = int map lon, 18.132735-dx, 18.132735+dx, 0,1000\r\n\ty = int map lat, 59.265205+dy, 59.265205-dy, 0,1000\r\n\t[x,y]\r\n\r\nsetup = ->\r\n\r\n\tdx = 0.01/1.136\r\n\tdy = 0.01/2.224\r\n\r\n\tp0 = new LatLon 59.265205,    18.132735 # home\r\n\tp1 = new LatLon 59.265205+dy, 18.132735-dx\r\n\tp2 = new LatLon 59.265205+dy, 18.132735 \r\n\tp3 = new LatLon 59.265205+dy, 18.132735+dx \r\n\tp4 = new LatLon 59.265205,    18.132735+dx\r\n\tp5 = new LatLon 59.265205-dy, 18.132735+dx \r\n\tp6 = new LatLon 59.265205-dy, 18.132735\r\n\tp7 = new LatLon 59.265205-dy, 18.132735-dx\r\n\tp8 = new LatLon 59.265205,    18.132735-dx \r\n\r\n\tprint p1.distanceTo p3\r\n\tprint p7.distanceTo p5\r\n\tprint p1.distanceTo p7\r\n\tprint p3.distanceTo p5\r\n\r\n\tnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\t\tenableHighAccuracy: true\r\n\t\tmaximumAge: 30000\r\n\t\ttimeout: 27000\r\n\r\n\tstart = millis()\r\n\tcreateCanvas 1000,1000\r\n\t# wgs84 = new WGS84 59.265205, 18.132735, width, height\r\n\t# assert [300,300], wgs84.w2c 59.265205, 18.132735\r\n\t# assert [300,301], wgs84.w2c 0.0001+59.265205, 0.0001+18.132735\r\n\r\n\tangleMode DEGREES\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 50\r\n\tlabels = \"+2 *2 /2\".split ' '\r\n\tfor txt,i in labels\r\n\t\tx = width/2 + 200*cos i*360/labels.length-90\r\n\t\ty = height/2 + 200*sin i*360/labels.length-90\r\n\t\tbuttons.push new Button x,y,R,txt\r\n\tbuttons.push new Button width/2,height/2,R,'undo'\r\n\tbuttons[0].event = -> @spara a+2 \r\n\tbuttons[1].event = -> @spara a*2\r\n\tbuttons[2].event = -> if a%2==0 then @spara a//2\r\n\tbuttons[3].event = ->\t\r\n\t\tif hist.length > 0 \r\n\t\t\ta = hist.pop()\r\n\t\t\tbuttons[4].txt = a\r\n\tbuttons.push new Button 100,100,-R,a\r\n\tbuttons.push new Button 500,100,-R,b\r\n\tbuttons.push new Button 120,height-50,-R,''\r\n\tbuttons.push new Button width-120,height-50,-R,''\r\n\r\ndraw = ->\r\n\tbg 0.5\r\n\tfc()\r\n\tcircle width/2,height/2,200\r\n\tfor button in buttons\r\n\t\tbutton.draw()\r\n\tif stopp? \r\n\t\tbuttons[6].txt = round(stopp-start)/1000\r\n\t\tbuttons[7].txt = count\r\n\tfor p,i in track\r\n\t\t[x,y] = p\r\n\t\tfc (i+1)*0.1, 0, 0, 0.1\r\n\t\tsc 0\r\n\t\tsw 1\r\n\t\tcircle x,y,2*(i+1)\r\n\r\n\tfc 1,0,0\r\n\ttext position,200,200\r\n\r\n\r\nmousePressed = ->\r\n\tif stopp? then return\r\n\tfor button in buttons\r\n\t\tbutton.execute()\r\n\r\n\r\n"
  ]
}