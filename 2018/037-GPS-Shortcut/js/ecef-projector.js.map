{
  "version": 3,
  "file": "ecef-projector.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\ecef-projector.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# (C) 2015 Seth Lakowske\r\n\r\nRADIUS = 6378137 # meter\r\nFLATTENING = 1/298.257223560\r\nPOLAR_RADIUS = 6356752.3 # meter\r\n\r\nmydegrees = (angle) -> angle * 180 / Math.PI\r\nmyradians = (angle) -> angle * Math.PI / 180\r\n\r\na    = RADIUS\r\nf    = FLATTENING\r\nb    = POLAR_RADIUS\r\nasqr = a*a\r\nbsqr = b*b\r\n\r\ne = Math.sqrt (asqr-bsqr)/asqr\r\neprime = Math.sqrt (asqr-bsqr)/bsqr\r\n\r\nproject = (latitude, longitude, altitude) -> LLAToECEF myradians(latitude), myradians(longitude), altitude\r\nunproject = (x, y, z) ->\r\n    gps = ECEFToLLA x, y, z\r\n    [mydegrees(gps[0]), mydegrees(gps[1])]\r\n\r\nLLAToECEF = (latitude, longitude, altitude) ->\r\n    N = getN latitude\r\n    ratio = bsqr / asqr\r\n    X = (N + altitude) * Math.cos(latitude) * Math.cos(longitude)\r\n    Y = (N + altitude) * Math.cos(latitude) * Math.sin(longitude)\r\n    Z = (ratio * N + altitude) * Math.sin(latitude)\r\n    [X, Y, Z]\r\n\r\nECEFToLLA = (X, Y, Z) ->\r\n    p = Math.sqrt X*X + Y*Y\r\n    theta = Math.atan (Z*a)/(p*b)\r\n\r\n    sintheta = Math.sin theta\r\n    costheta = Math.cos theta\r\n\r\n    num = Z + eprime * eprime * b * sintheta * sintheta * sintheta\r\n    denom = p - e * e * a * costheta * costheta * costheta\r\n\r\n    latitude  = Math.atan num/denom\r\n    longitude = Math.atan Y/X\r\n    N = getN latitude\r\n    altitude  = (p / Math.cos(latitude)) - N\r\n\r\n    if (X < 0 and Y < 0) then longitude -= Math.PI\r\n    if (X < 0 and Y > 0) then longitude += Math.PI\r\n\r\n    [latitude, longitude, altitude]\r\n\r\ngetN = (latitude) ->\r\n    sinlatitude = Math.sin latitude\r\n    denom = Math.sqrt 1-e*e*sinlatitude*sinlatitude\r\n    a / denom\r\n\r\nprint [-2694044.411163704, -4266368.805505009, 3888310.602231939  ]\r\nprint project(37.8043722, -122.2708026, 0.0)\r\n"
  ]
}