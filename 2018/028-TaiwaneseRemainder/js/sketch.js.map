{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "steps = 1\r\n\r\nbuttons = []\r\nclocks = []\r\ngame = null\r\n\r\nRED   = \"#F00\"\r\nGREEN = \"#0F0\"\r\nBLACK = \"#000\"\r\nWHITE = \"#FFF\"\r\n\r\nsetup = -> \r\n\tcreateCanvas 600,windowHeight\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 64\r\n\tbuttons.push new Button 'Steps:',400,50,64 \r\n\tbuttons.push new Button 'reset',400,150,64, ->\r\n\t\tif @enabled and 50 > dist mouseX,mouseY,@x,@y\r\n\t\t\tgame.totalSteps = 0 \r\n\t\t\tgame.totalPoints = 0\r\n\t\t\tclock.count = 0 for clock in clocks\t\t\t\t \r\n\tbuttons.push new Button 'ok',400,250,64, -> \r\n\t\tif @enabled and 50 > dist mouseX,mouseY,@x,@y\r\n\t\t\tif steps==game.totalSteps and game.totalPoints==game.total then newGame 1\r\n\t\t\tif steps==game.totalSteps then newGame 1\r\n\t\t\telse newGame -1\r\n\tbuttons.push new Button 'All clocks green',400,380,24\r\n\tbuttons.push new Button 'Use all steps',400,410,24\r\n\tbuttons.push new Button 'Link',400,440,24,->\r\n\t\tif 50 > dist mouseX,mouseY,@x,@y\r\n\t\t\twindow.location.href = game.url\r\n\r\n\tprint window.location.href\r\n\tif '?' in window.location.href \r\n\t\tparams = getParameters()\r\n\t\tprint params\r\n\t\tprint _.size params\r\n\t\tif 3 == _.size params\r\n\t\t\tgame =\r\n\t\t\t\tsteps : parseInt params.steps\r\n\t\t\t\tticks : (parseInt r for r in params.ticks.split ',')\r\n\t\t\t\trests : (parseInt r for r in params.rests.split ',') \r\n\t\t\t\turl : window.location.href\r\n\t\t\tprint game \r\n\t\t\tnewGame1()\r\n\t\t\treturn\r\n\tnewGame 0\r\n\r\nclass Button\r\n\tconstructor : (@txt,@x,@y,@size,@f=->) -> @enabled=false\r\n\tdraw : ->\r\n\t\tif @enabled then fill WHITE else fill BLACK\r\n\t\ttextSize @size\r\n\t\ttext @txt,@x,@y\r\n\r\nclass Clock\r\n\tconstructor : (@rests, @ticks, @x, @y) -> \r\n\t\t@count = 0\r\n\tdraw : ->\r\n\t\tpush()\r\n\t\ttranslate @x,@y\r\n\t\tsw 2\r\n\t\ttwelve = game.totalPoints % @ticks == @rests \r\n\t\tfill if twelve then GREEN else RED\r\n\t\tstroke WHITE\r\n\t\tcircle 0,0,50\r\n\t\tfill if twelve then BLACK else WHITE\r\n\t\tsw 1\r\n\t\ttextSize 40\r\n\t\ttext @ticks,0,0\r\n\r\n\t\t# subtract\r\n\t\tfill if @count > 0 then WHITE else BLACK\r\n\t\tstroke if @count > 0 then WHITE else BLACK\r\n\t\ttext @count, 100,0\r\n\t\t\r\n\t\trotate radians -90 -@rests*360/@ticks\r\n\t\tstroke WHITE\r\n\t\tfor j in range @ticks\r\n\t\t\tsw 7\r\n\t\t\tpoint 50,0\r\n\t\t\tsw 5\r\n\t\t\tif j == game.totalPoints % @ticks then\tline 25,0,40,0\r\n\t\t\trotate radians 360/@ticks\r\n\t\tpop()\r\n\r\nokidoki = ->\r\n\tif game.totalSteps != steps then return false \r\n\tfor i in range game.ticks.length\r\n\t\tif game.totalPoints % game.ticks[i] != game.rests[i] then return false\r\n\ttrue\r\n\r\nnewGame = (delta) ->\r\n\tsteps += delta\r\n\tif steps < 1 then steps = 1\r\n\tgame = createProblem steps\r\n\tnewGame1()\r\n\r\nnewGame1 = ->\r\n\tprint game.steps\r\n\tprint \"[\"+game.ticks.toString()+\"]\"\r\n\tprint \"[\"+game.rests.toString()+\"]\"\r\n\tprint ''\r\n\tgame.totalSteps = 0\r\n\tgame.totalPoints = 0\r\n\r\n\tclocks = []\r\n\tfor i in range game.ticks.length\r\n\t\tclock = new Clock game.rests[i], game.ticks[i], 60, 60+110*i\r\n\t\tclock.f = -> \r\n\t\t\tif 50 > dist mouseX,mouseY,@x,@y  \r\n\t\t\t\tgame.totalPoints += @ticks\r\n\t\t\t\tgame.totalSteps++\r\n\t\t\t\t@count++\r\n\t\t\telse if @count > 0 and 50 > dist mouseX,mouseY,@x+100,@y\r\n\t\t\t\tgame.totalPoints -= @ticks\r\n\t\t\t\tgame.totalSteps--\r\n\t\t\t\t@count--\r\n\t\tclocks.push clock\r\n\txdraw()\r\n\r\n\r\ninfo = ->\r\n\tbuttons[0].txt = 'steps: ' + (steps - game.totalSteps)\r\n\tbuttons[1].enabled = game.totalSteps > 0\r\n\tbuttons[2].enabled = okidoki()\r\n\tfor button in buttons\r\n\t\tbutton.draw() \r\n\r\nxdraw = ->\r\n\tbg 0.5\r\n\tinfo()\r\n\tfor c in clocks\r\n\t\tc.draw() \r\n\r\nmousePressed = ->\r\n\tfor obj in buttons.concat clocks\r\n\t\tobj.f() \r\n\txdraw()"
  ]
}