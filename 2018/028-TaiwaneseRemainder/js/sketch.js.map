{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "buttons = []\r\nclocks = []\r\ngame = {steps : 1}\r\nN = 60\r\n\r\nRED   = \"#F00\"\r\nGREEN = \"#0F0\"\r\nBLACK = \"#000\"\r\nWHITE = \"#FFF\"\r\n\r\nreset = ->\r\n\tgame.totalSteps = 0 \r\n\tgame.totalPoints = 0\r\n\tfor clock in clocks\r\n\t\tclock.reset()\r\n\r\nok = ->\r\n\tif @enabled \r\n\t\tif game.steps==game.totalSteps and game.totalPoints==game.total then newGame 1\r\n\t\tif game.steps==game.totalSteps then newGame 1\r\n\t\telse newGame -1\r\n\r\nsetup = -> \r\n\tcreateCanvas 600,windowHeight\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 64\r\n\tangleMode DEGREES\r\n\tbuttons.push new Button 'Steps:',400,60,64 \r\n\tbuttons.push new Button 'reset',400,170,64, reset\r\n\tbuttons.push new Button 'ok',400,280,64, ok\r\n\tbuttons.push new Button 'All clocks green',400,380,24\r\n\tbuttons.push new Button 'Use all steps',400,410,24\r\n\tbuttons.push new Button 'Share via clipboard',400,440,24, -> \r\n\t\tcopyToClipboard game.url\r\n\t\t@enabled = false \r\n\r\n\tbuttons[5].enabled = true\r\n\r\n\tif '?' in window.location.href \r\n\t\tparams = getParameters()\r\n\t\tif 3 == _.size params\r\n\t\t\tgame =\r\n\t\t\t\tsteps : parseInt params.steps\r\n\t\t\t\tticks : (parseInt r for r in params.ticks.split ',')\r\n\t\t\t\trests : (parseInt r for r in params.rests.split ',') \r\n\t\t\t\turl : window.location.href\r\n\t\t\tnewGame1()\r\n\t\t\treturn\r\n\tnewGame 0\r\n\r\nclass Button\r\n\tconstructor : (@txt,@x,@y,@size,@f=->) -> @enabled=false\r\n\tdraw : ->\r\n\t\tfill if @enabled then WHITE else BLACK\r\n\t\ttextSize @size\r\n\t\ttext @txt,@x,@y\r\n\r\nclass Clock\r\n\tconstructor : (@rest, @tick, @x, @y) -> @reset()\r\n\r\n\treset : ->\r\n\t\t@count = 0 \r\n\t\t@value = -@rest %% @tick\r\n\t\t@oldValue = @value \r\n\t\t@delta = 0\r\n\t\t@n = N\r\n\r\n\tdraw : ->\r\n\t\tpush()\r\n\t\ttranslate @x,@y\r\n\t\tsw 2\r\n\t\ttwelve = game.totalPoints % @tick == @rest\r\n\t\tfill if twelve then GREEN else RED\r\n\t\tstroke WHITE\r\n\t\tcircle 0,0,50\r\n\t\tfill if twelve then BLACK else WHITE\r\n\t\tsw 1\r\n\t\ttextSize 40\r\n\t\ttext @tick,0,0\r\n\r\n\t\t# subtract\r\n\t\tfill   if @count > 0 then WHITE else BLACK\r\n\t\tstroke if @count > 0 then WHITE else BLACK\r\n\t\ttext @count,100,0\r\n\t\t\r\n\t\tif @n < N then @n++\t\t\r\n\t\trotate -90 + (@n / N * @delta) * 360 / @tick\r\n\r\n\t\tstroke WHITE\r\n\t\tfor j in range @tick\r\n\t\t\tsw 7\r\n\t\t\tpoint 50,0\r\n\t\t\tsw 5\r\n\t\t\tif j == @oldValue then line 25,0,40,0\r\n\t\t\trotate 360/@tick\r\n\t\tpop()\r\n\r\n\tadd : (delta) ->\r\n\t\t@delta = delta \r\n\t\t@oldValue = @value\r\n\t\t@value = (@value + delta) %% @tick\r\n\t\t@n = 0\r\n\r\n\tmove : (step) ->\r\n\t\tif @count+step < 0 then return \r\n\t\tbuttons[5].enabled = true \r\n\t\ttick = step * @tick\r\n\t\tgame.totalPoints += tick\r\n\t\tgame.totalSteps += step\r\n\t\t@count += step\r\n\t\tfor clock in clocks\r\n\t\t\tclock.add tick\t\t\r\n\r\nokidoki = ->\r\n\tif game.totalSteps != game.steps then return false \r\n\tfor clock in clocks\r\n\t\tif game.totalPoints % clock.tick != clock.rest then return false\r\n\ttrue\r\n\r\nnewGame = (delta) ->\r\n\tgame.steps += delta\r\n\tif game.steps < 1 then game.steps = 1\r\n\tgame = createProblem game.steps\r\n\tnewGame1()\r\n\r\nnewGame1 = ->\r\n\tprint \"#{game.steps}, [#{game.ticks}], [#{game.rests}]\"\r\n\treset()\r\n\tclocks = []\r\n\tfor i in range game.ticks.length\r\n\t\tclock = new Clock game.rests[i], game.ticks[i], 60, 60+110*i\r\n\t\tclocks.push clock\r\n\t\tclock.forward  = -> @move  1\r\n\t\tclock.backward = -> @move -1\r\n\r\ninfo = ->\r\n\tbuttons[0].txt = 'steps: ' + (game.steps - game.totalSteps)\r\n\tbuttons[1].enabled = game.totalSteps > 0\r\n\tbuttons[2].enabled = okidoki()\r\n\tbutton.draw() for button in buttons\r\n\r\ndraw = ->\r\n\tbg 0.5\r\n\tinfo()\r\n\tclock.draw() for clock in clocks\r\n\r\nmousePressed = ->\r\n\tfor b in buttons\r\n\t\tif 50 > dist mouseX,mouseY,b.x,b.y then b.f() \r\n\tfor c in clocks\r\n\t\tif 50 > dist mouseX,mouseY,c.x,    c.y then c.forward()\r\n\t\tif 50 > dist mouseX,mouseY,c.x+100,c.y then c.backward()\r\n"
  ]
}