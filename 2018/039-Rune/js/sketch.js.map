{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "halfCircle = (x0,y0,radius,cr,cg,cb,group) ->\r\n\tp = r.polygon x0,y0,group\r\n\tp.fill cr,cg,cb\r\n\tfor v in range 0,190,10\r\n\t\tx = radius*Math.cos Rune.radians v\r\n\t\ty = radius*Math.sin Rune.radians v\r\n\t\tp.lineTo x,y\r\n\tp\r\n\r\ngroup = null\r\n\r\nr = new Rune\r\n\tcontainer: \"body\"\r\n\twidth: 600\r\n\theight: 600\r\n\r\ngroup = r.group 300,300\r\nc = r.circle 0,0,200,group\r\nc.fill 0,255,0\r\n\r\nfor i in range 4\r\n\tx = 200 * Math.cos Rune.radians 90*i\r\n\ty = 200 * Math.sin Rune.radians 90*i\r\n\thalfCircle x,y,-50,255,255,0,group\r\n\thalfCircle x,y,+50,255,  0,0,group\r\n\r\ndist = (x1,y1,x2,y2) ->\r\n\tdx = x1-x2\r\n\tdy = y1-y2\r\n\tMath.sqrt(dx*dx+dy*dy)\r\n\r\nr.on 'update', =>\r\n\t{x,y,rotation} = group.state\r\n\tgroup.rotate rotation+0.1,x,y\r\n\tfor child,i in group.children\r\n\t\tif i>0\r\n\t\t\t{x,y,rotation} = child.state\r\n\t\t\tchild.rotate rotation-0.2,x,y\r\n\r\nstagepos = (child) -> \r\n\tlst = []\r\n\tcurrent = child\r\n\twhile current\r\n\t\tlst.unshift current.state\r\n\t\tcurrent = current.parent\r\n\tvec = new Rune.Vector 0,0\t\r\n\trot = 0\r\n\tfor {x,y,rotation} in lst\r\n\t\tv1 = new Rune.Vector x, y\r\n\t\tv2 = v1.rotate rot\r\n\t\trot = rotation\r\n\t\tvec = vec.add v2\r\n\tvec\r\n\r\ninside = (v, vs) ->\r\n\tres = false\r\n\tlst = range vs.length\r\n\tlst.unshift lst.pop()\r\n\tfor j,i in lst\r\n\t\txi = vs[i].x\r\n\t\tyi = vs[i].y\r\n\t\txj = vs[j].x\r\n\t\tyj = vs[j].y\r\n\t\tintersect = ((yi > v.y) != (yj > v.y)) and (v.x < (xj - xi) * (v.y - yi) / (yj - yi) + xi)\r\n\t\tif intersect then res = !res\r\n\tres\r\n\r\ncontains = (child, m) ->\r\n\tp2 = stagepos child\r\n\tp3 = m.sub p2\r\n\tp4 = p3.rotate -group.state.rotation-child.state.rotation\r\n\tinside p4, child.state.vectors\r\n\r\nr.el.addEventListener 'mousedown', (mouse) ->\t\r\n\tm = new Rune.Vector mouse.x,mouse.y\r\n\tfor child,i in group.children\r\n\t\tif i > 0 \r\n\t\t\tchild.fill if contains child, m then 0 else 255\r\n\r\nr.play()"
  ]
}