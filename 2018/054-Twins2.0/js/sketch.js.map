{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# fungerar för nämnare <= 10\r\n\r\nb = null\r\nlevel = null\r\nSize = null\r\nmsg = [0,0]\r\nmsg2 = [0,0]\r\nmode = 4\r\nsums = []\r\n\r\nf = (n,a,b,base=10) -> g n,(a/b).toString base\r\ng = (n,s) ->\r\n\tif s.length < n then return [s,'']\r\n\ts = s.slice 0,s.length-1\r\n\tif '.' not in s then return [s,'']  \r\n\t[integer,mantissa] = s.split '.'\r\n\tres = integer + '.'\r\n\r\n\tfor i in range s.length\r\n\t\tp = pattern mantissa.slice i\r\n\t\tif p.length>0 then return [res+mantissa.slice(0,i), p]\r\n\t[res,mantissa]\r\n\r\ngcd = (x, y) -> if y == 0 then x else gcd y, x % y\r\n\r\npattern = (s) ->\r\n\tfor antal in range 1,13\r\n\t\tok = true\r\n\t\tp = s.slice 0,antal\r\n\t\tif 2*antal > s.length then ok = false \r\n\t\tfor j in range s.length // antal\r\n\t\t\tq = s.slice j*antal,(j+1)*antal \r\n\t\t\tif p != q then ok = false\r\n\t\tif ok then return p\r\n\t''\r\n\r\nmakeGame = ->\r\n\tlevel = 1\r\n\r\n\tSize = 4+level//4 \r\n\tif Size>12 then Size=12\r\n\tSize = 4\r\n\r\n\tnumbers = (Size-2)*(Size-2)\r\n\tif numbers%2==1 then numbers -= 1\r\n\r\n\tcandidates = []\r\n\tb = new Array Size\r\n\tfor i in range Size\r\n\t\tb[i] = new Array Size\r\n\t\tfor j in range Size\r\n\t\t\tif i==j\r\n\t\t\t\tb[i][j] = []\r\n\t\t\telse\r\n\t\t\t\tb[i][j] = [i+1,j+1]\r\n\t\t\t\tcandidates.push [i+1,j+1]\r\n\r\n\tfor c1,i in candidates\r\n\t\t[n1,d1] = c1\r\n\t\tfor c2,j in candidates\r\n\t\t\t[n2,d2] = c2\r\n\t\t\tif i>j \r\n\t\t\t\td = d1*d2\r\n\t\t\t\tn = n1*d2+n2*d1\r\n\t\t\t\te = gcd n,d\r\n\t\t\t\tn //= e\r\n\t\t\t\td //= e\r\n\t\t\t\t#print n1,d1,n2,d2,n,d\r\n\t\t\t\tprint \"#{n}/#{d}\" #f(13,n,d,10), f(50,n,d,2)\r\n\r\n\tcandidates = _.shuffle candidates\r\n\tsums = []\r\n\tfor i in range candidates.length//2\r\n\t\t[n1,d1] = candidates.pop()\r\n\t\t[n2,d2] = candidates.pop()\r\n\t\td = d1*d2\r\n\t\tn = n1*d2+n2*d1\r\n\t\te = gcd n,d\r\n\t\tn //= e\r\n\t\td //= e\r\n\t\tsums.push [n,d]\r\n\t\t#print n1,d1,n2,d2,n,d\r\n\t\t#print f 13,n,d,10\r\n\t\t#print f 50,n,d,2\r\n\r\n\tmilliseconds0 = millis()\r\n\tstate = 'running'\r\n\r\nnewGame = ->\r\n\tmsg2 = sums.pop()\r\n\t#msg2 = [57,35]\r\n\r\ndisplay = (m,n,d,x,y) ->\r\n\tif m==0 then text \"#{n}/#{d}\",x,y\r\n\tif m==1 then\ttext \"DEC #{n/d}\",x,y\r\n\tif m==2 \r\n\t\t[s,t] = f 13,n,d,10\r\n\t\ttext \"DEC #{[s,t].join ''}\",x,y\r\n\t\tx0 = x+4+4*37+37*s.length\r\n\t\tif t != \"\" then line x0,y+2,x0+37*t.length,y+2\r\n\tif m==3 then\ttext \"BIN #{(n/d).toString(2)}\",20,y\r\n\tif m==4 \r\n\t\t[s,t] = f 50,n,d,2\r\n\t\ttext \"BIN #{[s,t].join ''}\",20,y\r\n\t\tx0 = x+4+4*37+37*s.length\r\n\t\tif t != \"\" then line x0,y+2,x0+37*t.length,y+2\r\n\r\nsetup = ->\r\n\tcreateCanvas 1900,800\r\n\trectMode CENTER\r\n\ttextAlign CENTER,CENTER\r\n\tmakeGame()\r\n\tnewGame()\r\n\txdraw()\r\n\r\nxdraw = ->\r\n\tbg 0.5\r\n\ttextFont 'Courier'\r\n\tpush()\r\n\ttextSize 20\r\n\ttextAlign CENTER,CENTER\r\n\tsw 1\r\n\r\n\ttranslate 100,100\r\n\tfor i in range Size\r\n\t\tfor j in range Size\r\n\t\t\tsw 1\r\n\t\t\trect 40*i,40*j,40,40\r\n\t\t\tif i!=j \r\n\t\t\t\t[n,d] = b[j][i] \r\n\t\t\t\te = gcd n,d\r\n\t\t\t\tn //= e\r\n\t\t\t\td //= e\r\n\t\t\t\tif d==1 \r\n\t\t\t\t\ttext n,40*i,40*j\r\n\t\t\t\telse\r\n\t\t\t\t\ttext n,40*i,40*j-10+2\r\n\t\t\t\t\tsw 1\r\n\t\t\t\t\tline 40*i-10,40*j,40*i+10,40*j\r\n\t\t\t\t\ttext d,40*i,40*j+10+2\r\n\tpop()\r\n\r\n\ttextSize 64\r\n\ttextAlign LEFT,TOP\r\n\tsw 3\r\n\t[n,d] = msg\r\n\tif n != d then display mode,n,d,20,18\r\n\t[n,d] = msg2\r\n\tdisplay 0,n,d,20,480\r\n\tdisplay 1,n,d,20,540\r\n\tdisplay 2,n,d,20,600\r\n\tdisplay 3,n,d,20,660\r\n\tdisplay 4,n,d,20,720\r\n\r\nwithin = (i,j) -> 0 <= i < Size and 0 <= j < Size and i!=j\r\n\r\nmousePressed = ->\r\n\tj = (mouseX-100+20)//40\r\n\ti = (mouseY-100+20)//40\r\n\tmsg = [0,0]\r\n\tif within i,j\r\n\t\tmsg = b[i][j]\r\n\txdraw()"
  ]
}