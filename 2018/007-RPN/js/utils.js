"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// Generated by CoffeeScript 2.0.3
var Page, addCell, fetchData, getElem, getField, hideCanvas, isNumeric, makeButton, makeDiv, makeInput, showCanvas, storeData;

Page = function () {
  function Page(columns, init) {
    _classCallCheck(this, Page);

    this.columns = columns;
    this.init = init;
    this.table = getElem("table");
    this.actions = {};
  }

  _createClass(Page, [{
    key: "addAction",
    value: function addAction(title, f) {
      return this.actions[title] = f;
    }
  }, {
    key: "action",
    value: function action(title) {
      return this.actions[title]();
    }
  }, {
    key: "display",
    value: function display() {
      var _this = this;

      var div, elem, f, fn, i, j, len, ref, title;
      // actions
      if (this.columns === 0) {
        this.columns = _.size(this.actions);
      }
      elem = getElem('myActions');
      elem.innerHTML = "";
      div = null;
      ref = _.keys(this.actions);
      fn = function fn(f) {
        if (i % _this.columns === 0) {
          div = document.createElement("div");
        }
        div.appendChild(makeButton(title, _this.columns, f));
        if (i % _this.columns === _this.columns - 1) {
          return elem.appendChild(div);
        }
      };
      for (i = j = 0, len = ref.length; j < len; i = ++j) {
        title = ref[i];
        f = this.actions[title];
        fn(f);
      }
      elem.appendChild(div);
      this.table.innerHTML = "";
      return this.init();
    }
  }, {
    key: "addRow",
    value: function addRow(b) {
      var tr;
      tr = document.createElement("tr");
      addCell(tr, b);
      return this.table.appendChild(tr);
    }
  }]);

  return Page;
}();

storeData = function storeData(data) {
  return localStorage["007"] = JSON.stringify(data);
};

fetchData = function fetchData() {
  return JSON.parse(localStorage["007"] ? localStorage["007"] : '[]');
};

isNumeric = function isNumeric(val) {
  return val === Number(parseFloat(val));
};

getElem = function getElem(id) {
  return document.getElementById(id);
};

hideCanvas = function hideCanvas() {
  var elem;
  elem = document.getElementById('myContainer');
  return elem.style.display = 'none';
};

showCanvas = function showCanvas() {
  var elem;
  elem = document.getElementById('myContainer');
  return elem.style.display = 'block';
};

makeDiv = function makeDiv(value) {
  var b;
  b = document.createElement('div');
  b.innerHTML = value;
  return b;
};

makeInput = function makeInput(options, f) {
  var b;
  //title,value='',readonly=false
  b = document.createElement('input');
  b.id = options.title;
  if (options.value) {
    b.value = options.value;
  }
  b.placeholder = options.title;
  if (options.readonly) {
    b.setAttribute("readonly", true);
  }
  if (options.title === 'name') {
    b.autofocus = true;
  }
  b.onclick = "this.setSelectionRange(0, this.value.length)";
  (function (f) {
    return b.addEventListener("keyup", function (event) {
      if (event.keyCode === 13) {
        return f();
      }
    });
  })(f);
  return b;
};

makeButton = function makeButton(title, n, f) {
  var b;
  b = document.createElement('input');
  b.style.width = Math.floor(100 / n) + "%";
  b.style.fontSize = "100%";
  b.style.fontFamily = 'monospace';
  b.style.webkitAppearance = "none";
  b.style.borderRadius = 0;
  b.style.padding = 0;
  b.type = 'button';
  b.value = title;
  b.onclick = f;
  return b;
};

addCell = function addCell(tr, value) {
  var td;
  td = document.createElement("td");
  td.appendChild(value);
  return tr.appendChild(td);
};

getField = function getField(name) {
  var element;
  element = document.getElementById(name);
  if (element) {
    return element.value;
  } else {
    return null;
  }
};
//# sourceMappingURL=utils.js.map
