// Generated by CoffeeScript 2.3.2
var Button, DONE, HIDDEN, N, VISIBLE, alfabet, buttons, done, draw, mousePressed, newGame, setup, visible;

Button = class Button {
  constructor(title, x1, y1) {
    this.title = title;
    this.x = x1;
    this.y = y1;
    this.state = HIDDEN;
    this.w = 50;
    this.h = 50;
  }

  inside(x, y) {
    return (this.x - this.w / 2 < x && x < this.x + this.w / 2) && (this.y - this.h / 2 < y && y < this.y + this.h / 2);
  }

  draw() {
    if (this.state !== DONE) {
      rect(this.x, this.y, this.w, this.h);
    }
    if (this.state === VISIBLE) {
      return text(this.title, this.x, this.y);
    }
  }

};

N = 6;

HIDDEN = 0;

VISIBLE = 1;

DONE = 2;

done = 0;

buttons = [];

alfabet = 'AABBCC';

visible = [];

setup = function() {
  createCanvas(600, 600);
  rectMode(CENTER);
  textAlign(CENTER, CENTER);
  textSize(42);
  return newGame();
};

newGame = function() {
  var i, j, len, letter, ref, results;
  alfabet = _.shuffle(alfabet);
  buttons = [];
  done = 0;
  ref = range(N);
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    letter = alfabet[i];
    results.push(buttons.push(new Button(letter, 100 + 50 * i, 100)));
  }
  return results;
};

draw = function() {
  var button, j, len, results;
  bg(0.5);
  results = [];
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    results.push(button.draw());
  }
  return results;
};

mousePressed = function() {
  var a, b, button, j, k, len, len1;
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    if (button.inside(mouseX, mouseY)) {
      if (button.state !== HIDDEN) {
        return;
      }
      button.state = VISIBLE;
      switch (visible.length) {
        case 0:
          visible.push(button);
          break;
        case 1:
          a = button;
          b = visible[0];
          if (a.title === b.title) {
            a.state = DONE;
            b.state = DONE;
            done += 2;
            visible = [];
            if (done === N) {
              newGame();
            }
          } else {
            visible.push(button);
          }
          break;
        case 2:
          for (k = 0, len1 = visible.length; k < len1; k++) {
            b = visible[k];
            b.state = HIDDEN;
          }
          visible = [button];
      }
    }
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxNQUFBLEVBQUEsQ0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLElBQUEsRUFBQSxJQUFBLEVBQUEsWUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUE7O0FBQU0sU0FBTixNQUFBLE9BQUE7RUFDQyxXQUFjLE1BQUEsSUFBQSxJQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBTSxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFDekIsSUFBQyxDQUFBLEtBQUQsR0FBUztJQUNULElBQUMsQ0FBQSxDQUFELEdBQUc7SUFDSCxJQUFDLENBQUEsQ0FBRCxHQUFHO0VBSFU7O0VBSWQsTUFBUyxDQUFDLENBQUQsRUFBRyxDQUFILENBQUE7V0FDUixDQUFBLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFOLEdBQVMsQ0FBVCxJQUFTLENBQVQsR0FBYSxJQUFDLENBQUEsQ0FBRCxHQUFHLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBbkIsQ0FBQSxJQUF5QixDQUFBLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFOLEdBQVMsQ0FBVCxJQUFTLENBQVQsR0FBYSxJQUFDLENBQUEsQ0FBRCxHQUFHLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBbkI7RUFEakI7O0VBRVQsSUFBTyxDQUFBLENBQUE7SUFDTixJQUFHLElBQUMsQ0FBQSxLQUFELEtBQVEsSUFBWDtNQUFxQixJQUFBLENBQUssSUFBQyxDQUFBLENBQU4sRUFBUSxJQUFDLENBQUEsQ0FBVCxFQUFXLElBQUMsQ0FBQSxDQUFaLEVBQWMsSUFBQyxDQUFBLENBQWYsRUFBckI7O0lBQ0EsSUFBRyxJQUFDLENBQUEsS0FBRCxLQUFRLE9BQVg7YUFBd0IsSUFBQSxDQUFLLElBQUMsQ0FBQSxLQUFOLEVBQVksSUFBQyxDQUFBLENBQWIsRUFBZSxJQUFDLENBQUEsQ0FBaEIsRUFBeEI7O0VBRk07O0FBUFI7O0FBV0EsQ0FBQSxHQUFJOztBQUNKLE1BQUEsR0FBUzs7QUFDVCxPQUFBLEdBQVU7O0FBQ1YsSUFBQSxHQUFPOztBQUVQLElBQUEsR0FBTzs7QUFDUCxPQUFBLEdBQVU7O0FBQ1YsT0FBQSxHQUFVOztBQUNWLE9BQUEsR0FBVTs7QUFFVixLQUFBLEdBQVEsUUFBQSxDQUFBLENBQUE7RUFDUCxZQUFBLENBQWEsR0FBYixFQUFpQixHQUFqQjtFQUNBLFFBQUEsQ0FBUyxNQUFUO0VBQ0EsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7RUFDQSxRQUFBLENBQVMsRUFBVDtTQUNBLE9BQUEsQ0FBQTtBQUxPOztBQU9SLE9BQUEsR0FBVSxRQUFBLENBQUEsQ0FBQTtBQUNULE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEdBQUEsRUFBQTtFQUFBLE9BQUEsR0FBVSxDQUFDLENBQUMsT0FBRixDQUFVLE9BQVY7RUFDVixPQUFBLEdBQVU7RUFDVixJQUFBLEdBQU87QUFDUDtBQUFBO0VBQUEsS0FBQSxxQ0FBQTs7SUFDQyxNQUFBLEdBQVMsT0FBUSxDQUFBLENBQUE7aUJBQ2pCLE9BQU8sQ0FBQyxJQUFSLENBQWEsSUFBSSxNQUFKLENBQVcsTUFBWCxFQUFrQixHQUFBLEdBQUksRUFBQSxHQUFHLENBQXpCLEVBQTJCLEdBQTNCLENBQWI7RUFGRCxDQUFBOztBQUpTOztBQVFWLElBQUEsR0FBTyxRQUFBLENBQUEsQ0FBQTtBQUNOLE1BQUEsTUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUE7RUFBQSxFQUFBLENBQUcsR0FBSDtBQUNBO0VBQUEsS0FBQSx5Q0FBQTs7aUJBQ0MsTUFBTSxDQUFDLElBQVAsQ0FBQTtFQURELENBQUE7O0FBRk07O0FBS1AsWUFBQSxHQUFlLFFBQUEsQ0FBQSxDQUFBO0FBQ2QsTUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtFQUFBLEtBQUEseUNBQUE7O0lBQ0MsSUFBRyxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQWQsRUFBcUIsTUFBckIsQ0FBSDtNQUNDLElBQUcsTUFBTSxDQUFDLEtBQVAsS0FBZ0IsTUFBbkI7QUFBK0IsZUFBL0I7O01BQ0EsTUFBTSxDQUFDLEtBQVAsR0FBZTtBQUNmLGNBQU8sT0FBTyxDQUFDLE1BQWY7QUFBQSxhQUNNLENBRE47VUFFRSxPQUFPLENBQUMsSUFBUixDQUFhLE1BQWI7QUFESTtBQUROLGFBR00sQ0FITjtVQUlFLENBQUEsR0FBSTtVQUNKLENBQUEsR0FBSSxPQUFRLENBQUEsQ0FBQTtVQUNaLElBQUcsQ0FBQyxDQUFDLEtBQUYsS0FBVyxDQUFDLENBQUMsS0FBaEI7WUFDQyxDQUFDLENBQUMsS0FBRixHQUFVO1lBQ1YsQ0FBQyxDQUFDLEtBQUYsR0FBVTtZQUNWLElBQUEsSUFBUTtZQUNSLE9BQUEsR0FBUTtZQUNSLElBQUcsSUFBQSxLQUFNLENBQVQ7Y0FBZ0IsT0FBQSxDQUFBLEVBQWhCO2FBTEQ7V0FBQSxNQUFBO1lBT0MsT0FBTyxDQUFDLElBQVIsQ0FBYSxNQUFiLEVBUEQ7O0FBSEk7QUFITixhQWNNLENBZE47VUFlRSxLQUFBLDJDQUFBOztZQUNDLENBQUMsQ0FBQyxLQUFGLEdBQVU7VUFEWDtVQUVBLE9BQUEsR0FBVSxDQUFDLE1BQUQ7QUFqQlosT0FIRDs7RUFERDtBQURjIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQnV0dG9uXHJcblx0Y29uc3RydWN0b3IgOiAoQHRpdGxlLEB4LEB5KSAtPiBcclxuXHRcdEBzdGF0ZSA9IEhJRERFTlxyXG5cdFx0QHc9NTBcclxuXHRcdEBoPTUwXHJcblx0aW5zaWRlIDogKHgseSkgLT5cclxuXHRcdEB4LUB3LzI8IHggPCBAeCtAdy8yIGFuZCBAeS1AaC8yPCB5IDwgQHkrQGgvMlxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0aWYgQHN0YXRlIT1ET05FIHRoZW4gcmVjdCBAeCxAeSxAdyxAaFxyXG5cdFx0aWYgQHN0YXRlPT1WSVNJQkxFIHRoZW4gdGV4dCBAdGl0bGUsQHgsQHlcclxuXHJcbk4gPSA2XHJcbkhJRERFTiA9IDBcclxuVklTSUJMRSA9IDFcclxuRE9ORSA9IDJcclxuXHJcbmRvbmUgPSAwXHJcbmJ1dHRvbnMgPSBbXVxyXG5hbGZhYmV0ID0gJ0FBQkJDQydcclxudmlzaWJsZSA9IFtdXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDYwMCw2MDBcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdHRleHRTaXplIDQyXHJcblx0bmV3R2FtZSgpXHJcblxyXG5uZXdHYW1lID0gLT5cclxuXHRhbGZhYmV0ID0gXy5zaHVmZmxlIGFsZmFiZXRcclxuXHRidXR0b25zID0gW11cclxuXHRkb25lID0gMFxyXG5cdGZvciBpIGluIHJhbmdlIE5cclxuXHRcdGxldHRlciA9IGFsZmFiZXRbaV1cclxuXHRcdGJ1dHRvbnMucHVzaCBuZXcgQnV0dG9uIGxldHRlciwxMDArNTAqaSwxMDBcclxuXHJcbmRyYXcgPSAtPlxyXG5cdGJnIDAuNVxyXG5cdGZvciBidXR0b24gaW4gYnV0dG9uc1xyXG5cdFx0YnV0dG9uLmRyYXcoKVxyXG5cclxubW91c2VQcmVzc2VkID0gLT5cclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGlmIGJ1dHRvbi5pbnNpZGUgbW91c2VYLG1vdXNlWVxyXG5cdFx0XHRpZiBidXR0b24uc3RhdGUgIT0gSElEREVOIHRoZW4gcmV0dXJuIFxyXG5cdFx0XHRidXR0b24uc3RhdGUgPSBWSVNJQkxFXHJcblx0XHRcdHN3aXRjaCB2aXNpYmxlLmxlbmd0aFxyXG5cdFx0XHRcdHdoZW4gMFxyXG5cdFx0XHRcdFx0dmlzaWJsZS5wdXNoIGJ1dHRvblx0XHRcdFx0XHRcclxuXHRcdFx0XHR3aGVuIDFcclxuXHRcdFx0XHRcdGEgPSBidXR0b25cclxuXHRcdFx0XHRcdGIgPSB2aXNpYmxlWzBdXHJcblx0XHRcdFx0XHRpZiBhLnRpdGxlID09IGIudGl0bGVcclxuXHRcdFx0XHRcdFx0YS5zdGF0ZSA9IERPTkVcclxuXHRcdFx0XHRcdFx0Yi5zdGF0ZSA9IERPTkVcclxuXHRcdFx0XHRcdFx0ZG9uZSArPSAyXHJcblx0XHRcdFx0XHRcdHZpc2libGU9W11cclxuXHRcdFx0XHRcdFx0aWYgZG9uZT09TiB0aGVuIG5ld0dhbWUoKVxyXG5cdFx0XHRcdFx0ZWxzZVxyXG5cdFx0XHRcdFx0XHR2aXNpYmxlLnB1c2ggYnV0dG9uXHRcdFx0XHRcdFxyXG5cdFx0XHRcdHdoZW4gMlxyXG5cdFx0XHRcdFx0Zm9yIGIgaW4gdmlzaWJsZVxyXG5cdFx0XHRcdFx0XHRiLnN0YXRlID0gSElEREVOXHJcblx0XHRcdFx0XHR2aXNpYmxlID0gW2J1dHRvbl1cclxuIl19
//# sourceURL=C:\Lab\2018\095-Memory\coffee\sketch.coffee