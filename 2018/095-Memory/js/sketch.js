'use strict';

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// Generated by CoffeeScript 2.3.2
var Button, DONE, HIDDEN, N, VISIBLE, alfabet, buttons, done, draw, mousePressed, newGame, setup, visible;

Button = function () {
  function Button(title, x1, y1) {
    _classCallCheck(this, Button);

    this.title = title;
    this.x = x1;
    this.y = y1;
    this.state = HIDDEN;
    this.w = 50;
    this.h = 50;
  }

  _createClass(Button, [{
    key: 'inside',
    value: function inside(x, y) {
      return this.x - this.w / 2 < x && x < this.x + this.w / 2 && this.y - this.h / 2 < y && y < this.y + this.h / 2;
    }
  }, {
    key: 'draw',
    value: function draw() {
      if (this.state !== DONE) {
        rect(this.x, this.y, this.w, this.h);
      }
      if (this.state === VISIBLE) {
        return text(this.title, this.x, this.y);
      }
    }
  }]);

  return Button;
}();

N = 6;

HIDDEN = 0;

VISIBLE = 1;

DONE = 2;

done = 0;

buttons = [];

alfabet = 'AABBCC';

visible = [];

setup = function setup() {
  createCanvas(600, 600);
  rectMode(CENTER);
  textAlign(CENTER, CENTER);
  textSize(42);
  return newGame();
};

newGame = function newGame() {
  var i, j, len, letter, ref, results;
  alfabet = _.shuffle(alfabet);
  buttons = [];
  done = 0;
  ref = range(N);
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    letter = alfabet[i];
    results.push(buttons.push(new Button(letter, 100 + 50 * i, 100)));
  }
  return results;
};

draw = function draw() {
  var button, j, len, results;
  bg(0.5);
  results = [];
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    results.push(button.draw());
  }
  return results;
};

mousePressed = function mousePressed() {
  var a, b, button, j, k, len, len1;
  for (j = 0, len = buttons.length; j < len; j++) {
    button = buttons[j];
    if (button.inside(mouseX, mouseY)) {
      if (button.state !== HIDDEN) {
        return;
      }
      button.state = VISIBLE;
      switch (visible.length) {
        case 0:
          visible.push(button);
          break;
        case 1:
          a = button;
          b = visible[0];
          if (a.title === b.title) {
            a.state = DONE;
            b.state = DONE;
            done += 2;
            visible = [];
            if (done === N) {
              newGame();
            }
          } else {
            visible.push(button);
          }
          break;
        case 2:
          for (k = 0, len1 = visible.length; k < len1; k++) {
            b = visible[k];
            b.state = HIDDEN;
          }
          visible = [button];
      }
    }
  }
};
//# sourceMappingURL=sketch.js.map
