{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "nodes = {}\r\nperson = null\r\npage = 'Town'\r\nbuttons = []\r\nmessages = []\r\n\r\nrandint = (a,b) -> int a + random(b-a)\r\np = (s) -> messages.push s\r\n\r\nclass Button \r\n\tconstructor : (@command,@x,@y,@w,@h) ->\r\n\tinside : (mx,my) -> @x < mx+@w/2 < @x+@w and @y < my+@h/2 < @y+@h \r\n\tshow : -> \t\t\r\n\t\trect @x,@y,@w,@h\r\n\t\ttext @command,@x,@y\r\n\r\nclass Node\r\n\tconstructor : (@name,@commands) ->\r\n\tbuy : (name,p1,p2) ->\r\n\tenter : ->\r\n\texecute : (command) ->\r\n\t\tpage = command\r\n\t\tnodes[page].enter()\r\n\r\nclass Person\r\n\tconstructor : (@health=100, @sword=0, @coins=100, @points=0, @ax=0) ->\r\n\r\nclass Enemy\r\n\tconstructor : ->\r\n\t\t@name = _.sample [\"Giant Spider\",\"Zombie\",\"Ghost\",\"Pizza Rat\"]\r\n\t\t@punch = randint 1,9\r\n\t\t@kick = 10 - @punch\r\n\t\t@health = randint(20,40) + person.points * 0.1\r\n\r\n\tattack : ->\r\n\t\tif @health > 0\r\n\t\t\thit = randint(1,3) + randint(1,3)\r\n\t\t\tp \"The #{@name} attacks You!\"\r\n\t\t\tperson.health -= hit\r\n\t\t\tperson.points += hit\r\n\t\telse\r\n\t\t\tp 'You have defeated the {@name}!'\r\n\t\t\tperson.points += 10\r\n\t\t\tperson.coins += randint 25,50\r\n\r\nclass Market extends Node\r\n\tbuy : (name,p1,p2) ->\r\n\t\tif person.coins >= p1\r\n\t\t\tperson.coins -= p1\r\n\t\t\tperson[name] += p2\r\n\t\telse\r\n\t\t\tp \"Du har inte rÃ¥d med #{name}\"\r\n\texecute : (command) ->\r\n\t\tif command == 'Medicine' then @buy 'health', 10, 10\r\n\t\telse if command == 'Sword' then @buy 'sword', 50, 1\r\n\t\telse if command == 'Ax' then @buy 'ax', 100, 1\r\n\t\telse super command\r\n\r\nclass Shortcut extends Node\r\n\tshow : ->\tp \"#{@a} to #{@b}\"\r\n\tenter : -> if @a? then @show() else @execute 'New'\r\n\texecute : (command) ->\r\n\t\tshow = true\r\n\t\tif command == 'New'\r\n\t\t\t@a = randint 1,20\r\n\t\t\t@b = randint 1,20\r\n\t\telse if command == '+2' then @a += 2\r\n\t\telse if command == '*2' then @a *= 2\r\n\t\telse if command == '/2'\r\n\t\t\tif @a%2==0 then @a /= 2\r\n\t\telse\r\n\t\t\tsuper command\r\n\t\t\tshow = false\r\n\t\tif show then @show()\r\n\r\nclass Place extends Node\r\n\texecute : (command) ->\r\n\t\tif command == 'Punch' then @punch()\r\n\t\telse if command == 'Kick' then @kick()\r\n\t\telse if command == 'Slash' then\t@slash()\r\n\t\telse if command == 'Ax' then @ax()\r\n\t\telse super command\r\n\r\n\tenter : ->\r\n\t\tif 0 == randint 0, 1\r\n\t\t\t@enemy = new Enemy()\r\n\t\t\tp \"There is an #{@enemy.name} here\"\r\n\t\telse\r\n\t\t\t@enemy = null\r\n\t\t\tp 'There is nothing here'\r\n\r\n\tpunch : -> if @enemy? then @attack 'punch',8,@enemy.punch + randint(1, 6)\r\n\tkick  : -> if @enemy? then @attack 'kick', 6, @enemy.kick + randint(1, 6)\r\n\r\n\tslash : ->\r\n\t\tif person.sword > 0\r\n\t\t\t@attack 'slash',10, 10 + person.sword * (randint(1, 6) + randint(1, 6))\r\n\t\telse\r\n\t\t\tp 'You have no sword'\r\n\r\n\tax : ->\r\n\t\tif person.ax > 0\r\n\t\t\t@attack 'ax',5, 10 + person.ax * (randint(4, 6) + randint(4, 6) + randint(4, 6))\r\n\t\telse\r\n\t\t\tp 'You have no ax'\r\n\r\n\tattack : (weapon,n,hit) ->\r\n\t\tif @enemy == null\r\n\t\t\tp 'There is nothing to attack!'\r\n\t\t\treturn\r\n\t\t@enemy.attack()\r\n\t\tif 1 == randint 1,n\r\n\t\t\tp \"Your #{weapon} missed the #{@enemy.name}!\"\r\n\t\telse\r\n\t\t\t@enemy.health -= hit\r\n\t\t\tperson.points += hit\r\n\t\t\tp \"You hit with your #{weapon}!\"\r\n\t\t\tif @enemy.health <= 0\r\n\t\t\t\tp \"The #{@enemy.name} dies\"\r\n\t\t\t\t@enemy = null\r\n\r\ndisplay = ->\r\n\tbg 0.75\r\n\r\n\tmessages.unshift ''\r\n\tmessages.unshift \"Inventory #{JSON.stringify person}\"\r\n\tmessages.unshift \"You are in the #{nodes[page].name}\"\r\n\r\n\tfor message,i in messages\r\n\t\ttext message,20,(i+4)*20\r\n\r\n\tnode = nodes[page]\r\n\tcommands = node.commands\r\n\r\n\tbuttons = []\r\n\tpush()\r\n\ttextAlign CENTER,CENTER\r\n\tfor command,i in commands.split ' '\r\n\t\tbutton =  new Button command, 100+i*100,30,100,30\r\n\t\tbutton.show()\r\n\t\tbuttons.push button\r\n\tpop()\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,600\r\n\trectMode CENTER\r\n\ttextSize 20\r\n\tperson = new Person()\r\n\tnodes.Town = new Node 'Town','Market Castle Graveyard Farm Shortcut1 Shortcut2'\r\n\tnodes.Shortcut1 = new Shortcut 'Shortcut1','New +2 *2 /2 Town'\r\n\tnodes.Shortcut2 = new Shortcut 'Shortcut2','New +2 *2 /2 Town'\r\n\tnodes.Market = new Market 'Market','Medicine Sword Ax Town'\r\n\tnodes.Castle = new Place 'Castle','Punch Kick Slash Ax Town'\r\n\tnodes.Graveyard = new Place 'Graveyard','Punch Kick Slash Ax Town'\r\n\tnodes.Farm = new Place 'Farm','Punch Kick Slash Ax Town'\r\n\tdisplay()\r\n\r\nmousePressed = ->\r\n\tmessages = []\r\n\tfor button in buttons\r\n\t\tif button.inside mouseX,mouseY\r\n\t\t\tprint 'You clicked on '+ button.command\r\n\t\t\tnode = nodes[page]\r\n\t\t\tnode.execute button.command\r\n\tdisplay()\r\n"
  ]
}