{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# https://stackoverflow.com/questions/2010892/storing-objects-in-html5-localstorage\r\nLINK = \"https://christernilsson.github.io/Lab/2018/004-GPSCompass/index.html\"\r\n\r\nWHITE = null\r\nGREEN = null\r\nBLACK = null\r\nRED   = null\r\n\r\npages = {}\r\nplace = null\r\noldName = null\r\n\r\nplaces = []\r\nplaces.push {name:'Bagarmossen Sushi',     lat:59.277560, lng:18.132739}\r\nplaces.push {name:'Bagarmossen T',         lat:59.276264, lng:18.131465}\r\nplaces.push {name:'Björkhagens Golfklubb', lat:59.284052, lng:18.145925}\r\nplaces.push {name:'Björkhagen T',          lat:59.291114, lng:18.115521}\r\nplaces.push {name:'Brotorpsbron',\t\t\t\t\t lat:59.270067, lng:18.150236}\r\nplaces.push {name:'Brotorpsstugan',        lat:59.270542, lng:18.148473}\r\nplaces.push {name:'Kärrtorp T',            lat:59.284505, lng:18.114477}\r\nplaces.push {name:'Hellasgården',          lat:59.289813, lng:18.160577}\r\nplaces.push {name:'Hem',                   lat:59.265205, lng:18.132735}\r\nplaces.push {name:'Parkeringsgran',        lat:59.274916, lng:18.161353}\r\nplaces.push {name:'Pers badställe',        lat:59.289571, lng:18.170767}\r\nplaces.push {name:'Skarpnäck T',           lat:59.266432, lng:18.133093}\r\nplaces.push {name:'Söderbysjön N Bron',    lat:59.285500, lng:18.150542}\r\nplaces.push {name:'Söderbysjön S Bron',    lat:59.279155, lng:18.149318}\r\nplaces.push {name:'Ulvsjön, Udden',        lat:59.277103, lng:18.164897}\r\n\r\nplaceIndex = 0\r\nplace = places[placeIndex]\r\n\r\nw = null \r\nh = null \r\ntrack = []\r\nbearing = 0\r\nheading_12 = 0\r\nlastObservation = 0\r\np1 = null\r\nstart = null # Starttid. Sätts vid byte av target\r\n\r\ntexts = ['','','','','','','','','','','','']\r\n\r\nstoreData = -> localStorage[\"GPSCompass\"] = JSON.stringify places\t\r\nfetchData = ->\r\n\tdata = localStorage[\"GPSCompass\"]\r\n\tif data then places = JSON.parse data \r\n\t#print 'fetchData',data\r\n\r\n# Visa vinkelavvikelse med färgton. \r\n# -180 = black\r\n#  -90 = red\r\n#    0 = white\r\n#   90 = green \r\n#  180 = black\r\ncalcColor = (delta) ->\r\n\t# -180 <= delta <= 180\r\n\tif      -180 <= delta <  -90 then res = lerpColor BLACK, RED,  (delta+180)/90\r\n\telse if  -90 <= delta <    0 then res = lerpColor RED,   WHITE,(delta+90)/90\r\n\telse if    0 <= delta <   90 then res = lerpColor WHITE, GREEN,(delta+0)/90\r\n\telse if   90 <= delta <= 180 then res = lerpColor GREEN, BLACK,(delta-90)/90\r\n\telse res = color 255,255,0,255 # yellow, error \r\n\tres.levels\r\n\r\nhideCanvas = ->\r\n\telem = document.getElementById 'myContainer'\r\n\telem.style.display = 'none'\t\t\r\n\r\nshowCanvas = ->\r\n\telem = document.getElementById 'myContainer'\r\n\telem.style.display = 'block'\r\n\r\nlocationUpdate = (position) ->\r\n\tprint 'locationUpdate', position\r\n\tp1 = \r\n\t\tlat : position.coords.latitude\r\n\t\tlng : position.coords.longitude\r\n\t\taccuracy : position.coords.accuracy # meters\r\n\t\ttimestamp : position.timestamp # milliseconds since 1970\r\n\r\n\ttrack.push p1\r\n\r\n\theading_12 = calcHeading p1,place\r\n\tlastObservation = millis()\r\n\r\n\t#texts[1] = \r\n\ttexts[1] = \"#{track.length}\"  \r\n\ttexts[6] = \"#{Math.round p1.accuracy} m\"\r\n\ttexts[8] = \"#{Math.round heading_12}°\"\r\n\ttexts[10] = \"#{Math.round distance_on_geoid p1,place} m\"\r\n\r\n\tif track.length >= 2 \r\n\t\tp0 = track[track.length-2]\r\n\t\tdt = (p1.timestamp-p0.timestamp)/1000 # seconds\r\n\t\tds = distance_on_geoid p0,p1\r\n\t\ttexts[2] = \"#{precisionRound dt,3} s\"\r\n\t\ttexts[4] = \"#{Math.round ds} m\"\r\n\t\ttexts[5] = \"#{precisionRound ds/dt,1} m/s\"\r\n\t\ttexts[9] = \"#{Math.round calcHeading p0,p1}°\"\r\n\r\nlocationUpdateFail = (error) ->\r\n\ttexts[0] = \"n/a\"\r\n\ttexts[1] = \"n/a\"\r\n\r\nnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\tenableHighAccuracy: true\r\n\tmaximumAge: 30000\r\n\ttimeout: 27000\r\n\r\nsetupCompass = ->\r\n\twindow.addEventListener \"deviceorientation\", (event) ->\r\n\t\tbearing = event.alpha\r\n\r\n\t\tif typeof event.webkitCompassHeading != \"undefined\"\r\n\t\t\tbearing = event.webkitCompassHeading # iOS non-standard\r\n\r\n\t\ttexts[0] = \"#{precisionRound (millis()-start)/1000,0} s\" # sekunder sedan start\r\n\t\ttexts[7] = \"#{Math.round (millis() - lastObservation)/1000} s\"\r\n\t\ttexts[9] = \"#{Math.round bearing}°\"\r\n\t\tdelta = calcDelta heading_12-bearing\r\n\t\ttexts[11] = \"#{Math.round delta}°\"\r\n\r\ndrawHouse = (radius) ->\r\n\tfc 1\r\n\tsc()\r\n\ttextAlign CENTER,CENTER\r\n\r\n\tfor i in range 4\r\n\t\tpush()\r\n\t\ttranslate 0,1.3*radius\r\n\t\trd 180\r\n\t\ttext \"SWNE\"[i],0,0\r\n\t\tpop()\r\n\t\trd 90\t\r\n\tpush()\r\n\r\n\tdx = 0.02 * w\r\n\tsc 0\r\n\tsw 1\r\n\tfor i in range -3,4\r\n\t\tline i*4*dx,-1.1*radius,i*4*dx,1.1*radius\r\n\r\n\tsc 1\r\n\tsw 5\r\n\tfc()\r\n\tcircle 0,0,1.1*radius\r\n\r\n\tsc 0\r\n\tsw 1\r\n\tfc 0.5\r\n\trect -dx,-0.9*radius,2*dx,1.9*radius\r\n\ttriangle -1.5*dx,-0.9*radius,0,-1.05*radius,1.5*dx,-0.9*radius\r\n\tpop()\r\n\r\ndrawNeedle = (radius) ->\r\n\ttry\r\n\t\trd -bearing\r\n\r\n\t\tsc 0\r\n\t\tsw 0.025*h\r\n\t\tline 0,-0.95*radius,0,0.95*radius\r\n\r\n\t\tsc 1\r\n\t\tsw 0.02*h\r\n\t\tline 0,0,0,0.95*radius\r\n\t\tsc 1,0,0\r\n\t\tline 0,0,0,-0.95*radius\r\n\r\n\t\tsw 0.025*h\r\n\t\tsc 0\r\n\t\tpoint 0,0\r\n\r\ndrawCompass = ->\r\n\tradius = 0.25 * w \r\n\tdelta = calcDelta heading_12-bearing\r\n\tfill calcColor delta\r\n\tsw 5\r\n\tsc 1\r\n\tpush()\r\n\ttranslate 0.5*w,0.7*h\r\n\tcircle 0,0,1.1*radius\r\n\tpush()\r\n\r\n\trd -heading_12\r\n\tdrawHouse radius\r\n\tpop()\r\n\ttextSize 0.08*h\r\n\tfc 1\r\n\tsc()\r\n\ttextAlign CENTER\r\n\ttext texts[10],0,-2*radius\r\n\ttext texts[8],0,-1.6*radius\r\n\tdrawNeedle radius\r\n\tpop()\r\n\r\ndrawTexts = ->\r\n\tfc 0.5\r\n\td = h/12\r\n\tsc 0.5\r\n\tsw 1\r\n\ttextSize 0.08*h\r\n\tfor t,i in texts\r\n\t\tx = i%2 * w\r\n\t\tif i%2==0 then textAlign LEFT else textAlign RIGHT\r\n\t\ty = d*Math.floor i/2\r\n\t\tif i not in [2,3,8,9,10,11] then text t,x,2*d+y\r\n\ttextAlign LEFT\r\n\ttext place.name,0,d\r\n\r\ndraw = ->\r\n\tbg 0\r\n\tdrawCompass()\r\n\tdrawTexts()\r\n\r\nsetup = ->\r\n\r\n\tWHITE = color 255,255,255\r\n\tGREEN = color 0,255,0\r\n\tBLACK = color 0,0,0\r\n\tRED   = color 255,0,0\r\n\r\n\ttest()\r\n\r\n\tfetchData()\r\n\r\n\tparameters = getParameters()\r\n\tif _.size(parameters) == 3 \r\n\t\tconsole.log parameters\r\n\t\tplaces.push parameters\r\n\t\tstoreData()\r\n\r\n\tstart = millis()\r\n\r\n\tc = createCanvas windowWidth,windowHeight-42\r\n\tw = width\r\n\th = height\t\r\n\r\n\tc.parent 'myContainer'\t\r\n\thideCanvas()\r\n\r\n\tsetupCompass()\r\n\r\n\tpages.List = new Page ->\r\n\t\tfor p,i in places\r\n\t\t\tdo (i) =>\r\n\t\t\t\tb = makeButton p.name, 1, => \r\n\t\t\t\t\tplace = places[i]\r\n\t\t\t\t\tpages.Nav.display()\r\n\t\t\t\tb.style.textAlign = 'left' \r\n\t\t\t\t@addRow b\t\t\r\n\tpages.List.addAction 'Add', -> pages.Add.display()\r\n\r\n\tpages.Nav = new Page -> showCanvas()\r\n\tpages.Nav.addAction 'List', -> pages.List.display()\r\n\tpages.Nav.addAction 'Map', -> window.open \"http://maps.google.com/maps?q=#{place.lat},#{place.lng}\"\r\n\tpages.Nav.addAction 'Edit', -> pages.Edit.display()\r\n\tpages.Nav.addAction 'Del', -> pages.Del.display()\r\n\tpages.Nav.addAction 'Link', -> pages.Link.display()\r\n\r\n\tpages.Edit = new Page ->\r\n\t\toldName = place.name\r\n\t\t@addRow makeInput 'name',place.name\r\n\t\t@addRow makeInput 'lat',place.lat\r\n\t\t@addRow makeInput 'lng',place.lng\r\n\t\tdocument.getElementById(\"name\").focus()\r\n\t\tdocument.getElementById(\"name\").select()\r\n\tpages.Edit.addAction 'Update', -> \r\n\t\tname = getField \"name\"\r\n\t\tlat = parseFloat getField \"lat\"\r\n\t\tlng = parseFloat getField \"lng\"\r\n\t\tif isNumeric(lat) and isNumeric(lng)\r\n\t\t\tif oldName == name # finns namnet redan?\r\n\t\t\t\tfor p in places\r\n\t\t\t\t\tif oldName == p.name\r\n\t\t\t\t\t\tp.lat = lat\r\n\t\t\t\t\t\tp.lng = lng\r\n\t\t\telse\r\n\t\t\t\tplaces = places.filter (e) => e.name != oldName\r\n\t\t\t\tplaces.push {name:name,lat:lat,lng:lng}\r\n\t\t\t\tplaces.sort (a,b) -> if a.name > b.name then 1 else -1\r\n\t\t\tstoreData()\r\n\t\t\tpages.List.display()\r\n\tpages.Edit.addAction 'Cancel', -> pages.List.display()\r\n\r\n\tpages.Add = new Page ->\r\n\t\tif track.length > 0\r\n\t\t\tlast = _.last track\r\n\t\t\tprint last \r\n\t\t\t@addRow makeInput 'name', prettyDate new Date last.timestamp\r\n\t\t\t@addRow makeInput 'lat',  last.lat\r\n\t\t\t@addRow makeInput 'lng',  last.lng\r\n\t\telse\r\n\t\t\t@addRow makeInput 'name', 'Missing'\r\n\t\t\t@addRow makeInput 'lat',  0\r\n\t\t\t@addRow makeInput 'lng',  0\r\n\t\tdocument.getElementById(\"name\").focus()\r\n\t\tdocument.getElementById(\"name\").select()\r\n\tpages.Add.addAction\t'Save', -> \r\n\t\tname = getField \"name\"\r\n\t\tlat = parseFloat getField \"lat\"\r\n\t\tlng = parseFloat getField \"lng\"\r\n\t\tif isNumeric(lat) and isNumeric(lng)\r\n\t\t\tplaces.push {name:name, lat:lat, lng:lng}\r\n\t\t\tplaces.sort (a,b) -> if a.name > b.name then 1 else -1\r\n\t\t\tstoreData()\r\n\t\t\tpages.List.display()\r\n\tpages.Add.addAction 'Cancel', -> pages.List.display()\r\n\r\n\tpages.Del = new Page -> \r\n\t\t@addRow makeInput 'name',place.name,true\r\n\t\t@addRow makeInput 'lat',place.lat,true\r\n\t\t@addRow makeInput 'lng',place.lng,true\r\n\tpages.Del.addAction 'Delete', -> \r\n\t\tplaces = places.filter (e) => e.name != place.name\r\n\t\tstoreData()\r\n\t\tpages.List.display()\r\n\tpages.Del.addAction 'Cancel', -> pages.Nav.display()\r\n\r\n\tpages.Link = new Page -> \r\n\t\t@addRow makeInput 'link', encodeURI \"#{LINK}?name=#{place.name}&lat=#{place.lat}&lng=#{place.lng}\",true\r\n\t\t@addRow makeDiv 'The Link is now on the Clipboard. Mail it to a friend.'\r\n\t\tdocument.getElementById(\"link\").focus()\r\n\t\tdocument.getElementById(\"link\").select()\r\n\t\tdocument.execCommand 'copy'\r\n\tpages.Link.addAction 'Ok', -> pages.Nav.display()\r\n\r\n\t# startsida:\r\n\tpages.List.display()\r\n\r\n"
  ]
}