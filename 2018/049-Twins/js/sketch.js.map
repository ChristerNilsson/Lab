{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "\r\n# Lägg till två stjärnor\r\n# Hantera felaktiga drag\r\n# Kunna ångra första valet.\r\n# Hantera hängning\r\n\r\nSIZE = 12\r\nTILE = 40\r\nFREE = -1\r\nN = 5\r\nb = null\r\n\r\nselected = []\r\nmessage = ''\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,800\r\n\trectMode CENTER\r\n\ttextSize 32\r\n\tmakeGame()\r\n\r\nmakeGame = ->\r\n\tcandidates = []\r\n\tfor i in range 20\r\n\t\tfor j in range 5\r\n\t\t\tcandidates.push j\r\n\tcandidates = _.shuffle candidates\r\n\r\n\tb = new Array SIZE\r\n\tfor i in range SIZE\r\n\t\tb[i] = new Array SIZE\r\n\t\tfor j in range SIZE\r\n\t\t\tif i in [0,SIZE-1] or j in [0,SIZE-1]\r\n\t\t\t\tb[i][j] = FREE\r\n\t\t\telse\r\n\t\t\t\tb[i][j] = candidates.pop()\r\n\r\ndraw = ->\r\n\tbg 1 \r\n\ttranslate TILE,TILE\r\n\ttextAlign CENTER,CENTER\r\n\tfc 1\r\n\tsc 0\r\n\tfor i in range SIZE\r\n\t\tfor j in range SIZE\r\n\t\t\tfc 0.5\r\n\t\t\tsc 0\r\n\t\t\trect TILE*i,TILE*j,TILE,TILE\r\n\t\t\tcell = b[i][j]\r\n\t\t\tif cell >= 0 \r\n\t\t\t\tfill [\"#000\",\"#f00\",\"#0f0\",\"#00f\",\"#ff0\"][cell]\r\n\t\t\t\tsc()\r\n\t\t\t\ttext b[i][j],TILE*i,TILE*j\r\n\ttext selected,10,SIZE*TILE\r\n\tfor [i,j] in selected\r\n\t\tfc 1,1,0,0.5\r\n\t\tsc()\r\n\t\tcircle TILE*i,TILE*j,TILE/2-3\r\n\r\nmousePressed = ->\r\n\t[i,j] = [(mouseX-TILE/2)//TILE,(mouseY-TILE/2)//TILE]\r\n\tif not (0 <= i <= 11 and 0 <= j <= 11) then return \r\n\tif selected.length == 0 \r\n\t\tif b[i][j] != FREE then selected.push [i,j]\r\n\telse\r\n\t\t[i1,j1] = selected[0]\r\n\t\tif i==i1 and j==j1 then return selected.pop()\r\n\t\tif b[i][j] + b[i1][j1] == 4 and (legal(i,j,i1,j1) or legal(i1,j1,i,j)) \r\n\t\t\tb[i][j] = b[i1][j1] = FREE\r\n\t\t\tselected.pop()\r\n\r\nlegal = (i0,j0,i1,j1) ->\r\n\tstart = [0,i0,j0,-1]\r\n\tcands = []\r\n\tcands.push start\r\n\treached = {}\r\n\treached[[i0,j0]] = start\r\n\twhile cands.length > 0\r\n\t\tfront = cands\r\n\t\tfront.sort (a,b) -> a[0]-b[0]\r\n\t\tcands = []\r\n\t\tfor [turns0,x0,y0,index0] in front\r\n\t\t\tfor [dx,dy],index in [[-1,0],[1,0],[0,-1],[0,1]]\r\n\t\t\t\t[x,y] = [x0+dx,y0+dy]\r\n\t\t\t\tkey = [x,y]\r\n\t\t\t\tturns = turns0\r\n\t\t\t\tif index != index0 and index0 != -1 then turns++\r\n\t\t\t\tnext = [turns,x,y,index]\r\n\t\t\t\tif x==i1 and y==j1 then return 2 >= turns\r\n\t\t\t\tif 0 <= x <= 11 and 0 <= y <= 11 \r\n\t\t\t\t\tif b[x][y]==FREE\r\n\t\t\t\t\t\tif key not of reached or reached[key][0] > next[0]\r\n\t\t\t\t\t\t\treached[key] = next\r\n\t\t\t\t\t\t\tcands.push next\r\n\tfalse"
  ]
}