"use strict";

// Generated by CoffeeScript 2.0.3
var angle, cols, curves, draw, make2DArray, rows, setup, w;

make2DArray = function make2DArray(rows, cols) {
  var arr, i, l, len, ref;
  arr = new Array(rows);
  ref = range(arr.length);
  for (l = 0, len = ref.length; l < len; l++) {
    i = ref[l];
    arr[i] = new Array(cols);
  }
  return arr;
};

angle = 0;

w = 120;

cols = null;

rows = null;

curves = null;

setup = function setup() {
  var i, j, l, len, ref, results;
  createCanvas(windowWidth, windowHeight);
  angleMode(DEGREES);
  cols = floor(width / w);
  rows = floor(height / w);
  curves = make2DArray(rows, cols);
  ref = range(rows);
  results = [];
  for (l = 0, len = ref.length; l < len; l++) {
    j = ref[l];
    results.push(function () {
      var len1, m, ref1, results1;
      ref1 = range(cols);
      results1 = [];
      for (m = 0, len1 = ref1.length; m < len1; m++) {
        i = ref1[m];
        results1.push(curves[j][i] = new Curve());
      }
      return results1;
    }());
  }
  return results;
};

draw = function draw() {
  var cx, cy, i, j, k, l, len, len1, len2, len3, m, n, o, r, ref, ref1, ref2, ref3, x, y;
  bg(0);
  r = 0.4 * w;
  noFill();
  ref = range(rows);
  for (l = 0, len = ref.length; l < len; l++) {
    j = ref[l];
    ref1 = range(cols);
    for (m = 0, len1 = ref1.length; m < len1; m++) {
      i = ref1[m];
      cy = (j + 0.5) * w;
      cx = (i + 0.5) * w;
      if (i === 0 && j === 0) {} else if (i === 0 || j === 0) {
        sw(1);
        circle(cx, cy, r);
        k = i === 0 ? j : i;
        y = r * sin(angle * k - 90);
        x = r * cos(angle * k - 90);
        if (j === 0) {
          line(cx + x, 0, cx + x, height);
        }
        if (i === 0) {
          line(0, cy + y, width, cy + y);
        }
        sw(8);
        point(cx + x, cy + y);
      } else {
        sw(1);
        stroke(255, 50);
        y = r * sin(angle * j - 90);
        x = r * cos(angle * i - 90);
        curves[j][i].addPoint(cx + x, cy + y);
        curves[j][i].show();
      }
    }
  }
  angle++;
  if (angle === 360) {
    ref2 = range(rows);
    for (n = 0, len2 = ref2.length; n < len2; n++) {
      j = ref2[n];
      ref3 = range(cols);
      for (o = 0, len3 = ref3.length; o < len3; o++) {
        i = ref3[o];
        curves[j][i].reset();
      }
    }
    return angle = 0;
  }
};
//# sourceMappingURL=sketch.js.map
