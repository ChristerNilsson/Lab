{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# file:///C:/Lab/2018/037-GPS-Shortcut/index.html?radius=50&level=3&seed=0.5&nr=1\r\n\r\n# translate, rotate och scale visade sig olämpliga här.\r\n# Bl a då det gällde att detektera krock med röda halvcirklar.\r\n\r\nRUNNING = 0\r\nREADY = 1\r\nDEAD = 2 \r\nstate = RUNNING\r\n\r\nreleased = true\r\nsystem = null\r\n\r\nrotation = 0 # degrees\r\nrotation2 = 0 # degrees\r\n\r\nxo=null # origo i mitten av skärmen\r\nyo=null\r\n\r\nSCALE = null\r\n\r\n# inparametrar\r\nparams = null\r\n#radius = null # lilla radien i meter\r\n\r\nTRACKED = 5\r\n\r\nbuttons = []\r\nhist = []\r\nposition = null # gps position in meters. \r\ntrack = [] # positions\r\n\r\na = 8\r\nb = 9\r\ncount = 0\r\nsteps = 3\r\nstart = null\r\nstopp = null\r\ndw = null\r\ndh = null\r\n\r\nclass System # hanterar GPS konvertering\r\n\tconstructor : (@lat,@lon,@w,@h) ->\r\n\t\tp0 = LatLon @lat,@lon\r\n\t\tp1 = p0.destinationPoint @h/2, 0\r\n\t\t@lat2 = p1.lat\r\n\t\tp2 = p0.destinationPoint @w/2, 90\r\n\t\t@lon2 = p2.lon\r\n\t\tp3 = p0.destinationPoint @h/2, 180\r\n\t\t@lat1 = p3.lat\r\n\t\tp4 = p0.destinationPoint @w/2, 270\r\n\t\t@lon1 = p4.lon\r\n\ttoXY : (lat,lon) ->\r\n\t\tx = round SCALE * map lon, @lon1, @lon2, -@w/2, @w/2\r\n\t\ty = round SCALE * map lat, @lat2, @lat1, -@h/2, @h/2 # turned\r\n\t\t{x,y}\r\n\ttoWGS84 : (x,y) ->\r\n\t\tlon = map x/SCALE, -@w/2, @w/2, @lon1, @lon2\r\n\t\tlat = map y/SCALE, -@h/2, @h/2, @lat1, @lat2\r\n\t\t{lat,lon}\r\n\r\nclass Text\r\n\tconstructor : (@txt,@x,@y,@r=0,@g=0,@b=0) ->\r\n\tdraw : ->\r\n\t\tfc @r,@g,@b\r\n\t\ttext @txt,@x,@y\r\n\texecute : ->\r\n\r\nclass Button\r\n\tconstructor : (@vinkel,@radius,@radius2,@txt,@r=0,@g=0,@b=0) ->\r\n\t\t@active = false\r\n\t\t@setVinkel @vinkel\r\n\t\t@setVinkel2 0\r\n\r\n\tsetVinkel : (vinkel) ->\r\n\t\t@vinkel = vinkel\r\n\t\t@x = xo + @radius * cos @vinkel\r\n\t\t@y = yo + @radius * sin @vinkel\r\n\r\n\tsetVinkel2 : (v2) -> @v2 = v2\r\n\r\n\tdraw : ->\r\n\t\tsc()\r\n\t\t@active = @inCircle()\r\n\t\tif @radius2 > 0\t\t\t\r\n\t\t\tif @radius > 0\r\n\t\t\t\tif @inZone() and state == RUNNING then state = DEAD\r\n\t\t\t\td = 2 * @radius2\r\n\t\t\t\tfc 0.75,0.75,0.75,0.5\r\n\t\t\t\tarc @x,@y,d,d,@v2,180+@v2\r\n\t\t\t\tfc 1,0,0,0.5\r\n\t\t\t\tarc @x,@y,d,d,180+@v2,@v2\r\n\t\t\telse\r\n\t\t\t\tfc 0.75\r\n\t\t\t\tcircle @x,@y,@radius2\r\n\t\tfc @r,@g,@b\r\n\r\n\t\tpush()\r\n\t\ttranslate @x,@y\r\n\t\tif params.zones and @radius>0 then rotate rotation2\r\n\t\ttext @txt,0,0\r\n\t\tpop()\r\n\r\n\t\tif @active \r\n\t\t\tfc 1,1,0,0.5 # yellow\r\n\t\t\tcircle @x,@y,@radius2\r\n\r\n\texecute : ->\r\n\t\tif @active\r\n\t\t\t@event()\r\n\t\t\tif a==b\r\n\t\t\t\tstate = READY \r\n\t\t\t\tstopp = millis()\r\n\r\n\tinCircle : -> @radius2 > dist position.x,position.y,@x,@y\r\n\r\n\tinZone : -> # the red half circle \r\n\t\tx1 = @x + @radius2 * cos rotation2-90\r\n\t\ty1 = @y + @radius2 * sin rotation2-90\r\n\t\tx2 = @x + @radius2 * cos rotation2+90\r\n\t\ty2 = @y + @radius2 * sin rotation2+90\r\n\t\tdist1 = dist position.x,position.y,x1,y1\r\n\t\tdist2 = dist position.x,position.y,x2,y2\r\n\t\t@inCircle() and dist1 < dist2 \r\n\r\nspara = (value) ->\r\n\tcount++\r\n\thist.push a\r\n\ta = value\r\n\tbuttons[3].txt = steps - count\r\n\tbuttons[4].txt = a\r\n\r\nlocationUpdate = (p) ->\r\n\treturn \r\n\tlat = p.coords.latitude\r\n\tlon = p.coords.longitude\r\n\tif system == null\r\n\t\tsystem = new System lat,lon,width,height\r\n\telse\r\n\t\tposition = system.toXY lat,lon\r\n\t\ttrack.push position\r\n\t\tif track.length > TRACKED then track.shift()\r\n\r\nlocationUpdateFail = (error) ->\r\n\r\nsetup = ->\r\n\tcreateCanvas windowWidth,windowHeight\r\n\t#createCanvas 800,800\r\n\r\n\t[xo,yo] = [width/2,height/2]\r\n\r\n\tparams = {}\r\n\tif '?' in window.location.href\r\n\t\targs = getParameters()\r\n\t\tparams.nr = args.nr\r\n\t\tparams.radius = parseInt args.radius \r\n\t\tparams.level = parseInt args.level\r\n\t\tparams.seed = parseFloat args.seed\r\n\t\tparams.rotate = args.rotate == 'true' \r\n\t\tparams.zones = args.zones == 'true' \r\n\telse\r\n\t\tparams.nr = '1'\r\n\t\tparams.radius = 50 # meter 10 20 50 100 200 500\r\n\t\tparams.level = 3\r\n\t\tparams.seed = 0.5\r\n\t\tparams.rotate = true\r\n\t\tparams.zones = true\r\n\r\n\t# calculated params\r\n\tparams.radius2 = 0.3 * params.radius\r\n\tparams.speed = if params.rotate then 1/params.radius else 0\r\n\tparams.cost = params.radius \r\n\r\n\td = new Date()\r\n\tparams.seed += 31 * d.getMonth() + d.getDate()\r\n\t[a,b] = createProblem params.level,params.seed\r\n\r\n\tSCALE = min(width,height)/params.radius/3\r\n\r\n\tposition = {x:xo, y:yo} \r\n\ttrack = [position]\r\n\r\n\tnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\t\tenableHighAccuracy: true\r\n\t\tmaximumAge: 30000\r\n\t\ttimeout: 27000\r\n\r\n\tstart = millis()\r\n\r\n\tangleMode DEGREES\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 50\r\n\tlabels = \"+2 *2 /2\".split ' '\r\n\tn = labels.length\r\n\r\n\tfor txt,i in labels\r\n\t\tbutton = new Button i*360/n,SCALE*params.radius,SCALE*params.radius2,txt\r\n\t\t#button.rotates = true\r\n\t\tbuttons.push button\r\n\tbuttons[0].event = -> spara a+2\r\n\tbuttons[1].event = -> spara a*2\r\n\tbuttons[2].event = -> if a%2==0 then spara a//2\r\n\r\n\tbuttons.push new Button 0,0,SCALE*params.radius2,steps # undo\r\n\tbuttons[3].event = ->\r\n\t\tif hist.length > 0\r\n\t\t\ta = hist.pop()\r\n\t\t\tbuttons[4].txt = a\r\n\r\n\tws = 0.4*width\r\n\ths = 0.46*height\r\n\r\n\tbuttons.push new Text a,xo-ws,yo-hs,1,0,0 # a\r\n\tbuttons.push new Text b,xo+ws,yo-hs,0,1,0 # b\r\n\tbuttons.push new Text '#'+params.nr,xo-ws,yo+hs\r\n\tbuttons.push new Text '0',xo,yo+hs # sekunder\r\n\tbuttons.push new Text '0',xo+ws,yo+hs # count\r\n\tbuttons.push new Text params.radius + 'm',xo,yo-hs # radius\r\n\r\n\tstate = RUNNING\r\n\r\ndraw = ->\r\n\tposition = {x:mouseX, y:mouseY}\r\n\ttrack = [position]\r\n\tbg 0.5\r\n\tfc()\r\n\tsc 0\r\n\tsw 1\r\n\tcircle xo,yo,SCALE*params.radius\r\n\r\n\tbuttons[3].txt = steps-hist.length \r\n\tif state==READY   then buttons[7].txt = round(stopp-start)/1000 + params.cost*count\r\n\tif state==RUNNING then buttons[7].txt = round (millis()-start)/1000 + params.cost*count\r\n\tbuttons[8].txt = count\r\n\r\n\tfor button in buttons\r\n\t\tbutton.draw()\r\n\r\n\tfc()\r\n\tsc 1,1,0\r\n\tsw 1\r\n\tfor p,i in track\r\n\t\tcircle p.x, p.y, 5*(track.length-i)\r\n\r\n\trotation = (rotation + params.speed) %% 360\r\n\trotation2 = (rotation2 - params.speed/0.3) %% 360\r\n\r\n\tfor i in range 3\r\n\t\tbutton = buttons[i]\r\n\t\tbutton.setVinkel rotation+i*120\r\n\t\tbutton.setVinkel2 rotation2\r\n\r\n\tif state == READY \r\n\t\tfc 0,1,0,0.5\r\n\t\trect 0,0,width,height\r\n\tif state == DEAD\r\n\t\tfc 1,0,0,0.5\r\n\t\trect 0,0,width,height\r\n\r\ncreateProblem = (level,seed) ->\r\n\tn = int Math.pow 2, 4+level/3 # nodes\r\n\ta = myrandom 1,n/2\r\n\tlst = [a]\r\n\ttree = [a]\r\n\tlst2 = []\r\n\tsave = (item) ->\r\n\t\tif item <= n and item not in tree\r\n\t\t\tlst2.push item\r\n\t\t\ttree.push item\r\n\tfor j in range params.level\r\n\t\tlst2 = []\r\n\t\tfor item in lst\r\n\t\t\tsave item + 2 \r\n\t\t\tsave item * 2\r\n\t\t\tif item%2 == 0 then save item / 2\r\n\t\tlst = lst2\r\n\ti = myrandom 0,lst.length\r\n\tb = lst[i]\r\n\t[a,b]\r\n\r\nmyrandom = (a,b) ->\r\n  x = 10000 * Math.sin params.seed\r\n  x = x - Math.floor(x)\r\n  int a+x*(b-a)\r\n\r\nmouseReleased = -> # to make Android work\r\n\treleased = true\r\n\tfalse\r\n\r\nmousePressed = ->\r\n\tif not released then return # to make Android work\r\n\treleased = false\r\n\tif state != RUNNING then return\r\n\tfor button in buttons\r\n\t\tbutton.execute()\r\n"
  ]
}