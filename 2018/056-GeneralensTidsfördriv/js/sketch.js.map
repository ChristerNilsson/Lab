{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# Vectorized Playing Cards 2.0 - http://sourceforge.net/projects/vector-cards/\r\n# Copyright 2015 - Chris Aguilar - conjurenation@gmail.com\r\n# Licensed under LGPL 3 - www.gnu.org/copyleft/lesser.html\r\n\r\n#  4  4  4  4  4  0  8  8  8  8  8\r\n#  5  5  5  5  5  1  9  9  9  9  9\r\n#  6  6  6  6  6  2 10 10 10 10 10\r\n#  7  7  7  7  7  3 11 11 11 11 11\r\n#    12 13 14 15    17 18 19 20\r\n\r\nSUIT = \"club heart spade diamond\".split ' '\r\nRANK = \"A 2 3 4 5 6 7 8 9 T J Q K\".split ' '\r\nOFFSETX = 468\r\nW = 263.25\r\nH = 352\r\nw = W/3\r\nh = H/3\r\nLIMIT = 2000 # Maximum steps considered before giving up.\r\n\r\nfaces = null\r\nbacks = null\r\n\r\nboard = null\r\ncards = null\r\nhist = []\r\ncands = null\r\nhash = null\r\naceCards = 4\r\noriginalBoard = null\r\nstart = null\r\ntiming = null\r\nautoShake = []\r\nshake = true\r\nN = null\r\nsrcs = null\r\ndsts = null\r\n\r\npreload = -> \r\n\tfaces = loadImage 'cards/Color_52_Faces_v.2.0.png'\r\n\tbacks = loadImage 'cards/Playing_Card_Backs.png'\r\n\r\nrange = _.range\r\n\r\ncompress = (board) ->\r\n\tfor heap in [4,5,6,7,8,9,10,11]\r\n\t\tif board[heap].length > 1\r\n\t\t\ttemp = board[heap][0]\r\n\t\t\tres = []\r\n\t\t\tfor i in range 1,board[heap].length\r\n\t\t\t\t[suit1,h1,v1] = temp\r\n\t\t\t\t[suit2,h2,v2] = board[heap][i]\r\n\t\t\t\tif suit1==suit2 and 1 == abs v1-h2\r\n\t\t\t\t\ttemp = [suit1,h1,v2]\r\n\t\t\t\telse\r\n\t\t\t\t\tres.push temp \r\n\t\t\t\t\ttemp = [suit2,h2,v2]\r\n\t\t\tres.push temp\r\n\t\t\tboard[heap] = res\r\n\r\nmakeBoard = (suits,cardsPerSequence,panelCards,wild=false)->\r\n\tN = suits\r\n\tcards = []\r\n\tfor rank in range 1,13\r\n\t\tfor suit in range suits\r\n\t\t\tcards.push [suit,rank,rank]\r\n\tcards = _.shuffle cards\r\n\r\n\tboard = []\r\n\tfor i in range 20\r\n\t\tboard.push []\r\n\r\n\tfor suit,heap in range 4 \r\n\t\tif heap < suits\r\n\t\t\tboard[heap].push [suit,0,0]\r\n\tfor i in range 4,4+2*suits\r\n\t\tfor j in range cardsPerSequence \r\n\t\t\trr = if wild then int random 4,4+2*suits else i\r\n\t\t\tboard[rr].push cards.pop()\r\n\r\n\tif N==1 then lst =       [14,15,16,17]\r\n\tif N==2 then lst =       [14,15,16,17]\r\n\tif N==3 then lst =    [13,14,15,16,17,18]\r\n\tif N==4 then lst = [12,13,14,15,16,17,18,19]\r\n\r\n\tfor heap in lst\r\n\t\tboard[heap].push cards.pop()\r\n\r\n\tcompress board\r\n\r\nfakeBoard = ->\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,2,2],[1,3,3],[1,1,1],[3,1,1],[3,2,2]],[[0,4,4],[0,12,12],[3,5,5],[1,8,8],[3,9,9]],[[2,11,11],[3,12,12],[0,6,6],[2,5,5],[1,7,7]],[[0,8,8],[3,11,11],[2,6,6],[2,9,9],[1,12,12]],[[0,9,9],[0,10,10],[2,10,10],[2,4,4],[2,7,7]],[[1,2,2],[3,4,4],[3,6,6],[0,5,5],[1,11,11]],[[0,1,1],[0,7,7],[1,10,10],[1,5,5],[3,8,8]],[[0,3,3],[1,4,4],[3,3,3],[2,2,2],[3,10,10]],[[0,11,11]],[[3,7,7]],[[2,1,1]],[[2,8,8]],[],[[1,6,6]],[[2,3,3]],[[2,12,12]],[[1,9,9]]] # nix!\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,10,10],[2,11,11],[0,6,6],[3,9,9],[1,8,8]],[[3,10,10],[2,10,10],[0,12,12],[0,4,4],[3,1,1]],[[3,12,12],[1,3,3],[1,4,4],[1,9,9],[0,2,2]],[[3,4,4],[3,5,5],[2,5,5],[2,9,9],[2,3,3]],[[3,6,6],[1,7,7],[0,5,5],[2,7,7],[3,8,8]],[[2,4,4],[0,9,9],[1,2,2],[3,11,11],[1,6,6]],[[2,8,8],[2,1,1],[2,2,2],[1,10,10],[3,3,3]],[[1,1,1],[1,11,11],[1,12,12],[3,7,7],[2,12,12]],[[0,11,11]],[[3,2,2]],[[1,5,5]],[[0,8,8]],[],[[2,6,6]],[[0,3,3]],[[0,1,1]],[[0,7,7]]] # 851 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,3,3],[2,12,12],[2,11,11],[3,10,10],[1,7,7]],[[1,11,11],[0,5,5],[2,9,9],[3,12,12],[1,5,5]],[[0,12,12],[3,8,8],[1,9,9],[0,6,6],[1,6,6]],[[3,1,1],[2,7,7],[0,8,8],[0,7,7],[1,3,3]],[[1,8,8],[0,9,9],[2,10,10],[3,9,9],[1,4,4]],[[1,12,12],[3,2,2],[3,3,3],[3,4,4],[1,2,2]],[[3,6,6],[2,1,1],[0,2,2],[2,8,8],[0,3,3]],[[1,1,1],[3,7,7],[2,6,6],[3,11,11],[0,1,1]],[[2,5,5]],[[2,2,2]],[[1,10,10]],[[2,4,4]],[],[[3,5,5]],[[0,10,10]],[[0,11,11]],[[0,4,4]]] # 963 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[3,12,12],[3,9,9],[2,5,5],[3,2,2],[1,10,10]],[[0,1,1],[0,10,10],[2,4,4],[1,3,3],[3,7,7]],[[0,3,3],[0,11,11],[2,7,7],[3,8,8],[1,2,2]],[[0,5,5],[2,6,6],[0,6,6],[3,3,3],[1,5,5]],[[0,4,4],[3,5,5],[0,2,2],[3,10,10],[2,2,2]],[[2,10,10],[0,12,12],[2,1,1],[2,11,11],[0,9,9]],[[3,4,4],[1,7,7],[1,6,6],[2,12,12],[1,8,8]],[[1,1,1],[1,12,12],[1,11,11],[1,4,4],[2,3,3]],[[0,8,8]],[[3,11,11]],[[2,9,9]],[[0,7,7]],[],[[3,1,1]],[[2,8,8]],[[3,6,6]],[[1,9,9]]] # 264 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[1,1,1],[0,12,12],[3,3,3],[2,7,7],[3,11,11]],[[2,11,11],[2,8,8],[3,6,6],[0,1,1],[0,6,6]],[[1,8,8],[1,6,6],[0,3,3],[1,3,3],[0,7,7]],[[0,11,11],[1,10,10],[3,12,12],[1,11,11],[1,2,2]],[[0,4,4],[3,2,2],[2,2,2],[3,7,7],[0,5,5]],[[2,5,5],[2,9,9],[3,8,8],[3,9,9],[2,4,4]],[[2,10,10],[0,9,9],[1,12,12],[3,4,4],[3,10,10]],[[2,12,12],[3,5,5],[1,4,4],[2,1,1],[0,2,2]],[[1,5,5]],[[0,10,10]],[[0,8,8]],[[1,9,9]],[],[[3,1,1]],[[1,7,7]],[[2,6,6]],[[2,3,3]]] # 397 ms\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,2,2],[2,4,4],[2,10,10],[2,5,5],[1,1,1],[3,12,12],[2,12,12],[3,11,11],[1,8,8],[1,6,6]],[[3,9,9],[2,11,11],[0,12,12],[0,3,3],[3,10,10]],[[3,3,3],[0,9,9]],[[2,7,7],[1,4,4],[3,2,2],[1,9,9],[0,6,6],[1,5,5],[0,1,1]],[[1,3,3],[1,2,2],[2,2,2],[2,6,6],[1,11,11]],[[3,7,7],[2,8,8],[1,7,7],[3,1,1],[0,8,8]],[[2,3,3],[3,5,5],[3,6,6]],[[1,12,12],[3,4,4],[0,5,5]],[[0,7,7]],[[3,8,8]],[[1,10,10]],[[0,11,11]],[],[[0,4,4]],[[0,10,10]],[[2,1,1]],[[2,9,9]]]\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,7,7],[0,8,8],[0,2,2],[0,5,5]],[[2,9,9],[1,5,5],[0,3,3],[2,11,11],[1,10,10]],[[2,2,2],[1,8,8]],[[1,11,11],[2,6,6],[2,10,10],[2,5,5],[3,3,3],[1,1,1]],[[3,2,2],[3,12,12],[2,3,3],[1,7,7],[3,4,4],[3,11,11]],[[3,8,8],[0,10,10],[3,7,7],[0,12,12],[1,3,3],[0,9,9],[1,12,12]],[[0,7,7],[2,12,12],[0,6,6],[3,9,9]],[[1,2,2],[0,4,4],[1,6,6],[2,4,4],[1,4,4],[1,9,9]],[[3,6,6]],[[2,8,8]],[[2,1,1]],[[3,10,10]],[],[[0,11,11]],[[0,1,1]],[[3,1,1]],[[3,5,5]]] # 118 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[3,3,3],[2,3,3],[0,6,6],[3,5,5],[0,9,9],[2,10,10],[1,10,10]],[[0,10,10],[0,7,7],[3,8,8],[2,11,11]],[[0,12,12],[3,7,7],[2,1,1],[2,8,8],[1,7,7]],[[1,4,4],[2,5,5],[2,6,6],[1,2,2],[0,1,1],[2,2,2],[3,11,11],[2,7,7]],[[3,6,6],[3,9,9],[0,4,4],[3,4,4],[1,8,8]],[[0,3,3],[3,12,12],[1,11,11]],[[2,4,4],[0,2,2],[3,10,10],[0,8,8]],[[1,5,5],[2,9,9],[1,6,6],[1,1,1]],[[0,5,5]],[[0,11,11]],[[2,12,12]],[[1,3,3]],[],[[1,12,12]],[[1,9,9]],[[3,1,1]],[[3,2,2]]]\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,7,7],[1,10,10],[0,1,1],[0,2,2],[2,7,7]],[[2,1,1],[2,8,8],[1,3,3],[1,7,7],[3,11,11]],[[2,2,2],[3,6,6],[3,8,8],[2,4,4],[0,3,3]],[[3,1,1],[0,5,5],[3,2,2],[2,3,3],[1,2,2]],[[3,4,4],[2,10,10],[1,11,11],[0,11,11],[2,5,5]],[[3,9,9],[0,6,6],[2,11,11],[0,10,10],[3,12,12]],[[1,9,9],[1,12,12],[0,4,4],[1,6,6],[2,6,6]],[[1,1,1],[2,12,12],[1,5,5],[3,7,7],[1,8,8]],[[3,10,10]],[[0,9,9]],[[3,3,3]],[[0,12,12]],[],[[2,9,9]],[[0,8,8]],[[1,4,4]],[[3,5,5]]]\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[3,9,9],[0,4,4],[3,5,5],[0,7,7],[1,5,5]],[[1,10,10],[3,7,7],[0,6,6],[3,11,11],[3,8,8]],[[2,2,2],[3,1,1],[1,1,1],[1,9,9],[0,9,9]],[[1,2,2],[2,7,7],[1,6,6],[3,6,6],[3,3,3]],[[1,7,7],[2,3,3],[0,1,1],[2,1,1],[0,3,3]],[[2,8,8],[1,11,11],[2,6,6],[0,10,10],[3,4,4]],[[2,5,5],[2,12,12],[3,10,10],[0,2,2],[1,8,8]],[[2,11,11],[2,9,9],[0,12,12],[3,12,12],[1,4,4]],[[1,12,12]],[[0,5,5]],[[2,10,10]],[[3,2,2]],[],[[1,3,3]],[[2,4,4]],[[0,11,11]],[[0,8,8]]]\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,10,10],[2,12,12],[1,8,8],[1,12,12],[3,3,3]],[[1,2,2],[0,5,5]],[[3,12,12],[2,4,4],[3,8,8],[1,5,5],[0,8,8]],[[1,11,11],[0,1,1],[0,4,4]],[[1,7,7],[1,3,3],[0,10,10],[3,4,4],[2,1,1],[3,11,11]],[[2,9,9],[2,5,5],[1,6,6],[2,2,2],[1,1,1],[0,3,3]],[[2,6,6],[2,3,3],[3,1,2],[0,2,2],[1,9,9],[3,7,7],[3,10,10],[0,11,11],[2,7,7]],[[2,8,8],[3,6,6],[1,10,10]],[[0,6,6]],[[3,5,5]],[[3,9,9]],[[0,12,12]],[],[[2,11,11]],[[0,9,9]],[[1,4,4]],[[0,7,7]]]\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,11,11],[1,6,6],[1,8,8],[2,4,4],[1,4,4],[3,9,9],[0,10,10],[2,9,9]],[[0,5,5],[0,11,11],[0,6,6]],[[0,2,2],[2,5,5],[2,1,1],[0,3,3]],[[2,8,8],[2,3,3],[1,9,9],[3,10,10],[0,4,4],[0,1,1],[0,12,12],[2,6,6],[1,12,12]],[[3,5,4],[3,11,11],[1,3,3],[3,6,6],[1,10,10],[3,8,8]],[[0,8,8]],[[1,1,1],[1,11,11]],[[1,7,7],[2,2,2],[1,2,2],[3,3,3],[3,1,2]],[[1,5,5]],[[0,7,7]],[[2,10,10]],[[3,7,7]],[],[[2,12,12]],[[0,9,9]],[[3,12,12]],[[2,7,7]]] # 68000\r\n\r\nmakeAutoShake = ->\r\n\tautoShake = []\r\n\tfor i in range 52\r\n\t\tautoShake.push [int(random(-2,2)),int(random(-2,2))]\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,600\r\n\tmakeAutoShake()\r\n\tnewGame '1'\r\n\tdisplay board \r\n\r\nshowHeap = (board,heap,x,y,dx) ->\r\n\tn = calcAntal board[heap]\r\n\tif n==0 then return \r\n\tx0 = width/2 - w/2\r\n\tif x < 0 then x0 += -w+dx\r\n\tif x > 0 then x0 += w-dx\r\n\tx = x0 + x*dx/2\r\n\ty = y * h\r\n\tfor card,k in board[heap]\r\n\t\t[suit,unvisible,visible] = card\r\n\t\tdr = if unvisible < visible then 1 else -1\r\n\t\tfor rank in range unvisible,visible+dr,dr\r\n\t\t\t[x0,y0] = if shake then autoShake[13*suit+rank] else [0,0]\r\n\t\t\timage faces, x0+x,y0+y+13, w,h, OFFSETX+W*rank,1092+H*suit,243,H\r\n\t\t\tx += dx\r\n\r\n\tif heap in [0,1,2,3] and card[2]==12\r\n\t\t[x0,y0] = if shake then autoShake[13*suit+rank] else [0,0]\r\n\t\timage backs, x0+x,y0+y+13, w,h, OFFSETX+860,1092+622,243,H\r\n\r\ncalcAntal = (lst) ->\r\n\tres=0\r\n\tfor [suit,unvisible,visible] in lst\r\n\t\tres += 1 + abs(unvisible-visible)\r\n\tres\r\n\r\ndisplay = (board) ->\r\n\tbackground 0,0,255\r\n\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 10\r\n\r\n\tx = width/2-5\r\n\ty = height-110\r\n\r\n\tfill 200\r\n\ttext 'U = Undo',          x,y\r\n\ttext 'R = Restart',       x,y+15\r\n\ttext '1 = One Suit',      x,y+30\r\n\ttext '2 = Two Suits',     x,y+45\r\n\ttext '3 = Three Suits',   x,y+60\r\n\ttext '4 = Four Suits',    x,y+75\r\n\ttext 'W = Wild',          x,y+90\r\n\tif timing != null\r\n\t\ttext \"#{timing} seconds\", x,y+105\r\n\ttextAlign LEFT,CENTER\r\n\ttext 'Generalens Tidsfördriv', 0,y+120\r\n\r\n\tfor heap,y in [0,1,2,3]\r\n\t\tshowHeap board, heap, 0, y, 0\r\n\r\n\tfor heap,y in [4,5,6,7,8,9,10,11]\r\n\t\tn = calcAntal board[heap]\r\n\t\tdx = if n<=7 then w/2 else (width/2-w/2-w)/(n-1)\r\n\t\tif heap % 2 == 0\r\n\t\t\tshowHeap board, heap, -2, y//2, -dx\r\n\t\telse\r\n\t\t\tshowHeap board, heap, 2, y//2, dx\r\n\t\t\t\r\n\tfor heap,x in [12,13,14,15,16,17,18,19]\r\n\t\txx = [-8,-6,-4,-2,2,4,6,8][x]\r\n\t\tshowHeap board, heap, xx,4, w\r\n\r\nlegalMove = (board,a,b) ->\r\n\tif a in [0,1,2,3] then return false \r\n\tif b in [12,13,14,15,16,17,18,19] then return false \r\n\tif board[a].length==0 then return false\r\n\tif board[b].length==0 then return true\r\n\t[sa,a1,a2] = _.last board[a]\r\n\t[sb,b1,b2] = _.last board[b]\r\n\tif sa==sb and abs(a2-b2) == 1 then return true \r\n\tfalse\r\n\r\nmakeMove = (board,a,b,record) -> # from heap a to heap b\r\n\t[suit,visible,unvisible] = board[a].pop() # reverse order\r\n\tif record then hist.push [a, b, 1 + abs unvisible-visible]\r\n\tif board[b].length > 0 then unvisible = board[b].pop()[1]\r\n\tboard[b].push [suit,unvisible,visible] \r\n\r\nundoMove = ([a,b,antal]) ->\r\n\t#print 'undo', prettyMove b,a,board\r\n\t[suit, unvisible, visible] = board[b].pop()\r\n\tif unvisible < visible\r\n\t\tboard[a].push [suit,visible,  visible-antal+1]\r\n\t\tif visible!=unvisible+antal-1 then board[b].push [suit,unvisible,visible-antal]\r\n\telse\r\n\t\tboard[a].push [suit,visible,  visible+antal-1]\r\n\t\tif unvisible!=visible+antal-1 then board[b].push [suit,unvisible,visible+antal]\r\n\r\nmousePressed = -> # one click\r\n\tif not (0 < mouseX < width) then return\r\n\tif not (0 < mouseY < height) then return\r\n\r\n\tmarked = null\r\n\tmx = mouseX//(W/3)\r\n\tmy = mouseY//(H/3)\r\n\tif my >= 4\r\n\t\tif mx<=3 then marked = 12 + mx\r\n\t\tif mx>=5 then marked = 11 + mx\r\n\telse\r\n\t\tif mx==4 then marked = my\r\n\t\telse if mx<4 then marked = [4,6,8,10][my]\r\n\t\telse marked = [5,7,9,11][my]\r\n\tif marked==null then return \r\n\r\n\tholes = []\r\n\tfound = false\r\n\r\n\tif N==1 then heaps = [0,       4,5] \r\n\tif N==2 then heaps = [0,1,     4,5,6,7] \r\n\tif N==3 then heaps = [0,1,2,   4,5,6,7,8,9] \r\n\tif N==4 then heaps = [0,1,2,3, 4,5,6,7,8,9,10,11] \r\n\r\n\tfor heap in heaps\t\r\n\t\tif board[heap].length==0 then holes.push heap\r\n\t\tif heap not in holes and legalMove board,marked,heap  \r\n\t\t\tmakeMove board,marked,heap,true\r\n\t\t\tfound = true\r\n\t\t\tbreak \r\n\tif not found\r\n\t\tfor heap in holes\t\r\n\t\t\tif legalMove board,marked,heap  \r\n\t\t\t\tmakeMove board,marked,heap,true\r\n\t\t\t\tbreak \r\n\r\n\tif N*13 == countAceCards board then timing = (millis() - start) // 1000\r\n\tdisplay board\r\n\r\n####### AI-section ########\r\n\r\nsetLists = ->\r\n\tif N == 1\r\n\t\tsrcs = [4,5, 12,13,14,15,16,17,18,19]\r\n\t\tdsts = [0, 4,5]\r\n\tif N == 2\r\n\t\tsrcs = [4,5,6,7, 12,13,14,15,16,17,18,19]\r\n\t\tdsts = [0,1, 4,5,6,7]\r\n\tif N == 3\r\n\t\tsrcs = [4,5,6,7,8,9, 12,13,14,15,16,17,18,19]\r\n\t\tdsts = [0,1,2, 4,5,6,7,8,9]\r\n\tif N == 4\r\n\t\tsrcs = [4,5,6,7,8,9,10,11, 12,13,14,15,16,17,18,19]\r\n\t\tdsts = [0,1,2,3, 4,5,6,7,8,9,10,11]\r\n\r\nfindAllMoves = (b) ->\r\n\tres = []\r\n\tfor src in srcs\r\n\t\tfor dst in dsts\r\n\t\t\tif src!=dst\r\n\t\t\t\tif legalMove b,src,dst then res.push [src,dst]\r\n\tres\r\n\r\nmakeKey = (b) -> # kanske 4-11 bör sorteras först\r\n\tres = ''\r\n\tfor heap,index in b\r\n\t\tfor [suit,r1,r2] in heap\r\n\t\t\tif r1==r2\r\n\t\t\t\tres += 'shrk'[suit] + RANK[r1]\r\n\t\t\telse\r\n\t\t\t\tres += 'shrk'[suit] + RANK[r1] + RANK[r2]\r\n\t\tres += ' '\r\n\tres \r\n\r\ncountAceCards = (b) ->\r\n\tres\t= 0\r\n\tfor heap in [0,1,2,3]\r\n\t\tres += calcAntal b[heap]\r\n\tres\r\n\r\nexpand = ([aceCards,level,b]) ->\r\n\tres = []\r\n\tmoves = findAllMoves b\r\n\tfor [src,dst] in moves\r\n\t\tb1 = _.cloneDeep b\r\n\t\tmakeMove b1,src,dst\r\n\t\tkey = makeKey b1\r\n\t\tif key not of hash\r\n\t\t\thash[key] = [src,dst,b]\r\n\t\t\tres.push [countAceCards(b1), level+1, b1] \r\n\tres\r\n\r\nnewGame = (key) ->\r\n\tstart = millis()\r\n\ttiming = null\r\n\t#tries = 0\r\n\twhile true \r\n\t\tif key=='1' then makeBoard 1,4,4\r\n\t\tif key=='2' then makeBoard 2,5,4\r\n\t\tif key=='3' then makeBoard 3,5,6\r\n\t\tif key in '4W' then makeBoard 4,5,8,key == 'W'\r\n\r\n\t\t#background 128\r\n\t\t#text tries, width/2, height/2\r\n\t\t#tries++\r\n\r\n\t\tsetLists()\r\n\t\toriginalBoard = _.cloneDeep board\r\n\r\n\t\tcands = []\r\n\t\tcands.push [N,0,board] # antal kort på ässen, antal drag, board\r\n\t\thash = {}\r\n\t\tnr = 0\r\n\t\tcand = null\r\n\t\taceCards = N\r\n\r\n\t\twhile nr < LIMIT and cands.length > 0 and aceCards < N*13\r\n\t\t\tnr++ \r\n\t\t\tcand = cands.pop()\r\n\t\t\taceCards = cand[0]\r\n\t\t\tincrement = expand cand\r\n\t\t\tcands = cands.concat increment\r\n\t\t\tcands.sort (a,b) -> if a[0] == b[0] then b[1]-a[1] else a[0]-b[0]\r\n\r\n\t\tlevel = cand[1]\r\n\t\tprint nr,aceCards,level\r\n\t\tif aceCards == N*13 \r\n\t\t\tprint JSON.stringify(originalBoard)\r\n\t\t\tboard = cand[2]\r\n\t\t\tprintSolution hash,board\r\n\t\t\tboard = _.cloneDeep originalBoard\r\n\t\t\tprint \"#{int millis()-start} ms\"\r\n\t\t\tstart = millis()\r\n\t\t\treturn \r\n\r\nrestart = ->\r\n\thist = []\r\n\tboard = _.cloneDeep originalBoard\r\n\r\nkeyPressed = -> \r\n\tif key == 'U' and hist.length > 0 then undoMove hist.pop()\r\n\tif key == 'R' then restart()\r\n\tif key in '1234W' then newGame key \r\n\tif key == 'A' then shake = not shake\r\n\tdisplay board\r\n\t\t\r\nprettyCard = ([suit,unvisible,visible],antal=2) ->\r\n\tif antal==1 then \"#{RANK[visible]}\"\r\n\telse \"#{SUIT[suit]} #{RANK[visible]}\"\r\n\r\nprettyMove = (src,dst,b) ->\r\n\tc1 = _.last b[src]\r\n\tif b[dst].length > 0\r\n\t\tc2 = _.last b[dst]\r\n\t\t\"#{prettyCard c1} to #{prettyCard c2,1}\"\r\n\telse\r\n\t\tif dst in [4,5,6,7,8,9,10,11] then \"#{prettyCard c1} to hole\"\r\n\t\telse \"#{prettyCard c1} to panel\"\r\n\r\nprintSolution = (hash, b) ->\r\n\tkey = makeKey b\r\n\tsolution = []\r\n\twhile key of hash\r\n\t\t[src,dst,b] = hash[key]\r\n\t\tsolution.push hash[key]\r\n\t\tkey = makeKey b\r\n\tsolution.reverse()\r\n\ts = ''\r\n\tfor [src,dst,b],index in solution\r\n\t\ts += \"\\n#{index}: #{prettyMove src,dst,b}\"\r\n\tprint s"
  ]
}