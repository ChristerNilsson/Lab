{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# Vectorized Playing Cards 2.0 - http://sourceforge.net/projects/vector-cards/\r\n# Copyright 2015 - Chris Aguilar - conjurenation@gmail.com\r\n# Licensed under LGPL 3 - www.gnu.org/copyleft/lesser.html\r\n\r\n#  4  4  4  4  4  0  8  8  8  8  8\r\n#  5  5  5  5  5  1  9  9  9  9  9\r\n#  6  6  6  6  6  2 10 10 10 10 10\r\n#  7  7  7  7  7  3 11 11 11 11 11\r\n#    12 13 14 15    16 17 18 19      PANEL\r\n\r\n# I vissa situationer vill man styra one click.\r\n# Exempel:\r\n# Vid klick på 6 vill man ha 7,6 istf 5,6\r\n# 5     3,4,6      7\r\n# Tidigare\r\n# 5,6   3,4        7\r\n# samt klick på 6 ger\r\n#                  7,6,5\r\n# men man vill kanske ha\r\n# 5     3,4        7,6\r\n\r\nSEQS = 8 # 6: kan fungera, 4: tar mkt lång tid att skapa problem\r\n\r\nACES = [0,1,2,3]\r\nHEAPS = [4,5,6,7,8,9,10,11].slice 0,SEQS\r\nPANEL = [12,13,14,15,16,17,18,19].slice 0,SEQS\r\n\r\nSuit = 'chsd'\r\nRank = \"A23456789TJQK\"\r\nSUIT = \"club heart spade diamond\".split ' '\r\nRANK = \"A23456789TJQK\" \r\nLONG = \" Ace Two Three Four Five Six Seven Eight Nine Ten Jack Queen King\".split ' '\r\n\r\n# Konstanter för cards.png\r\nOFFSETX = 468\r\nW = 263.25\r\nH = 352\r\n\r\nw = null\r\nh = null\r\nLIMIT = 1000 # Maximum steps considered before giving up. 1000 is too low, hint fails sometimes.\r\n\r\nfaces = null\r\nbacks = null\r\n\r\nboard = null\r\ncards = null\r\ncands = null\r\nhash = null\r\naceCards = 4\r\noriginalBoard = null\r\n\r\nstartCompetition = null\r\nN = null # Max rank\r\n#classic = false\r\nsrcs = null\r\ndsts = null\r\n\r\noneClickData = {lastMarked:-1, counter:0}\r\nindicators = {} # färgmarkering av senaste undo eller hint. [color,hollow]\r\nseed = 1 # seed for random numbers\r\ncurrentSeed = null\r\n\r\ninfoLines = []\r\ngeneral = null\r\n\r\nprint = console.log\r\nrange = _.range\r\nassert = (a, b, msg='Assert failure') -> chai.assert.deepEqual a, b, msg\r\n\r\ngetParameters = (h = window.location.href) -> \r\n\th = decodeURI h\r\n\tarr = h.split '?'\r\n\tif arr.length != 2 then return {}\r\n\ts = arr[1]\r\n\tif s=='' then return {}\r\n\t_.fromPairs (f.split '=' for f in s.split('&'))\r\n\r\nmyRandom = (a,b) -> \r\n\tx = 10000 * Math.sin seed++\r\n\tr = x - Math.floor x\r\n\ta + Math.floor (b-a) * r\r\n\r\nmyShuffle = (array) ->\r\n\tn = array.length \r\n\tfor i in range n\r\n\t\tj = myRandom i, n\r\n\t\tvalue = array[i]\r\n\t\tarray[i] = array[j]\r\n\t\tarray[j] = value\r\n\r\ncopyToClipboard = (txt) ->\r\n\tcopyText = document.getElementById \"myClipboard\"\r\n\tcopyText.value = txt \r\n\tcopyText.select()\r\n\tdocument.execCommand \"copy\"\r\n\r\nmakeLink = -> \r\n\turl = window.location.href + '?'\r\n\tindex = url.indexOf '?'\r\n\turl = url.substring 0,index\r\n\turl += '?seed=' + currentSeed\r\n\turl += '&level=' + general.level\r\n\turl\r\n\r\nclass BlackBox # Avgör om man lyckats eller ej. Man får tillgodogöra sig tidigare drag.\r\n\tconstructor : -> @clr()\r\n\tprobe : (time,computer,human) ->\r\n\t\tif @total[2] + human > @total[1] + computer \r\n\t\t\t@success = false\r\n\t\t\treturn @success \r\n\t\t@count++\r\n\t\t@total = [@total[0]+time, @total[1]+computer, @total[2]+human]\r\n\t\t@success = true \r\n\t\t@success\r\n\tclr : ->\r\n\t\t@total = [0,0,0] # [time,computer,human]\r\n\t\t@count = 0\r\n\t\t@success = false \r\n\tshow : -> print 'BlackBox',@count,@total\r\n\r\nclass General\r\n\tconstructor : ->\r\n\t\t@competition = false \r\n\t\t@timeUsed = 0\r\n\t\t@start = null\r\n\t\t@level = 0\r\n\t\t@maxLevel = 0\r\n\t\t@maxMoves = null\r\n\t\t@hist = null\r\n\t\t@hintsUsed = null\r\n\t\t@blackBox = new BlackBox()\r\n\r\n\tclr : ->\r\n\t\t@blackBox.clr()\r\n\t\t@level = 0\r\n\t\t@maxLevel = 0 \r\n\r\n\thandle : (mx,my) ->\r\n\t\tmarked = [(mx + if my >= 3 then 12 else 4),my]\r\n\t\theap = oneClick oneClickData,marked,board,true\r\n\r\n\t\tif @timeUsed == 0 and 4*N == countAceCards board\r\n\t\t\tif @competition \r\n\t\t\t\ttimeUsed = (millis() - @start) // 1000\r\n\t\t\t\tif @blackBox.probe timeUsed,@maxMoves,@hist.length \r\n\t\t\t\t\t@timeUsed = timeUsed\r\n\t\t\t\t\t@blackBox.show()\r\n\t\t\t\t\t@maxLevel++ \r\n\t\t\telse\r\n\t\t\t\tif @hist.length > @maxMoves * 1.1\r\n\t\t\t\t\tmsg = \"Too many moves: #{@hist.length - @maxMoves}\"\r\n\t\t\t\telse if @hintsUsed == 0\r\n\t\t\t\t\t@timeUsed = (millis() - @start) // 1000\r\n\t\t\t\t\tif @level == @maxLevel then @maxLevel++ \r\n\t\t\t@maxLevel = constrain @maxLevel,0,15\r\n\t\t\tlocalStorage.Generalen = JSON.stringify {@maxLevel,@level}\r\n\t\t\t#printManualSolution()\r\n\r\nshowIndicator = (heap,x,y)->\r\n\tx0 = x + w/2\r\n\ty0 = y + 0.49*h\r\n\tif heap of indicators\r\n\t\t[color,hollow] = indicators[heap]\r\n\t\tpush()\r\n\t\tif hollow\r\n\t\t\tstroke 0\r\n\t\t\tstrokeWeight 0.13*h\r\n\t\t\tarc x0,y0,0.4*w,0.4*w,0,360\r\n\t\t\tstroke color\r\n\t\t\tstrokeWeight 0.13*h-2\r\n\t\t\tarc x0,y0,0.4*w,0.4*w,0,360\r\n\t\telse\r\n\t\t\tstroke 0\r\n\t\t\tstrokeWeight 1\r\n\t\t\tfill color\r\n\t\t\tellipse x0,y0,0.55*w\r\n\t\tpop()\r\n\r\npreload = -> \r\n\tfaces = loadImage 'cards/Color_52_Faces_v.2.0.png'\r\n\tbacks = loadImage 'cards/Playing_Card_Backs.png'\r\n\r\npack = (suit,under,over) -> Suit[suit] + RANK[under] + if under==over then '' else RANK[over]\r\nassert 'cA', pack 0,0,0 \r\nassert 'dA', pack 3,0,0 \r\nassert 'd2', pack 3,1,1 \r\nassert 'hJQ', pack 1,10,11 \r\nassert 'hJ', pack 1,10,10 \r\n#print 'pack ok'\r\n\r\nunpack = (n) -> \r\n\tsuit = Suit.indexOf n[0]\r\n\tunder = RANK.indexOf n[1]\r\n\tif n.length==3 then over = RANK.indexOf n[2] else over = under\r\n\t[suit,under,over]\r\nassert [0,0,0], unpack 'cA'\r\nassert [3,0,0], unpack 'dA'\r\nassert [1,10,11], unpack 'hJQ'\r\nassert [1,10,10], unpack 'hJ'\r\n#print 'unpack ok'\r\n\r\ncompress = (board) ->\r\n\tfor heap in HEAPS\r\n\t\tboard[heap] = compressOne board[heap]\r\n\r\ncompressOne = (cards) ->\r\n\tif cards.length > 1\r\n\t\tres = []\r\n\t\ttemp = cards[0]\r\n\t\tfor i in range 1,cards.length\r\n\t\t\t[suit1,under1,over1] = unpack temp     # understa\r\n\t\t\t[suit2,under2,over2] = unpack cards[i] # översta\r\n\t\t\tif suit1 == suit2 and under2-over1 in [-1,1]\r\n\t\t\t\ttemp = pack suit1,under1,over2\r\n\t\t\telse\r\n\t\t\t\tres.push temp \r\n\t\t\t\ttemp = pack suit2,under2,over2\r\n\t\tres.push temp\r\n\t\tres\r\n\telse \r\n\t\tcards\r\nassert [],compressOne [] \r\nassert ['cA'],compressOne ['cA'] \r\nassert ['cA2'],compressOne ['cA','c2'] \r\nassert ['c23'],compressOne ['c2','c3'] \r\nassert ['cA4'],compressOne ['cA2','c34'] \r\nassert ['cA3'],compressOne ['cA','c2','c3'] \r\nassert ['cA6'],compressOne ['cA2','c34','c56'] \r\nassert ['cA2','h34','c56'],compressOne ['cA2','h34','c56'] \r\n#print 'compressOne ok'\r\n\r\ncalcAntal = (lst) ->\r\n\tres = 0\r\n\tfor card in lst\r\n\t\t[suit,under,over] = unpack card\r\n\t\tres += 1 + Math.abs under-over\r\n\tres\r\n\r\ncountAceCards = (b) ->\r\n\tres\t= 0\r\n\tfor heap in ACES\r\n\t\tres += calcAntal b[heap]\r\n\tres\r\n\r\ncountPanelCards = (b) ->\r\n\tres\t= 0\r\n\tfor heap in PANEL\r\n\t\tres += b[heap].length\r\n\tres\r\n\r\ndumpBoard = (board) -> (heap.join ' ' for heap in board).join '|'\r\n\r\nmakeBoard = (lvl)->\r\n\tN = [3,4,5,5,6,7,7,8,9,9,10,11,11,12,13,13][lvl]\r\n\tclassic = lvl % 3 == 0\r\n\t#N = maxRank\r\n\r\n\tcards = []\r\n\tfor suit in range 4\r\n\t\tfor rank in range 1,N # 2..K\r\n\t\t\tcards.push pack suit,rank,rank \r\n\r\n\tcurrentSeed = seed\r\n\tmyShuffle cards\r\n\r\n\tboard = []\r\n\tfor i in range 20\r\n\t\tboard.push []\r\n\r\n\tfor suit,heap in range 4 \r\n\t\tboard[heap].push pack suit,0,0 # Ess\r\n\r\n\tfor heap in PANEL\r\n\t\tboard[heap].push cards.pop()\r\n\r\n\tfor card,i in cards\r\n\t\tzz = if classic then 4+i%SEQS else myRandom 4,4+SEQS\r\n\t\tboard[zz].push card\r\n\r\n\tcompress board\r\n\r\nreadBoard = (b) -> (if heap=='' then [] else heap.split ' ') for heap in b.split '|'\r\n\r\nfakeBoard = ->\r\n\tN = 6\r\n\tclassic = false \r\n\tif N==6 then board = \"cA|hA|sA|dA|h5|c3|s65|c2 d5||s3|d2 h6 d4|d3 h4|h2|c5|c4|h3|c6|s4|s2|d6\"\r\n\tif N==13 then board = \"cA|hA|sA|dA|h6 s8 h3 s2 d5|dJ s3 c9 d7|sK h7 dQ s5 h5 d34|cQ sJ dT d6|c7 cK hT d2 s4 c8|sQ s7 cJ s9T h9|h8 c56 c4 hJ d8|cT c3|c2|h2|h4|s6|d9|hQ|hK|dK\"\r\n\tif N==13 then board = \"cA|hA|sA|dA|c5 c7 h2 d7 c9 s6 c3 d8 s9|h8 dQ cQK dK h7 s2 dT|c4 sJQ d5||hQ h54 c8 h3 d3|cJT s4 c6 s8 hJT|d2 d4 s5|h9 sK s3|d6|d9|sT|h6|s7|hK|dJ|c2\"\r\n\tif N==13 then board = \"cA2|hA|sA|dA|c5 c7 h2 d7 c9 s6 c3 d8 s9|h8 dQ cQK dK h7 s2 dT|c4 sJQ d5||hQ h54 c8 h3 d3|cJT s4 c6 s8 hJT|d2 d4 s5|h9 sK s3|d6|d9|sT|h6|s7|hK|dJ|\"\r\n\tif N==13 then board = \"cA2|hA|sA|dA|c5 c7 h2 d7 c9 s6 c3 d8 s9|h8 dQ cQK dK h7 s2 dT|c4 sJQ d5|s5|hQ h54 c8 h3 d3|cJT s4 c6 s8 hJT|d2 d4|h9 sK s3|d6|d9|sT|h6|s7|hK|dJ|\"\r\n\tif N==13 then board = \"cA|hA|sA|dA|c9 h3 s8|h5 s7 sJ hK h4 s3 c7 hT s4|s9 d2|s5 d7 c4|s6 h9|c3 d3 h6|d6 d8 dK sT s2 c5 cK c6 c8 d4 h2|dT hQ cT d5 hJ dJ cJ|c2|d9|sQ|cQ|h7|dQ|sK|h8\"\r\n\tif N==13 then board = \"cA|hA|sA|dA|s4 cJ s3 c3 dK hJ cQ c2 h4|sQK|s9 d2 dT|s2 dQ sJ hT|d8 h3 d7 h5 h2 c9|d3 s6 sT d9 c7 c4|cK c8 h7 c5|dJ hK s87 s5 cT|d6|h9|d4|h8|d5|h6|c6|hQ\"\r\n\tboard = readBoard board\r\n\tprint board\r\n\r\nsetup = ->\r\n\tprint 'Y'\r\n\tcanvas = createCanvas innerWidth, innerHeight-0.5\r\n\tcanvas.position 0,0 # hides text field used for clipboard copy.\r\n\r\n\tgeneral = new General()\r\n\r\n\tw = width/9 \r\n\th = height/4 \r\n\tangleMode DEGREES\r\n\r\n\tif localStorage.Generalen? \r\n\t\t{maxLevel,level} = JSON.parse localStorage.Generalen\r\n\telse\r\n\t\t{maxLevel,level} = {maxLevel:0, level:0} \r\n\tgeneral.maxLevel = maxLevel\r\n\tgeneral.level = level\r\n\r\n\tparams = getParameters()\r\n\tif 'seed' of params then seed = parseInt params.seed else seed = int random 10000\r\n\tif 'level' of params then general.level = parseInt params.level\r\n\tgeneral.level = constrain general.level,0,general.maxLevel\r\n\r\n\tstartCompetition = millis()\r\n\tinfoLines = []\r\n\tinfoLines.push ['','','Total']\r\n\tinfoLines.push ['Levels','',0]\r\n\tinfoLines.push [\"Computer Moves\",0,0]\r\n\tinfoLines.push [\"Human Moves\",0,0]\r\n\tinfoLines.push [\"Time\",0,0]\t\r\n\r\n\tnewGame general.level\r\n\tdisplay board \r\n\r\nkeyPressed = -> \r\n\tif key == 'X' \r\n\t\tN = 7\r\n\t\tboard = \"cA7|hA4|sA3|dA2||h6|s5 d6||h5 d5||s4 s6|d34||d7|s7|h7||||\"\r\n\t\tgeneral.hist = [[12,0,1],[5,1,1],[8,3,1],[9,1,1],[11,1,1],[16,2,1],[17,0,1],[10,0,1],[9,0,1],[18,2,1],[19,0,1],[7,0,1]]\t\t\r\n\t\tboard = readBoard board\r\n\t\tprint board \r\n\tdisplay board\r\n\r\nmenu1 = ->\r\n\tdialogue = new Dialogue 4*w,1.5*h,0.15*h \r\n\r\n\tr1 = 0.25 * height \r\n\tr2 = 0.085 * height\r\n\tdialogue.clock ' ',7,r1,r2,90+360/14\r\n\r\n\tdialogue.buttons[0].info 'Undo', -> \r\n\t\tif general.hist.length > 0 \r\n\t\t\t[src,dst] = _.last general.hist\r\n\t\t\tindicators = {}\r\n\t\t\tindicators[src]=[\"#ff0\",true]\r\n\t\t\tindicators[dst]=[\"#ff0\",false]\r\n\t\t\tundoMove general.hist.pop()\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[1].info (if general.competition then '' else 'Hint'), -> \r\n\t\thint()\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[2].info (if general.competition then '' else 'Link'), ->\r\n\t\tlink = makeLink()\r\n\t\tcopyToClipboard link\t\t\r\n\t\tmsg = 'Link copied to clipboard'\r\n\t\tdialogues.pop()\r\n\r\n\tprint not general.competition or general.blackBox.success\r\n\ts = if not general.competition or general.blackBox.success then 'Harder' else '' \r\n\tdialogue.buttons[3].info s, -> \r\n\t\tgeneral.level = constrain general.level+1,0,general.maxLevel\r\n\t\tnewGame general.level\r\n\t\tgeneral.timeUsed = 0\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[4].info (if general.competition then '' else 'Go'), ->\r\n\t\tnewGame general.level\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[5].info (if general.competition then '' else 'Easier'), -> \r\n\t\tgeneral.level = constrain general.level-1,0,general.maxLevel\r\n\t\tnewGame general.level\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[6].info 'Restart', -> \r\n\t\tmenu2()\r\n\r\nmenu2 = ->\r\n\tdialogue = new Dialogue 4*w,1.5*h,0.15*h \r\n\r\n\tr1 = 0.25 * height \r\n\tr2 = 0.11 * height\r\n\tdialogue.clock ' ',3,r1,r2,90+360/6\r\n\r\n\tdialogue.buttons[0].info 'Normal Restart', -> \r\n\t\trestart()\r\n\t\tdialogues.pop()\r\n\t\tdialogues.pop()\r\n\r\n\tdialogue.buttons[1].info (if general.competition then '' else 'Total Restart'), -> \r\n\t\tdelete localStorage.Generalen\r\n\t\tgeneral.clr()\r\n\t\tnewGame 0\r\n\t\tdialogues.pop()\r\n\t\tdialogues.pop()\r\n\r\n\ts = if general.competition then 'Exit Competition' else 'Start Competition'\r\n\tdialogue.buttons[2].info s, -> \r\n\t\tgeneral.competition = not general.competition\r\n\t\tdelete localStorage.Generalen\r\n\t\tgeneral.races = []\r\n\t\tgeneral.maxLevel = 0 \r\n\t\tnewGame 0\r\n\t\tdialogues.pop()\r\n\t\tdialogues.pop()\r\n\r\nshowHeap = (board,heap,x,y,dy) -> # dy kan vara både pos och neg\r\n\tn = calcAntal board[heap]\r\n\tx = x * w \r\n\tif n > 0\r\n\t\ty = y * h + y * dy\r\n\t\tfor card,k in board[heap]\r\n\t\t\t[suit,under,over] = unpack card\r\n\t\t\tdr = if under < over then 1 else -1\r\n\t\t\tfor rank in range under,over+dr,dr\r\n\t\t\t\tnoFill()\r\n\t\t\t\tstroke 0\r\n\t\t\t\timage faces, x, y, w,h*1.1, OFFSETX+W*rank,1092+H*suit,225,H-1\r\n\t\t\t\ty += dy\r\n\r\n\t\t# visa eventuellt baksidan\r\n\t\tcard = _.last board[heap]\r\n\t\t[suit,under,over] = unpack card\r\n\t\tif heap in ACES and over == N-1\r\n\t\t\timage backs, x, y, w,h*1.1, OFFSETX+860,1092+622,225,H-1\r\n\r\n\tshowIndicator heap,x,if heap in HEAPS then y-dy else y\r\n\r\ndisplay = (board) ->\r\n\tbackground 0,128,0\r\n\r\n\tshowInfo()\r\n\r\n\ttextAlign CENTER,TOP\r\n\tfor heap,y in ACES\r\n\t\tshowHeap board, heap, 8, y, 0\r\n\tfor heap,x in HEAPS\r\n\t\tn = calcAntal board[heap]\r\n\t\tdy = if n == 0 then 0 else min h/4,2*h/(n-1)\r\n\t\tshowHeap board, heap, x, 0, dy\r\n\tfor heap,x in PANEL\r\n\t\tshowHeap board, heap, x, 3, 0\r\n\r\n\tnoStroke()\r\n\tshowDialogue()\r\n\r\ntext3 = (a,b,c,y) ->\r\n\r\nshowInfo = ->\r\n\tfill 64\r\n\ttextSize 0.2*h\r\n\r\n\tinfoLines[1][2] = general.blackBox.count\r\n\tinfoLines[2][1] = general.maxMoves \r\n\tinfoLines[3][1] = general.hist.length \r\n\tinfoLines[4][1] = general.timeUsed \r\n\ttotal = general.blackBox.total\r\n\tinfoLines[2][2] = total[1]\r\n\tinfoLines[3][2] = total[2]\r\n\tinfoLines[4][2] = total[0] \r\n\r\n\tfor [a,b,c],i in infoLines\r\n\t\tif i==1 and not general.competition then continue\r\n\t\ty = h*(2.2 + 0.2*i)\r\n\t\ttextAlign LEFT,BOTTOM\r\n\t\ttext a, 0.05*w,y\r\n\t\ttextAlign RIGHT,BOTTOM\r\n\t\ttext b, 3*w,y\r\n\t\tif general.competition then text c, 4*w,y\r\n\r\n\tif not general.competition then text \"Hints: #{general.hintsUsed}\",7.95*w,2.8*h\r\n\ttext \"Level: #{general.level}\",7.95*w,3*h\r\n\ttextAlign CENTER,CENTER\r\n\ttextSize 0.4*h\r\n\tstroke 0,64,0\r\n\tnoFill()\r\n\ttext 'Generalens Tidsfördriv', 4*w,1.5*h\r\n\r\nshowDialogue = -> if dialogues.length > 0 then (_.last dialogues).show()\r\n\r\nlegalMove = (board,src,dst) ->\r\n\tif src in ACES then return false \r\n\tif dst in PANEL  then return false \r\n\tif board[src].length==0 then return false\r\n\tif board[dst].length==0 then return true\r\n\t[suit1,under1,over1] = unpack _.last board[src]\r\n\t[suit2,under2,over2] = unpack _.last board[dst]\r\n\tif suit1 == suit2 and 1 == Math.abs over1-over2 then return true \r\n\tfalse\r\n\r\nmakeMove = (board,src,dst,record) -> \r\n\t[suit,under1,over1] = unpack board[src].pop() \r\n\tover = under1 \r\n\tunder = over1 \r\n\tif record then general.hist.push [src, dst, 1 + abs under1-over1]\r\n\tif board[dst].length > 0\r\n\t\t[suit2,under2,over2] = unpack board[dst].pop()\r\n\t\tunder = under2 \r\n\tboard[dst].push pack suit,under,over \r\n\r\n# returns text move\r\nundoMove = ([src,dst,antal]) -> \r\n\tmsg = ''\r\n\tres = prettyUndoMove src,dst,board,antal\r\n\t[board[src],board[dst]] = undoMoveOne board[src],board[dst],antal\r\n\tres\r\n\r\nundoMoveOne = (a,b,antal) ->\r\n\t[suit, under, over] = unpack b.pop()\r\n\tif under < over \r\n\t\ta.push pack suit,over,over-antal+1\r\n\t\tif over-under != antal-1\t\r\n\t\t\tb.push pack suit,under,over-antal\r\n\telse\r\n\t\ta.push pack suit,over,over+antal-1\r\n\t\tif under-over != antal-1\r\n\t\t\tb.push pack suit,under,over+antal #\r\n\t[a,b]\r\nassert [['d9T'],['dJ']], undoMoveOne [],['dJ9'],2\r\nassert [['d9'],['dJT']], undoMoveOne [],['dJ9'],1\r\n\r\nprettyUndoMove = (src,dst,b,antal) ->\r\n\tc2 = _.last b[dst]\r\n\tif b[src].length > 0\r\n\t\tc1 = _.last b[src]\r\n\t\t\"#{prettyCard2 c2,antal} to #{prettyCard c1}\"\r\n\telse\r\n\t\tif src in HEAPS then \"#{prettyCard2 c2,antal} to hole\"\r\n\t\tif src in PANEL then \"#{prettyCard2 c2,antal} to panel\"\r\n\r\n# returns destination\r\noneClick = (data,marked,board,sharp=false) ->\r\n\tif _.isEqual data.lastMarked, marked then data.counter++ else data.counter = 0\r\n\r\n\tholes = []\r\n\tfound = false\r\n\r\n\tfor heap in ACES\r\n\t\tif legalMove board,marked[0],heap  \r\n\t\t\tif sharp then makeMove board,marked[0],heap,true\r\n\t\t\tfound = true \r\n\t\t\treturn heap\r\n\r\n\tif not found # Går ej att flytta till något ess. \r\n\t\talternativeDsts = [] # för att kunna välja mellan flera via Undo\r\n\t\tfor heap in HEAPS\r\n\t\t\tif board[heap].length == 0\r\n\t\t\t\tif marked[0] in PANEL or calcAntal(board[marked[0]]) > 1\r\n\t\t\t\t\tholes.push heap\r\n\t\t\telse \r\n\t\t\t\tif legalMove board,marked[0],heap\r\n\t\t\t\t\talternativeDsts.push heap\r\n\t\tif holes.length > 0 then alternativeDsts.push holes[0]\t\t\r\n\r\n\t\tif alternativeDsts.length > 0\r\n\t\t\theap = alternativeDsts[data.counter % alternativeDsts.length]  \r\n\t\t\tif sharp then makeMove board,marked[0],heap,true\r\n\t\t\tdata.lastMarked = marked \r\n\t\t\treturn heap\r\n\r\n\treturn marked[0] # no Move can happen\r\n\r\n# assert1.jpg\r\nb1 = readBoard \"cA|hA|sA|dA|h5|c3|s65|c2 d5||s3|d2 h6 d4|d3 h4|h2|c5|c4|h3|c6|s4|s2|d6\"\r\nassert 11, oneClick {lastMarked:0, counter:0},[4,0],b1 # hj5 to hj4\r\nassert 5,  oneClick {lastMarked:0, counter:0},[5,0],b1 # kl3 no move\r\nassert 8,  oneClick {lastMarked:0, counter:0},[6,1],b1 # sp5 to hole\r\n\r\nassert 10, oneClick {lastMarked:0, counter:0},[7,1],b1 # ru5 to ru4\r\nassert 8,  oneClick {lastMarked:[7,1], counter:0},[7,1],b1 # ru5 to hole\r\n\r\nassert 8, oneClick {lastMarked:0, counter:0},[8,-1],b1 # hole click\r\nassert 9, oneClick {lastMarked:0, counter:0},[9,0],b1 # sp3 no move\r\n\r\nassert 7, oneClick {lastMarked:0, counter:0},[10,2],b1 # ru4 to ru5\r\nassert 8, oneClick {lastMarked:[10,2], counter:0},[10,2],b1 # ru4 to hole\r\nassert 7, oneClick {lastMarked:[10,2], counter:1},[10,2],b1 # ru4 to ru5\r\n\r\nb1a = readBoard \"cA|hA|sA|dA|h5|c3|s65|c2 d54||s3|d2 h6|d3 h4|h2|c5|c4|h3|c6|s4|s2|d6\"\r\nassert 4, oneClick {lastMarked:[10,2], counter:0},[10,1],b1a # hj6 to hj5\r\nassert 8, oneClick {lastMarked:[10,1], counter:0},[10,1],b1a # hj6 to hole\r\n\r\nassert 4, oneClick {lastMarked:0, counter:0},[11,1],b1 # hj4 to hj5\r\nassert 8, oneClick {lastMarked:[11,1], counter:0},[11,1],b1 # hj4 to hole xxx\r\n\r\nassert 1, oneClick {lastMarked:0, counter:0},[12,0],b1 # hj2 to A\r\nassert 8, oneClick {lastMarked:0, counter:0},[13,0],b1 # kl5 to hole\r\n\r\nassert 5, oneClick {lastMarked:0, counter:0},[14,0],b1 # kl4 to kl3\r\nassert 8, oneClick {lastMarked:[14,0], counter:0},[14,0],b1 # kl4 to hole\r\n\r\nassert 11, oneClick {lastMarked:0, counter:0},[15,0],b1 # hj3 to hj4\r\nassert 8, oneClick {lastMarked:[15,0], counter:0},[15,0],b1 # hj3 to hole\r\n\r\nassert 8, oneClick {lastMarked:0, counter:0},[16,0],b1 # kl6 to hole\r\n\r\nassert 6, oneClick {lastMarked:0, counter:0},[17,0],b1 # sp4 to sp5\r\nassert 9, oneClick {lastMarked:[17,0], counter:0},[17,0],b1 # sp4 to sp3\r\nassert 8, oneClick {lastMarked:[17,0], counter:1},[17,0],b1 # sp4 to hole\r\n\r\nassert 2, oneClick {lastMarked:0, counter:0},[18,0],b1 # sp2 to A\r\n\r\nassert 7, oneClick {lastMarked:0, counter:0},[19,0],b1 # ru6 to ru5\r\nassert 8, oneClick {lastMarked:[19,0], counter:0},[19,0],b1 # ru6 to hole\r\n\r\n# assert2.jpg\r\nb2 = readBoard \"cA|hA|sA|dA|d5 h2 d3 h3|c7|c34|d4 h76|||s3 d6 c6|d7 c5 d2|c2|s4|s6|h5|s5|s7|s2|h4\"\r\n#assert 8, oneClick {lastMarked:0, marked:9, counter:0},b2 #hj6 to hole\r\n\r\nhitGreen = (mx,my,mouseX,mouseY) ->\r\n\tif my==3 then return false\r\n\tseqs = board[mx+4]\r\n\tn = calcAntal seqs\r\n\tif n==0 then return true\r\n\tmouseY > h*(1+1/4*(n-1))\r\n\r\nmousePressed = -> \r\n\r\n\tif not (0 < mouseX < width) then return\r\n\tif not (0 < mouseY < height) then return\r\n\r\n\tmx = mouseX//w\r\n\tmy = mouseY//h\r\n\r\n\tdialogue = _.last dialogues\r\n\tif dialogues.length==0 or not dialogue.execute mouseX,mouseY \r\n\t\tindicators = {}\r\n\r\n\t\tif mx == 8 or hitGreen mx,my,mouseX,mouseY \r\n\t\t\tif dialogues.length == 0 then menu1() else dialogues.pop()\r\n\t\t\tdisplay board\r\n\t\t\treturn\r\n\r\n\t\tgeneral.handle mx,my\r\n\r\n\tdisplay board\r\n\r\n\r\n####### AI-section ########\r\n\r\nfindAllMoves = (b) ->\r\n\tsrcs = HEAPS.concat PANEL \r\n\tdsts = ACES.concat HEAPS \r\n\tres = []\r\n\tfor src in srcs\r\n\t\tholeUsed = false\r\n\t\tfor dst in dsts\r\n\t\t\tif src != dst\r\n\t\t\t\tif legalMove b,src,dst\r\n\t\t\t\t\tif b[dst].length==0\r\n\t\t\t\t\t\tif holeUsed then continue\r\n\t\t\t\t\t\tholeUsed=true\r\n\t\t\t\t\tres.push [src,dst]\r\n\tres\r\n\r\nexpand = ([aceCards,level,b,path]) ->\r\n\tres = []\r\n\tmoves = findAllMoves b\r\n\tfor move in moves\r\n\t\t[src,dst] = move\r\n\t\tb1 = _.cloneDeep b\r\n\t\tmakeMove b1,src,dst\r\n\t\tkey = dumpBoard b1\r\n\t\tif key not of hash\r\n\t\t\tnewPath = path.concat [move]\r\n\t\t\thash[key] = [newPath, b]\r\n\t\t\tres.push [countAceCards(b1), level+1, b1, path.concat([move])] \r\n\tres\r\n\r\nhint = ->\r\n\tif 4*N == countAceCards board then return \r\n\tgeneral.hintsUsed++\r\n\tres = hintOne()\r\n\tif res or general.hist.length==0 then return \r\n\tindicators = {}\r\n\t[src,dst] = _.last general.hist \r\n\tindicators[src] = ['#f00',true]\r\n\tindicators[dst] = ['#f00',false]\t\r\n\t#undoMove hist.pop()\r\n\r\nhintOne = -> \r\n\thintTime = millis()\r\n\taceCards = countAceCards board\r\n\tif aceCards == N*4 then return true\r\n\tcands = []\r\n\tcands.push [aceCards,general.hist.length,board,[]] # antal kort på ässen, antal drag, board\r\n\r\n\thash = {}\r\n\tkey = dumpBoard board\r\n\tpath = []\r\n\thash[key] = [path, board]\r\n\r\n\tnr = 0\r\n\tcand = null\r\n\torigBoard = _.cloneDeep board\r\n\r\n\twhile nr < 10000 and cands.length > 0 and aceCards < N*4\r\n\t\tnr++ \r\n\t\tcand = cands.pop()\r\n\t\taceCards = cand[0]\r\n\t\tif aceCards < N*4 \r\n\t\t\tincrement = expand cand\r\n\t\t\tcands = cands.concat increment\r\n\t\t\tcands.sort (a,b) -> if a[0] == b[0] then b[1]-a[1] else a[0]-b[0]\r\n\tprint N,nr,cands.length,aceCards\r\n\r\n\tif aceCards == N*4\r\n\t\tboard = cand[2]\r\n\t\t#printAutomaticSolution hash, board\r\n\t\tpath = cand[3]\r\n\t\tboard = origBoard\r\n\t\t[src,dst] = path[0]\r\n\t\t#makeMove board,src,dst,true\r\n\t\tindicators = {}\r\n\t\tindicators[src] = ['#0f0',true]\r\n\t\tindicators[dst] = ['#0f0',false]\r\n\r\n\t\tprint \"hint: #{int millis()-hintTime} ms\"\r\n\t\treturn true\r\n\telse\r\n\t\tprint 'hint failed. Should never happen!'\r\n\t\t#print N,nr,cands.length,aceCards,_.size hash\r\n\t\tboard = origBoard\r\n\t\treturn false\r\n\r\nnewGame = (lvl) -> # 0..15\r\n\tgeneral.level = lvl\r\n\tgeneral.start = millis()\r\n\tmsg = ''\r\n\tgeneral.hist = []\r\n\twhile true \r\n\t\tmakeBoard general.level \r\n\t\tgeneral.hintsUsed = 0\r\n\t\toriginalBoard = _.cloneDeep board\r\n\r\n\t\taceCards = countAceCards board\t\t\r\n\t\tcands = []\r\n\t\tcands.push [aceCards,0,board,[]] # antal kort på ässen, antal drag, board\r\n\t\thash = {}\r\n\t\tnr = 0\r\n\t\tcand = null\t\t\r\n\r\n\t\twhile nr < LIMIT and cands.length > 0 and aceCards < N*4\r\n\t\t\tnr++ \r\n\t\t\tcand = cands.pop()\r\n\t\t\taceCards = cand[0]\r\n\t\t\tincrement = expand cand\r\n\t\t\tcands = cands.concat increment\r\n\t\t\tcands.sort (a,b) -> if a[0] == b[0] then b[1]-a[1] else a[0]-b[0]\r\n\r\n\t\tprint nr,cands.length\r\n\t\tif aceCards == N*4\r\n\t\t\tprint JSON.stringify dumpBoard originalBoard \r\n\t\t\tboard = cand[2]\r\n\t\t\tprint makeLink()\r\n\t\t\tprintAutomaticSolution hash,board\r\n\t\t\tboard = _.cloneDeep originalBoard\r\n\t\t\tprint \"#{int millis()-general.start} ms\"\r\n\t\t\tgeneral.start = millis()\r\n\t\t\tgeneral.maxMoves = int cand[1] \r\n\t\t\treturn \r\n\r\nrestart = ->\r\n\tgeneral.hist = []\r\n\tboard = _.cloneDeep originalBoard\r\n\tmsg = ''\r\n\r\nprettyCard2 = (card,antal) ->\r\n\t[suit,under,over] = unpack card \r\n\tif antal==1 \r\n\t\t\"#{SUIT[suit]} #{RANK[over]}\"\r\n\telse\r\n\t\tif under < over\r\n\t\t\t\"#{SUIT[suit]} #{RANK[over]}..#{RANK[over-antal+1]}\"\r\n\t\telse\r\n\t\t\t\"#{SUIT[suit]} #{RANK[over]}..#{RANK[over+antal-1]}\"\r\n\r\nprettyCard = (card,antal=2) ->\r\n\t[suit,under,over] = unpack card \r\n\tif antal==1 then \"#{RANK[over]}\"\r\n\telse \"#{SUIT[suit]} #{RANK[over]}\"\r\nassert \"club A\", prettyCard pack 0,0,0\r\nassert \"club T\", prettyCard pack 0,9,9\r\nassert \"heart J\", prettyCard pack 1,10,10\r\nassert \"spade Q\", prettyCard pack 2,11,11\r\nassert \"diamond K\", prettyCard pack 3,12,12\r\nassert \"3\", prettyCard pack(3,2,2),1\r\n#print 'prettyCard ok'\r\n\r\nprettyMove = (src,dst,b) ->\r\n\tc1 = _.last b[src]\r\n\tif b[dst].length > 0\r\n\t\tc2 = _.last b[dst]\r\n\t\t\"#{prettyCard c1} to #{prettyCard c2,1}\"\r\n\telse\r\n\t\tif dst in HEAPS then \"#{prettyCard c1} to hole\"\r\n\t\telse \"#{prettyCard c1} to panel\"\r\n\r\nprintAutomaticSolution = (hash, b) ->\r\n\tkey = dumpBoard b\r\n\tsolution = []\r\n\twhile key of hash\r\n\t\t[path,b] = hash[key]\r\n\t\tsolution.push hash[key]\r\n\t\tkey = dumpBoard b\r\n\tsolution.reverse()\r\n\ts = 'Automatic Solution:'\r\n\tfor [path,b],index in solution\r\n\t\t[src,dst] = _.last path \r\n\t\ts += \"\\n#{index}: #{prettyMove src,dst,b} (#{src} to #{dst})\"\r\n\tprint s\r\n\r\nprintManualSolution = ->\r\n\tb = _.cloneDeep originalBoard\r\n\ts = 'Manual Solution:'\r\n\tfor [src,dst,antal],index in general.hist\r\n\t\ts += \"\\n#{index}: #{prettyMove src,dst,b}\"\r\n\t\tmakeMove b,src,dst,false\r\n\tprint s\r\n"
  ]
}