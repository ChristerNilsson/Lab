{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# Vectorized Playing Cards 2.0 - http://sourceforge.net/projects/vector-cards/\r\n# Copyright 2015 - Chris Aguilar - conjurenation@gmail.com\r\n# Licensed under LGPL 3 - www.gnu.org/copyleft/lesser.html\r\n\r\n#  4  4  4  4  4  0  8  8  8  8  8\r\n#  5  5  5  5  5  1  9  9  9  9  9\r\n#  6  6  6  6  6  2 10 10 10 10 10\r\n#  7  7  7  7  7  3 11 11 11 11 11\r\n#    12 13 14 15 16 17 18 19 20\r\n\r\nSUIT = \"kl hj sp ru\".split ' '\r\nRANK = \"Ess 2 3 4 5 6 7 8 9 T Kn D K\".split ' '\r\nOFFSETX = 468\r\nW = 263.25\r\nH = 352\r\nw = W/3\r\nh = H/3\r\nimg = null\r\nboard=null\r\ncards = null\r\nhist = []\r\nmarked = null\r\ncands = null\r\nhash = null\r\naceCards = 4\r\ndone = null\r\n\r\npreload = -> img = loadImage 'cards/Color_52_Faces_v.2.0.png'\r\n\r\nrange = _.range\r\n\r\nmakeBoard = (wild=false)->\r\n\tcards = []\r\n\tfor rank in range 1,13\r\n\t\tfor suit in range 4\r\n\t\t\tcards.push [suit,rank,rank]\r\n\tcards = _.shuffle cards\r\n\r\n\tboard = []\r\n\tfor i in range 21 \r\n\t\tboard.push []\r\n\r\n\tfor suit,heap in [2,1,3,0]\r\n\t\tboard[heap].push [suit,0,0]\r\n\tfor i in range 4,12\r\n\t\tfor j in range 5 \r\n\t\t\trr = if wild then int random 4,12 else i\r\n\t\t\tboard[rr].push cards.pop()\r\n\tfor heap in [12,13,14,15,17,18,19,20]\r\n\t\tboard[heap].push cards.pop()\r\n\r\n\tprint JSON.stringify(board)\r\n\r\nfakeBoard = ->\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,2,2],[1,3,3],[1,1,1],[3,1,1],[3,2,2]],[[0,4,4],[0,12,12],[3,5,5],[1,8,8],[3,9,9]],[[2,11,11],[3,12,12],[0,6,6],[2,5,5],[1,7,7]],[[0,8,8],[3,11,11],[2,6,6],[2,9,9],[1,12,12]],[[0,9,9],[0,10,10],[2,10,10],[2,4,4],[2,7,7]],[[1,2,2],[3,4,4],[3,6,6],[0,5,5],[1,11,11]],[[0,1,1],[0,7,7],[1,10,10],[1,5,5],[3,8,8]],[[0,3,3],[1,4,4],[3,3,3],[2,2,2],[3,10,10]],[[0,11,11]],[[3,7,7]],[[2,1,1]],[[2,8,8]],[],[[1,6,6]],[[2,3,3]],[[2,12,12]],[[1,9,9]]] # nix!\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,10,10],[2,11,11],[0,6,6],[3,9,9],[1,8,8]],[[3,10,10],[2,10,10],[0,12,12],[0,4,4],[3,1,1]],[[3,12,12],[1,3,3],[1,4,4],[1,9,9],[0,2,2]],[[3,4,4],[3,5,5],[2,5,5],[2,9,9],[2,3,3]],[[3,6,6],[1,7,7],[0,5,5],[2,7,7],[3,8,8]],[[2,4,4],[0,9,9],[1,2,2],[3,11,11],[1,6,6]],[[2,8,8],[2,1,1],[2,2,2],[1,10,10],[3,3,3]],[[1,1,1],[1,11,11],[1,12,12],[3,7,7],[2,12,12]],[[0,11,11]],[[3,2,2]],[[1,5,5]],[[0,8,8]],[],[[2,6,6]],[[0,3,3]],[[0,1,1]],[[0,7,7]]] # 851 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,3,3],[2,12,12],[2,11,11],[3,10,10],[1,7,7]],[[1,11,11],[0,5,5],[2,9,9],[3,12,12],[1,5,5]],[[0,12,12],[3,8,8],[1,9,9],[0,6,6],[1,6,6]],[[3,1,1],[2,7,7],[0,8,8],[0,7,7],[1,3,3]],[[1,8,8],[0,9,9],[2,10,10],[3,9,9],[1,4,4]],[[1,12,12],[3,2,2],[3,3,3],[3,4,4],[1,2,2]],[[3,6,6],[2,1,1],[0,2,2],[2,8,8],[0,3,3]],[[1,1,1],[3,7,7],[2,6,6],[3,11,11],[0,1,1]],[[2,5,5]],[[2,2,2]],[[1,10,10]],[[2,4,4]],[],[[3,5,5]],[[0,10,10]],[[0,11,11]],[[0,4,4]]] # 963 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[3,12,12],[3,9,9],[2,5,5],[3,2,2],[1,10,10]],[[0,1,1],[0,10,10],[2,4,4],[1,3,3],[3,7,7]],[[0,3,3],[0,11,11],[2,7,7],[3,8,8],[1,2,2]],[[0,5,5],[2,6,6],[0,6,6],[3,3,3],[1,5,5]],[[0,4,4],[3,5,5],[0,2,2],[3,10,10],[2,2,2]],[[2,10,10],[0,12,12],[2,1,1],[2,11,11],[0,9,9]],[[3,4,4],[1,7,7],[1,6,6],[2,12,12],[1,8,8]],[[1,1,1],[1,12,12],[1,11,11],[1,4,4],[2,3,3]],[[0,8,8]],[[3,11,11]],[[2,9,9]],[[0,7,7]],[],[[3,1,1]],[[2,8,8]],[[3,6,6]],[[1,9,9]]] # 264 ms\r\n\t#board = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[1,1,1],[0,12,12],[3,3,3],[2,7,7],[3,11,11]],[[2,11,11],[2,8,8],[3,6,6],[0,1,1],[0,6,6]],[[1,8,8],[1,6,6],[0,3,3],[1,3,3],[0,7,7]],[[0,11,11],[1,10,10],[3,12,12],[1,11,11],[1,2,2]],[[0,4,4],[3,2,2],[2,2,2],[3,7,7],[0,5,5]],[[2,5,5],[2,9,9],[3,8,8],[3,9,9],[2,4,4]],[[2,10,10],[0,9,9],[1,12,12],[3,4,4],[3,10,10]],[[2,12,12],[3,5,5],[1,4,4],[2,1,1],[0,2,2]],[[1,5,5]],[[0,10,10]],[[0,8,8]],[[1,9,9]],[],[[3,1,1]],[[1,7,7]],[[2,6,6]],[[2,3,3]]] # 397 ms\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[0,2,2],[2,4,4],[2,10,10],[2,5,5],[1,1,1],[3,12,12],[2,12,12],[3,11,11],[1,8,8],[1,6,6]],[[3,9,9],[2,11,11],[0,12,12],[0,3,3],[3,10,10]],[[3,3,3],[0,9,9]],[[2,7,7],[1,4,4],[3,2,2],[1,9,9],[0,6,6],[1,5,5],[0,1,1]],[[1,3,3],[1,2,2],[2,2,2],[2,6,6],[1,11,11]],[[3,7,7],[2,8,8],[1,7,7],[3,1,1],[0,8,8]],[[2,3,3],[3,5,5],[3,6,6]],[[1,12,12],[3,4,4],[0,5,5]],[[0,7,7]],[[3,8,8]],[[1,10,10]],[[0,11,11]],[],[[0,4,4]],[[0,10,10]],[[2,1,1]],[[2,9,9]]]\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[2,7,7],[0,8,8],[0,2,2],[0,5,5]],[[2,9,9],[1,5,5],[0,3,3],[2,11,11],[1,10,10]],[[2,2,2],[1,8,8]],[[1,11,11],[2,6,6],[2,10,10],[2,5,5],[3,3,3],[1,1,1]],[[3,2,2],[3,12,12],[2,3,3],[1,7,7],[3,4,4],[3,11,11]],[[3,8,8],[0,10,10],[3,7,7],[0,12,12],[1,3,3],[0,9,9],[1,12,12]],[[0,7,7],[2,12,12],[0,6,6],[3,9,9]],[[1,2,2],[0,4,4],[1,6,6],[2,4,4],[1,4,4],[1,9,9]],[[3,6,6]],[[2,8,8]],[[2,1,1]],[[3,10,10]],[],[[0,11,11]],[[0,1,1]],[[3,1,1]],[[3,5,5]]] # 118 ms\r\n\tboard = [[[2,0,0]],[[1,0,0]],[[3,0,0]],[[0,0,0]],[[3,3,3],[2,3,3],[0,6,6],[3,5,5],[0,9,9],[2,10,10],[1,10,10]],[[0,10,10],[0,7,7],[3,8,8],[2,11,11]],[[0,12,12],[3,7,7],[2,1,1],[2,8,8],[1,7,7]],[[1,4,4],[2,5,5],[2,6,6],[1,2,2],[0,1,1],[2,2,2],[3,11,11],[2,7,7]],[[3,6,6],[3,9,9],[0,4,4],[3,4,4],[1,8,8]],[[0,3,3],[3,12,12],[1,11,11]],[[2,4,4],[0,2,2],[3,10,10],[0,8,8]],[[1,5,5],[2,9,9],[1,6,6],[1,1,1]],[[0,5,5]],[[0,11,11]],[[2,12,12]],[[1,3,3]],[],[[1,12,12]],[[1,9,9]],[[3,1,1]],[[3,2,2]]]\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,600\r\n\r\n\tmakeBoard true\r\n\tdisplay board \r\n\tcands = [board]\r\n\tdone = board \r\n\thash = {}\r\n\r\nshowHeap = (board,heap,x,y,dx) ->\r\n\tn = calcAntal board[heap]\r\n\tif n==0 then return \r\n\tx0 = width/2 - w/2\r\n\tif x < 0 then x0 += -w+dx\r\n\tif x > 0 then x0 += w-dx\r\n\tx = x0 + x*dx/2\r\n\ty = y * h\r\n\tfor card,k in board[heap]\r\n\t\t[suit,rank2,rank1] = card\r\n\t\tdr = if rank1 < rank2 then 1 else -1\r\n\t\tfor rank in range rank1,rank2+dr,dr\r\n\t\t\timage img, x,y+13, w,h, OFFSETX+W*rank,1092+H*suit,243,H\r\n\t\t\tx += dx\r\n\r\n\tif marked? and marked == heap \r\n\t\tfill 0,128,0,128\r\n\t\tif y==4*h \r\n\t\t\tellipse x-w/2,y+h/2,20 \r\n\t\telse\r\n\t\t\tif dx<0  then ellipse x+w,  y+h/2,20\r\n\t\t\tif dx>0  then ellipse x,    y+h/2,20\r\n\t\t\tif dx==0 then ellipse x+w/2,y+h/2,20\r\n\r\ncalcAntal = (lst) -> # Klarar ej Ess Kung Dam ... just nu\r\n\tres=0\r\n\tfor [suit,rank1,rank2] in lst\r\n\t\tres += 1 + abs(rank1-rank2)\r\n\tres\r\n\r\ndisplay = (board) ->\r\n\tbackground 0,0,128\r\n\r\n\tfor heap,y in [0,1,2,3]\r\n\t\tshowHeap board, heap, 0, y, 0\r\n\r\n\tfor heap,y in [4,5,6,7]\r\n\t\tn = calcAntal board[heap]\r\n\t\tdx = if n<=7 then w/2 else (width/2-w/2-w)/(n-1)\r\n\t\tshowHeap board, heap, -2, y, -dx\r\n\r\n\tfor heap,y in [8,9,10,11]\r\n\t\tn = calcAntal board[heap]\r\n\t\tdx = if n<=7 then w/2 else (width/2-w/2-w)/(n-1)\r\n\t\tshowHeap board, heap, 2, y, dx\r\n\r\n\tfor heap,x in [12,13,14,15,16,17,18,19,20]\r\n\t\txx = [-8,-6,-4,-2,0,2,4,6,8][x]\r\n\t\tshowHeap board, heap, xx,4, w\r\n\r\nlegalMove = (board,a,b) ->\r\n\tif a in [0,1,2,3] then return false \r\n\tif b in [12,13,14,15,17,18,19,20] then return false \r\n\tb1 = board[12].length + board[13].length + board[14].length + board[15].length \r\n\tb2 = board[17].length + board[18].length + board[19].length + board[20].length \r\n\tif a==16 then return b1==0 or b2==0\r\n\tif b==16 then return board[16].length==0 and a in [4,5,6,7,8,9,10,11]\r\n\t#print a,b,board[a].length,_.last board[a],board[b].length,_.last board[b]\r\n\tif board[a].length==0 then return false\r\n\tif board[b].length==0 then return true\r\n\t[sa,a1,a2] = _.last board[a]\r\n\t[sb,b1,b2] = _.last board[b]\r\n\tif sa==sb and abs(a1-b1) in [1] then return true # 1,12\r\n\tfalse\r\n\r\nmakeMove = (board,a,b) -> # from a to b\r\n\tsuit = _.last(board[a])[0]\r\n\tacard = board[a].pop()\r\n\trank1 = acard[2]\r\n\trank2 = acard[1]\r\n\tif board[b].length > 0 then\trank2 = board[b].pop()[2]\r\n\tboard[b].push [suit,rank1,rank2]\r\n\r\nmousePressed = ->\r\n\tmx = mouseX//(W/3)\r\n\tmy = mouseY//(H/3)\r\n\tif my >= 4\r\n\t\tmarked1 = 12 + mx\r\n\telse\r\n\t\tif mx==4 then marked1 = my\r\n\t\telse if mx<4 then marked1 = 4+my\r\n\t\telse marked1 = 8+my\r\n\r\n\tif marked?\r\n\t\tif marked1 != marked \r\n\t\t\tif legalMove board,marked,marked1  \r\n\t\t\t\tmakeMove board,marked,marked1\r\n\t\tmarked = null\r\n\telse\r\n\t\tmarked = marked1\r\n\tdisplay board\r\n\r\n####### AI-section ########\r\n\r\nsrcs = [4,5,6,7, 8,9,10,11, 12,13,14,15, 17,18,19,20]\r\ndsts = [0,1,2,3, 4,5,6,7, 8,9,10,11]\r\n\r\nfindAllMoves = (b) ->\r\n\tres = []\r\n\tfor src in srcs\r\n\t\tfor dst in dsts\r\n\t\t\tif src!=dst\r\n\t\t\t\tif legalMove b,src,dst then res.push [src,dst]\r\n\tres\r\n\r\nmakeKey = (b) ->\r\n\tres = ''\r\n\tfor heap,index in b\r\n\t\tfor [suit,r1,r2] in heap\r\n\t\t\tif r1==r2\r\n\t\t\t\tres += 'shrk'[suit] + str(r1)\r\n\t\t\telse\r\n\t\t\t\tres += 'shrk'[suit] + str(r1) + str(r2)\r\n\t\tres += ' '\r\n\tres \r\n\r\ncountAceCards = (b) ->\r\n\tres\t= 0\r\n\tfor heap in [0,1,2,3]\r\n\t\tres += calcAntal b[heap]\r\n\tres\r\n\r\nexpand = (b) ->\r\n\tres = []\r\n\tmoves = findAllMoves b\r\n\tfor [src,dst] in moves\r\n\t\tb1 = _.cloneDeep b\r\n\t\tmakeMove b1,src,dst\r\n\t\tkey = makeKey b1\r\n\t\tif key not of hash\r\n\t\t\thash[key] = [src,dst,b]\r\n\t\t\tres.push b1\r\n\t\t\tif aceCards < countAceCards b1\r\n\t\t\t\taceCards = countAceCards b1\r\n\t\t\t\tprint 'Done!',aceCards\r\n\t\t\t\tdone = b1\r\n\tres\r\n\r\nsolve = ->\r\n\tdone = null\r\n\twhile done == null \r\n\t\tif cands.length == 0 then return\r\n\t\tres = []\r\n\t\tfor cand in cands \r\n\t\t\tres = res.concat expand cand\r\n\t\tcands = res\r\n\r\nkeyPressed = -> \r\n\tif key == ' '\r\n\t\tstart = millis()\r\n\t\twhile 52 > countAceCards done\r\n\t\t\tsolve()\r\n\t\t\tcands = [done]\r\n\t\tprint millis()-start, countAceCards done\r\n\t\tprintSolution hash,done\r\n\r\nprettyCard = ([suit,rank1,rank2],antal=2) ->\r\n\tif antal==1\r\n\t\t\"#{RANK[rank1]}\"\r\n\telse if rank1==rank2\r\n\t\t\"#{SUIT[suit]} #{RANK[rank1]}\"\r\n\telse\r\n\t\t\"#{SUIT[suit]} #{RANK[rank1]}..#{RANK[rank2]}\"\r\n\r\nprettyMove = (src,dst,b) ->\r\n\tc1 = _.last b[src]\r\n\tif b[dst].length>0\r\n\t\tc2 = _.last b[dst]\r\n\t\t\"#{prettyCard c1} till #{prettyCard c2,1}\"\r\n\telse\r\n\t\t\"#{prettyCard c1} till hål\"\r\n\r\nprintSolution = (hash, b) ->\r\n\tkey = makeKey b\r\n\tsolution = []\r\n\twhile key of hash\r\n\t\t[src,dst,b] = hash[key]\r\n\t\tsolution.push hash[key]\r\n\t\tkey = makeKey b\r\n\tsolution.reverse()\r\n\ts = ''\r\n\tfor [src,dst,b] in solution\r\n\t\ts += \"\\n\" + prettyMove src,dst,b\r\n\tprint s"
  ]
}