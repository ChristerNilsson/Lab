{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "# Vectorized Playing Cards 2.0 - http://sourceforge.net/projects/vector-cards/\r\n# Copyright 2015 - Chris Aguilar - conjurenation@gmail.com\r\n# Licensed under LGPL 3 - www.gnu.org/copyleft/lesser.html\r\n\r\nOFFSETX = 468\r\nW = 263.25\r\nH = 352\r\nw = W/3\r\nh = H/3\r\nimg = null\r\nboard=null\r\nhist = []\r\npreload = -> img = loadImage 'cards/Color_52_Faces_v.2.0.png'\r\n\r\nmarked = null\r\n\r\nsetup = ->\r\n\tcreateCanvas 800,600\r\n\r\n\t# createCanvas 4000,2600\r\n\t# image img, 0,0 #, w,h, 460+W*i,1080+H*j,W,H\r\n\t# return\r\n\r\n\tcards=[]\r\n\tfor i in range 1,13\r\n\t\tfor j in range 4\r\n\t\t\tcards.push [j,i]\r\n\tcards = _.shuffle cards\r\n\tboard = []\r\n\tfor i in range 21 \r\n\t\tboard.push []\r\n\tfor i in range 4\r\n\t\tboard[i].push [i,0]\r\n\tfor i in range 4,12\r\n\t\tfor j in range 5 \r\n\t\t\trr = int random 4,12\r\n\t\t\tboard[rr].push cards.pop()\r\n\tfor i in [12,13,14,15,17,18,19,20]\r\n\t\tboard[i].push cards.pop()\r\n\r\n\tdisplay()\r\n\r\nshowCard = (heap,k,x,y,n,dx=0) ->\r\n\tif n==0 then return \r\n\tx0 = width/2 - w/2\r\n\tif x < 0 then x0 += -w+dx\r\n\tif x > 0 then x0 += w-dx\r\n\tx = x0 + x*dx/2\r\n\ty = y * h\r\n\t[j,i] = board[heap][k]\r\n\timage img, x,y, w,h, OFFSETX+W*i,1092+H*j,243,H\r\n\tif marked?\r\n\t\tif k==n-1\r\n\t\t\tif marked == heap \r\n\t\t\t\tfc 0,1,0,0.5\r\n\t\t\t\tcircle x+w/2,y+h/2,20\r\n\r\ndisplay = ->\r\n\tbg 0.5\r\n\r\n\tfor heap,y in [0,1,2,3]\r\n\t\tn = board[heap].length\r\n\t\tshowCard heap,n-1, 0, y, n\r\n\r\n\tfor heap,y in [4,5,6,7]\r\n\t\tn = board[heap].length\r\n\t\tdx = if n<=7 then w else (width/2-w/2-w)/(n-1)*2\r\n\t\tfor z,x in board[heap]\r\n\t\t\tshowCard heap,x, -2-x, y,n,dx\r\n\r\n\tfor heap,y in [8,9,10,11]\r\n\t\tn = board[heap].length\r\n\t\tdx = if n<=7 then w else (width/2-w/2-w)/(n-1)*2\r\n\t\tfor z,x in board[heap] \r\n\t\t\tshowCard heap,x, 2+x, y,n,dx\r\n\r\n\tfor heap,x in [12,13,14,15,16,17,18,19,20]\r\n\t\tn = board[heap].length\r\n\t\txx = [-8,-6,-4,-2,0,2,4,6,8][x]\r\n\t\tshowCard heap,0, xx,4, n,w\r\n\r\nlegalMove = (a,b) ->\r\n\tif b in [12,13,14,15,17,18,19,20] then return false \r\n\tif a in [0,1,2,3] then return false \r\n\tb1 = board[12].length + board[13].length + board[14].length + board[15].length \r\n\tb2 = board[17].length + board[18].length + board[19].length + board[20].length \r\n\tif a==16 then return b1==0 or b2==0\r\n\tif b==16 then return board[16].length==0 and a in [4,5,6,7,8,9,10,11]\r\n\tif board[b].length==0 then return true\r\n\tif a in [0,1,2,3] then return false\r\n\tif b in [12,13,14,15,17,18,19,20] then return false\r\n\tc1 = _.last board[a]\r\n\tc2 = _.last board[b]\r\n\tif c1[0]==c2[0] and abs(c1[1]-c2[1]) in [1,12] then return true\r\n\tfalse\r\n\r\nmakeMove = (a,b) ->\r\n\tboard[b].push board[a].pop()\r\n\thist.push [a,b]\r\n\r\nkeyPressed = ->\r\n\tif key==' '\r\n\t\t[a,b] = hist.pop()\r\n\t\tboard[a].push board[b].pop()\r\n\t\tdisplay()\r\n\r\nmousePressed = ->\r\n\tmx = mouseX//(W/3)\r\n\tmy = mouseY//(H/3)\r\n\tif my >= 4\r\n\t\tmarked1 = 12 + mx\r\n\telse\r\n\t\tif mx==4 then marked1 = my\r\n\t\telse if mx<4 then marked1 = 4+my\r\n\t\telse marked1 = 8+my\r\n\r\n\tif marked?\r\n\t\tif marked1 != marked \r\n\t\t\tif legalMove marked,marked1  \r\n\t\t\t\tmakeMove marked,marked1\r\n\t\tmarked = null\r\n\telse\r\n\t\tmarked = marked1\r\n\tdisplay()\r\n\r\n# draw = ->\r\n# \t#display()\r\n# \tbg 0.5\r\n# \timage img, 0,0 #, w,h, 460+W*i,1080+H*j,W,H\r\n\r\n# mousePressed = ->\r\n# \tprint mouseX\r\n"
  ]
}