{
  "version": 3,
  "file": "korg.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\korg.coffee"
  ],
  "names": [],
  "mappings": ";;;;;;;;;AAAA,IAAA;;AAAA,AAAM;AACL,AAAc;;;AACb,AAAC,SAAD,AAAC,QAAQ;AACT,AAAC,SAAD,AAAC,SAAS;AACV,AAAC,SAAD,AAAC,QAAQ;AACT,AAAC,SAAD,AAAC,QAJY,AAIJ;AAEV,AAAM;;;;wBAAA,AAAC;aAAS,AAAC,KAAA,AAAK,MAAN,AAAO,KAAjB,AAAU,AAAY;AAE5B,AAAU;;;4BAAA,AAAC,GAAD,AAAG,MAAH,AAAQ;AACjB,AAAK,WAAL,AAAK,MAAM;aACX,AAAC,EAAD,AAAE,QAAW,AAAK,KAAL,AAAK,OAAR,AAAY,IAAZ,AAAmB,KAAQ,AAAK,KAFjC,AAEiC;AAE3C,AAAU;;;4BAAA,AAAC,OAAD,AAAO,GAAP,AAAS,OAAT,AAAe,KAAf,AAAmB;AAC5B,UAAG,AAAM,MAAN,AAAM,OAAN,AAAW,SAAd,AAAuB;AACtB,AAAM,cAAN,AAAM,QAAQ;AACd,AAAM,cAAN,AAAM,QAAQ;AACd,AAAK,cAAL,AAAM,QAAW,AAAM,MAAN,AAAM,SAAT,AAAe,IAAf,AAAsB,KAAQ,AAAM,MAAA;eAClD,AAAC,EAAD,AAAE,QAAW,AAAM,MAAN,AAAM,SAAT,AAAe,IAAf,AAAsB,KAAQ,AAAM,MAJ/C,AAI+C;AALtC;AAZV;;AAoBA,AAAW;;;;;AACV,UADW,4EAAM,AAAC,KAAR,AAAQ;UAAM,4EAAd,AAAoB;UAAG,yEAAvB,AAA0B;;UACpC,OAAA,UAAA,GAAA,IAAA,MAAA,GAAA,KAAA,KAAA,MAAA,SAAA,UAAA,UAAA;AAAA,UAAG,UAAS,SAAS,AAAC,KAAV,AAAU,QAAtB,AAAY,AAAiB,KAAQ;AAArC;;AACA,UAAG,UAAH,AAAU,GACT;;AAAA,aAAA,8CAAA;uBACC;sBAAwC;;;;AAAxC,AAAC;AAAD,AAAI;AAAJ,AAAU;AAAV,AAAe;AAAf,AAAqB;AAAS,AAAC,eAA/B,AAA+B;;AAC/B,AAAC,eAAD,AAAC,UAAD,AAAW,MAAX,AAAgB,IAAhB,AAAmB,MAAnB,AAAwB,OAAM,CAA9B,AAA+B,GAA/B,AAAiC,GAAE,AAAE,GAAF,AAAG,OAAtC,AAAmC,AAAU,IAA7C,AAAgD;AAChD,cAAA,AAAG;yBAAc,AAAC,KAAD,AAAC,SAAD,AAAU,UAAS,QAAnB,AAAyB,GAAE,AAAE,GAAF,AAAG,OAA/C,AAAiB,AAA2B,AAAU;AAAtD,iBAAA;8BAAA;AAHD;AAAA;eADD;AAAA,aAKK,IAAG,UAAH,AAAU,GACd;;AAAA,aAAA,OAAA;AACC,qBAAW,AAAM,MAAA;wBACjB,AAAC,KAAD,AAAC,UAAD,AAAW,OAAX,AAAiB,KAAjB,AAAqB,IAArB,AAAwB,GAAE,AAAM,MAAA,AAAK,KAArC,AAAqC,IAAG,CAAxC,AAAyC,GAAzC,AAA2C,GAAE,AAAE,GAAF,AAAG,OAAhD,AAA6C,AAAU,IAFxD,AAEC,AAA0D;AAF3D;eADI;AAPK;AAYX,AAAY;;;8BAAA,AAAC,MAAD,AAAM,IAAN,AAAS,MAAT,AAAc,OAAd,AAAoB,OAApB,AAA0B,OAA1B,AAAgC,IAAhC,AAAmC;AAC9C;;UAAA,IAAA,IAAA,IAAA,KAAA,QAAA,KAAA,KAAA,KAAA,KAAA,IAAA;AAAA,UAAG,QAAH,AAAS;AAAO,AAAS,wBAAzB,AAAyB,AAAK,AAAM;AAApC,aAAA;AAA4C,iBAA5C,AAAoD;;AACpD,UAAI,AAAU,WAAV,AAAW,MAAX,AAAiB,GAAE,IAAnB,AAAqB,SAArB,AAA8B,QAAQ;AAC1C,WAAK,WAAA,AAAW;AAChB,AAAE,SAAC,AAAK,MAAR,AAAS,YAAY;AACrB,AAAE,SAAF,AAAG,SAAS;AACZ,AAAE,SAAF,AAAG,UAAU;AACZ,AAAC,cAAD,AAAC,SAAS,WAAW,AAAC,MAAZ,AAAY,QAAQ,AAAE,GAAtB,AAAuB;eADrB,AAEZ;;AAED,UAAO,UAAH,AAAU,IAAV,AAAiB,KAAQ;AAC7B,WAAK,WAAA,AAAW,GAAX,AAAc,WAAd,AAAwB;AAC7B,AAAE,SAAF,AAAG,UAAU;eAAG,AAAC,MAAD,AAAC,QAAD,AAAS,IAAT,AAAY,MAAK,CAApB,AAAG,AAAkB;;AAElC,WAAK,WAAA,AAAW,KAAX,AAAgB,WAAhB,AAA0B;AAC/B,AAAE,SAAF,AAAG,UAAU;AAAG,YAAG,AAAE,GAAF,AAAG,QAAN,AAAY;iBAAO,AAAC,MAAD,AAAC,QAAD,AAAS,IAAT,AAAY,MAAK,CAApC,AAAmB,AAAkB;AAAxC;;AAEb,WAAK,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC5B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAE7B,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AAEpB,AAAC,WAAA,AAAK,MAAN,AAAO,YAAP,AAAmB;AACnB,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AAEf,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,UAAG,OAAH,AAAS;AAAQ,AAAG,YAAH,AAAI,YAAY,QAAA,AAAQ,KAAR,AAAa,aAAb,AAA0B,OAA3D,AAAkE;;AAClE,AAAG,UAAH,AAAI,YAAJ,AAAgB;AAChB,AAAG,UAAH,AAAI,YAAJ,AAAgB;AAChB,AAAG,UAAH,AAAI,YAAJ,AAAgB;aAChB,AAAG,IAAH,AAAI,YAxCO,AAwCX,AAAgB;AAEjB,AAAY;;;8BAAA,AAAC,OAAD,AAAO,KAAP,AAAW,IAAX,AAAc,MAAd,AAAmB,OAAnB,AAAyB,OAAzB,AAA+B,OAA/B,AAAqC,IAArC,AAAwC;AACnD;;UAAA,IAAA,IAAA,IAAA,KAAA,KAAA,KAAA,KAAA,KAAA,IAAA;AAAA,WAAK,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC5B,AAAE,SAAF,AAAG,YAAY,AAAU,WAAV,AAAW,MAAX,AAAiB,GAAE,IAAnB,AAAqB,SAAS;AAC7C,AAAE,SAAC,AAAK,MAAR,AAAS,UAAU;AAEnB,UAAO,UAAH,AAAU,IAAV,AAAiB,KAAQ;AAC7B,WAAK,WAAA,AAAW,GAAX,AAAa,WAAb,AAAuB;AAC5B,UAAG,QAAH,AAAQ;AAAS,AAAC,aAAD,AAAC,QAAlB,AAA0B;;AAC1B,WAAK,WAAA,AAAW,KAAX,AAAe,WAAf,AAAyB;AAE9B,AAAE,SAAF,AAAG,UAAU;AAAG,YAAG,AAAC,EAAD,AAAE,KAAF,AAAO,WAAV,AAAoB;iBAAO,AAAC,OAAD,AAAC,QAAQ,AAAC,OAAV,AAAU,OAAV,AAAgB,IAAhB,AAAmB,OAAnB,AAAyB,KAAI,CAAxD,AAA2B,AAA8B;AAA5D;;AACb,AAAE,SAAF,AAAG,UAAU;AAAG,YAAG,AAAC,EAAD,AAAE,KAAF,AAAO,WAAP,AAAiB,KAAM,AAAE,GAAF,AAAG,QAA7B,AAAmC;iBAAO,AAAC,OAAD,AAAC,QAAQ,AAAC,OAAV,AAAU,OAAV,AAAgB,IAAhB,AAAmB,OAAnB,AAAyB,KAAI,CAAvE,AAA0C,AAA8B;AAA3E;;AAEb,WAAK,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC5B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAE7B,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AAEpB,AAAC,WAAA,AAAK,MAAN,AAAO,YAAP,AAAmB;AACnB,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AACf,AAAE,SAAF,AAAG,YAAH,AAAe;AAEf,YAAM,AAAQ,SAAR,AAAS,cAAT,AAAuB;AAC7B,AAAG,UAAC,AAAK,MAAT,AAAU,UAAU;AACpB,UAAG,OAAH,AAAS;AACR,AAAG,YAAH,AAAI,YAAY,QAAA,AAAQ,KAAR,AAAa,aAAb,AAA0B,OAD3C,AACkD;;AAClD,AAAG,UAAH,AAAI,YAAJ,AAAgB;AAChB,AAAG,UAAH,AAAI,YAAJ,AAAgB;AAChB,AAAG,UAAH,AAAI,YAAJ,AAAgB;aAChB,AAAG,IAAH,AAAI,YArCO,AAqCX,AAAgB;AAEjB,AAAQ;;;;aAAG,AAAC,KAAD,AAAC,QAAJ,AAAY;AAEpB,AAAO;;;;UACN,OAAA,UAAA,IAAA,GAAA,KAAA,KAAA,QAAA,MAAA,KAAA,GAAA,IAAA,UAAA,GAAA,OAAA;AAAA,UAAA,AAAI,EAAJ;AACA,UADA,AACI;AACJ,UAFA,AAEI,IACJ;;AAAA,WAAA,kCAAA;AAAI;;AAAA,AAAC;AAAD,AAAI;AAAJ,AAAU;AAAV,AAAe;AAAf,AAAqB;;AACxB,YAAG,QAAH,AAAW;AACV,eAAI;AACJ,cAAG,YAAa,AAAC,EAAD,AAAE,KAAF,AAAO,cAAvB,AAAkC;AACjC,iBAAA,OAAA;AACC,yBAAW,AAAS,SAAA;AACpB,kBAAG,aAAH,AAAe;AACd,sBAAM,MADP,AACa;AADb,qBAEK,IAAG,WAAH,AAAc;AAClB,sBAAM,MAAA,AAAM,WADR,AACmB;AALzB;AADD;;AAOA,eAAK,QAAA,AAAQ,QAAR,AAAgB,KAAhB,AAAqB,OAArB,AAA4B,QAA5B,AAAoC,KAAK;AAC9C,eAAK,QAAQ;AACb,cAAG,UAAH,AAAY;AACX,iBAAK,KAAA,AAAK,KADX,AACgB;AADhB,iBAAA;AAGC,iBAAK,QAAA,AAAQ,MAAR,AAAc,KAAd,AAAmB,KAHzB,AAG8B;AAd/B;AADD;;AAiBA,UAAG,MAAH,AAAM,GAAO;AAAb;;AAEA,AAAO,cAAP,AAAQ,IAAR,AAAY;AACZ,AAAO,cAAP,AAAQ,IAAR,AAAY;AACZ,AAAO,cAAP,AAAQ,IAAR,AAAY;AACZ,eAAS,UAAU,YAAA,AAAU,AAAK,iCAAf,AAAsC,AAAK,kBAA3C,AAAqD,IAArD,AAAyD,OAAzD,AAAgE,IAA1E,AAA8E;AACvF,UAAG,AAAM,OAAN,AAAO,SAAV,AAAmB;AAClB,iBAAS,UAAU,YAAA,AAAU,AAAK,iCAAf,AAAsC,AAAK,kBAA3C,AAAqD,IAArD,AAAyD,OAAzD,AAAgE,IADpF,AACU,AAA8E;;AACxF,AAAO,cAAP,AAAQ,IAAI,AAAM,OAAlB,AAAmB;AACnB,AAAO,cAAP,AAAQ,IAAR,AAAY;aACZ,AAAM,OAAN,AAAO,KAAP,AAAY,QA/BN,AA+BN,AAAmB;AAnJrB",
  "sourcesContent": [
    "class Korg\r\n\tconstructor : ->\r\n\t\t@table = null\r\n\t\t@branch = []\r\n\t\t@items = []\r\n\t\t@rulle = null\r\n\r\n\tadd : (item) -> @items.push item\r\n\r\n\tupdate0 : (b,item,delta) ->\r\n\t\titem[1] += delta\r\n\t\tb.value = if item[1]==0 then \"\" else item[1]\r\n\r\n\tupdate1 : (rulle,b,items,key,delta) ->\r\n\t\tif items['R']-delta >= 0 \r\n\t\t\titems['R'] -= delta\r\n\t\t\titems[key] += delta\r\n\t\t\trulle.value = if items['R']==0 then \"\" else items['R']\r\n\t\t\tb.value = if items[key]==0 then \"\" else items[key]\r\n\t\t\t#print @items\r\n\r\n\ttraverse : (items=@items,level=0, br=[]) ->\r\n\t\tif false == goDeeper @branch,br then return \r\n\t\tif level==0\r\n\t\t\tfor item,i in items\r\n\t\t\t\t[id,antal,pris,title,children,@limit] = item\r\n\t\t\t\t@addTitle0 item,id,pris,title,-1,0,br.concat(i),antal\r\n\t\t\t\tif children then @traverse children,level+1,br.concat(i)\r\n\t\telse if level==1\r\n\t\t\tfor key of items\r\n\t\t\t\tsubantal = items[key]\r\n\t\t\t\t@addTitle1 items,key,'',0,sushi[key][1],-1,1,br.concat(i),subantal\r\n\r\n\taddTitle0 : (item,id,pris,title,count,level,br,antal) ->\r\n\t\tif count>0 then scount = \" (#{count})\" else scount =\"\"\r\n\t\tv = '........'.slice(0,4*level) + title + scount\r\n\t\tb1 = makeButton v\r\n\t\tb1.style.textAlign = 'left'\r\n\t\tb1.branch = br\r\n\t\tb1.onclick = => \r\n\t\t\t@branch = calcBranch @branch, b1.branch\r\n\t\t\tupdateTables()\r\n\r\n\t\tv = if antal==0 then \"\" else antal\r\n\t\tb2 = makeButton v, \"#00FF00\",\"#000000\" \r\n\t\tb2.onclick = => @update0 b2,item,+1\r\n\r\n\t\tb3 = makeButton \"-\", \"#FF0000\",\"#000000\" \r\n\t\tb3.onclick = => if b2.value>0 then @update0 b2,item,-1\r\n\r\n\t\ttr = document.createElement \"tr\"\r\n\t\ttd0 = document.createElement \"td\"\r\n\t\ttd1 = document.createElement \"td\"\r\n\t\ttd2 = document.createElement \"td\"\r\n\t\ttd3 = document.createElement \"td\"\r\n\r\n\t\ttd0.style.cssText = \"width:5%\"\r\n\t\ttd1.style.cssText = \"width:75%\"\r\n\t\ttd2.style.cssText = \"width:10%\"\r\n\t\ttd3.style.cssText = \"width:10%\"\r\n\r\n\t\t@table.appendChild tr\r\n\t\ttr.appendChild td0\r\n\t\ttr.appendChild td1\r\n\t\ttr.appendChild td2\r\n\t\ttr.appendChild td3\r\n\r\n\t\tdiv = document.createElement \"div\"\r\n\t\tdiv.style.cssText = \"font-size:70%\"\r\n\t\tif id != '' then div.innerHTML = '<b>' + id + '</b><br>' + pris + ':-'\r\n\t\ttd0.appendChild div\r\n\t\ttd1.appendChild b1\r\n\t\ttd2.appendChild b2\r\n\t\ttd3.appendChild b3\r\n\r\n\taddTitle1 : (items,key,id,pris,title,count,level,br,antal) ->\r\n\t\tb1 = document.createElement \"div\"\r\n\t\tb1.innerHTML = '........'.slice(0,4*level) + title  \r\n\t\tb1.style.cssText = \"font-size:100%; white-space:normal; width:100%; text-align:left\"\r\n\r\n\t\tv = if antal==0 then \"\" else antal\r\n\t\tb2 = makeButton v,\"#00FF00\",\"#000000\"\r\n\t\tif key=='R' then @rulle = b2\r\n\t\tb3 = makeButton '-',\"#FF0000\",\"#000000\"\r\n\r\n\t\tb2.onclick = => if _.size(items) == 9 then @update1 @rulle,b2,items,key,+1\r\n\t\tb3.onclick = => if _.size(items) == 9 and b2.value>0 then @update1 @rulle,b2,items,key,-1\r\n\r\n\t\ttr = document.createElement \"tr\"\r\n\t\ttd0 = document.createElement \"td\"\r\n\t\ttd1 = document.createElement \"td\"\r\n\t\ttd2 = document.createElement \"td\"\r\n\t\ttd3 = document.createElement \"td\"\r\n\r\n\t\ttd0.style.cssText = \"width:5%\"\r\n\t\ttd1.style.cssText = \"width:75%\"\r\n\t\ttd2.style.cssText = \"width:10%\"\r\n\t\ttd3.style.cssText = \"width:10%\"\r\n\r\n\t\t@table.appendChild tr\r\n\t\ttr.appendChild td0\r\n\t\ttr.appendChild td1\r\n\t\ttr.appendChild td2\r\n\t\ttr.appendChild td3\r\n\r\n\t\tdiv = document.createElement \"div\"\r\n\t\tdiv.style.cssText = \"font-size:70%\"\r\n\t\tif id != '' \r\n\t\t\tdiv.innerHTML = '<b>' + id + '</b><br>' + pris + ':-'\r\n\t\ttd0.appendChild div\r\n\t\ttd1.appendChild b1\r\n\t\ttd2.appendChild b2\r\n\t\ttd3.appendChild b3\r\n\r\n\trensa : -> @items = []\r\n\r\n\tsend : ->\r\n\t\tt = 0 # kr\r\n\t\ts = '' # full text\r\n\t\tu = '' # compact\r\n\t\tfor [id,antal,pris,title,children] in @items\r\n\t\t\tif antal > 0\r\n\t\t\t\tss =''\r\n\t\t\t\tif children and _.size(children)==9\r\n\t\t\t\t\tfor key of children\r\n\t\t\t\t\t\tsubantal = children[key]\r\n\t\t\t\t\t\tif subantal == 1\r\n\t\t\t\t\t\t\tss += ' ' + key\r\n\t\t\t\t\t\telse if subantal > 1\r\n\t\t\t\t\t\t\tss += ' ' + subantal + key\r\n\t\t\t\ts += antal + ' x ' + id + \". \" + title + ss + CRLF\r\n\t\t\t\tt += antal * pris\r\n\t\t\t\tif antal == 1 \r\n\t\t\t\t\tu += id + ss + CRLF\r\n\t\t\t\telse\r\n\t\t\t\t\tu += antal + 'x' + id + ss + CRLF\r\n\r\n\t\tif t==0 then return \r\n\r\n\t\tconsole.log t\r\n\t\tconsole.log s\r\n\t\tconsole.log u\r\n\t\toutput = encodeURI \"mailto:#{MAIL}?&subject=Order till #{SHOP}&body=\" + s + CRLF + t + \" kr\"\r\n\t\tif output.length > 2000 \r\n\t\t\toutput = encodeURI \"mailto:#{MAIL}?&subject=Order till #{SHOP}&body=\" + u + CRLF + t + \" kr\"\r\n\t\tconsole.log output.length\r\n\t\tconsole.log output \r\n\t\twindow.open output,'_blank'\r\n"
  ]
}