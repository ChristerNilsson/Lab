{
  "version": 3,
  "file": "p6.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\p6.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "shapes = {}\r\np6 = {}\r\n\r\nclass Vector\r\n\tconstructor : (@x=0,@y=0) ->\r\n\t\t@rotation = atan2 @y, @x\r\n\t\t@length = sqrt @x*@x + @y*@y\r\n\tadd : (vector) -> new Vector @x + vector.x,@y + vector.y\r\n\tsub : (vector) -> new Vector @x - vector.x,@y - vector.y\r\n\trotate : (degrees) ->\r\n\t\tv = @rotation + degrees\r\n\t\tx = @length * cos v\r\n\t\ty = @length * sin v\r\n\t\tnew Vector x, y\r\n\r\nclass Shape\r\n\tconstructor : (@x=0,@y=0,@parent=null,@rotation=0)->\r\n\t\t@children = []\r\n\t\t@fillColor = \"#fff\"\r\n\t\t@strokeColor = \"#000\"\r\n\t\t@strokeWeight = 1\r\n\t\t@txt = ''\r\n\t\tif @parent? then @parent.add @\r\n\r\n\tdraw : ->\r\n\t\ttranslate @x,@y\r\n\t\trotate @rotation\r\n\t\tfor child in @children\r\n\t\t\tpush()\r\n\t\t\tchild.draw()\r\n\t\t\tpop()\r\n\r\n\tadd : (shape) -> @children.push shape\r\n\r\n\tfill : (color) ->\r\n\t\t@fillColor = color\r\n\t\t@\r\n\tstroke : (color) ->\r\n\t\t@strokeColor = color\r\n\t\t@\r\n\ttext : (txt) ->\r\n\t\t@txt = txt\r\n\t\t@\r\n\r\n\tcontains : (m) -> # m is mouse position\r\n\t\t[x,y,rotation] = @stagepos()\r\n\t\tp = new Vector x,y\r\n\t\tp = m.sub p\r\n\t\tp = p.rotate -rotation\r\n\t\t@inside p\r\n\r\n\tstagepos : -> # returns resulting [x, y, rotation]\r\n\t\tlst = []\r\n\t\tcurrent = @\r\n\t\twhile current\r\n\t\t\tlst.unshift [current.x,current.y,current.rotation]\r\n\t\t\tcurrent = current.parent\r\n\t\tvec = new Vector()\r\n\t\trot = 0\r\n\t\trotres = 0\r\n\t\tfor [x,y,rotation] in lst\r\n\t\t\trotres += rotation\r\n\t\t\tv1 = new Vector x, y\r\n\t\t\tv2 = v1.rotate rot\r\n\t\t\trot = rotation\r\n\t\t\tvec = vec.add v2\r\n\t\t[vec.x,vec.y,rotres]\r\n\r\n\tmouseMoved : -> # m = mouse position\r\n\t\tm = new Vector mouseX,mouseY\r\n\t\tfor child in @children\r\n\t\t\tif child.moved? then child.moved m\r\n\t\t\tchild.mouseMoved()\r\n\r\n\tmousePressed : -> # m = mouse position\r\n\t\tm = new Vector mouseX,mouseY\r\n\t\tfor child in @children\r\n\t\t\tif child.contains m\r\n\t\t\t\tif child.pressed? then child.pressed()\r\n\t\t\tchild.mousePressed()\r\n\r\n\tmove : (dx,dy) -> [@x,@y] = [@x+dx,@y+dy]\r\n\r\nclass Polygon extends Shape\r\n\tconstructor : (x,y,parent=stage) ->\r\n\t\tsuper x,y,parent\r\n\t\t@points = []\r\n\r\n\tlineTo : (x,y) -> @points.push new Vector x,y\r\n\r\n\tdraw : ->\r\n\t\tsuper()\r\n\t\tfill @fillColor\r\n\t\tstrokeWeight @strokeWeight\r\n\t\tbeginShape()\r\n\t\tfor p in @points\r\n\t\t\tvertex p.x,p.y\r\n\t\tendShape CLOSE\r\n\r\n\tinside : (p) -> # only checks if p is locally within polygon\r\n\t\tres = false\r\n\t\tlst = range @points.length\r\n\t\tlst.unshift lst.pop()\r\n\t\tfor j,i in lst\r\n\t\t\txi = @points[i].x\r\n\t\t\tyi = @points[i].y\r\n\t\t\txj = @points[j].x\r\n\t\t\tyj = @points[j].y\r\n\t\t\tintersect = ((yi >= p.y) != (yj >= p.y)) and (p.x <= (xj - xi) * (p.y - yi) / (yj - yi) + xi)\r\n\t\t\tif intersect then res = !res\r\n\t\tres\r\n\r\nclass Circle extends Shape\r\n\tconstructor : (x,y,@radius,parent=stage) -> super x,y,parent\r\n\tdraw : ->\r\n\t\tsuper()\r\n\t\tfill @fillColor\r\n\t\tstrokeWeight @strokeWeight\r\n\t\tcircle 0,0,@radius\r\n\t\tfill '#000'\r\n\t\ttextSize 30\r\n\t\ttextAlign CENTER,CENTER\r\n\t\ttext @txt,0,0\r\n\r\n\tinside : (d) -> @radius >= sqrt d.x*d.x+d.y*d.y\r\n\r\nclass Arc extends Polygon\r\n\tconstructor : (x,y,radius,start,stopp,parent=stage) ->\r\n\t\tsuper x,y,parent\r\n\t\t@lineTo 0,0\r\n\t\tlst = range start,stopp,10\r\n\t\tlst.push stopp\r\n\t\tfor v in lst\r\n\t\t\tx = radius * cos v\r\n\t\t\ty = radius * sin v\r\n\t\t\t@lineTo x,y\r\n\r\nclass Rect extends Polygon\r\n\tconstructor : (x,y,w,h,parent=stage) ->\r\n\t\tsuper x,y,parent\r\n\t\tw = w/2\r\n\t\th = h/2\r\n\t\t@lineTo -w,-h,+w,-h\r\n\t\t@lineTo +w,-h,+w,+h\r\n\t\t@lineTo +w,+h,-w,+h\r\n\t\t@lineTo -w,+h,-w,-h\r\n\r\nclass Group extends Shape\r\n\tconstructor : (x,y,parent=stage) -> super x,y,parent\r\n\tcontains : ->\r\n\r\np6.shape  = (...args) -> new Shape ...args\r\np6.group  = (...args) -> new Group ...args\r\np6.circle = (...args) -> new Circle ...args\r\np6.arc    = (...args) -> new Arc ...args\r\np6.rect   = (...args) -> new Rect ...args\r\n\r\nstage = new Shape()\r\n"
  ]
}