{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "#hng: null # NESW = [0,90,180,270]\r\n#spd: null # m/s\r\n\r\np2 = # Ulvsjön\r\n\tlat: 59.277103\r\n\tlng: 18.164897\r\n\ttimestamp: 0\r\n\r\ntrack = []\r\nbearing = 0\r\nheading_12 = 0\r\n\r\ntexts = ['','','','','','','','','','','','']\r\n\r\nlocationUpdate = (position) ->\r\n\tp1 = \r\n\t\tlat : position.coords.latitude\r\n\t\tlng : position.coords.longitude\r\n\t\ttimestamp : position.timestamp\r\n\r\n\ttrack.push p1\r\n\r\n\theading_12 = calcHeading p1,p2\r\n\r\n\ttexts[0] = precisionRound p1.lat,6\r\n\ttexts[1] = precisionRound p1.lng,6\r\n\ttexts[8] = \"#{Math.round heading_12}°\"\r\n\t#texts[3] = 'nospeed' #p1.spd\r\n\t#texts[4] = p1.timestamp\r\n\ttexts[10] = \"#{Math.round distance_on_geoid p1,p2} m\"\r\n\ttexts[2] = \"#{track.length} punkter\"  \r\n\r\n\tif track.length >= 2 \r\n\t\tp0 = track[track.length-2]\r\n\t\ttexts[3] = \"Delta t: #{p1.timestamp - p0.timestamp} ms\"\r\n\t\ttexts[4] = \"Distance: #{Math.round distance_on_geoid p0,p1} m\"\r\n\t\ttexts[9] = \"Heading: #{Math.round calcHeading p0,p1}°\"\r\n\t\ttexts[5] = \"speed\"\r\n\r\nlocationUpdateFail = (error) ->\r\n\ttexts[0] = \"n/a\"\r\n\ttexts[1] = \"n/a\"\r\n\r\nnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\tenableHighAccuracy: false\r\n\tmaximumAge: 30000\r\n\ttimeout: 27000\r\n\r\nwindow.addEventListener \"deviceorientation\", (event) ->\r\n\tbearing = event.alpha\r\n\r\n\tif typeof event.webkitCompassHeading != \"undefined\"\r\n\t\tbearing = event.webkitCompassHeading # iOS non-standard\r\n\r\n\ttexts[9] = \"#{Math.round bearing}°\"\r\n\ttexts[11] = \"#{Math.round bearing - heading_12}°\"\r\n\r\nsetup = ->\r\n\tcreateCanvas windowWidth,windowHeight\r\n\r\ndrawCompass = ->\r\n\tw = windowWidth\r\n\th = windowHeight\r\n\tfc()\r\n\tsw 5\r\n\tcircle w/2,h/2,0.9*w/2\r\n\ttranslate w/2,h/2\r\n\ttry\r\n\t\trd bearing - heading_12 \r\n\t\tline 0,0,0,-0.9*w/2\r\n\r\ndraw = ->\r\n\tbg 0.5\r\n\tfc 0.75\r\n\td = windowHeight/6\r\n\ttextSize 50\r\n\tfor t,i in texts\r\n\t\tx = (i%2) * windowWidth/2\r\n\t\ty = d*Math.floor(i/2)\r\n\t\ttext t,50+x,0.6*d+y\r\n\tdrawCompass()"
  ]
}