{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "#hng: null # NESW = [0,90,180,270]\r\n#spd: null # m/s\r\n\r\np2 = # Ulvsjön\r\n\tlat: 59.277103\r\n\tlng: 18.164897\r\n\ttimestamp: 0\r\n\r\ntrack = []\r\nheading_12 = null\r\n\r\n# devicets position och hastighet\r\npositionLat = document.getElementById \"position-lat\"\r\npositionLng = document.getElementById \"position-lng\"\r\npositionTimestamp = document.getElementById \"timestamp\"\r\npositionSpd = document.getElementById \"position-spd\"\r\n\r\n# beräkningar baserade på de senaste tvåpunkterna\r\ndeltat = document.getElementById \"deltat\"\r\ndeltas = document.getElementById \"deltas\"\r\n#speed = document.getElementById \"speed\"\r\nheading = document.getElementById \"heading\"\r\n\r\n# bäring enligt kompass\r\nbearing = document.getElementById \"bearing\"\r\ndelta = document.getElementById \"delta\"\r\n\r\n# bäring och avstånd till målet\r\npositionHng = document.getElementById \"position-hng\"\r\ndistance = document.getElementById \"distance\"\r\n\r\npoints = document.getElementById \"points\"\r\n\r\nlocationUpdate = (position) ->\r\n\tp1 = \r\n\t\tlat : position.coords.latitude\r\n\t\tlng : position.coords.longitude\r\n\t\ttimestamp : position.timestamp\r\n\r\n\ttrack.push p1\r\n\r\n\theading_12 = calcHeading p1,p2\r\n\tpositionLat.textContent = p1.lat\r\n\tpositionLng.textContent = p1.lng\r\n\tpositionHng.textContent = \"#{Math.round heading_12}°\"\r\n\tpositionSpd.textContent = p1.spd\r\n\tpositionTimestamp.textContent = p1.timestamp\r\n\r\n\tdistance.textContent = \"#{Math.round distance_on_geoid p1,p2} m\"\r\n\r\n\tif track.length >= 2 \r\n\t\tp0 = track[track.length-2]\r\n\t\tdeltat.textContent = \"Delta t: #{p1.timestamp - p0.timestamp} ms\"\r\n\t\tdeltas.textContent = \"Distance: #{Math.round distance_on_geoid p0,p1} m\"\r\n\t\t#speed.textContent = \"?\"\r\n\t\theading.textContent = \"Heading: #{Math.round calcHeading p0,p1}°\"\r\n\r\n\tpoints.textContent = \"#{track.length} punkter\"  \r\n\r\nlocationUpdateFail = (error) ->\r\n\tpositionLat.textContent = \"n/a\"\r\n\tpositionLng.textContent = \"n/a\"\r\n\r\nnavigator.geolocation.watchPosition locationUpdate, locationUpdateFail, \r\n\t\tenableHighAccuracy: false\r\n\t\tmaximumAge: 30000\r\n\t\ttimeout: 27000\r\n\r\nwindow.addEventListener \"deviceorientation\", (event) ->\r\n\tb = event.alpha\r\n\r\n\tif typeof event.webkitCompassHeading != \"undefined\"\r\n\t\tb = event.webkitCompassHeading # iOS non-standard\r\n\r\n\tbearing.textContent = \"Bearing: #{Math.round b}°\"\r\n\tdelta.textContent = \"Delta: #{Math.round b - heading_12}°\"\r\n\r\n\r\n\t# var orientation = getBrowserOrientation()\r\n\r\n\t# if (typeof heading !== \"undefined\" && heading !== null) { // && typeof orientation !== \"undefined\") {\r\n\t# \t// we have a browser that reports device heading and orientation\r\n\r\n\r\n\t# \tif (debug) {\r\n\t# \t\tdebugOrientation.textContent = orientation;\r\n\t# \t}\r\n\r\n\r\n\t# \t// what adjustment we have to add to rotation to allow for current device orientation\r\n\t# \tvar adjustment = 0;\r\n\t# \tif (defaultOrientation === \"landscape\") {\r\n\t# \t\tadjustment -= 90;\r\n\t# \t}\r\n\r\n\t# \tif (typeof orientation !== \"undefined\") {\r\n\t# \t\tvar currentOrientation = orientation.split(\"-\");\r\n\r\n\t# \t\tif (defaultOrientation !== currentOrientation[0]) {\r\n\t# \t\t\tif (defaultOrientation === \"landscape\") {\r\n\t# \t\t\t\tadjustment -= 270;\r\n\t# \t\t\t} else {\r\n\t# \t\t\t\tadjustment -= 90;\r\n\t# \t\t\t}\r\n\t# \t\t}\r\n\r\n\t# \t\tif (currentOrientation[1] === \"secondary\") {\r\n\t# \t\t\tadjustment -= 180;\r\n\t# \t\t}\r\n\t# \t}\r\n\r\n\t# \tpositionCurrent.hng = heading + adjustment;\r\n\r\n\t# \tvar phase = positionCurrent.hng < 0 ? 360 + positionCurrent.hng : positionCurrent.hng;\r\n\t# \tpositionHng.textContent = (360 - phase | 0) + \"°\";\r\n\r\n\r\n\t# \t// apply rotation to compass rose\r\n\t# \tif (typeof rose.style.transform !== \"undefined\") {\r\n\t# \t\trose.style.transform = \"rotateZ(\" + positionCurrent.hng + \"deg)\";\r\n\t# \t} else if (typeof rose.style.webkitTransform !== \"undefined\") {\r\n\t# \t\trose.style.webkitTransform = \"rotateZ(\" + positionCurrent.hng + \"deg)\";\r\n\t# \t}\r\n\t# } else {\r\n\t# \t// device can't show heading\r\n\r\n\t# \tpositionHng.textContent = \"n/a\";\r\n\t# \tshowHeadingWarning();\r\n\t# }\r\n\r\n\r\n\r\n"
  ]
}