{
  "version": 3,
  "file": "sketch.js",
  "sourceRoot": "..",
  "sources": [
    "coffee\\sketch.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "WIDTH  = 10 # pixels per character\r\nHEIGHT = 23 # pixels per character\r\n\r\nsetup = -> \r\n\tcreateCanvas 800,600\r\n\ttextSize 20\r\n\ttextFont 'monospace'\r\n\tstrokeCap SQUARE\r\n\tmakeCommands()\r\n\txdraw()\r\n\r\n# negativt x innebär högerjustering. Characters, not pixels\r\naddText = -> commands.push arguments \r\naddLine = -> commands.push arguments \r\n\r\nticks = [3,11,13]\r\nrests = [2,7,10]\r\ncommands = []\r\nindex = 1\r\n\r\n# characters, not pixels\r\ngridLines = (x,y,w,h,xCount,yCount) ->\r\n\tsc 0\r\n\tsw 1\t\r\n\tfor i in range xCount+1\r\n\t\tline WIDTH*(0.5+x+w*i), HEIGHT*y, WIDTH*(0.5+x+w*i), HEIGHT*(y+yCount*h)\r\n\tfor j in range yCount+1\r\n\t\tline WIDTH*(0.5+x), HEIGHT*(y+h*j), WIDTH*(0.5+x+xCount*w), HEIGHT*(y+h*j)\r\n\r\nmakeCommands = ->\r\n\taddText  '',0,0,\"Använd piltangenterna\"\r\n\r\n\taddText \"Problem:\",0,0,\"Tag reda på vilka klockor man ska klicka på\"\r\n\taddText \"Klockor: [3,11,13]\",10,0\r\n\taddText \"Rester:  [2, 7,10]\",10,1\r\n\taddText \"Steg: 8\",10,2\r\n\taddText \"(% innebär modulo, dvs resten vid heltalsdivision)\",20,2\r\n\taddText \"Lösning:\",0,3\r\n\r\n\tfor i in range 3\r\n\t\taddText ticks[i],-4,4+i,\"Klocka #{ticks[i]}\"\r\n\r\n\tfor i in range 3\r\n\t\taddText rests[i],-8,4+i,\"Rest #{rests[i]}\"\r\n\r\n\taddLine 8,4,8,7,3\r\n\r\n\taddText 18,-12,5,\"Vrid klockan med näst störst värde (7). 11 + 7 = 18\"\r\n\taddText 23,-12,6,\"Vrid klockan med näst störst värde (10). 13 + 10 = 23\"\r\n\taddText 29,-16,5,\"Vrid klockan med näst störst värde (18). 11 + 18 = 29\"\r\n\taddText 36,-16,6,\"Vrid klockan med näst störst värde\"\r\n\taddText 40,-20,5,\"Vrid klockan med näst störst värde\"\r\n\taddText 49,-20,6,\"Vrid klockan med näst störst värde\"\r\n\taddText 51,-24,5,\"Vrid klockan med näst störst värde\"\r\n\taddText 62,-24,6,\"Vrid klockan med näst störst värde\"\r\n\taddText 62,-28,5,\"Vrid klockan med näst störst värde\"\r\n\r\n\taddText '',0,0,\"De två största klockorna har nu samma värde. Summa=62\"\r\n\taddText '',0,0,\"Kontrollera att alla klockor uppfyller summa % klocka = rest\"\r\n\taddText 2,-8,4,\"62 % 3 = 2\"\r\n\taddText 7,-8,5,\"62 % 11 = 7\"\r\n\taddText 10,-8,6,\"62 % 13 = 10\"\r\n\t\r\n\taddText 62,-28,5,\"Detta innebär att summan 62 är den vi söker\"\r\n\r\n\taddText '',0,0,\"Nu skapar vi en differensmatris som vi kommer att behöva senare\"\r\n\r\n\t# Differensmatrisen\r\n\taddText 3,-8,8,\"till-klocka 3\"\r\n\taddText 11,-12,8,\"till-klocka 11\"\r\n\taddText 13,-16,8,\"till-klocka 13\"\r\n\taddLine 0,9,16,9,3\r\n\taddText 'Till',17,8,\"Dessa klockor utgör till-klockor\"\r\n\r\n\taddText 3,-4,9,\"från-klocka 3\"\r\n\taddText 11,-4,10,\"från-klocka 11\"\r\n\taddText 13,-4,11,\"från-klocka 13\"\r\n\taddLine 4,8,4,12,3\r\n\taddText 'Från',0,12,\"Dessa klockor utgör från-klockor\"\r\n\r\n\tfor j in range 3\r\n\t\tfor i in range 3\r\n\t\t\tx = -8-4*i\r\n\t\t\ty = 9+j\r\n\t\t\tif ticks[i] != ticks[j]\r\n\t\t\t\taddText ticks[i]-ticks[j],x,y,\"Differensen blir #{ticks[i]} - #{ticks[j]} = #{ticks[i] - ticks[j]}\"\r\n\r\n\taddText '',0,0,\"Nu ska de åtta stegen fördelas på de tre klockorna\"\r\n\r\n\taddText 3,-8,14,\"Skriv upp klockornas kolumnrubriker\"\r\n\taddText 11,-12,14,\"Skriv upp klockornas kolumnrubriker\"\r\n\taddText 13,-16,14,\"Skriv upp klockornas kolumnrubriker\"\r\n\r\n\taddLine 4,15,16,15,3\r\n\r\n\taddText 'Uppnå summan 62 med 8 steg',20,14\r\n\r\n\taddText 3,-8,15,\"Fördela de 8 stegen på de 3 klockorna efter eget behag\"\r\n\taddText 3,-12,15,\"Fördela de 8 stegen på de tre klockorna efter eget behag\"\r\n\taddText 2,-16,15,\"Fördela de 8 stegen på de tre klockorna efter eget behag\"\r\n\taddLine 4,16,16,16,2\r\n\r\n\taddText '3*3 + 3*11 + 2*13 = 68  (3+3+2=8)',20,15,\"Beräkna en ny summa, 68. Den måste minskas med 6 för att bli 62\"\r\n\taddText '',0,0,\"I matrisen kan vi erhålla -6, dvs 62-68, genom att addera 2 och -8\"\r\n\r\n\taddText '2',-16,10,\"Här är 2\"\r\n\taddText '-8',-8,10,\"Här är -8\"\r\n\r\n\taddText '-1',-12,16,\"2 uppnås genom att minska antalet steg på klocka 11 ...\"\r\n\taddText '+1',-16,16,\"... och öka antalet steg på klocka 13\"\r\n\taddText 'Flytta ett steg från klocka 11 till klocka 13',20,16,\"Observera att ibland blir -2, +3 osv nödvändigt\"\r\n\r\n\taddText '-1',-12,17,\"-8 uppnås genom att minska antalet steg på klocka 11 ...\"\r\n\taddText '+1',-8,17,\"... och öka antalet steg på klocka 3\"\r\n\taddText 'Flytta ett steg från klocka 11 till klocka 3',20,17,\"Observera att stegantalet för en klocka ej kan vara negativt\"\r\n\taddLine 4,18,16,18,3\r\n\r\n\taddText 4,-8, 18,\"Beräkna det justerade antalet 3 +1 = 4\"\r\n\taddText 1,-12,18,\"Beräkna det justerade antalet 3 -1 -1 = 1\"\r\n\taddText 3,-16,18,\"Beräkna det justerade antalet 2 +1 = 3\"\r\n\taddText \"4*3 + 1*11 + 3*13 = 62\",20,18,\"Kontroll av summa\"\r\n\r\n\taddText \"Svar: Klicka 4, 1 samt 3 gånger på klockorna\",0,20,\"Ibland kan man behöva utföra fler flyttningar\"\r\n\taddText \"\",0,0,\"Ibland kan man finna flera lösningar\"\r\n\r\n\t#index = 70 #commands.length\r\n\r\nxdraw = ->\r\n\tbg 0.5\r\n\r\n\tgridLines 0,4,4,1,10,3\r\n\tgridLines 0,8,4,1,4,4 \r\n\tgridLines 4,14,4,1,3,5\r\n\r\n\tfor i in range index\r\n\t\tif commands[i].length == 5 # line\r\n\t\t\t[x1,y1,x2,y2,d] = commands[i]\r\n\t\t\tsw d\r\n\t\t\tif i==index-1 then sc 1,1,0 else sc 0 \r\n\t\t\tline WIDTH*(x1+0.5),HEIGHT*y1,WIDTH*(x2+0.5),HEIGHT*y2\r\n\t\telse \r\n\t\t\t[txt,x,y] = commands[i]\r\n\t\t\tif x < 0 then textAlign RIGHT,TOP else textAlign LEFT,TOP \r\n\t\t\tif i==index-1 then fc 1,1,0 else fc 0 \r\n\t\t\tsc()\r\n\t\t\ttext txt,WIDTH*abs(x),HEIGHT*y\r\n\tcommand = commands[index-1]\r\n\tfc 0\r\n\tsc()\r\n\tif command.length == 4\r\n\t\ttextAlign LEFT,BOTTOM\r\n\t\ttext command[3],10,height-10\r\n\ttextAlign RIGHT,BOTTOM\r\n\ttext '#' + index,width-10,height-10\r\n\r\nmove = (delta) ->\r\n\t\tif delta == -1\r\n\t\t\tlstr = [commands.length,47,30,7,1]\r\n\t\t\ti = _.findIndex lstr, (x) => index > x\r\n\t\t\tif i==-1 then return\r\n\t\t\tindex = lstr[i]\r\n\t\telse\r\n\t\t\tlst = [1,7,30,47,commands.length]\r\n\t\t\ti = _.findIndex lst, (x) => index < x\r\n\t\t\tif i==-1 then return\r\n\t\t\tindex = lst[i]\r\n\r\nkeyPressed = ->\r\n\tif keyCode == LEFT_ARROW then index--\r\n\tif keyCode == RIGHT_ARROW then index++\r\n\tif keyCode in [UP_ARROW,33] then move -1 \r\n\tif keyCode in [DOWN_ARROW,34] then move 1\r\n\tif keyCode == 36 then index = 1\r\n\tif keyCode == 35 then index = commands.length \r\n\tindex = constrain index,1,commands.length\r\n\txdraw()\r\n"
  ]
}