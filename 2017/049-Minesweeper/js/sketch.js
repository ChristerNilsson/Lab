// Generated by CoffeeScript 1.12.7
var cols, draw, gameOver, grid, loop2, make2DArray, mousePressed, rows, setup, totalBees, w;

grid = null;

cols = null;

rows = null;

w = 20;

totalBees = 10;

loop2 = function(f) {
  var i, j, k, len, ref, results;
  ref = range(cols);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    results.push((function() {
      var l, len1, ref1, results1;
      ref1 = range(rows);
      results1 = [];
      for (l = 0, len1 = ref1.length; l < len1; l++) {
        j = ref1[l];
        results1.push(f(i, j));
      }
      return results1;
    })());
  }
  return results;
};

setup = function() {
  var cell, n;
  createCanvas(201, 201);
  textAlign(CENTER, CENTER);
  textSize(w);
  rectMode(CENTER);
  cols = floor(width / w);
  rows = floor(height / w);
  grid = make2DArray(cols, rows, function(i, j) {
    return new Cell(i, j, w);
  });
  n = 0;
  while (n < totalBees) {
    cell = grid[int(random(cols))][int(random(rows))];
    if (!cell.bee) {
      cell.bee = true;
      n++;
    }
  }
  return loop2(function(i, j) {
    return grid[i][j].countBees();
  });
};

draw = function() {
  background(255);
  return loop2(function(i, j) {
    return grid[i][j].show();
  });
};

make2DArray = function(cols, rows, f) {
  var arr, i, j, k, l, len, len1, ref, ref1;
  arr = new Array(cols);
  ref = range(arr.length);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    arr[i] = new Array(rows);
    ref1 = range(cols);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      j = ref1[l];
      arr[i][j] = f(i, j);
    }
  }
  return arr;
};

gameOver = function() {
  return loop2(function(i, j) {
    return grid[i][j].revealed = true;
  });
};

mousePressed = function() {
  return loop2(function(i, j) {
    if (grid[i][j].contains(mouseX, mouseY)) {
      grid[i][j].reveal();
      if (grid[i][j].bee) {
        return gameOver();
      }
    }
  });
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxJQUFBLEdBQU87O0FBQ1AsQ0FBQSxHQUFJOztBQUNKLFNBQUEsR0FBWTs7QUFFWixLQUFBLEdBQVEsU0FBQyxDQUFEO0FBQU8sTUFBQTtBQUFBO0FBQUE7T0FBQSxxQ0FBQTs7OztBQUFBO0FBQUE7V0FBQSx3Q0FBQTs7c0JBQUEsQ0FBQSxDQUFFLENBQUYsRUFBSSxDQUFKO0FBQUE7OztBQUFBOztBQUFQOztBQUVSLEtBQUEsR0FBUSxTQUFBO0FBQ1AsTUFBQTtFQUFBLFlBQUEsQ0FBYSxHQUFiLEVBQWtCLEdBQWxCO0VBQ0EsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7RUFDQSxRQUFBLENBQVMsQ0FBVDtFQUNBLFFBQUEsQ0FBUyxNQUFUO0VBQ0EsSUFBQSxHQUFPLEtBQUEsQ0FBTSxLQUFBLEdBQVEsQ0FBZDtFQUNQLElBQUEsR0FBTyxLQUFBLENBQU0sTUFBQSxHQUFTLENBQWY7RUFDUCxJQUFBLEdBQU8sV0FBQSxDQUFZLElBQVosRUFBa0IsSUFBbEIsRUFBd0IsU0FBQyxDQUFELEVBQUcsQ0FBSDtXQUFTLElBQUksSUFBSixDQUFTLENBQVQsRUFBWSxDQUFaLEVBQWUsQ0FBZjtFQUFULENBQXhCO0VBRVAsQ0FBQSxHQUFJO0FBQ0osU0FBTSxDQUFBLEdBQUksU0FBVjtJQUNDLElBQUEsR0FBTyxJQUFLLENBQUEsR0FBQSxDQUFJLE1BQUEsQ0FBTyxJQUFQLENBQUosQ0FBQSxDQUFpQixDQUFBLEdBQUEsQ0FBSSxNQUFBLENBQU8sSUFBUCxDQUFKLENBQUE7SUFDN0IsSUFBRyxDQUFJLElBQUksQ0FBQyxHQUFaO01BQ0MsSUFBSSxDQUFDLEdBQUwsR0FBVztNQUNYLENBQUEsR0FGRDs7RUFGRDtTQU1BLEtBQUEsQ0FBTSxTQUFDLENBQUQsRUFBRyxDQUFIO1dBQVMsSUFBSyxDQUFBLENBQUEsQ0FBRyxDQUFBLENBQUEsQ0FBRSxDQUFDLFNBQVgsQ0FBQTtFQUFULENBQU47QUFoQk87O0FBa0JSLElBQUEsR0FBTyxTQUFBO0VBQ04sVUFBQSxDQUFXLEdBQVg7U0FDQSxLQUFBLENBQU0sU0FBQyxDQUFELEVBQUcsQ0FBSDtXQUFTLElBQUssQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQUUsQ0FBQyxJQUFYLENBQUE7RUFBVCxDQUFOO0FBRk07O0FBSVAsV0FBQSxHQUFjLFNBQUMsSUFBRCxFQUFPLElBQVAsRUFBYSxDQUFiO0FBQ2IsTUFBQTtFQUFBLEdBQUEsR0FBTSxJQUFJLEtBQUosQ0FBVSxJQUFWO0FBQ047QUFBQSxPQUFBLHFDQUFBOztJQUNDLEdBQUksQ0FBQSxDQUFBLENBQUosR0FBUyxJQUFJLEtBQUosQ0FBVSxJQUFWO0FBQ1Q7QUFBQSxTQUFBLHdDQUFBOztNQUNDLEdBQUksQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQVAsR0FBWSxDQUFBLENBQUUsQ0FBRixFQUFJLENBQUo7QUFEYjtBQUZEO1NBSUE7QUFOYTs7QUFRZCxRQUFBLEdBQVcsU0FBQTtTQUFNLEtBQUEsQ0FBTSxTQUFDLENBQUQsRUFBRyxDQUFIO1dBQVMsSUFBSyxDQUFBLENBQUEsQ0FBRyxDQUFBLENBQUEsQ0FBRSxDQUFDLFFBQVgsR0FBc0I7RUFBL0IsQ0FBTjtBQUFOOztBQUVYLFlBQUEsR0FBZSxTQUFBO1NBQ2QsS0FBQSxDQUFNLFNBQUMsQ0FBRCxFQUFHLENBQUg7SUFDTCxJQUFHLElBQUssQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBLENBQUUsQ0FBQyxRQUFYLENBQW9CLE1BQXBCLEVBQTRCLE1BQTVCLENBQUg7TUFDQyxJQUFLLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFFLENBQUMsTUFBWCxDQUFBO01BQ0EsSUFBRyxJQUFLLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQSxDQUFFLENBQUMsR0FBZDtlQUF1QixRQUFBLENBQUEsRUFBdkI7T0FGRDs7RUFESyxDQUFOO0FBRGMiLCJzb3VyY2VzQ29udGVudCI6WyJncmlkID0gbnVsbFxyXG5jb2xzID0gbnVsbFxyXG5yb3dzID0gbnVsbFxyXG53ID0gMjBcclxudG90YWxCZWVzID0gMTBcclxuXHJcbmxvb3AyID0gKGYpIC0+IGYgaSxqIGZvciBqIGluIHJhbmdlIHJvd3MgZm9yIGkgaW4gcmFuZ2UgY29sc1xyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyAyMDEsIDIwMVxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0dGV4dFNpemUgd1xyXG5cdHJlY3RNb2RlIENFTlRFUlxyXG5cdGNvbHMgPSBmbG9vciB3aWR0aCAvIHdcclxuXHRyb3dzID0gZmxvb3IgaGVpZ2h0IC8gd1xyXG5cdGdyaWQgPSBtYWtlMkRBcnJheSBjb2xzLCByb3dzLCAoaSxqKSAtPiBuZXcgQ2VsbCBpLCBqLCB3XHJcblxyXG5cdG4gPSAwXHJcblx0d2hpbGUgbiA8IHRvdGFsQmVlc1xyXG5cdFx0Y2VsbCA9IGdyaWRbaW50IHJhbmRvbSBjb2xzXVtpbnQgcmFuZG9tIHJvd3NdXHJcblx0XHRpZiBub3QgY2VsbC5iZWVcclxuXHRcdFx0Y2VsbC5iZWUgPSB0cnVlXHJcblx0XHRcdG4rK1xyXG5cclxuXHRsb29wMiAoaSxqKSAtPiBncmlkW2ldW2pdLmNvdW50QmVlcygpXHJcblxyXG5kcmF3ID0gLT5cclxuXHRiYWNrZ3JvdW5kIDI1NVxyXG5cdGxvb3AyIChpLGopIC0+IGdyaWRbaV1bal0uc2hvdygpXHJcblxyXG5tYWtlMkRBcnJheSA9IChjb2xzLCByb3dzLCBmKSAtPlxyXG5cdGFyciA9IG5ldyBBcnJheSBjb2xzXHJcblx0Zm9yIGkgaW4gcmFuZ2UgYXJyLmxlbmd0aFxyXG5cdFx0YXJyW2ldID0gbmV3IEFycmF5IHJvd3NcclxuXHRcdGZvciBqIGluIHJhbmdlIGNvbHNcclxuXHRcdFx0YXJyW2ldW2pdID0gZiBpLGpcclxuXHRhcnJcclxuXHJcbmdhbWVPdmVyID0gKCkgLT4gbG9vcDIgKGksaikgLT4gZ3JpZFtpXVtqXS5yZXZlYWxlZCA9IHRydWVcclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0bG9vcDIgKGksaikgLT5cclxuXHRcdGlmIGdyaWRbaV1bal0uY29udGFpbnMgbW91c2VYLCBtb3VzZVlcclxuXHRcdFx0Z3JpZFtpXVtqXS5yZXZlYWwoKVxyXG5cdFx0XHRpZiBncmlkW2ldW2pdLmJlZSB0aGVuIGdhbWVPdmVyKCkiXX0=
//# sourceURL=C:\Lab\2017\049-Minesweeper\coffee\sketch.coffee