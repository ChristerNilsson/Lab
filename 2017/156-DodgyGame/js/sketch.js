// Generated by CoffeeScript 2.0.3
var Enemy, N, Player, SIZE, draw, enemies, highScore, interval, keyPressed, newGame, player, setup, speed;

N = 11;

SIZE = 200 / N;

player = null;

enemies = [];

interval = 200;

speed = 0.05;

highScore = 0;

newGame = function() {
  player = new Player(width / 2, height / 2);
  highScore = max(highScore, enemies.length);
  enemies = [];
  interval = 200;
  return speed = 1;
};

Enemy = class Enemy {
  constructor(x1, y1, dx, dy) {
    this.x = x1;
    this.y = y1;
    this.dx = dx;
    this.dy = dy;
  }

  draw() {
    fc(1, 0, 0);
    circle(this.x, this.y, 5);
    this.x += this.dx;
    this.y += this.dy;
    if (10 > player.dist(this.x, this.y)) {
      return newGame();
    }
  }

};

Player = class Player {
  constructor(x1, y1) {
    this.x = x1;
    this.y = y1;
  }

  draw() {
    fc(1);
    return rect(this.x, this.y, SIZE, SIZE);
  }

  keyPressed() {
    if (keyCode === LEFT_ARROW) {
      this.x -= SIZE;
    }
    if (keyCode === RIGHT_ARROW) {
      this.x += SIZE;
    }
    if (keyCode === UP_ARROW) {
      this.y -= SIZE;
    }
    if (keyCode === DOWN_ARROW) {
      return this.y += SIZE;
    }
  }

  dist(x, y) {
    return dist(x, y, this.x, this.y);
  }

};

setup = function() {
  createCanvas(200, 200);
  newGame();
  rectMode(CENTER);
  textAlign(CENTER, CENTER);
  return textSize(20);
};

draw = function() {
  var enemy, i, len, r;
  bg(0.5);
  player.draw();
  for (i = 0, len = enemies.length; i < len; i++) {
    enemy = enemies[i];
    enemy.draw();
  }
  fc(0);
  text(enemies.length, 100, 20);
  text(highScore, 100, 180);
  if (frameCount % interval === 0) {
    interval -= 1;
    speed *= 1.05;
    r = int(random(4));
    if (r === 0) {
      enemies.push(new Enemy(player.x, 0, 0, speed));
    }
    if (r === 1) {
      enemies.push(new Enemy(player.x, height, 0, -speed));
    }
    if (r === 2) {
      enemies.push(new Enemy(0, player.y, speed, 0));
    }
    if (r === 3) {
      return enemies.push(new Enemy(width, player.y, -speed, 0));
    }
  }
};

keyPressed = function() {
  return player.keyPressed();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsS0FBQSxFQUFBLENBQUEsRUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxVQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsQ0FBQSxHQUFJOztBQUNKLElBQUEsR0FBTyxHQUFBLEdBQUk7O0FBQ1gsTUFBQSxHQUFTOztBQUNULE9BQUEsR0FBVTs7QUFDVixRQUFBLEdBQVc7O0FBQ1gsS0FBQSxHQUFROztBQUNSLFNBQUEsR0FBWTs7QUFFWixPQUFBLEdBQVUsUUFBQSxDQUFBLENBQUE7RUFDVCxNQUFBLEdBQVMsSUFBSSxNQUFKLENBQVcsS0FBQSxHQUFNLENBQWpCLEVBQW1CLE1BQUEsR0FBTyxDQUExQjtFQUNULFNBQUEsR0FBWSxHQUFBLENBQUksU0FBSixFQUFjLE9BQU8sQ0FBQyxNQUF0QjtFQUNaLE9BQUEsR0FBVTtFQUNWLFFBQUEsR0FBVztTQUNYLEtBQUEsR0FBUTtBQUxDOztBQU9KLFFBQU4sTUFBQSxNQUFBO0VBQ0MsV0FBYyxHQUFBLElBQUEsSUFBQSxJQUFBLENBQUE7SUFBQyxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRSxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7RUFBWjs7RUFDZCxJQUFPLENBQUEsQ0FBQTtJQUNOLEVBQUEsQ0FBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVA7SUFDQSxNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsRUFBVSxJQUFDLENBQUEsQ0FBWCxFQUFhLENBQWI7SUFDQSxJQUFDLENBQUEsQ0FBRCxJQUFNLElBQUMsQ0FBQTtJQUNQLElBQUMsQ0FBQSxDQUFELElBQU0sSUFBQyxDQUFBO0lBQ1AsSUFBRyxFQUFBLEdBQUssTUFBTSxD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WSIsInNvdXJjZXNDb250ZW50IjpbIk4gPSAxMVxyXG5TSVpFID0gMjAwL05cclxucGxheWVyID0gbnVsbFxyXG5lbmVtaWVzID0gW11cclxuaW50ZXJ2YWwgPSAyMDBcclxuc3BlZWQgPSAwLjA1XHJcbmhpZ2hTY29yZSA9IDBcclxuXHJcbm5ld0dhbWUgPSAtPlxyXG5cdHBsYXllciA9IG5ldyBQbGF5ZXIgd2lkdGgvMixoZWlnaHQvMlxyXG5cdGhpZ2hTY29yZSA9IG1heCBoaWdoU2NvcmUsZW5lbWllcy5sZW5ndGhcclxuXHRlbmVtaWVzID0gW11cclxuXHRpbnRlcnZhbCA9IDIwMFxyXG5cdHNwZWVkID0gMVxyXG5cclxuY2xhc3MgRW5lbXlcclxuXHRjb25zdHJ1Y3RvciA6IChAeCxAeSxAZHgsQGR5KSAtPlxyXG5cdGRyYXcgOiAtPlx0XHJcblx0XHRmYyAxLDAsMFxyXG5cdFx0Y2lyY2xlIEB4LEB5LDVcclxuXHRcdEB4ICs9IEBkeFxyXG5cdFx0QHkgKz0gQGR5XHJcblx0XHRpZiAxMCA+IHBsYXllci5kaXN0IEB4LEB5IHRoZW4gbmV3R2FtZSgpXHJcblxyXG5jbGFzcyBQbGF5ZXJcclxuXHRjb25zdHJ1Y3RvciA6IChAeCxAeSkgLT5cclxuXHRkcmF3IDogLT5cdFxyXG5cdFx0ZmMgMVxyXG5cdFx0cmVjdCBAeCxAeSxTSVpFLFNJWkVcclxuXHRrZXlQcmVzc2VkIDogLT5cclxuXHRcdGlmIGtleUNvZGUgPT0gTEVGVF9BUlJPVyAgdGhlbiBAeC09U0laRVxyXG5cdFx0aWYga2V5Q29kZSA9PSBSSUdIVF9BUlJPVyB0aGVuIEB4Kz1TSVpFXHJcblx0XHRpZiBrZXlDb2RlID09IFVQX0FSUk9XICAgIHRoZW4gQHktPVNJWkVcclxuXHRcdGlmIGtleUNvZGUgPT0gRE9XTl9BUlJPVyAgdGhlbiBAeSs9U0laRVxyXG5cdGRpc3QgOiAoeCx5KSAtPlx0ZGlzdCB4LHksQHgsQHkgXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDIwMCwyMDBcclxuXHRuZXdHYW1lKClcdFxyXG5cdHJlY3RNb2RlIENFTlRFUlxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0dGV4dFNpemUgMjBcclxuXHJcbmRyYXcgPSAtPlxyXG5cdGJnIDAuNVxyXG5cdHBsYXllci5kcmF3KClcclxuXHRmb3IgZW5lbXkgaW4gZW5lbWllc1xyXG5cdFx0ZW5lbXkuZHJhdygpXHJcblx0ZmMgMFxyXG5cdHRleHQgZW5lbWllcy5sZW5ndGgsIDEwMCwyMFxyXG5cdHRleHQgaGlnaFNjb3JlLCAxMDAsMTgwXHJcblx0aWYgZnJhbWVDb3VudCAlIGludGVydmFsID09IDBcclxuXHRcdGludGVydmFsIC09IDFcclxuXHRcdHNwZWVkICo9IDEuMDVcclxuXHRcdHIgPSBpbnQgcmFuZG9tIDRcclxuXHRcdGlmIHI9PTAgdGhlbiBlbmVtaWVzLnB1c2ggbmV3IEVuZW15IHBsYXllci54LDAsMCxzcGVlZFx0XHJcblx0XHRpZiByPT0xIHRoZW4gZW5lbWllcy5wdXNoIG5ldyBFbmVteSBwbGF5ZXIueCxoZWlnaHQsMCwtc3BlZWRcdFxyXG5cdFx0aWYgcj09MiB0aGVuIGVuZW1pZXMucHVzaCBuZXcgRW5lbXkgMCxwbGF5ZXIueSxzcGVlZCwwXHRcclxuXHRcdGlmIHI9PTMgdGhlbiBlbmVtaWVzLnB1c2ggbmV3IEVuZW15IHdpZHRoLHBsYXllci55LC1zcGVlZCwwXHRcclxuXHJcbmtleVByZXNzZWQgPSAtPlxyXG5cdHBsYXllci5rZXlQcmVzc2VkKClcclxuIl19
//# sourceURL=C:\Lab\2017\156-DodgyGame\coffee\sketch.coffee