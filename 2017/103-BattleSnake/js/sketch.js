// Generated by CoffeeScript 1.11.1
var N, SIZE, Snake, apple, draw, keyPressed, setup, snakes, state,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

SIZE = 20;

N = 20;

apple = [10, 10];

snakes = [];

state = -1;

Snake = (function() {
  function Snake(index, x, y, dir) {
    this.index = index;
    this.dir = dir;
    this.head = [x, y];
    this.body = [];
  }

  Snake.prototype.distans = function(other) {
    return abs(this.head[0] - other[0]) + abs(this.head[1] - other[1]);
  };

  Snake.prototype.collision = function(other) {
    var b, i, len, ref;
    ref = other.body;
    for (i = 0, len = ref.length; i < len; i++) {
      b = ref[i];
      if (this.distans(b) === 0) {
        return true;
      }
    }
    return false;
  };

  Snake.prototype.update = function() {
    this.body.unshift(this.head);
    if (this.distans(apple) === 0) {
      apple = [int(random(N)), int(random(N))];
    } else if (this.collision(snakes[1 - this.index])) {
      state = this.index;
    } else {
      this.body.pop();
    }
    return this.head = [modulo(this.head[0] + [1, 0, -1, 0][this.dir], N), modulo(this.head[1] + [0, 1, 0, -1][this.dir], N)];
  };

  Snake.prototype.draw = function() {
    var i, len, ref, ref1, x, y;
    fc(1);
    ref = this.body.concat([this.head]);
    for (i = 0, len = ref.length; i < len; i++) {
      ref1 = ref[i], x = ref1[0], y = ref1[1];
      rect(SIZE * x, SIZE * y, SIZE, SIZE);
    }
    fc(1, 0, 0);
    return rect(SIZE * apple[0], SIZE * apple[1], SIZE, SIZE);
  };

  return Snake;

})();

setup = function() {
  createCanvas(400, 400);
  frameRate(5);
  snakes.push(new Snake(0, 5, 5, 0));
  return snakes.push(new Snake(1, 15, 15, 2));
};

draw = function() {
  var i, len, results, snake;
  if (state === -1) {
    bg(0.5);
    results = [];
    for (i = 0, len = snakes.length; i < len; i++) {
      snake = snakes[i];
      snake.draw();
      results.push(snake.update());
    }
    return results;
  } else {
    textSize(30);
    textAlign(CENTER, CENTER);
    fc(1, 1, 0);
    return text(['Left', 'Right'][state] + ' wins!', width / 2, height / 2);
  }
};

keyPressed = function() {
  var a, b;
  a = snakes[0], b = snakes[1];
  if (keyCode === 65) {
    a.dir = modulo(a.dir - 1, 4);
  }
  if (keyCode === 68) {
    a.dir = modulo(a.dir + 1, 4);
  }
  if (keyCode === LEFT_ARROW) {
    b.dir = modulo(b.dir - 1, 4);
  }
  if (keyCode === RIGHT_ARROW) {
    return b.dir = modulo(b.dir + 1, 4);
  }
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsNkRBQUE7RUFBQTs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsQ0FBQSxHQUFLOztBQUVMLEtBQUEsR0FBUSxDQUFDLEVBQUQsRUFBSSxFQUFKOztBQUNSLE1BQUEsR0FBUzs7QUFDVCxLQUFBLEdBQVEsQ0FBQzs7QUFFSDtFQUNTLGVBQUMsS0FBRCxFQUFRLENBQVIsRUFBVSxDQUFWLEVBQVksR0FBWjtJQUFDLElBQUMsQ0FBQSxRQUFEO0lBQVcsSUFBQyxDQUFBLE1BQUQ7SUFDekIsSUFBQyxDQUFBLElBQUQsR0FBUSxDQUFDLENBQUQsRUFBRyxDQUFIO0lBQ1IsSUFBQyxDQUFBLElBQUQsR0FBUTtFQUZLOztrQkFJZCxPQUFBLEdBQVUsU0FBQyxLQUFEO1dBQVcsR0FBQSxDQUFJLElBQUMsQ0FBQSxJQUFLLENBQUEsQ0FBQSxDQUFOLEdBQVMsS0FBTSxDQUFBLENBQUEsQ0FBbkIsQ0FBQSxHQUF5QixHQUFBLENBQUksSUFBQyxDQUFBLElBQUssQ0FBQSxDQUFBLENBQU4sR0FBUyxLQUFNLENBQUEsQ0FBQSxDQUFuQjtFQUFwQzs7a0JBRVYsU0FBQSxHQUFZLFNBQUMsS0FBRDtBQUNYLFFBQUE7QUFBQTtBQUFBLFNBQUEscUNBQUE7O01BQ0MsSUFBRyxJQUFDLENBQUEsT0FBRCxDQUFTLENBQVQsQ0FBQSxLQUFhLENBQWhCO0FBQXVCLGVBQU8sS0FBOUI7O0FBREQ7V0FFQTtFQUhXOztrQkFLWixNQUFBLEdBQVMsU0FBQTtJQUNSLElBQUMsQ0FBQSxJQUFJLENBQUMsT0FBTixDQUFjLElBQUMsQ0FBQSxJQUFmO0lBQ0EsSUFBRyxJQUFDLENBQUEsT0FBRCxDQUFTLEtBQVQsQ0FBQSxLQUFpQixDQUFwQjtNQUNDLEtBQUEsR0FBUSxDQUFDLEdBQUEsQ0FBSSxNQUFBLENBQU8sQ0FBUCxDQUFK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USxHQUFNLEdBQXBEOztBQUxZIiwic291cmNlc0NvbnRlbnQiOlsiU0laRSA9IDIwXHJcbk4gID0gMjBcclxuXHJcbmFwcGxlID0gWzEwLDEwXVxyXG5zbmFrZXMgPSBbXVxyXG5zdGF0ZSA9IC0xXHJcblxyXG5jbGFzcyBTbmFrZVxyXG5cdGNvbnN0cnVjdG9yIDogKEBpbmRleCx4LHksQGRpcikgLT5cclxuXHRcdEBoZWFkID0gW3gseV1cclxuXHRcdEBib2R5ID0gW11cclxuXHJcblx0ZGlzdGFucyA6IChvdGhlcikgLT4gYWJzKEBoZWFkWzBdLW90aGVyWzBdKSArIGFicyhAaGVhZFsxXS1vdGhlclsxXSlcclxuXHJcblx0Y29sbGlzaW9uIDogKG90aGVyKSAtPlxyXG5cdFx0Zm9yIGIgaW4gb3RoZXIuYm9keVxyXG5cdFx0XHRpZiBAZGlzdGFucyhiKT09MCB0aGVuIHJldHVybiB0cnVlXHJcblx0XHRmYWxzZVxyXG5cclxuXHR1cGRhdGUgOiAtPlxyXG5cdFx0QGJvZHkudW5zaGlmdCBAaGVhZFxyXG5cdFx0aWYgQGRpc3RhbnMoYXBwbGUpPT0wXHJcblx0XHRcdGFwcGxlID0gW2ludChyYW5kb20oTikpLCBpbnQocmFuZG9tKE4pKV1cclxuXHRcdGVsc2UgaWYgQGNvbGxpc2lvbihzbmFrZXNbMS1AaW5kZXhdKVxyXG5cdFx0XHRzdGF0ZSA9IEBpbmRleFxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRAYm9keS5wb3AoKVxyXG5cdFx0QGhlYWQgPSBbKEBoZWFkWzBdK1sxLDAsLTEsMF1bQGRpcl0pICUlIE4sIChAaGVhZFsxXStbMCwxLDAsLTFdW0BkaXJdKSAlJSBOXVxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGZjIDFcclxuXHRcdGZvciBbeCx5XSBpbiBAYm9keS5jb25jYXQgW0BoZWFkXVxyXG5cdFx0XHRyZWN0IFNJWkUqeCxTSVpFKnksU0laRSxTSVpFXHJcblx0XHRmYyAxLDAsMFxyXG5cdFx0cmVjdCBTSVpFKmFwcGxlWzBdLFNJWkUqYXBwbGVbMV0sU0laRSxTSVpFXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDQwMCw0MDBcclxuXHRmcmFtZVJhdGUgNVxyXG5cdHNuYWtlcy5wdXNoIG5ldyBTbmFrZSAwLDUsNSwwXHJcblx0c25ha2VzLnB1c2ggbmV3IFNuYWtlIDEsMTUsMTUsMlxyXG5cclxuZHJhdyA9IC0+XHJcblx0aWYgc3RhdGUgPT0gLTFcclxuXHRcdGJnIDAuNVxyXG5cdFx0Zm9yIHNuYWtlIGluIHNuYWtlc1xyXG5cdFx0XHRzbmFrZS5kcmF3KClcclxuXHRcdFx0c25ha2UudXBkYXRlKClcclxuXHRlbHNlXHJcblx0XHR0ZXh0U2l6ZSAzMFxyXG5cdFx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRcdGZjIDEsMSwwXHJcblx0XHR0ZXh0IFsnTGVmdCcsJ1JpZ2h0J11bc3RhdGVdICsgJyB3aW5zIScsd2lkdGgvMixoZWlnaHQvMlxyXG5cclxua2V5UHJlc3NlZCA9IC0+XHJcblx0W2EsYl0gPSBzbmFrZXNcclxuXHRpZiBrZXlDb2RlPT02NSAgICAgICAgICB0aGVuIGEuZGlyID0gKGEuZGlyIC0gMSkgJSUgNFxyXG5cdGlmIGtleUNvZGU9PTY4ICAgICAgICAgIHRoZW4gYS5kaXIgPSAoYS5kaXIgKyAxKSAlJSA0XHJcblx0aWYga2V5Q29kZT09TEVGVF9BUlJPVyAgdGhlbiBiLmRpciA9IChiLmRpciAtIDEpICUlIDRcclxuXHRpZiBrZXlDb2RlPT1SSUdIVF9BUlJPVyB0aGVuIGIuZGlyID0gKGIuZGlyICsgMSkgJSUgNFxyXG4iXX0=
//# sourceURL=C:\Lab\2017\103-temp\coffee\sketch.coffee