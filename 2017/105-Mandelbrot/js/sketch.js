// Generated by CoffeeScript 1.11.1
var BITS, DEPTH, N, N1, SIZE, calc, hist, mousePressed, setup, x0, xdraw, y0, zoom;

hist = [];

x0 = -0.5;

y0 = 0.0;

SIZE = 100;

zoom = 1 / SIZE;

BITS = 4;

N = Math.pow(2, BITS);

N1 = N - 1;

DEPTH = Math.pow(2, 3 * BITS);

setup = function() {
  createCanvas(2 * SIZE, 2 * SIZE);
  return xdraw();
};

calc = function(cx, cy) {
  var count, k, l, len, ref, ref1, ref2, x, y;
  ref = [0, 0], x = ref[0], y = ref[1];
  count = 0;
  ref1 = range(DEPTH);
  for (l = 0, len = ref1.length; l < len; l++) {
    k = ref1[l];
    if (dist(x, y, 0, 0) < 2) {
      count += 1;
    } else {
      return count;
    }
    ref2 = [x * x - y * y + cx, 2 * x * y + cy], x = ref2[0], y = ref2[1];
  }
  return count;
};

xdraw = function() {
  var b, cx, cy, f, g, i, j, l, len, r, ref, results;
  ref = range(-SIZE, SIZE);
  results = [];
  for (l = 0, len = ref.length; l < len; l++) {
    i = ref[l];
    results.push((function() {
      var len1, m, ref1, results1;
      ref1 = range(-SIZE, SIZE);
      results1 = [];
      for (m = 0, len1 = ref1.length; m < len1; m++) {
        j = ref1[m];
        cx = x0 + zoom * i;
        cy = y0 + zoom * j;
        f = calc(cx, cy);
        r = f % N;
        f = int(f / N);
        g = f % N;
        f = int(f / N);
        b = f % N;
        f = int(f / N);
        sc(r / N1, g / N1, b / N1);
        results1.push(point(SIZE + i, SIZE + j));
      }
      return results1;
    })());
  }
  return results;
};

mousePressed = function() {
  print([x0, y0, zoom]);
  hist.push([x0, y0, zoom]);
  x0 = map(mouseX, 0, 2 * SIZE, x0 - zoom * SIZE, x0 + zoom * SIZE);
  y0 = map(mouseY, 0, 2 * SIZE, y0 - zoom * SIZE, y0 + zoom * SIZE);
  zoom = zoom / 2;
  return xdraw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUVBLElBQUE7O0FBQUEsSUFBQSxHQUFPOztBQUVQLEVBQUEsR0FBSyxDQUFDOztBQUNOLEVBQUEsR0FBSzs7QUFDTCxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPLENBQUEsR0FBRTs7QUFDVCxJQUFBLEdBQU87O0FBQ1AsQ0FBQSxZQUFJLEdBQUc7O0FBQ1AsRUFBQSxHQUFLLENBQUEsR0FBRTs7QUFDUCxLQUFBLFlBQVEsR0FBSSxDQUFBLEdBQUU7O0FBRWQsS0FBQSxHQUFRLFNBQUE7RUFDUCxZQUFBLENBQWEsQ0FBQSxHQUFFLElBQWYsRUFBb0IsQ0FBQSxHQUFFLElBQXRCO1NBQ0EsS0FBQSxDQUFBO0FBRk87O0FBSVIsSUFBQSxHQUFPLFNBQUMsRUFBRCxFQUFJLEVBQUo7QUFDTixNQUFBO0VBQUEsTUFBUSxDQUFDLENBQUQsRUFBRyxDQUFILENBQVIsRUFBQyxVQUFELEVBQUc7RUFDSCxLQUFBLEdBQVE7QUFDUjtBQUFBLE9BQUEsc0NBQUE7O0lBQ0MsSUFBRyxJQUFBLENBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFULEVBQVcsQ0FBWCxDQUFBLEdBQWdCLENBQW5CO01BQ0MsS0FBQSxJQUFTLEVBRFY7S0FBQSxNQUFBO0FBR0MsYUFBTyxNQUhSOztJQUlBLE9BQVEsQ0FBQyxDQUFBLEdBQUUsQ0FBRixHQUFJLENBQUEsR0FBRSxDQUFOLEdBQVEsRUFBVCxFQUFhLENBQUEsR0FBRSxDQUFGLEdBQUksQ0FBSixHQUFNLEVBQW5CLENBQVIsRUFBQyxXQUFELEVBQUc7QUFMSjtTQU1BO0FBVE07O0FBV1AsS0FBQSxHQUFRLFNBQUE7QUFDUCxNQUFBO0FBQUE7QUFBQTtPQUFBLHFDQUFBOzs7O0FBQ0M7QUFBQTtXQUFBLHdDQUFBOztRQUNDLEVBQUEsR0FBSyxFQUFBLEdBQUssSUFBQSxHQUFLO1FBQ2YsRUFBQSxHQUFLLEVBQUEsR0FBSyxJQUFBLEdBQUs7UUFDZixDQUFBLEdBQUksSUFBQSxDQUFLLEVBQUwsRUFBUSxFQUFSO1FBQ0osQ0FBQSxHQUFJLENBQUEsR0FBRTtRQUFHLENBQUEsR0FBSSxHQUFBLENBQUksQ0FBQSxHQUFFLENBQU47UUFDYixDQUFBLEdBQUksQ0FBQSxHQUFFO1FBQUcsQ0FBQSxHQUFJLEdBQUEsQ0FBSSxDQUFBLEdBQUUsQ0FBTjtRQUNiLENBQUEsR0FBSSxDQUFBLEdBQUU7UUFBRyxDQUFBLEdBQUksR0FBQSxDQUFJLENBQUEsR0FBRSxDQUFOO1FBQ2IsRUFBQSxDQUFHLENBQUEsR0FBRSxFQUFMLEVBQVEsQ0FBQSxHQUFFLEVBQVYsRUFBYSxDQUFBLEdBQUUsRUFBZjtzQkFDQSxLQUFBLENBQU0sSUFBQSxHQUFLLENBQVgsRUFBYSxJQUFBLEdBQUssQ0FBbEI7QUFSRDs7O0FBREQ7O0FBRE87O0FBWVIsWUFBQSxHQUFlLFNBQUE7RUFDZCxLQUFBLENBQU0sQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLElBQVAsQ0FBTjtFQUNBLElBQUksQ0FBQyxJQUFMLENBQVUsQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLElBQVAsQ0FBVjtFQUNBLEVBQUEsR0FBSyxHQUFBLENBQUksTUFBSixFQUFXLENBQVgsRUFBYSxDQUFBLEdBQUUsSUFBZixFQUFvQixFQUFBLEdBQUcsSUFBQSxHQUFLLElBQTVCLEVBQWlDLEVBQUEsR0FBRyxJQUFBLEdBQUssSUFBekM7RUFDTCxFQUFBLEdBQUssR0FBQSxDQUFJLE1BQUosRUFBVyxDQUFYLEVBQWEsQ0FBQSxHQUFFLElBQWYsRUFBb0IsRUFBQSxHQUFHLElBQUEsR0FBSyxJQUE1QixFQUFpQyxFQUFBLEdBQUcsSUFBQSxHQUFLLElBQXpDO0VBQ0wsSUFBQSxHQUFPLElBQUEsR0FBSztTQUNaLEtBQUEsQ0FBQTtBQU5jIiwic291cmNlc0NvbnRlbnQiOlsiIyB6ID0geip6K2NcclxuIyB0b2RvIHVuZG9cclxuaGlzdCA9IFtdXHJcblxyXG54MCA9IC0wLjUgIyBtaXR0cHVua3RlblxyXG55MCA9IDAuMFxyXG5TSVpFID0gMTAwXHJcbnpvb20gPSAxL1NJWkVcclxuQklUUyA9IDRcclxuTiA9IDIqKkJJVFNcclxuTjEgPSBOLTFcclxuREVQVEggPSAyKiooMypCSVRTKVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyAyKlNJWkUsMipTSVpFXHJcblx0eGRyYXcoKVxyXG5cclxuY2FsYyA9IChjeCxjeSkgLT5cclxuXHRbeCx5XSA9IFswLDBdXHJcblx0Y291bnQgPSAwXHJcblx0Zm9yIGsgaW4gcmFuZ2UgREVQVEhcclxuXHRcdGlmIGRpc3QoeCx5LDAsMCkgPCAyXHJcblx0XHRcdGNvdW50ICs9IDFcclxuXHRcdGVsc2VcclxuXHRcdFx0cmV0dXJuIGNvdW50XHJcblx0XHRbeCx5XSA9IFt4KngteSp5K2N4LCAyKngqeStjeV1cclxuXHRjb3VudFxyXG5cclxueGRyYXcgPSAtPlxyXG5cdGZvciBpIGluIHJhbmdlIC1TSVpFLFNJWkVcclxuXHRcdGZvciBqIGluIHJhbmdlIC1TSVpFLFNJWkVcclxuXHRcdFx0Y3ggPSB4MCArIHpvb20qaVxyXG5cdFx0XHRjeSA9IHkwICsgem9vbSpqXHJcblx0XHRcdGYgPSBjYWxjKGN4LGN5KVxyXG5cdFx0XHRyID0gZiVOOyBmID0gaW50IGYvTlxyXG5cdFx0XHRnID0gZiVOOyBmID0gaW50IGYvTlxyXG5cdFx0XHRiID0gZiVOOyBmID0gaW50IGYvTlxyXG5cdFx0XHRzYyByL04xLGcvTjEsYi9OMVxyXG5cdFx0XHRwb2ludCBTSVpFK2ksU0laRStqXHJcblxyXG5tb3VzZVByZXNzZWQgPSAtPlxyXG5cdHByaW50IFt4MCx5MCx6b29tXVxyXG5cdGhpc3QucHVzaCBbeDAseTAsem9vbV1cclxuXHR4MCA9IG1hcCBtb3VzZVgsMCwyKlNJWkUseDAtem9vbSpTSVpFLHgwK3pvb20qU0laRVxyXG5cdHkwID0gbWFwIG1vdXNlWSwwLDIqU0laRSx5MC16b29tKlNJWkUseTArem9vbSpTSVpFXHJcblx0em9vbSA9IHpvb20vMlxyXG5cdHhkcmF3KCkiXX0=
//# sourceURL=C:\Lab\2017\105-Mandelbrot\coffee\sketch.coffee