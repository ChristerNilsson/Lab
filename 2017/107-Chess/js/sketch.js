// Generated by CoffeeScript 1.12.7
var MOVES, currentCol, currentPiece, currentRow, genDir, mousePressed, oneGeneration, setup, xdraw;

MOVES = {
  King: [false, [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, -1], [1, 1], [1, -1], [-1, 1]]],
  Queen: [true, [[-1, 0], [1, 0], [0, -1], [0, 1], [-1, -1], [1, 1], [1, -1], [-1, 1]]],
  Rook: [true, [[-1, 0], [1, 0], [0, -1], [0, 1]]],
  Bishop: [true, [[-1, -1], [1, 1], [1, -1], [-1, 1]]],
  Knight: [false, [[-1, -2], [-1, 2], [1, -2], [1, 2], [-2, -1], [-2, 1], [2, -1], [2, 1]]]
};

currentPiece = 'King';

currentCol = 4;

currentRow = 0;

setup = function() {
  createCanvas(200, 200);
  return xdraw();
};

genDir = function(multi, sq, dxdy) {
  var col, dx, dy, i, k, len, maximum, ref, row, squares;
  dx = dxdy[0], dy = dxdy[1];
  squares = [];
  maximum = multi ? 7 : 1;
  col = sq[0], row = sq[1];
  ref = range(maximum);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    col += dx;
    row += dy;
    if ((0 <= col && col <= 7) && (0 <= row && row <= 7)) {
      squares.push([col, row]);
    }
  }
  return squares;
};

oneGeneration = function(piece, sq) {
  var drag, dxdy, k, len, multi, squares;
  multi = piece[0], drag = piece[1];
  squares = [];
  for (k = 0, len = drag.length; k < len; k++) {
    dxdy = drag[k];
    squares = squares.concat(genDir(multi, sq, dxdy));
  }
  return squares;
};

xdraw = function() {
  var i, j, k, l, len, len1, len2, len3, m, n, piece, ref, ref1, ref2, ref3, ref4, results, sq, x, y;
  bg(1);
  textAlign(RIGHT, CENTER);
  textSize(13);
  ref = range(8);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    ref1 = range(8);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      j = ref1[l];
      fc((i + j + 1) % 2);
      rect(20 * i, 20 * j, 20, 20);
    }
  }
  fc(0);
  ref2 = _.keys(MOVES);
  for (i = m = 0, len2 = ref2.length; m < len2; i = ++m) {
    piece = ref2[i];
    text(piece, 200, 10 + 20 * i);
  }
  sq = [currentCol, currentRow];
  x = sq[0], y = sq[1];
  fc(0, 1, 0);
  circle(10 + 20 * x, 10 + 20 * y, 5);
  fc(1, 0, 0);
  ref3 = oneGeneration(MOVES[currentPiece], sq);
  results = [];
  for (n = 0, len3 = ref3.length; n < len3; n++) {
    ref4 = ref3[n], x = ref4[0], y = ref4[1];
    results.push(circle(10 + 20 * x, 10 + 20 * y, 5));
  }
  return results;
};

assert([[5, 5]], genDir(false, [4, 4], [1, 1]));

assert([[3, 3], [2, 2], [1, 1], [0, 0]], genDir(true, [4, 4], [-1, -1]));

assert([[3, 4], [5, 4], [4, 3], [4, 5], [3, 3], [5, 5], [5, 3], [3, 5]], oneGeneration(MOVES['King'], [4, 4]));

assert([[3, 4], [2, 4], [1, 4], [0, 4], [5, 4], [6, 4], [7, 4], [4, 3], [4, 2], [4, 1], [4, 0], [4, 5], [4, 6], [4, 7]], oneGeneration(MOVES['Rook'], [4, 4]));

mousePressed = function() {
  if (mouseX < 160) {
    currentCol = int(mouseX / 20);
    currentRow = int(mouseY / 20);
  } else {
    currentPiece = _.keys(MOVES)[int(mouseY / 20)];
  }
  return xdraw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsS0FBQSxHQUNDO0VBQUEsSUFBQSxFQUFTLENBQUMsS0FBRCxFQUFPLENBQUMsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFKLENBQUQsRUFBUSxDQUFDLENBQUQsRUFBRyxDQUFILENBQVIsRUFBYyxDQUFDLENBQUQsRUFBRyxDQUFDLENBQUosQ0FBZCxFQUFxQixDQUFDLENBQUQsRUFBRyxDQUFILENBQXJCLEVBQTJCLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBQyxDQUFMLENBQTNCLEVBQW1DLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBbkMsRUFBeUMsQ0FBQyxDQUFELEVBQUcsQ0FBQyxDQUFKLENBQXpDLEVBQWdELENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBSixDQUFoRCxDQUFQLENBQVQ7RUFDQSxLQUFBLEVBQVMsQ0FBQyxJQUFELEVBQU0sQ0FBQyxDQUFDLENBQUMsQ0FBRixFQUFJLENBQUosQ0FBRCxFQUFRLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBUixFQUFjLENBQUMsQ0FBRCxFQUFHLENBQUMsQ0FBSixDQUFkLEVBQXFCLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBckIsRUFBMkIsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBM0IsRUFBbUMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFuQyxFQUF5QyxDQUFDLENBQUQsRUFBRyxDQUFDLENBQUosQ0FBekMsRUFBZ0QsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFKLENBQWhELENBQU4sQ0FEVDtFQUVBLElBQUEsRUFBUyxDQUFDLElBQUQsRUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBSixDQUFELEVBQVEsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFSLEVBQWMsQ0FBQyxDQUFELEVBQUcsQ0FBQyxDQUFK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QixDQUExRDs7QUFDQSxNQUFBLENBQU8sQ0FBQyxDQUFDLENBQUQsRUFBRyxDQUFILENBQUQsRUFBTyxDQUFDLENBQUQsRUFBRyxDQUFILENBQVAsRUFBYSxDQUFDLENBQUQsRUFBRyxDQUFILENBQWIsRUFBbUIsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFuQixFQUF5QixDQUFDLENBQUQsRUFBRyxDQUFILENBQXpCLEVBQStCLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBL0IsRUFBcUMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUFyQyxFQUEyQyxDQUFDLENBQUQsRUFBRyxDQUFILENBQTNDLEVBQWlELENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBakQsRUFBdUQsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUF2RCxFQUE2RCxDQUFDLENBQUQsRUFBRyxDQUFILENBQTdELEVBQW1FLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBbkUsRUFBeUUsQ0FBQyxDQUFELEVBQUcsQ0FBSCxDQUF6RSxFQUErRSxDQUFDLENBQUQsRUFBRyxDQUFILENBQS9FLENBQVAsRUFBOEYsYUFBQSxDQUFjLEtBQU0sQ0FBQSxNQUFBLENBQXBCLEVBQTRCLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBNUIsQ0FBOUY7O0FBRUEsWUFBQSxHQUFlLFNBQUE7RUFDZCxJQUFHLE1BQUEsR0FBUyxHQUFaO0lBQ0MsVUFBQSxHQUFhLEdBQUEsQ0FBSSxNQUFBLEdBQU8sRUFBWDtJQUNiLFVBQUEsR0FBYSxHQUFBLENBQUksTUFBQSxHQUFPLEVBQVgsRUFGZDtHQUFBLE1BQUE7SUFJQyxZQUFBLEdBQWUsQ0FBQyxDQUFDLElBQUYsQ0FBTyxLQUFQLENBQWMsQ0FBQSxHQUFBLENBQUksTUFBQSxHQUFPLEVBQVgsQ0FBQSxFQUo5Qjs7U0FLQSxLQUFBLENBQUE7QUFOYyIsInNvdXJjZXNDb250ZW50IjpbIk1PVkVTID1cclxuXHRLaW5nICAgOiBbZmFsc2UsW1stMSwwXSxbMSwwXSxbMCwtMV0sWzAsMV0sWy0xLC0xXSxbMSwxXSxbMSwtMV0sWy0xLDFdXV1cclxuXHRRdWVlbiAgOiBbdHJ1ZSxbWy0xLDBdLFsxLDBdLFswLC0xXSxbMCwxXSxbLTEsLTFdLFsxLDFdLFsxLC0xXSxbLTEsMV1dXVxyXG5cdFJvb2sgICA6IFt0cnVlLFtbLTEsMF0sWzEsMF0sWzAsLTFdLFswLDFdXV1cclxuXHRCaXNob3AgOiBbdHJ1ZSxbWy0xLC0xXSxbMSwxXSxbMSwtMV0sWy0xLDFdXV1cclxuXHRLbmlnaHQgOiBbZmFsc2UsW1stMSwtMl0sWy0xLDJdLFsxLC0yXSxbMSwyXSxbLTIsLTFdLFstMiwxXSxbMiwtMV0sWzIsMV1dXVxyXG5cclxuY3VycmVudFBpZWNlID0gJ0tpbmcnXHJcbmN1cnJlbnRDb2wgPSA0XHJcbmN1cnJlbnRSb3cgPSAwXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDIwMCwyMDBcclxuXHR4ZHJhdygpXHJcblxyXG5nZW5EaXIgPSAobXVsdGksc3EsZHhkeSkgLT5cclxuXHRbZHgsZHldID0gZHhkeVxyXG5cdHNxdWFyZXMgPSBbXVxyXG5cdG1heGltdW0gPSBpZiBtdWx0aSB0aGVuIDcgZWxzZSAxXHJcblx0W2NvbCxyb3ddID0gc3FcclxuXHRmb3IgaSBpbiByYW5nZSBtYXhpbXVtXHJcblx0XHRjb2wgKz0gZHhcclxuXHRcdHJvdyArPSBkeVxyXG5cdFx0aWYgMDw9Y29sPD03IGFuZCAwPD1yb3c8PTcgdGhlbiBzcXVhcmVzLnB1c2ggW2NvbCxyb3ddXHJcblx0c3F1YXJlc1xyXG5cclxub25lR2VuZXJhdGlvbiA9IChwaWVjZSxzcSkgLT5cclxuXHRbbXVsdGksZHJhZ10gPSBwaWVjZVxyXG5cdHNxdWFyZXMgPSBbXVxyXG5cdHNxdWFyZXMgPSBzcXVhcmVzLmNvbmNhdCBnZW5EaXIgbXVsdGksc3EsZHhkeSBmb3IgZHhkeSBpbiBkcmFnXHJcblx0c3F1YXJlc1xyXG5cclxueGRyYXcgPSAtPlxyXG5cdGJnIDFcclxuXHR0ZXh0QWxpZ24gUklHSFQsQ0VOVEVSXHJcblx0dGV4dFNpemUgMTNcclxuXHJcblx0Zm9yIGkgaW4gcmFuZ2UgOFxyXG5cdFx0Zm9yIGogaW4gcmFuZ2UgOFxyXG5cdFx0XHRmYyAoaStqKzEpJTJcclxuXHRcdFx0cmVjdCAyMCppLDIwKmosMjAsMjBcclxuXHJcblx0ZmMgMFxyXG5cdGZvciBwaWVjZSxpIGluIF8ua2V5cyBNT1ZFU1xyXG5cdFx0dGV4dCBwaWVjZSwyMDAsMTArMjAqaVxyXG5cclxuXHRzcSA9IFtjdXJyZW50Q29sLGN1cnJlbnRSb3ddXHJcblx0W3gseV0gPSBzcVxyXG5cdGZjIDAsMSwwXHJcblx0Y2lyY2xlIDEwKzIwKngsMTArMjAqeSw1XHJcblxyXG5cdGZjIDEsMCwwXHJcblx0Zm9yIFt4LHldIGluIG9uZUdlbmVyYXRpb24gTU9WRVNbY3VycmVudFBpZWNlXSxzcVxyXG5cdFx0Y2lyY2xlIDEwKzIwKngsMTArMjAqeSw1XHJcblxyXG5hc3NlcnQgW1s1LDVdXSwgZ2VuRGlyIGZhbHNlLFs0LDRdLFsxLDFdXHJcbmFzc2VydCBbWzMsM10sWzIsMl0sWzEsMV0sWzAsMF1dLCBnZW5EaXIgdHJ1ZSxbNCw0XSxbLTEsLTFdXHJcbmFzc2VydCBbWzMsNF0sWzUsNF0sWzQsM10sWzQsNV0sWzMsM10sWzUsNV0sWzUsM10sWzMsNV1dLCBvbmVHZW5lcmF0aW9uIE1PVkVTWydLaW5nJ10sWzQsNF1cclxuYXNzZXJ0IFtbMyw0XSxbMiw0XSxbMSw0XSxbMCw0XSxbNSw0XSxbNiw0XSxbNyw0XSxbNCwzXSxbNCwyXSxbNCwxXSxbNCwwXSxbNCw1XSxbNCw2XSxbNCw3XV0sXHRvbmVHZW5lcmF0aW9uIE1PVkVTWydSb29rJ10sWzQsNF1cclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0aWYgbW91c2VYIDwgMTYwXHJcblx0XHRjdXJyZW50Q29sID0gaW50IG1vdXNlWC8yMFxyXG5cdFx0Y3VycmVudFJvdyA9IGludCBtb3VzZVkvMjBcclxuXHRlbHNlXHJcblx0XHRjdXJyZW50UGllY2UgPSBfLmtleXMoTU9WRVMpW2ludCBtb3VzZVkvMjBdXHJcblx0eGRyYXcoKVxyXG4iXX0=
//# sourceURL=C:\Lab\2017\107-Chess\coffee\sketch.coffee