// Generated by CoffeeScript 2.0.3
/*
eslint-disable 
*/
var App, millis;

import React, {
  Component
} from 'react';

import QrReader from 'react-qr-reader';

import _ from 'lodash';

millis = function() {
  var d;
  d = new Date();
  return d.getTime();
};

export default App = class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      delay: 500,
      result: 'scan', // INIT 4 8
      A: "",
      B: "",
      C: "",
      D: "",
      INIT: "init",
      from: 0,
      to: 0,
      hist: [],
      bg: '#FFFFFF'
    };
    this.handleScan = this.handleScan.bind(this);
    this.handleExecute = this.handleExecute.bind(this);
  }

  handleScan(result) {
    if (result) {
      return this.setState({
        result,
        bg: '#FFFF00'
      });
    }
  }

  handleError(err) {
    return console.error(err);
  }

  handleExecute() {
    var arr, command, commands, n, newFrom, op;
    arr = this.state.result.split(' ');
    op = arr[0];
    command = this.state[op];
    newFrom === 0;
    if (command === '+2') {
      newFrom = this.save(this.state.from + 2);
    }
    if (command === '*2') {
      newFrom = this.save(this.state.from * 2);
    }
    if (command === '/2' && this.state.from % 2 === 0) {
      newFrom = this.save(this.state.from / 2);
    }
    if (command === 'undo') {
      n = this.state.hist.length;
      if (n > 0) {
        this.setState({
          from: this.state.hist[n - 1],
          hist: this.state.hist.slice(0, -1)
        });
      }
    }
    if (command === 'init') {
      commands = '+2 *2 /2 undo'.split(' ');
      commands = _.shuffle(commands);
      this.setState({
        A: commands[0],
        B: commands[1],
        C: commands[2],
        D: commands[3],
        from: parseInt(arr[1]),
        to: parseInt(arr[2]),
        hist: [],
        start: millis(),
        operations: 0,
        total: 0,
        result: 'scan'
      });
    }
    return this.setState({
      bg: newFrom === this.state.to ? '#00FF00' : '#FFFFFF'
    });
  }

  save(value) {
    this.setState({
      from: value,
      hist: this.state.hist.concat([this.state.from]),
      operations: this.state.operations + 1,
      total: (millis() - this.state.start) / 1000 + 10 * this.state.operations
    });
    return value;
  }

  render() {
    var previewStyle;
    previewStyle = {
      height: 320,
      width: 320
    };
    return <div style={{
        backgroundColor: this.state.bg
      }}>
			<QrReader delay={this.state.delay} style={previewStyle} onError={this.handleError} onScan={this.handleScan} />
			<button onClick={this.handleExecute}>{(this.state.result.split(' ')[0])}</button>
			<p>A: {this.state.A} <br /> B: {this.state.B} <br /> C: {this.state.C} <br /> D: {this.state.D}</p>
			<h1>{this.state.from} to {this.state.to}</h1>
			<p>{this.state.hist.join(' ')}</p>
			<p>{this.state.total}</p>
		</div>;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXEFwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7QUFBQSxJQUFBLEdBQUEsRUFBQTs7QUFJQSxPQUFPLEtBQVAsRUFBQTtFQUFnQixTQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxRQUFQLE1BQUE7O0FBQ0EsT0FBTyxDQUFQLE1BQUE7O0FBRUEsTUFBQSxHQUFTLFFBQUEsQ0FBQSxDQUFBO0FBQ1IsTUFBQTtFQUFBLENBQUEsR0FBSSxJQUFJLElBQUosQ0FBQTtTQUNKLENBQUMsQ0FBQyxPQUFGLENBQUE7QUFGUTs7QUFJVCxPQUFBLFFBQXFCLE1BQU4sTUFBQSxJQUFBLFFBQWtCLFVBQWxCO0VBQ2QsV0FBYyxDQUFDLEtBQUQsQ0FBQTtTQUNiLENBQU0sS0FBTjtJQUNBLElBQUMsQ0FBQSxLQUFELEdBQ0M7TUFBQSxLQUFBLEVBQU8sR0FBUDtNQUNBLE1BQUEsRUFBUSxNQURSO01BRUEsQ0FBQSxFQUFJLEVBRko7TUFHQSxDQUFBLEVBQUksRUFISjtNQUlBLENBQUEsRUFBSSxFQUpKO01BS0EsQ0FBQSxFQUFJLEVBTEo7TUFNQSxJQUFBLEVBQU8sTUFOUDtNQU9BLElBQUEsRUFBTyxDQVBQO01BUUEsRUFBQSxFQUFLLENBUkw7TUFTQSxJQUFBLEVBQU8sRUFUUDtNQVVBLEVBQUEsRUFBSztJQVZMO0lBV0QsSUFBQyxDQUFBLFVBQUQsR0FBYyxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsSUFBakI7SUFDZCxJQUFDLENBQUEsYUFBRCxHQUFpQixJQUFDLENBQUEsYUFBYSxDQUFDLElBQWYsQ0FBb0IsSUFBcEI7RUFmSjs7RUFpQmQsVUFBYSxDQUFDLE1BQUQsQ0FBQTtJQUFZLElBQUcsTUFBSDthQUFlLElBQUMsQ0FBQSxRQUFELENBQVU7UUFBRSxNQUFGO1FBQVUsRUFBQSxFQUFLO01BQWYsQ0FBVixFQUFmOztFQUFaOztFQUNiLFdBQWMs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QUFBLENBQUEsQ0FBQyxDQUFFLElBQUMsQ0FBQSxLQUFLLENBQUMsSUFBSSxDQUFDLElBQVosQ0FBaUIsR0FBakIsQ0FBRixDQUFELEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQSxDQUFDLENBQUUsSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFULENBQUQsRUFBQSxDQUFBO0VBWEQsRUFBQSxHQUFBO0VBTE87O0FBNURLIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG5lc2xpbnQtZGlzYWJsZSBcbiMjI1xuXG5pbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUXJSZWFkZXIgZnJvbSAncmVhY3QtcXItcmVhZGVyJ1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJ1xuXG5taWxsaXMgPSAtPlxuXHRkID0gbmV3IERhdGUoKVxuXHRkLmdldFRpbWUoKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAgZXh0ZW5kcyBDb21wb25lbnQgXG5cdGNvbnN0cnVjdG9yIDogKHByb3BzKSAtPlxuXHRcdHN1cGVyIHByb3BzXG5cdFx0QHN0YXRlID0gXG5cdFx0XHRkZWxheTogNTAwXG5cdFx0XHRyZXN1bHQ6ICdzY2FuJyAjIElOSVQgNCA4XG5cdFx0XHRBIDogXCJcIlxuXHRcdFx0QiA6IFwiXCJcblx0XHRcdEMgOiBcIlwiXG5cdFx0XHREIDogXCJcIlxuXHRcdFx0SU5JVCA6IFwiaW5pdFwiXG5cdFx0XHRmcm9tIDogMFxuXHRcdFx0dG8gOiAwXG5cdFx0XHRoaXN0IDogW10gICBcblx0XHRcdGJnIDogJyNGRkZGRkYnIFxuXHRcdEBoYW5kbGVTY2FuID0gQGhhbmRsZVNjYW4uYmluZCBAXG5cdFx0QGhhbmRsZUV4ZWN1dGUgPSBAaGFuZGxlRXhlY3V0ZS5iaW5kIEBcblx0XG5cdGhhbmRsZVNjYW4gOiAocmVzdWx0KSAtPiBpZiByZXN1bHQgdGhlbiBAc2V0U3RhdGUgeyByZXN1bHQsIGJnIDogJyNGRkZGMDAnIH0gXG5cdGhhbmRsZUVycm9yIDogKGVyciktPiBjb25zb2xlLmVycm9yIGVyclxuXHRoYW5kbGVFeGVjdXRlIDogLT5cblx0XHRhcnIgPSBAc3RhdGUucmVzdWx0LnNwbGl0ICcgJ1xuXHRcdG9wID0gYXJyWzBdXG5cdFx0Y29tbWFuZCA9IEBzdGF0ZVtvcF1cblx0XHRuZXdGcm9tID09IDBcblx0XHRpZiBjb21tYW5kID09JysyJyB0aGVuIG5ld0Zyb20gPSBAc2F2ZSBAc3RhdGUuZnJvbSsyXG5cdFx0aWYgY29tbWFuZCA9PScqMicgdGhlbiBuZXdGcm9tID0gQHNhdmUgQHN0YXRlLmZyb20qMlxuXHRcdGlmIGNvbW1hbmQgPT0nLzInIGFuZCBAc3RhdGUuZnJvbSAlIDIgPT0gMCB0aGVuIG5ld0Zyb20gPSBAc2F2ZSBAc3RhdGUuZnJvbS8yIFxuXHRcdGlmIGNvbW1hbmQgPT0ndW5kbydcblx0XHRcdG4gPSBAc3RhdGUuaGlzdC5sZW5ndGhcblx0XHRcdGlmIG4gPiAwXG5cdFx0XHRcdEBzZXRTdGF0ZSBcblx0XHRcdFx0XHRmcm9tIDogQHN0YXRlLmhpc3Rbbi0xXVxuXHRcdFx0XHRcdGhpc3QgOiBAc3RhdGUuaGlzdFswLi4tMl1cblx0XHRpZiBjb21tYW5kID09J2luaXQnIFxuXHRcdFx0Y29tbWFuZHMgPSAnKzIgKjIgLzIgdW5kbycuc3BsaXQgJyAnXG5cdFx0XHRjb21tYW5kcyA9IF8uc2h1ZmZsZSBjb21tYW5kc1xuXHRcdFx0QHNldFN0YXRlXG5cdFx0XHRcdEEgOiBjb21tYW5kc1swXSBcblx0XHRcdFx0QiA6IGNvbW1hbmRzWzFdIFxuXHRcdFx0XHRDIDogY29tbWFuZHNbMl0gXG5cdFx0XHRcdEQgOiBjb21tYW5kc1szXSBcblx0XHRcdFx0ZnJvbSA6IHBhcnNlSW50IGFyclsxXVxuXHRcdFx0XHR0byA6IHBhcnNlSW50IGFyclsyXVxuXHRcdFx0XHRoaXN0IDogW11cblx0XHRcdFx0c3RhcnQgOiBtaWxsaXMoKVxuXHRcdFx0XHRvcGVyYXRpb25zIDogMFxuXHRcdFx0XHR0b3RhbCA6IDBcblx0XHRcdFx0cmVzdWx0IDogJ3NjYW4nXG5cdFx0QHNldFN0YXRlXG5cdFx0XHRiZyA6IGlmIG5ld0Zyb209PUBzdGF0ZS50byB0aGVuICcjMDBGRjAwJyBlbHNlICcjRkZGRkZGJ1xuXG5cdHNhdmUgOiAodmFsdWUpIC0+XG5cdFx0QHNldFN0YXRlIFxuXHRcdFx0ZnJvbSA6IHZhbHVlXG5cdFx0XHRoaXN0IDogQHN0YXRlLmhpc3QuY29uY2F0IFtAc3RhdGUuZnJvbV1cblx0XHRcdG9wZXJhdGlvbnMgOiBAc3RhdGUub3BlcmF0aW9ucyArIDFcblx0XHRcdHRvdGFsIDogKG1pbGxpcygpLUBzdGF0ZS5zdGFydCkvMTAwMCArIDEwICogQHN0YXRlLm9wZXJhdGlvbnNcblx0XHR2YWx1ZVxuXG5cdHJlbmRlciA6IC0+XG5cdFx0cHJldmlld1N0eWxlID0gXG5cdFx0XHRoZWlnaHQ6IDMyMFxuXHRcdFx0d2lkdGg6IDMyMFxuXG5cdFx0PGRpdiBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogQHN0YXRlLmJnfX0+XG5cdFx0XHQ8UXJSZWFkZXJcblx0XHRcdFx0ZGVsYXkgPSB7QHN0YXRlLmRlbGF5fVxuXHRcdFx0XHRzdHlsZSA9IHtwcmV2aWV3U3R5bGV9XG5cdFx0XHRcdG9uRXJyb3IgPSB7QGhhbmRsZUVycm9yfVxuXHRcdFx0XHRvblNjYW4gPSB7QGhhbmRsZVNjYW59XG5cdFx0XHRcdC8+XG5cdFx0XHQ8YnV0dG9uIG9uQ2xpY2s9e0BoYW5kbGVFeGVjdXRlfT57QHN0YXRlLnJlc3VsdC5zcGxpdCgnICcpWzBdfTwvYnV0dG9uPlxuXHRcdFx0PHA+QToge0BzdGF0ZS5BfSA8YnIvPiBCOiB7QHN0YXRlLkJ9IDxici8+IEM6IHtAc3RhdGUuQ30gPGJyLz4gRDoge0BzdGF0ZS5EfTwvcD5cblx0XHRcdDxoMT57QHN0YXRlLmZyb219IHRvIHtAc3RhdGUudG99PC9oMT5cblx0XHRcdDxwPntAc3RhdGUuaGlzdC5qb2luICcgJ308L3A+XG5cdFx0XHQ8cD57QHN0YXRlLnRvdGFsfTwvcD5cblx0XHQ8L2Rpdj5cbiJdfQ==
//# sourceURL=C:\Lab\2017\151\coffee\App.coffee