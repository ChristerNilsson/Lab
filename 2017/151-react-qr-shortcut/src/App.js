// Generated by CoffeeScript 2.0.3
/*
eslint-disable 
*/
var App, millis;

import React, {
  Component
} from 'react';

import QrReader from 'react-qr-reader';

import _ from 'lodash';

millis = function() {
  return Date.now();
};

export default App = class App extends Component {
  constructor(props) {
    super(props);
    this.state = {
      delay: 500,
      result: 'scan', // INIT 4 8
      A: "",
      B: "",
      C: "",
      D: "",
      INIT: "init",
      from: 0,
      to: 0,
      hist: [],
      bg: '#FFFFFF'
    };
    this.handleScan = this.handleScan.bind(this);
    this.handleExecute = this.handleExecute.bind(this);
  }

  handleScan(result) {
    if (result) {
      return this.setState({
        result,
        bg: '#FFFF00'
      });
    }
  }

  handleError(err) {
    return console.error(err);
  }

  handleExecute() {
    var arr, command, commands, n, newFrom, op;
    arr = this.state.result.split(' ');
    op = arr[0];
    command = this.state[op];
    newFrom === 0;
    if (command === '+2') {
      newFrom = this.save(this.state.from + 2);
    }
    if (command === '*2') {
      newFrom = this.save(this.state.from * 2);
    }
    if (command === '/2' && this.state.from % 2 === 0) {
      newFrom = this.save(this.state.from / 2);
    }
    if (command === 'undo') {
      n = this.state.hist.length;
      if (n > 0) {
        this.setState({
          from: this.state.hist[n - 1],
          hist: this.state.hist.slice(0, -1)
        });
      }
    }
    if (command === 'init') {
      commands = '+2 *2 /2 undo'.split(' ');
      commands = _.shuffle(commands);
      this.setState({
        A: commands[0],
        B: commands[1],
        C: commands[2],
        D: commands[3],
        from: parseInt(arr[1]),
        to: parseInt(arr[2]),
        hist: [],
        start: millis(),
        operations: 0,
        total: 0,
        result: 'scan'
      });
    }
    return this.setState({
      bg: newFrom === this.state.to ? '#00FF00' : '#FFFFFF'
    });
  }

  save(value) {
    this.setState({
      from: value,
      hist: this.state.hist.concat([this.state.from]),
      operations: this.state.operations + 1,
      total: (millis() - this.state.start) / 1000 + 10 * this.state.operations
    });
    return value;
  }

  render() {
    var previewStyle;
    previewStyle = {
      height: 320,
      width: 320
    };
    return <div style={{
        backgroundColor: this.state.bg
      }}>
			<QrReader delay={this.state.delay} style={previewStyle} onError={this.handleError} onScan={this.handleScan} />
			<button onClick={this.handleExecute}>{(this.state.result.split(' ')[0])}</button>
			<p>A: {this.state.A} <br /> B: {this.state.B} <br /> C: {this.state.C} <br /> D: {this.state.D}</p>
			<h1>{this.state.from} to {this.state.to}</h1>
			<p>{this.state.hist.join(' ')}</p>
			<p>{this.state.total}</p>
		</div>;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXBwLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXEFwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7QUFBQSxJQUFBLEdBQUEsRUFBQTs7QUFJQSxPQUFPLEtBQVAsRUFBQTtFQUFnQixTQUFoQjtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxRQUFQLE1BQUE7O0FBQ0EsT0FBTyxDQUFQLE1BQUE7O0FBRUEsTUFBQSxHQUFTLFFBQUEsQ0FBQSxDQUFBO1NBQUcsSUFBSSxDQUFDLEdBQUwsQ0FBQTtBQUFIOztBQUVULE9BQUEsUUFBcUIsTUFBTixNQUFBLElBQUEsUUFBa0IsVUFBbEI7RUFDZCxXQUFjLENBQUMsS0FBRCxDQUFBO1NBQ2IsQ0FBTSxLQUFOO0lBQ0EsSUFBQyxDQUFBLEtBQUQsR0FDQztNQUFBLEtBQUEsRUFBTyxHQUFQO01BQ0EsTUFBQSxFQUFRLE1BRFI7TUFFQSxDQUFBLEVBQUksRUFGSjtNQUdBLENBQUEsRUFBSSxFQUhKO01BSUEsQ0FBQSxFQUFJLEVBSko7TUFLQSxDQUFBLEVBQUksRUFMSjtNQU1BLElBQUEsRUFBTyxNQU5QO01BT0EsSUFBQSxFQUFPLENBUFA7TUFRQSxFQUFBLEVBQUssQ0FSTDtNQVNBLElBQUEsRUFBTyxFQVRQO01BVUEsRUFBQSxFQUFLO0lBVkw7SUFXRCxJQUFDLENBQUEsVUFBRCxHQUFjLElBQUMsQ0FBQSxVQUFVLENBQUMsSUFBWixDQUFpQixJQUFqQjtJQUNkLElBQUMsQ0FBQSxhQUFELEdBQWlCLElBQUMsQ0FBQSxhQUFhLENBQUMsSUFBZixDQUFvQixJQUFwQjtFQWZKOztFQWlCZCxVQUFhLENBQUMsTUFBRCxDQUFBO0lBQVksSUFBRyxNQUFIO2FBQWUsSUFBQyxDQUFBLFFBQUQsQ0FBVTtRQUFFLE1BQUY7UUFBVSxFQUFBLEVBQUs7TUFBZixDQUFWLEVBQWY7O0VBQVo7O0VBQ2IsV0FBYyxDQUFDLEdBQUQsQ0FBQTtXQUFRLE9BQU8sQ0FBQyxLQUFSLENBQWMs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QUFJLENBQUMsSUFBWixDQUFpQixHQUFqQixDQUFGLENBQUQsRUFBQSxDQUFBO0dBQ0EsQ0FBQSxDQUFBLENBQUMsQ0FBRSxJQUFDLENBQUEsS0FBSyxDQUFDLEtBQVQsQ0FBRCxFQUFBLENBQUE7RUFYRCxFQUFBLEdBQUE7RUFMTzs7QUE1REsiLCJzb3VyY2VzQ29udGVudCI6WyIjIyNcbmVzbGludC1kaXNhYmxlIFxuIyMjXG5cbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBRclJlYWRlciBmcm9tICdyZWFjdC1xci1yZWFkZXInXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnXG5cbm1pbGxpcyA9IC0+IERhdGUubm93KClcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBwIGV4dGVuZHMgQ29tcG9uZW50IFxuXHRjb25zdHJ1Y3RvciA6IChwcm9wcykgLT5cblx0XHRzdXBlciBwcm9wc1xuXHRcdEBzdGF0ZSA9IFxuXHRcdFx0ZGVsYXk6IDUwMFxuXHRcdFx0cmVzdWx0OiAnc2NhbicgIyBJTklUIDQgOFxuXHRcdFx0QSA6IFwiXCJcblx0XHRcdEIgOiBcIlwiXG5cdFx0XHRDIDogXCJcIlxuXHRcdFx0RCA6IFwiXCJcblx0XHRcdElOSVQgOiBcImluaXRcIlxuXHRcdFx0ZnJvbSA6IDBcblx0XHRcdHRvIDogMFxuXHRcdFx0aGlzdCA6IFtdICAgXG5cdFx0XHRiZyA6ICcjRkZGRkZGJyBcblx0XHRAaGFuZGxlU2NhbiA9IEBoYW5kbGVTY2FuLmJpbmQgQFxuXHRcdEBoYW5kbGVFeGVjdXRlID0gQGhhbmRsZUV4ZWN1dGUuYmluZCBAXG5cdFxuXHRoYW5kbGVTY2FuIDogKHJlc3VsdCkgLT4gaWYgcmVzdWx0IHRoZW4gQHNldFN0YXRlIHsgcmVzdWx0LCBiZyA6ICcjRkZGRjAwJyB9IFxuXHRoYW5kbGVFcnJvciA6IChlcnIpLT4gY29uc29sZS5lcnJvciBlcnJcblx0aGFuZGxlRXhlY3V0ZSA6IC0+XG5cdFx0YXJyID0gQHN0YXRlLnJlc3VsdC5zcGxpdCAnICdcblx0XHRvcCA9IGFyclswXVxuXHRcdGNvbW1hbmQgPSBAc3RhdGVbb3BdXG5cdFx0bmV3RnJvbSA9PSAwXG5cdFx0aWYgY29tbWFuZCA9PScrMicgdGhlbiBuZXdGcm9tID0gQHNhdmUgQHN0YXRlLmZyb20rMlxuXHRcdGlmIGNvbW1hbmQgPT0nKjInIHRoZW4gbmV3RnJvbSA9IEBzYXZlIEBzdGF0ZS5mcm9tKjJcblx0XHRpZiBjb21tYW5kID09Jy8yJyBhbmQgQHN0YXRlLmZyb20gJSAyID09IDAgdGhlbiBuZXdGcm9tID0gQHNhdmUgQHN0YXRlLmZyb20vMiBcblx0XHRpZiBjb21tYW5kID09J3VuZG8nXG5cdFx0XHRuID0gQHN0YXRlLmhpc3QubGVuZ3RoXG5cdFx0XHRpZiBuID4gMFxuXHRcdFx0XHRAc2V0U3RhdGUgXG5cdFx0XHRcdFx0ZnJvbSA6IEBzdGF0ZS5oaXN0W24tMV1cblx0XHRcdFx0XHRoaXN0IDogQHN0YXRlLmhpc3RbMC4uLTJdXG5cdFx0aWYgY29tbWFuZCA9PSdpbml0JyBcblx0XHRcdGNvbW1hbmRzID0gJysyICoyIC8yIHVuZG8nLnNwbGl0ICcgJ1xuXHRcdFx0Y29tbWFuZHMgPSBfLnNodWZmbGUgY29tbWFuZHNcblx0XHRcdEBzZXRTdGF0ZVxuXHRcdFx0XHRBIDogY29tbWFuZHNbMF0gXG5cdFx0XHRcdEIgOiBjb21tYW5kc1sxXSBcblx0XHRcdFx0QyA6IGNvbW1hbmRzWzJdIFxuXHRcdFx0XHREIDogY29tbWFuZHNbM10gXG5cdFx0XHRcdGZyb20gOiBwYXJzZUludCBhcnJbMV1cblx0XHRcdFx0dG8gOiBwYXJzZUludCBhcnJbMl1cblx0XHRcdFx0aGlzdCA6IFtdXG5cdFx0XHRcdHN0YXJ0IDogbWlsbGlzKClcblx0XHRcdFx0b3BlcmF0aW9ucyA6IDBcblx0XHRcdFx0dG90YWwgOiAwXG5cdFx0XHRcdHJlc3VsdCA6ICdzY2FuJ1xuXHRcdEBzZXRTdGF0ZVxuXHRcdFx0YmcgOiBpZiBuZXdGcm9tPT1Ac3RhdGUudG8gdGhlbiAnIzAwRkYwMCcgZWxzZSAnI0ZGRkZGRidcblxuXHRzYXZlIDogKHZhbHVlKSAtPlxuXHRcdEBzZXRTdGF0ZSBcblx0XHRcdGZyb20gOiB2YWx1ZVxuXHRcdFx0aGlzdCA6IEBzdGF0ZS5oaXN0LmNvbmNhdCBbQHN0YXRlLmZyb21dXG5cdFx0XHRvcGVyYXRpb25zIDogQHN0YXRlLm9wZXJhdGlvbnMgKyAxXG5cdFx0XHR0b3RhbCA6IChtaWxsaXMoKS1Ac3RhdGUuc3RhcnQpLzEwMDAgKyAxMCAqIEBzdGF0ZS5vcGVyYXRpb25zXG5cdFx0dmFsdWVcblxuXHRyZW5kZXIgOiAtPlxuXHRcdHByZXZpZXdTdHlsZSA9IFxuXHRcdFx0aGVpZ2h0OiAzMjBcblx0XHRcdHdpZHRoOiAzMjBcblxuXHRcdDxkaXYgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6IEBzdGF0ZS5iZ319PlxuXHRcdFx0PFFyUmVhZGVyXG5cdFx0XHRcdGRlbGF5ID0ge0BzdGF0ZS5kZWxheX1cblx0XHRcdFx0c3R5bGUgPSB7cHJldmlld1N0eWxlfVxuXHRcdFx0XHRvbkVycm9yID0ge0BoYW5kbGVFcnJvcn1cblx0XHRcdFx0b25TY2FuID0ge0BoYW5kbGVTY2FufVxuXHRcdFx0XHQvPlxuXHRcdFx0PGJ1dHRvbiBvbkNsaWNrPXtAaGFuZGxlRXhlY3V0ZX0+e0BzdGF0ZS5yZXN1bHQuc3BsaXQoJyAnKVswXX08L2J1dHRvbj5cblx0XHRcdDxwPkE6IHtAc3RhdGUuQX0gPGJyLz4gQjoge0BzdGF0ZS5CfSA8YnIvPiBDOiB7QHN0YXRlLkN9IDxici8+IEQ6IHtAc3RhdGUuRH08L3A+XG5cdFx0XHQ8aDE+e0BzdGF0ZS5mcm9tfSB0byB7QHN0YXRlLnRvfTwvaDE+XG5cdFx0XHQ8cD57QHN0YXRlLmhpc3Quam9pbiAnICd9PC9wPlxuXHRcdFx0PHA+e0BzdGF0ZS50b3RhbH08L3A+XG5cdFx0PC9kaXY+XG4iXX0=
//# sourceURL=C:\Lab\2017\151-react-qr-shortcut\coffee\App.coffee