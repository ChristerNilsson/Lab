// Generated by CoffeeScript 1.11.1
var ball, bricks, createText, draw, keyPressed, keyReleased, paddle, playingGame, setup, winText, youWin,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

paddle = null;

ball = null;

bricks = [];

playingGame = false;

youWin = false;

winText = null;

setup = function() {
  var i, j, len, ref;
  createCanvas(windowWidth, windowHeight);
  paddle = new Paddle();
  ball = new Ball();
  ref = range(20);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    bricks.push(new Brick());
  }
  return createText();
};

draw = function() {
  var i, j, len, ref;
  bg(1);
  ref = reverse(range(bricks.length));
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    bricks[i].display();
    if (ball.hits(bricks[i])) {
      if (bricks[i].r >= 40) {
        bricks[i].r /= 2;
      } else {
        bricks.splice(i, 1);
      }
      ball.vy *= -1;
    }
  }
  paddle.display();
  if (playingGame) {
    paddle.checkEdges();
  }
  if (playingGame) {
    paddle.update();
  }
  if (ball.meets(paddle)) {
    ball.vy *= -1;
  }
  ball.display();
  if (playingGame) {
    ball.checkEdges();
  }
  if (playingGame) {
    ball.update();
  }
  if (ball.y > height) {
    ball.x = width / 2;
    ball.y = height / 2;
    playingGame = false;
  }
  if (bricks.length === 0) {
    youWin = true;
    playingGame = false;
  }
  if (youWin) {
    return winText.style('display', 'block');
  } else {
    return winText.style('display', 'none');
  }
};

keyReleased = function() {
  return paddle.moving = 0;
};

keyPressed = function() {
  var i, j, len, ref;
  if (indexOf.call('aA', key) >= 0) {
    return paddle.moving = -20;
  } else if (indexOf.call('dD', key) >= 0) {
    return paddle.moving = 20;
  } else if (indexOf.call('sS', key) >= 0) {
    if (bricks.length === 0) {
      ref = range(20);
      for (j = 0, len = ref.length; j < len; j++) {
        i = ref[j];
        bricks.push(new Brick());
      }
    }
    playingGame = true;
    return youWin = false;
  }
};

createText = function() {
  winText = createP('YOU WIN!');
  return winText.position(width / 2, 80);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsb0dBQUE7RUFBQTs7QUFBQSxNQUFBLEdBQVM7O0FBQ1QsSUFBQSxHQUFPOztBQUNQLE1BQUEsR0FBUzs7QUFDVCxXQUFBLEdBQWM7O0FBQ2QsTUFBQSxHQUFTOztBQUNULE9BQUEsR0FBVTs7QUFFVixLQUFBLEdBQVEsU0FBQTtBQUNQLE1BQUE7RUFBQSxZQUFBLENBQWEsV0FBYixFQUEwQixZQUExQjtFQUVBLE1BQUEsR0FBYSxJQUFBLE1BQUEsQ0FBQTtFQUNiLElBQUEsR0FBVyxJQUFBLElBQUEsQ0FBQTtBQUVYO0FBQUEsT0FBQSxxQ0FBQTs7SUFDQyxNQUFNLENBQUMsSUFBUCxDQUFnQixJQUFBLEtBQUEsQ0FBQSxDQUFoQjtBQUREO1NBR0EsVUFBQSxDQUFBO0FBVE87O0FBV1IsSUFBQSxHQUFPLFNBQUE7QUFDTixNQUFBO0VBQUEsRUFBQSxDQUFHLENBQUg7QUFFQTtBQUFBLE9BQUEscUNBQUE7O0lBQ0MsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLE9BQVYsQ0FBQTtJQUNBLElBQUcsSUFBSSxDQUFDLElBQUwsQ0FBVSxNQUFPLENBQUEsQ0FBQSxDQUFqQixDQUFIO01BQ0MsSUFBRyxNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsQ0FBVixJQUFlLEVBQWxCO1FBQTBCLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxDQUFWLElBQWUsRUFBekM7T0FBQSxNQUFBO1FBQ0ssTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFkLEVBQWlCLENBQWpCLEVBREw7O01BRUEsSUFBSSxDQUFDLEVBQUwsSUFBVyxDQUFDLEVBSGI7O0FBRkQ7RUFPQSxNQUFNLENBQUMsT0FBUCxDQUFBO0VBQ0EsSUFBRyxXQUFIO0lBQW9CLE1BQU0sQ0FBQyxVQUFQLENBQUEsRUFBcEI7O0VBQ0EsSUFBRyxXQUFIO0lBQW9CLE1BQU0sQ0FBQyxNQUFQLENBQUEsRUFBcEI7O0VBQ0EsSUFBRyxJQUFJLENBQUMsS0FBTCxDQUFXLE1BQVgsQ0FBSDtJQUEyQixJQUFJLENBQUMsRUFBTCxJQUFXLENBQUMsRUFBdkM7O0VBRUEsSUFBSSxDQUFDLE9BQUwsQ0FBQTtFQUNBLElBQUcsV0FBSDtJQUFvQixJQUFJLENBQUMsVUFBTCxDQUFBLEVBQXBCOztFQUNBLElBQUcsV0FBSDtJQUFvQixJQUFJLENBQUMsTUFBTCxDQUFBLEVBQXBCOztFQUVBLElBQUcsSUFBSSxDQUFDLENBQUwsR0FBUyxNQUFaO0lBQ0MsSUFBSSxDQUFDLENBQUwsR0FBUyxLQUFBLEdBQVE7SUFDakIsSUFBSSxDQUFDLENBQUwsR0FBUyxNQUFBLEdBQVM7SUFDbEIsV0FBQSxHQUFjLE1BSGY7O0VBS0EsSUFBRyxNQUFNLENBQUMsTUFBUCxLQUFpQixDQUFwQjtJQUNDLE1BQUEsR0FBUztJQUNULFdBQUEsR0FBYyxNQUZmOztFQUlBLElBQUcsTUFBSDtXQUFlLE9BQU8sQ0FBQyxLQUFSLENBQWMsU0FBZCxFQUF5QixPQUF6QixFQUFmO0dBQUEsTUFBQTtXQUNLLE9BQU8sQ0FBQyxLQUFSLENBQWMsU0FBZCxFQUF5QixNQUF6QixFQURMOztBQTVCTTs7QUErQlAsV0FBQSxHQUFjLFNBQUE7U0FBRyxNQUFNLENBQUMsTUFBUCxHQUFnQjtBQUFuQjs7QUFFZCxVQUFBLEdBQWEsU0FBQTtBQUNaLE1BQUE7RUFBQSxJQUFHLGFBQU8sSUFBUCxFQUFBLEdBQUEsTUFBSDtXQUFvQixNQUFNLENBQUMsTUFBUCxHQUFnQixDQUFDLEdBQXJDO0dBQUEsTUFDSyxJQUFHLGFBQU8sSUFBUCxFQUFBLEdBQUEsTUFBSDtXQUFvQixNQUFNLENBQUMsTUFBUCxHQUFnQixHQUFwQztHQUFBLE1BQ0EsSUFBRyxhQUFPLElBQVAsRUFBQSxHQUFBLE1BQUg7SUFDSixJQUFHLE1BQU0sQ0FBQyxNQUFQLEtBQWlCLENBQXBCO0FBQ0M7QUFBQSxXQUFBLHFDQUFBOztRQUNDLE1BQU0sQ0FBQyxJQUFQLENBQWdCLElBQUEsS0FBQSxDQUFBLENBQWhCO0FBREQsT0FERDs7SUFHQSxXQUFBLEdBQWM7V0FDZCxNQUFBLEdBQVMsTUFMTDs7QUFITzs7QUFVYixVQUFBLEdBQWEsU0FBQTtFQUNaLE9BQUEsR0FBVSxPQUFBLENBQVEsVUFBUjtTQUNWLE9BQU8sQ0FBQyxRQUFSLENBQWlCLEtBQUEsR0FBUSxDQUF6QixFQUE0QixFQUE1QjtBQUZZIiwic291cmNlc0NvbnRlbnQiOlsicGFkZGxlID0gbnVsbFxuYmFsbCA9IG51bGxcbmJyaWNrcyA9IFtdXG5wbGF5aW5nR2FtZSA9IGZhbHNlXG55b3VXaW4gPSBmYWxzZVxud2luVGV4dCA9IG51bGxcblxuc2V0dXAgPSAtPlxuXHRjcmVhdGVDYW52YXMgd2luZG93V2lkdGgsIHdpbmRvd0hlaWdodFxuXG5cdHBhZGRsZSA9IG5ldyBQYWRkbGUoKVxuXHRiYWxsID0gbmV3IEJhbGwoKVxuXG5cdGZvciBpIGluIHJhbmdlIDIwXG5cdFx0YnJpY2tzLnB1c2ggbmV3IEJyaWNrKClcblxuXHRjcmVhdGVUZXh0KClcblxuZHJhdyA9IC0+XG5cdGJnIDFcblxuXHRmb3IgaSBpbiByZXZlcnNlIHJhbmdlIGJyaWNrcy5sZW5ndGhcblx0XHRicmlja3NbaV0uZGlzcGxheSgpXG5cdFx0aWYgYmFsbC5oaXRzIGJyaWNrc1tpXVxuXHRcdFx0aWYgYnJpY2tzW2ldLnIgPj0gNDAgdGhlbiBicmlja3NbaV0uciAvPSAyXG5cdFx0XHRlbHNlIGJyaWNrcy5zcGxpY2UgaSwgMVxuXHRcdFx0YmFsbC52eSAqPSAtMVxuXG5cdHBhZGRsZS5kaXNwbGF5KClcblx0aWYgcGxheWluZ0dhbWUgdGhlbiBwYWRkbGUuY2hlY2tFZGdlcygpXG5cdGlmIHBsYXlpbmdHYW1lIHRoZW4gcGFkZGxlLnVwZGF0ZSgpXG5cdGlmIGJhbGwubWVldHMocGFkZGxlKSB0aGVuIGJhbGwudnkgKj0gLTFcblxuXHRiYWxsLmRpc3BsYXkoKVxuXHRpZiBwbGF5aW5nR2FtZSB0aGVuIGJhbGwuY2hlY2tFZGdlcygpXG5cdGlmIHBsYXlpbmdHYW1lIHRoZW4gYmFsbC51cGRhdGUoKVxuXG5cdGlmIGJhbGwueSA+IGhlaWdodFxuXHRcdGJhbGwueCA9IHdpZHRoIC8gMlxuXHRcdGJhbGwueSA9IGhlaWdodCAvIDJcblx0XHRwbGF5aW5nR2FtZSA9IGZhbHNlXG5cblx0aWYgYnJpY2tzLmxlbmd0aCA9PSAwXG5cdFx0eW91V2luID0gdHJ1ZVxuXHRcdHBsYXlpbmdHYW1lID0gZmFsc2VcblxuXHRpZiB5b3VXaW4gdGhlbiB3aW5UZXh0LnN0eWxlICdkaXNwbGF5JywgJ2Jsb2NrJ1xuXHRlbHNlIHdpblRleHQuc3R5bGUgJ2Rpc3BsYXknLCAnbm9uZSdcblxua2V5UmVsZWFzZWQgPSAtPiBwYWRkbGUubW92aW5nID0gMFxuXG5rZXlQcmVzc2VkID0gLT5cblx0aWYga2V5IGluICdhQScgdGhlbiBwYWRkbGUubW92aW5nID0gLTIwXG5cdGVsc2UgaWYga2V5IGluICdkRCcgdGhlbiBwYWRkbGUubW92aW5nID0gMjBcblx0ZWxzZSBpZiBrZXkgaW4gJ3NTJ1xuXHRcdGlmIGJyaWNrcy5sZW5ndGggPT0gMFxuXHRcdFx0Zm9yIGkgaW4gcmFuZ2UgMjBcblx0XHRcdFx0YnJpY2tzLnB1c2ggbmV3IEJyaWNrKClcblx0XHRwbGF5aW5nR2FtZSA9IHRydWVcblx0XHR5b3VXaW4gPSBmYWxzZVxuXG5jcmVhdGVUZXh0ID0gLT5cblx0d2luVGV4dCA9IGNyZWF0ZVAgJ1lPVSBXSU4hJ1xuXHR3aW5UZXh0LnBvc2l0aW9uIHdpZHRoIC8gMiwgODBcbiJdfQ==
//# sourceURL=C:\Lab\2017\095-BR~1\coffee\sketch.coffee