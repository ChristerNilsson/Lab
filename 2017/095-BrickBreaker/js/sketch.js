// Generated by CoffeeScript 1.11.1
var ball, bricks, createText, draw, paddle, playingGame, setup, winText, youWin;

paddle = null;

ball = null;

bricks = [];

playingGame = false;

youWin = false;

winText = null;

setup = function() {
  var i, j, len, ref;
  createCanvas(windowWidth, windowHeight);
  paddle = new Paddle();
  ball = new Ball();
  ref = range(20);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    bricks.push(new Brick());
  }
  return createText();
};

draw = function() {
  var i, j, k, len, len1, ref, ref1;
  bg(1);
  ref = reverse(range(bricks.length));
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    bricks[i].display();
    if (ball.hits(bricks[i])) {
      if (bricks[i].r >= 40) {
        bricks[i].r /= 2;
      } else {
        bricks.splice(i, 1);
      }
      ball.vy *= -1;
    }
  }
  paddle.display();
  if (playingGame) {
    paddle.checkEdges();
  }
  if (playingGame) {
    paddle.update();
  }
  if (ball.meets(paddle)) {
    ball.vy *= -1;
  }
  ball.display();
  if (playingGame) {
    ball.checkEdges();
  }
  if (playingGame) {
    ball.update();
  }
  if (ball.y > height) {
    ball.x = width / 2;
    ball.y = height / 2;
    playingGame = false;
  }
  if (bricks.length === 0) {
    youWin = true;
    playingGame = false;
  }
  if (youWin) {
    winText.style('display', 'block');
  } else {
    winText.style('display', 'none');
  }
  if (keyIsDown(83) || keyIsDown(115)) {
    if (bricks.length === 0) {
      ref1 = range(20);
      for (k = 0, len1 = ref1.length; k < len1; k++) {
        i = ref1[k];
        bricks.push(new Brick());
      }
    }
    playingGame = true;
    return youWin = false;
  }
};

createText = function() {
  winText = createP('YOU WIN!');
  return winText.position(width / 2, 80);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsTUFBQSxHQUFTOztBQUNULElBQUEsR0FBTzs7QUFDUCxNQUFBLEdBQVM7O0FBQ1QsV0FBQSxHQUFjOztBQUNkLE1BQUEsR0FBUzs7QUFDVCxPQUFBLEdBQVU7O0FBRVYsS0FBQSxHQUFRLFNBQUE7QUFDUCxNQUFBO0VBQUEsWUFBQSxDQUFhLFdBQWIsRUFBMEIsWUFBMUI7RUFFQSxNQUFBLEdBQWEsSUFBQSxNQUFBLENBQUE7RUFDYixJQUFBLEdBQVcsSUFBQSxJQUFBLENBQUE7QUFFWDtBQUFBLE9BQUEscUNBQUE7O0lBQ0MsTUFBTSxDQUFDLElBQVAsQ0FBZ0IsSUFBQSxLQUFBLENBQUEsQ0FBaEI7QUFERDtTQUdBLFVBQUEsQ0FBQTtBQVRPOztBQVdSLElBQUEsR0FBTyxTQUFBO0FBQ04sTUFBQTtFQUFBLEVBQUEsQ0FBRyxDQUFIO0FBRUE7QUFBQSxPQUFBLHFDQUFBOztJQUNDLE1BQU8sQ0FBQSxDQUFBLENBQUUsQ0FBQyxPQUFWLENBQUE7SUFDQSxJQUFHLElBQUksQ0FBQyxJQUFMLENBQVUsTUFBTyxDQUFBLENBQUEsQ0FBakIsQ0FBSDtNQUNDLElBQUcsTUFBTyxDQUFBLENBQUEsQ0FBRSxDQUFDLENBQVYsSUFBZSxFQUFsQjtRQUEwQixNQUFPLENBQUEsQ0FBQSxDQUFFLENBQUMsQ0FBVixJQUFlLEVBQXpDO09BQUEsTUFBQTtRQUNLLE1BQU0sQ0FBQyxNQUFQLENBQWMsQ0FBZCxFQUFpQixDQUFqQixFQURMOztNQUVBLElBQUksQ0FBQyxFQUFMLElBQVcsQ0FBQyxFQUhiOztBQUZEO0VBT0EsTUFBTSxDQUFDLE9BQVAsQ0FBQTtFQUNBLElBQUcsV0FBSDtJQUFvQixNQUFNLENBQUMsVUFBUCxDQUFBLEVBQXBCOztFQUNBLElBQUcsV0FBSDtJQUFvQixNQUFNLENBQUMsTUFBUCxDQUFBLEVBQXBCOztFQUNBLElBQUcsSUFBSSxDQUFDLEtBQUwsQ0FBVyxNQUFYLENBQUg7SUFBMkIsSUFBSSxDQUFDLEVBQUwsSUFBVyxDQUFDLEVBQXZDOztFQUVBLElBQUksQ0FBQyxPQUFMLENBQUE7RUFDQSxJQUFHLFdBQUg7SUFBb0IsSUFBSSxDQUFDLFVBQUwsQ0FBQSxFQUFwQjs7RUFDQSxJQUFHLFdBQUg7SUFBb0IsSUFBSSxDQUFDLE1BQUwsQ0FBQSxFQUFwQjs7RUFFQSxJQUFHLElBQUksQ0FBQyxDQUFMLEdBQVMsTUFBWjtJQUNDLElBQUksQ0FBQyxDQUFMLEdBQVMsS0FBQSxHQUFRO0lBQ2pCLElBQUksQ0FBQyxDQUFMLEdBQVMsTUFBQSxHQUFTO0lBQ2xCLFdBQUEsR0FBYyxNQUhmOztFQUtBLElBQUcsTUFBTSxDQUFDLE1BQVAsS0FBaUIsQ0FBcEI7SUFDQyxNQUFBLEdBQVM7SUFDVCxXQUFBLEdBQWMsTUFGZjs7RUFJQSxJQUFHLE1BQUg7SUFBZSxPQUFPLENBQUMsS0FBUixDQUFjLFNBQWQsRUFBeUIsT0FBekIsRUFBZjtHQUFBLE1BQUE7SUFDSyxPQUFPLENBQUMsS0FBUixDQUFjLFNBQWQsRUFBeUIsTUFBekIsRUFETDs7RUFHQSxJQUFHLFNBQUEsQ0FBVSxFQUFWLENBQUEsSUFBaUIsU0FBQSxDQUFVLEdBQVYsQ0FBcEI7SUFDQyxJQUFHLE1BQU0sQ0FBQyxNQUFQLEtBQWlCLENBQXBCO0FBQ0M7QUFBQSxXQUFBLHdDQUFBOztRQUNDLE1BQU0sQ0FBQyxJQUFQLENBQWdCLElBQUEsS0FBQSxDQUFBLENBQWhCO0FBREQsT0FERDs7SUFHQSxXQUFBLEdBQWM7V0FDZCxNQUFBLEdBQVMsTUFMVjs7QUEvQk07O0FBc0NQLFVBQUEsR0FBYSxTQUFBO0VBQ1osT0FBQSxHQUFVLE9BQUEsQ0FBUSxVQUFSO1NBQ1YsT0FBTyxDQUFDLFFBQVIsQ0FBaUIsS0FBQSxHQUFRLENBQXpCLEVBQTRCLEVBQTVCO0FBRlkiLCJzb3VyY2VzQ29udGVudCI6WyJwYWRkbGUgPSBudWxsXG5iYWxsID0gbnVsbFxuYnJpY2tzID0gW11cbnBsYXlpbmdHYW1lID0gZmFsc2VcbnlvdVdpbiA9IGZhbHNlXG53aW5UZXh0ID0gbnVsbFxuXG5zZXR1cCA9IC0+XG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0XG5cblx0cGFkZGxlID0gbmV3IFBhZGRsZSgpXG5cdGJhbGwgPSBuZXcgQmFsbCgpXG5cblx0Zm9yIGkgaW4gcmFuZ2UgMjBcblx0XHRicmlja3MucHVzaCBuZXcgQnJpY2soKVxuXG5cdGNyZWF0ZVRleHQoKVxuXG5kcmF3ID0gLT5cblx0YmcgMVxuXG5cdGZvciBpIGluIHJldmVyc2UgcmFuZ2UgYnJpY2tzLmxlbmd0aFxuXHRcdGJyaWNrc1tpXS5kaXNwbGF5KClcblx0XHRpZiBiYWxsLmhpdHMgYnJpY2tzW2ldXG5cdFx0XHRpZiBicmlja3NbaV0uciA+PSA0MCB0aGVuIGJyaWNrc1tpXS5yIC89IDJcblx0XHRcdGVsc2UgYnJpY2tzLnNwbGljZSBpLCAxXG5cdFx0XHRiYWxsLnZ5ICo9IC0xXG5cblx0cGFkZGxlLmRpc3BsYXkoKVxuXHRpZiBwbGF5aW5nR2FtZSB0aGVuIHBhZGRsZS5jaGVja0VkZ2VzKClcblx0aWYgcGxheWluZ0dhbWUgdGhlbiBwYWRkbGUudXBkYXRlKClcblx0aWYgYmFsbC5tZWV0cyhwYWRkbGUpIHRoZW4gYmFsbC52eSAqPSAtMVxuXG5cdGJhbGwuZGlzcGxheSgpXG5cdGlmIHBsYXlpbmdHYW1lIHRoZW4gYmFsbC5jaGVja0VkZ2VzKClcblx0aWYgcGxheWluZ0dhbWUgdGhlbiBiYWxsLnVwZGF0ZSgpXG5cblx0aWYgYmFsbC55ID4gaGVpZ2h0XG5cdFx0YmFsbC54ID0gd2lkdGggLyAyXG5cdFx0YmFsbC55ID0gaGVpZ2h0IC8gMlxuXHRcdHBsYXlpbmdHYW1lID0gZmFsc2VcblxuXHRpZiBicmlja3MubGVuZ3RoID09IDBcblx0XHR5b3VXaW4gPSB0cnVlXG5cdFx0cGxheWluZ0dhbWUgPSBmYWxzZVxuXG5cdGlmIHlvdVdpbiB0aGVuIHdpblRleHQuc3R5bGUgJ2Rpc3BsYXknLCAnYmxvY2snXG5cdGVsc2Ugd2luVGV4dC5zdHlsZSAnZGlzcGxheScsICdub25lJ1xuXG5cdGlmIGtleUlzRG93big4Mykgb3Iga2V5SXNEb3duKDExNSlcblx0XHRpZiBicmlja3MubGVuZ3RoID09IDBcblx0XHRcdGZvciBpIGluIHJhbmdlIDIwXG5cdFx0XHRcdGJyaWNrcy5wdXNoIG5ldyBCcmljaygpXG5cdFx0cGxheWluZ0dhbWUgPSB0cnVlXG5cdFx0eW91V2luID0gZmFsc2VcblxuY3JlYXRlVGV4dCA9IC0+XG5cdHdpblRleHQgPSBjcmVhdGVQICdZT1UgV0lOISdcblx0d2luVGV4dC5wb3NpdGlvbiB3aWR0aCAvIDIsIDgwXG4iXX0=
//# sourceURL=C:\Lab\2017\095-BrickBreaker\coffee\sketch.coffee