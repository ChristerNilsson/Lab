// Generated by CoffeeScript 1.11.1
var Bodies, Boundary, Engine, Events, Particle, Plinko, World, cols, draw, engine, newParticle, rows, setup, things, world;

Boundary = (function() {
  function Boundary(x, y, w, h) {
    this.w = w;
    this.h = h;
    World.add(world, this.body = Bodies.rectangle(x, y, this.w, this.h, {
      isStatic: true
    }));
  }

  Boundary.prototype.show = function() {
    return rect(this.body.position.x, this.body.position.y, this.w, this.h);
  };

  return Boundary;

})();

Particle = (function() {
  function Particle(x, y, r) {
    this.r = r;
    World.add(world, this.body = Bodies.circle(x + random(-1, 1), y, this.r, {
      restitution: 0.5,
      friction: 0,
      density: 1
    }));
  }

  Particle.prototype.show = function() {
    return ellipse(this.body.position.x, this.body.position.y, this.r * 2);
  };

  return Particle;

})();

Plinko = (function() {
  function Plinko(x, y, r) {
    this.r = r;
    World.add(world, this.body = Bodies.circle(x, y, this.r, {
      restitution: 1,
      friction: 0,
      isStatic: true
    }));
  }

  Plinko.prototype.show = function() {
    return ellipse(this.body.position.x, this.body.position.y, this.r * 2);
  };

  return Plinko;

})();

Engine = Matter.Engine;

World = Matter.World;

Events = Matter.Events;

Bodies = Matter.Bodies;

engine = null;

world = null;

things = [];

cols = 22;

rows = 10;

setup = function() {
  var i, j, k, l, len, len1, len2, m, ref, ref1, ref2, results, spacing, x, y;
  createCanvas(1200, 800);
  rectMode(CENTER);
  engine = Engine.create();
  world = engine.world;
  world.gravity.y = 0.1;
  newParticle();
  spacing = width / cols;
  ref = range(rows);
  for (k = 0, len = ref.length; k < len; k++) {
    j = ref[k];
    ref1 = range(cols + 1);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      i = ref1[l];
      x = i * spacing;
      if (j % 2 === 1) {
        x += spacing / 2;
      }
      y = spacing + j * spacing;
      things.push(new Plinko(x, y, 2));
    }
  }
  things.push(new Boundary(width / 2, height + 50, width, 100));
  things.push(new Boundary(0, height / 2, 5, height));
  things.push(new Boundary(width, height / 2, 5, height));
  ref2 = range(2 * cols + 1);
  results = [];
  for (m = 0, len2 = ref2.length; m < len2; m++) {
    i = ref2[m];
    results.push(things.push(new Boundary(i * spacing / 2, height - 100 / 2, 2, 100)));
  }
  return results;
};

newParticle = function() {
  return things.push(new Particle(width / 2, 0, 5));
};

draw = function() {
  var k, len, results, thing;
  background(0);
  if (frameCount % 20 === 0) {
    newParticle();
  }
  Engine.update(engine, 1000 / 30);
  results = [];
  for (k = 0, len = things.length; k < len; k++) {
    thing = things[k];
    results.push(thing.show());
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInByb2plY3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQU07RUFDVSxrQkFBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVyxDQUFYO0lBQU8sSUFBQyxDQUFBLElBQUQ7SUFBSSxJQUFDLENBQUEsSUFBRDtJQUFPLEtBQUssQ0FBQyxHQUFOLENBQVUsS0FBVixFQUFpQixJQUFDLENBQUEsSUFBRCxHQUFRLE1BQU0sQ0FBQyxTQUFQLENBQWlCLENBQWpCLEVBQW9CLENBQXBCLEVBQXVCLElBQUMsQ0FBQSxDQUF4QixFQUEyQixJQUFDLENBQUEsQ0FBNUIsRUFBK0I7TUFBQyxRQUFBLEVBQVUsSUFBWDtLQUEvQixDQUF6QjtFQUFsQjs7cUJBQ2QsSUFBQSxHQUFPLFNBQUE7V0FBRyxJQUFBLENBQUssSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBcEIsRUFBdUIsSUFBQyxDQUFBLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBdEMsRUFBeUMsSUFBQyxDQUFBLENBQTFDLEVBQTZDLElBQUMsQ0FBQSxDQUE5QztFQUFIOzs7Ozs7QUFDSDtFQUNVLGtCQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sQ0FBUDtJQUFPLElBQUMsQ0FBQSxJQUFEO0lBQU8sS0FBSyxDQUFDLEdBQU4sQ0FBVSxLQUFWLEVBQWlCLElBQUMsQ0FBQSxJQUFELEdBQVEsTUFBTSxDQUFDLE1BQVAsQ0FBYyxDQUFBLEdBQUUsTUFBQSxDQUFPLENBQUMsQ0FBUixFQUFVLENBQVYsQ0FBaEIsRUFBOEIsQ0FBOUIsRUFBaUMsSUFBQyxDQUFBLENBQWxDLEVBQXFDO01BQUMsV0FBQSxFQUFhLEdBQWQ7TUFBbUIsUUFBQSxFQUFVLENBQTdCO01BQWdDLE9BQUEsRUFBUyxDQUF6QztLQUFyQyxDQUF6QjtFQUFkOztxQkFDZCxJQUFBLEdBQU8sU0FBQTtXQUFHLE9BQUEsQ0FBUSxJQUFDLENB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TCxNQUFBO0VBQUEsVUFBQSxDQUFXLENBQVg7RUFDQSxJQUFHLFVBQUEsR0FBYSxFQUFiLEtBQW1CLENBQXRCO0lBQTZCLFdBQUEsQ0FBQSxFQUE3Qjs7RUFDQSxNQUFNLENBQUMsTUFBUCxDQUFjLE1BQWQsRUFBc0IsSUFBQSxHQUFPLEVBQTdCO0FBQ0E7T0FBQSx3Q0FBQTs7aUJBQUEsS0FBSyxDQUFDLElBQU4sQ0FBQTtBQUFBOztBQUpLIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQm91bmRhcnlcclxuICBjb25zdHJ1Y3RvciA6ICh4LCB5LCBAdywgQGgpIC0+IFdvcmxkLmFkZCB3b3JsZCwgQGJvZHkgPSBCb2RpZXMucmVjdGFuZ2xlIHgsIHksIEB3LCBAaCwge2lzU3RhdGljOiB0cnVlfVxyXG4gIHNob3cgOiAtPiByZWN0IEBib2R5LnBvc2l0aW9uLngsIEBib2R5LnBvc2l0aW9uLnksIEB3LCBAaFxuY2xhc3MgUGFydGljbGVcclxuICBjb25zdHJ1Y3RvciA6ICh4LCB5LCBAcikgLT4gV29ybGQuYWRkIHdvcmxkLCBAYm9keSA9IEJvZGllcy5jaXJjbGUgeCtyYW5kb20oLTEsMSksIHksIEByLCB7cmVzdGl0dXRpb246IDAuNSwgZnJpY3Rpb246IDAsIGRlbnNpdHk6IDF9XHJcbiAgc2hvdyA6IC0+IGVsbGlwc2UgQGJvZHkucG9zaXRpb24ueCwgQGJvZHkucG9zaXRpb24ueSwgQHIgKiAyXG5jbGFzcyBQbGlua29cclxuICBjb25zdHJ1Y3RvciA6ICh4LCB5LCBAcikgLT4gV29ybGQuYWRkIHdvcmxkLCBAYm9keSA9IEJvZGllcy5jaXJjbGUgeCwgeSwgQHIsIHtyZXN0aXR1dGlvbjogMSxmcmljdGlvbjogMCxpc1N0YXRpYzogdHJ1ZX1cclxuICBzaG93IDogLT4gZWxsaXBzZSBAYm9keS5wb3NpdGlvbi54LCBAYm9keS5wb3NpdGlvbi55LCB0aGlzLnIgKiAyXG5FbmdpbmUgPSBNYXR0ZXIuRW5naW5lXHJcbldvcmxkID0gTWF0dGVyLldvcmxkXHJcbkV2ZW50cyA9IE1hdHRlci5FdmVudHNcclxuQm9kaWVzID0gTWF0dGVyLkJvZGllc1xyXG5cclxuZW5naW5lID0gbnVsbFxyXG53b3JsZCA9IG51bGxcclxudGhpbmdzID0gW11cclxuY29scyA9IDIyXHJcbnJvd3MgPSAxMFxyXG5cclxuc2V0dXAgPSAtPlxyXG4gIGNyZWF0ZUNhbnZhcyAxMjAwLCA4MDBcclxuICByZWN0TW9kZSBDRU5URVJcclxuICBlbmdpbmUgPSBFbmdpbmUuY3JlYXRlKClcclxuICB3b3JsZCA9IGVuZ2luZS53b3JsZFxyXG4gIHdvcmxkLmdyYXZpdHkueSA9IDAuMVxyXG4gIG5ld1BhcnRpY2xlKClcclxuICBzcGFjaW5nID0gd2lkdGggLyBjb2xzXHJcbiAgZm9yIGogaW4gcmFuZ2Ugcm93c1xyXG4gICAgZm9yIGkgaW4gcmFuZ2UgY29scysxXHJcbiAgICAgIHggPSBpICogc3BhY2luZ1xyXG4gICAgICBpZiBqICUgMiA9PSAxIHRoZW4geCArPSBzcGFjaW5nIC8gMlxyXG4gICAgICB5ID0gc3BhY2luZyArIGogKiBzcGFjaW5nXHJcbiAgICAgIHRoaW5ncy5wdXNoIG5ldyBQbGlua28geCwgeSwgMlxyXG5cclxuICB0aGluZ3MucHVzaCBuZXcgQm91bmRhcnkgd2lkdGggLyAyLCBoZWlnaHQgKyA1MCwgd2lkdGgsIDEwMFxyXG4gIHRoaW5ncy5wdXNoIG5ldyBCb3VuZGFyeSAwLCBoZWlnaHQvMiwgNSwgaGVpZ2h0XHJcbiAgdGhpbmdzLnB1c2ggbmV3IEJvdW5kYXJ5IHdpZHRoLCBoZWlnaHQvMiwgNSwgaGVpZ2h0XHJcblxyXG4gIGZvciBpIGluIHJhbmdlIDIqY29scysxXHJcbiAgICB0aGluZ3MucHVzaCBuZXcgQm91bmRhcnkgaSAqIHNwYWNpbmcvMiwgaGVpZ2h0IC0gMTAwIC8gMiwgMiwgMTAwXHJcblxyXG5uZXdQYXJ0aWNsZSA9IC0+IHRoaW5ncy5wdXNoIG5ldyBQYXJ0aWNsZSB3aWR0aC8yLCAwLCA1XHJcblxyXG5kcmF3ID0gLT5cclxuICBiYWNrZ3JvdW5kIDBcclxuICBpZiBmcmFtZUNvdW50ICUgMjAgPT0gMCB0aGVuIG5ld1BhcnRpY2xlKClcclxuICBFbmdpbmUudXBkYXRlIGVuZ2luZSwgMTAwMCAvIDMwXHJcbiAgdGhpbmcuc2hvdygpIGZvciB0aGluZyBpbiB0aGluZ3MiXX0=
//# sourceURL=C:\Lab\2017\028-Plinko\project.js