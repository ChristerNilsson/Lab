// Generated by CoffeeScript 1.11.1
var Bodies, Engine, Events, World, bounds, cols, draw, engine, newParticle, particles, plinkos, rows, setup, world;

Engine = Matter.Engine;

World = Matter.World;

Events = Matter.Events;

Bodies = Matter.Bodies;

engine = null;

world = null;

particles = [];

plinkos = [];

bounds = [];

cols = 22;

rows = 10;

setup = function() {
  var i, j, k, l, len, len1, len2, m, ref, ref1, ref2, results, spacing, x, y;
  createCanvas(1200, 800);
  fill(255);
  stroke(255);
  rectMode(CENTER);
  engine = Engine.create();
  world = engine.world;
  world.gravity.y = 0.1;
  newParticle();
  spacing = width / cols;
  ref = range(rows);
  for (k = 0, len = ref.length; k < len; k++) {
    j = ref[k];
    ref1 = range(cols + 1);
    for (l = 0, len1 = ref1.length; l < len1; l++) {
      i = ref1[l];
      x = i * spacing;
      if (j % 2 === 0) {
        x += spacing / 2;
      }
      y = spacing + j * spacing;
      plinkos.push(new Plinko(x, y, 2));
    }
  }
  bounds.push(new Boundary(width / 2, height + 50, width, 100));
  ref2 = range(2 * cols + 1);
  results = [];
  for (m = 0, len2 = ref2.length; m < len2; m++) {
    i = ref2[m];
    results.push(bounds.push(new Boundary(i * spacing / 2, height - 100 / 2, 2, 100)));
  }
  return results;
};

newParticle = function() {
  return particles.push(new Particle(width / 2, 0, 5));
};

draw = function() {
  var bound, i, k, l, len, len1, len2, m, particle, plinko, ref, results;
  background(0, 0, 0);
  if (frameCount % 20 === 0) {
    newParticle();
  }
  Engine.update(engine, 1000 / 30);
  ref = range(particles.length - 1, -1, -1);
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    particle = particles[i];
    particle.show();
    if (particle.isOffScreen()) {
      World.remove(world, particle.body);
      particles.splice(i, 1);
    }
  }
  for (l = 0, len1 = plinkos.length; l < len1; l++) {
    plinko = plinkos[l];
    plinko.show();
  }
  results = [];
  for (m = 0, len2 = bounds.length; m < len2; m++) {
    bound = bounds[m];
    results.push(bound.show());
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2tldGNoLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBQTs7QUFBQSxNQUFBLEdBQVMsTUFBTSxDQUFDOztBQUNoQixLQUFBLEdBQVEsTUFBTSxDQUFDOztBQUNmLE1BQUEsR0FBUyxNQUFNLENBQUM7O0FBQ2hCLE1BQUEsR0FBUyxNQUFNLENBQUM7O0FBRWhCLE1BQUEsR0FBTzs7QUFDUCxLQUFBLEdBQU07O0FBQ04sU0FBQSxHQUFZOztBQUNaLE9BQUEsR0FBVTs7QUFDVixNQUFBLEdBQVM7O0FBQ1QsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFFUCxLQUFBLEdBQVEsU0FBQTtBQUNOLE1BQUE7RUFBQSxZQUFBLENBQWEsSUFBYixFQUFtQixHQUFuQjtFQUVBLElBQUEsQ0FBSyxHQUFMO0VBQ0EsTUFBQSxDQUFPLEdBQVA7RUFDQSxRQUFBLENBQVMsTUFBVDtFQUNBLE1BQUEsR0FBUyxNQUFNLENBQUMsTUFBUCxDQUFBO0VBQ1QsS0FBQSxHQUFRLE1BQU0sQ0FBQztFQUNmLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBZCxHQUFrQjtFQUNsQixXQUFBLENBQUE7RUFDQSxPQUFBLEdBQVUsS0FBQSxHQUFRO0FBQ2xCO0FBQUEsT0FBQSxxQ0FBQTs7QUFDRTtBQUFBLFNBQUEsd0NBQUE7O01BQ0UsQ0FBQSxHQUFJLENBQUEsR0FBSTtNQUNSLElBQUcsQ0FBQSxHQUFJLENBQUosS0FBUyxDQUFaO1FBQW1CLENBQUEsSUFBSyxPQUFBLEdBQVUsRUFBbEM7O01BQ0EsQ0FBQSxHQUFJLE9BQUEsR0FBVSxDQUFBLEdBQUk7TUFDbEIsT0FBTyxDQUFDLElBQVIsQ0FBaUIsSUFBQSxNQUFBLENBQU8sQ0FBUCxFQUFVLENBQVYsRUFBYSxDQUFiLENBQWpCO0FBSkY7QUFERjtFQU9BLE1BQU0sQ0FBQyxJQUFQLENBQWdCLElBQUEsUUFBQSxDQUFTLEtBQUEsR0FBUSxDQUFqQixFQUFvQixNQUFBLEdBQVMsRUFBN0IsRUFBaUMsS0FBakMsRUFBd0MsR0FBeEMsQ0FBaEI7QUFFQTtBQUFBO09BQUEsd0NBQUE7O2lCQUNFLE1BQU0sQ0FBQyxJQUFQLENBQWdCLElBQUEsUUFBQSxDQUFTLENBQUEsR0FBSSxPQUFKLEdBQVksQ0FBckIsRUFBd0IsTUFBQSxHQUFTLEdBQUEsR0FBTSxDQUF2QyxFQUEwQyxDQUExQyxFQUE2QyxHQUE3QyxDQUFoQjtBQURGOztBQXBCTTs7QUF1QlIsV0FBQSxHQUFjLFNBQUE7U0FBRyxTQUFTLENBQUMsSUFBVixDQUFtQixJQUFBLFFBQUEsQ0FBUyxLQUFBLEdBQU0sQ0FBZixFQUFrQixDQUFsQixFQUFxQixDQUFyQixDQUFuQjtBQUFIOztBQUVkLElBQUEsR0FBTyxTQUFBO0FBQ0wsTUFBQTtFQUFBLFVBQUEsQ0FBVyxDQUFYLEVBQWMsQ0FBZCxFQUFpQixDQUFqQjtFQUNBLElBQUcsVUFBQSxHQUFhLEVBQWIsS0FBbUIsQ0FBdEI7SUFBNkIsV0FBQSxDQUFBLEVBQTdCOztFQUNBLE1BQU0sQ0FBQyxNQUFQLENBQWMsTUFBZCxFQUFzQixJQUFBLEdBQU8sRUFBN0I7QUFDQTtBQUFBLE9BQUEscUNBQUE7O0lBQ0UsUUFBQSxHQUFXLFNBQVUsQ0FBQSxDQUFBO0lBQ3JCLFFBQVEsQ0FBQyxJQUFULENBQUE7SUFDQSxJQUFHLFFBQVEsQ0FBQyxXQUFULENBQUEsQ0FBSDtNQUNFLEtBQUssQ0FBQyxNQUFOLENBQWEsS0FBYixFQUFvQixRQUFRLENBQUMsSUFBN0I7TUFDQSxTQUFTLENBQUMsTUFBVixDQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUZGOztBQUhGO0FBTUEsT0FBQSwyQ0FBQTs7SUFBQSxNQUFNLENBQUMsSUFBUCxDQUFBO0FBQUE7QUFDQTtPQUFBLDBDQUFBOztpQkFBQSxLQUFLLENBQUMsSUFBTixDQUFBO0FBQUE7O0FBWEsiLCJzb3VyY2VzQ29udGVudCI6WyJFbmdpbmUgPSBNYXR0ZXIuRW5naW5lXHJcbldvcmxkID0gTWF0dGVyLldvcmxkXHJcbkV2ZW50cyA9IE1hdHRlci5FdmVudHNcclxuQm9kaWVzID0gTWF0dGVyLkJvZGllc1xyXG5cclxuZW5naW5lPW51bGxcclxud29ybGQ9bnVsbFxyXG5wYXJ0aWNsZXMgPSBbXVxyXG5wbGlua29zID0gW11cclxuYm91bmRzID0gW11cclxuY29scyA9IDIyXHJcbnJvd3MgPSAxMFxyXG5cclxuc2V0dXAgPSAtPlxyXG4gIGNyZWF0ZUNhbnZhcyAxMjAwLCA4MDBcclxuICAjY29sb3JNb2RlIEhTQlxyXG4gIGZpbGwgMjU1XHJcbiAgc3Ryb2tlIDI1NVxyXG4gIHJlY3RNb2RlIENFTlRFUlxyXG4gIGVuZ2luZSA9IEVuZ2luZS5jcmVhdGUoKVxyXG4gIHdvcmxkID0gZW5naW5lLndvcmxkXHJcbiAgd29ybGQuZ3Jhdml0eS55ID0gMC4xO1xyXG4gIG5ld1BhcnRpY2xlKCk7XHJcbiAgc3BhY2luZyA9IHdpZHRoIC8gY29sc1xyXG4gIGZvciBqIGluIHJhbmdlIHJvd3NcclxuICAgIGZvciBpIGluIHJhbmdlIGNvbHMrMVxyXG4gICAgICB4ID0gaSAqIHNwYWNpbmdcclxuICAgICAgaWYgaiAlIDIgPT0gMCB0aGVuIHggKz0gc3BhY2luZyAvIDJcclxuICAgICAgeSA9IHNwYWNpbmcgKyBqICogc3BhY2luZ1xyXG4gICAgICBwbGlua29zLnB1c2ggbmV3IFBsaW5rbyB4LCB5LCAyXHJcblxyXG4gIGJvdW5kcy5wdXNoIG5ldyBCb3VuZGFyeSB3aWR0aCAvIDIsIGhlaWdodCArIDUwLCB3aWR0aCwgMTAwXHJcblxyXG4gIGZvciBpIGluIHJhbmdlIDIqY29scysxXHJcbiAgICBib3VuZHMucHVzaCBuZXcgQm91bmRhcnkgaSAqIHNwYWNpbmcvMiwgaGVpZ2h0IC0gMTAwIC8gMiwgMiwgMTAwXHJcblxyXG5uZXdQYXJ0aWNsZSA9IC0+IHBhcnRpY2xlcy5wdXNoIG5ldyBQYXJ0aWNsZSB3aWR0aC8yLCAwLCA1XHJcblxyXG5kcmF3ID0gLT5cclxuICBiYWNrZ3JvdW5kIDAsIDAsIDBcclxuICBpZiBmcmFtZUNvdW50ICUgMjAgPT0gMCB0aGVuIG5ld1BhcnRpY2xlKClcclxuICBFbmdpbmUudXBkYXRlIGVuZ2luZSwgMTAwMCAvIDMwXHJcbiAgZm9yIGkgaW4gcmFuZ2UgcGFydGljbGVzLmxlbmd0aC0xLC0xLC0xXHJcbiAgICBwYXJ0aWNsZSA9IHBhcnRpY2xlc1tpXVxyXG4gICAgcGFydGljbGUuc2hvdygpXHJcbiAgICBpZiBwYXJ0aWNsZS5pc09mZlNjcmVlbigpXHJcbiAgICAgIFdvcmxkLnJlbW92ZSB3b3JsZCwgcGFydGljbGUuYm9keVxyXG4gICAgICBwYXJ0aWNsZXMuc3BsaWNlIGksIDFcclxuICBwbGlua28uc2hvdygpIGZvciBwbGlua28gaW4gcGxpbmtvc1xyXG4gIGJvdW5kLnNob3coKSBmb3IgYm91bmQgaW4gYm91bmRzICAgICAiXX0=
//# sourceURL=C:\Lab\2017\028-Plinko\sketch.coffee