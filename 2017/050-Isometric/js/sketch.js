// Generated by CoffeeScript 1.11.1
var Isometric, isometric, setup, xdraw;

isometric = null;

Isometric = (function() {
  function Isometric(alpha) {
    this.alpha = alpha != null ? alpha : 1;
    this.n = 10;
    this.dx = 10;
    this.dy = 5;
    this.blocks = [];
    this.w = width;
    this.w2 = this.w / 2;
    this.w1 = (this.w + this.w2) / 2;
    this.r = 1;
    this.g = 1;
    this.b = 1;
  }

  Isometric.prototype.setColor = function(r1, g1, b1) {
    this.r = r1;
    this.g = g1;
    this.b = b1;
  };

  Isometric.prototype.add = function(i, j, k) {
    return this.blocks.push([i, j, k, this.r, this.g, this.b]);
  };

  Isometric.prototype.sort = function() {
    return this.blocks = _.sortBy(this.blocks, (function(_this) {
      return function(arg) {
        var b, g, i, j, k, r;
        i = arg[0], j = arg[1], k = arg[2], r = arg[3], g = arg[4], b = arg[5];
        return -(i * i + j * j + (_this.n - k) * (_this.n - k));
      };
    })(this));
  };

  Isometric.prototype.draw = function() {
    var block, l, len, ref, results;
    ref = this.blocks;
    results = [];
    for (l = 0, len = ref.length; l < len; l++) {
      block = ref[l];
      results.push(this.drawBlock(block));
    }
    return results;
  };

  Isometric.prototype.drawBlock = function(block) {
    var b, f, g, i, j, k, p0, p1, p2, p3, p4, p5, p6, p7, q, r;
    f = (function(_this) {
      return function(i, j, k) {
        return [_this.w2 + i * _this.dx - 2 * j * _this.dy, _this.w - j * _this.dy - i * _this.dx / 2 - k * _this.dy * 2];
      };
    })(this);
    q = function(a, b, c, d) {
      return quad(a[0], a[1], b[0], b[1], c[0], c[1], d[0], d[1]);
    };
    i = block[0], j = block[1], k = block[2], r = block[3], g = block[4], b = block[5];
    p0 = f(i, j, k);
    p1 = f(i + 1, j, k);
    p2 = f(i, j + 1, k);
    p3 = f(i + 1, j + 1, k);
    p4 = f(i, j, k + 1);
    p5 = f(i + 1, j, k + 1);
    p6 = f(i, j + 1, k + 1);
    p7 = f(i + 1, j + 1, k + 1);
    fc(r, g, b, this.alpha);
    q(p4, p6, p7, p5);
    fc(r * 0.5, g * 0.5, b * 0.5, this.alpha);
    q(p0, p2, p6, p4);
    fc(r * 0.75, g * 0.75, b * 0.75, this.alpha);
    return q(p0, p4, p5, p1);
  };

  Isometric.prototype.grid = function() {
    var i, l, len, ref, results, x1, x2, y1, y2;
    ref = range(width / 20 + 1);
    results = [];
    for (l = 0, len = ref.length; l < len; l++) {
      i = ref[l];
      x1 = lerp(this.w2, this.w2 + this.dx, i);
      x2 = lerp(0, this.dx, i);
      y1 = lerp(this.w, this.w - this.dy, i);
      y2 = lerp(this.w1, this.w1 - this.dy, i);
      line(x1, y1, x2, y2);
      x1 = lerp(this.w2, this.w2 - this.dx, i);
      x2 = lerp(this.w, this.w - this.dx, i);
      y1 = lerp(this.w, this.w - this.dy, i);
      y2 = lerp(this.w1, this.w1 - this.dy, i);
      results.push(line(x1, y1, x2, y2));
    }
    return results;
  };

  Isometric.prototype.box = function() {
    var a, b, i, l, len, len1, len2, m, n, ref, ref1, ref2;
    this.blocks = [];
    ref = range(10);
    for (l = 0, len = ref.length; l < len; l++) {
      i = ref[l];
      ref1 = [0, 9];
      for (m = 0, len1 = ref1.length; m < len1; m++) {
        a = ref1[m];
        ref2 = [0, 9];
        for (n = 0, len2 = ref2.length; n < len2; n++) {
          b = ref2[n];
          this.setColor(1, 0, 0);
          this.add(i, a, b);
          this.setColor(1, 1, 0);
          this.add(a, i, b);
          this.setColor(0, 1, 0);
          this.add(a, b, i);
        }
      }
    }
    return this.sort();
  };

  return Isometric;

})();

setup = function() {
  createCanvas(200, 200);
  isometric = new Isometric;
  return xdraw();
};

xdraw = function() {
  bg(1);
  sc();
  isometric.box();
  return isometric.draw();
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsU0FBQSxHQUFZOztBQUVOO0VBQ1MsbUJBQUMsS0FBRDtJQUFDLElBQUMsQ0FBQSx3QkFBRCxRQUFPO0lBQ3JCLElBQUMsQ0FBQSxDQUFELEdBQUc7SUFDSCxJQUFDLENBQUEsRUFBRCxHQUFJO0lBQ0osSUFBQyxDQUFBLEVBQUQsR0FBSTtJQUNKLElBQUMsQ0FBQSxNQUFELEdBQVU7SUFDVixJQUFDLENBQUEsQ0FBRCxHQUFLO0lBQ0wsSUFBQyxDQUFBLEVBQUQsR0FBTSxJQUFDLENBQUEsQ0FBRCxHQUFHO0lBQ1QsSUFBQyxDQUFBLEVBQUQsR0FBTSxDQUFDLElBQUMsQ0FBQSxDQUFELEdBQUcsSUFBQyxDQUFBLEVBQUwsQ0FBQSxHQUFTO0lBQ2YsSUFBQyxDQUFBLENBQUQsR0FBRztJQUNILElBQUMsQ0FBQSxDQUFELEdBQUc7SUFDSCxJQUFDLENBQUEsQ0FBRCxHQUFHO0VBVlU7O3NCQVlkLFFBQUEsR0FBVyxTQUFDLEVBQUQsRUFBSSxFQUFKLEVBQU8sRUFBUDtJQUFDLElBQUMsQ0FBQSxJQUFEO0lBQUcsSUFBQyxDQUFBLElBQUQ7SUFBRyxJQUFDLENBQUEsSUFBRDtFQUFQOztzQkFDWCxHQUFBLEdBQU0sU0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUw7V0FBVyxJQUFDLENBQUEsTUFBTSxDQUFDLElBQVIsQ0FBYSxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUFPLElBQUMsQ0FBQSxDQUFSLEVBQVUsSUFBQyxDQUFBLENBQVgsRUFBYSxJQUFDLENBQUEsQ0FBZCxDQUFiO0VBQVg7O3NCQUNOLElBQUEsR0FBTyxTQUFBO1dBQUcsSUFBQyxDQUFBLE1BQUQsR0FBVSxDQUFDLENBQUMsTUFBRixDQUFTLElBQUMsQ0FBQSxNQUFWLEVBQWtCLENBQUEsU0FB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RUFBTixFQUFTLElBQUMsQ0FBQSxFQUFELEdBQUksSUFBQyxDQUFBLEVBQWQsRUFBaUIsQ0FBakI7bUJBQ0wsSUFBQSxDQUFLLEVBQUwsRUFBUSxFQUFSLEVBQVcsRUFBWCxFQUFjLEVBQWQ7QUFWRDs7RUFETTs7c0JBYVAsR0FBQSxHQUFNLFNBQUE7QUFDTCxRQUFBO0lBQUEsSUFBQyxDQUFBLE1BQUQsR0FBVTtBQUNWO0FBQUEsU0FBQSxxQ0FBQTs7QUFDQztBQUFBLFdBQUEsd0NBQUE7O0FBQ0M7QUFBQSxhQUFBLHdDQUFBOztVQUNDLElBQUMsQ0FBQSxRQUFELENBQVUsQ0FBVixFQUFZLENBQVosRUFBYyxDQUFkO1VBQ0EsSUFBQyxDQUFBLEdBQUQsQ0FBSyxDQUFMLEVBQU8sQ0FBUCxFQUFTLENBQVQ7VUFDQSxJQUFDLENBQUEsUUFBRCxDQUFVLENBQVYsRUFBWSxDQUFaLEVBQWMsQ0FBZDtVQUNBLElBQUMsQ0FBQSxHQUFELENBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFUO1VBQ0EsSUFBQyxDQUFBLFFBQUQsQ0FBVSxDQUFWLEVBQVksQ0FBWixFQUFjLENBQWQ7VUFDQSxJQUFDLENBQUEsR0FBRCxDQUFLLENBQUwsRUFBTyxDQUFQLEVBQVMsQ0FBVDtBQU5EO0FBREQ7QUFERDtXQVNBLElBQUMsQ0FBQSxJQUFELENBQUE7RUFYSzs7Ozs7O0FBYVAsS0FBQSxHQUFRLFNBQUE7RUFDUCxZQUFBLENBQWEsR0FBYixFQUFpQixHQUFqQjtFQUNBLFNBQUEsR0FBWSxJQUFJO1NBQ2hCLEtBQUEsQ0FBQTtBQUhPOztBQUtSLEtBQUEsR0FBUSxTQUFBO0VBQ1AsRUFBQSxDQUFHLENBQUg7RUFFQSxFQUFBLENBQUE7RUFDQSxTQUFTLENBQUMsR0FBVixDQUFBO1NBQ0EsU0FBUyxDQUFDLElBQVYsQ0FBQTtBQUxPIiwic291cmNlc0NvbnRlbnQiOlsiaXNvbWV0cmljID0gbnVsbFxyXG5cclxuY2xhc3MgSXNvbWV0cmljXHJcblx0Y29uc3RydWN0b3IgOiAoQGFscGhhPTEpIC0+XHJcblx0XHRAbj0xMFxyXG5cdFx0QGR4PTEwXHJcblx0XHRAZHk9NVxyXG5cdFx0QGJsb2NrcyA9IFtdXHJcblx0XHRAdyA9IHdpZHRoXHJcblx0XHRAdzIgPSBAdy8yXHJcblx0XHRAdzEgPSAoQHcrQHcyKS8yXHJcblx0XHRAcj0xXHJcblx0XHRAZz0xXHJcblx0XHRAYj0xXHJcblxyXG5cdHNldENvbG9yIDogKEByLEBnLEBiKSAtPlxyXG5cdGFkZCA6IChpLGosaykgLT4gQGJsb2Nrcy5wdXNoIFtpLGosayxAcixAZyxAYl1cclxuXHRzb3J0IDogLT4gQGJsb2NrcyA9IF8uc29ydEJ5IEBibG9ja3MsIChbaSxqLGsscixnLGJdKSA9PiAtKGkqaStqKmorKEBuLWspKihAbi1rKSlcclxuXHRkcmF3IDogLT4gQGRyYXdCbG9jayBibG9jayBmb3IgYmxvY2sgaW4gQGJsb2Nrc1xyXG5cclxuXHRkcmF3QmxvY2sgOiAoYmxvY2spIC0+XHJcblx0XHRmID0gKGksaixrKSA9PiBbQHcyK2kqQGR4LTIqaipAZHksIEB3LWoqQGR5LWkqQGR4LzIgLSBrKkBkeSoyXVxyXG5cdFx0cSA9IChhLGIsYyxkKSAtPiBxdWFkIGFbMF0sYVsxXSwgYlswXSxiWzFdLCBjWzBdLGNbMV0sIGRbMF0sZFsxXVxyXG5cdFx0W2ksaixrLHIsZyxiXSA9IGJsb2NrXHJcblx0XHRwMCA9IGYgaSwgIGosICBrXHJcblx0XHRwMSA9IGYgaSsxLGosICBrXHJcblx0XHRwMiA9IGYgaSwgIGorMSxrXHJcblx0XHRwMyA9IGYgaSsxLGorMSxrXHJcblx0XHRwNCA9IGYgaSAgLGosICBrKzFcclxuXHRcdHA1ID0gZiBpKzEsaiwgIGsrMVxyXG5cdFx0cDYgPSBmIGkgICxqKzEsaysxXHJcblx0XHRwNyA9IGYgaSsxLGorMSxrKzFcclxuXHRcdGZjIHIsZyxiLEBhbHBoYVxyXG5cdFx0cSBwNCxwNixwNyxwNVxyXG5cdFx0ZmMgciowLjUsZyowLjUsYiowLjUsQGFscGhhXHJcblx0XHRxIHAwLHAyLHA2LHA0XHJcblx0XHRmYyByKjAuNzUsZyowLjc1LGIqMC43NSxAYWxwaGFcclxuXHRcdHEgcDAscDQscDUscDFcclxuXHJcblx0Z3JpZCA6IC0+XHJcblx0XHRmb3IgaSBpbiByYW5nZSB3aWR0aC8yMCsxXHJcblx0XHRcdHgxID0gbGVycCBAdzIsQHcyK0BkeCxpXHJcblx0XHRcdHgyID0gbGVycCAgIDAsIEBkeCxpXHJcblx0XHRcdHkxID0gbGVycCBAdyxAdy1AZHksaVxyXG5cdFx0XHR5MiA9IGxlcnAgQHcxLEB3MS1AZHksaVxyXG5cdFx0XHRsaW5lIHgxLHkxLHgyLHkyXHJcblx0XHRcdHgxID0gbGVycCBAdzIsQHcyLUBkeCxpXHJcblx0XHRcdHgyID0gbGVycCBAdyxAdy1AZHgsaVxyXG5cdFx0XHR5MSA9IGxlcnAgQHcsQHctQGR5LGlcclxuXHRcdFx0eTIgPSBsZXJwIEB3MSxAdzEtQGR5LGlcclxuXHRcdFx0bGluZSB4MSx5MSx4Mix5MlxyXG5cclxuXHRib3ggOiAtPlxyXG5cdFx0QGJsb2NrcyA9IFtdXHJcblx0XHRmb3IgaSBpbiByYW5nZSAxMFxyXG5cdFx0XHRmb3IgYSBpbiBbMCw5XVxyXG5cdFx0XHRcdGZvciBiIGluIFswLDldXHJcblx0XHRcdFx0XHRAc2V0Q29sb3IgMSwwLDBcclxuXHRcdFx0XHRcdEBhZGQgaSxhLGJcclxuXHRcdFx0XHRcdEBzZXRDb2xvciAxLDEsMFxyXG5cdFx0XHRcdFx0QGFkZCBhLGksYlxyXG5cdFx0XHRcdFx0QHNldENvbG9yIDAsMSwwXHJcblx0XHRcdFx0XHRAYWRkIGEsYixpXHJcblx0XHRAc29ydCgpXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDIwMCwyMDBcclxuXHRpc29tZXRyaWMgPSBuZXcgSXNvbWV0cmljXHJcblx0eGRyYXcoKVxyXG5cclxueGRyYXcgPSAtPlxyXG5cdGJnIDFcclxuXHQjaXNvbWV0cmljLmdyaWQoKVxyXG5cdHNjKClcclxuXHRpc29tZXRyaWMuYm94KClcclxuXHRpc29tZXRyaWMuZHJhdygpXHJcblxyXG4iXX0=
//# sourceURL=C:\Lab\2017\050-Isometric\coffee\sketch.coffee