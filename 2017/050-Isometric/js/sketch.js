// Generated by CoffeeScript 1.11.1
var block, dx, dy, f, grid, q, setup, w, w1, w2, xdraw;

dx = 10;

dy = 5;

w = 0;

w2 = 0;

w1 = 0;

setup = function() {
  createCanvas(200, 200);
  w = width;
  w2 = w / 2;
  w1 = (w + w2) / 2;
  return xdraw();
};

grid = function() {
  var i, len, m, ref, results, x1, x2, y1, y2;
  w = width;
  w2 = w / 2;
  w1 = (w + w2) / 2;
  ref = range(width / 20 + 1);
  results = [];
  for (m = 0, len = ref.length; m < len; m++) {
    i = ref[m];
    x1 = lerp(w2, w2 + dx, i);
    x2 = lerp(0, dx, i);
    y1 = lerp(w, w - dy, i);
    y2 = lerp(w1, w1 - dy, i);
    line(x1, y1, x2, y2);
    x1 = lerp(w2, w2 - dx, i);
    x2 = lerp(w, w - dx, i);
    y1 = lerp(w, w - dy, i);
    y2 = lerp(w1, w1 - dy, i);
    results.push(line(x1, y1, x2, y2));
  }
  return results;
};

f = function(i, j, k) {
  return [w2 + i * dx - 2 * j * dy, w - j * dy - i * dx / 2 - k * dy * 2];
};

q = function(a, b, c, d) {
  return quad(a[0], a[1], b[0], b[1], c[0], c[1], d[0], d[1]);
};

block = function(i, j, k, w, h, l) {
  var p0, p1, p2, p3, p4, p5, p6, p7;
  if (w == null) {
    w = 1;
  }
  if (h == null) {
    h = 1;
  }
  if (l == null) {
    l = 1;
  }
  p0 = f(i, j, k);
  p1 = f(i + w, j, k);
  p2 = f(i, j + h, k);
  p3 = f(i + w, j + h, k);
  p4 = f(i, j, k + l);
  p5 = f(i + w, j, k + l);
  p6 = f(i, j + h, k + l);
  p7 = f(i + w, j + h, k + l);
  fc(1, 0, 0);
  q(p0, p4, p5, p1);
  fc(0, 1, 0);
  q(p0, p2, p6, p4);
  fc(0, 0, 1);
  return q(p4, p6, p7, p5);
};

xdraw = function() {
  var blocks, i, j, k, len, len1, len2, len3, m, n, o, p, r, ref, ref1, ref2, ref3, results;
  bg(0.5);
  grid();
  blocks = [];
  n = 10;
  ref = range(n);
  for (m = 0, len = ref.length; m < len; m++) {
    i = ref[m];
    ref1 = range(n);
    for (o = 0, len1 = ref1.length; o < len1; o++) {
      j = ref1[o];
      ref2 = range(n);
      for (p = 0, len2 = ref2.length; p < len2; p++) {
        k = ref2[p];
        blocks.push([i, j, k]);
      }
    }
  }
  blocks = _.sortBy(blocks, function(arg) {
    var i, j, k;
    i = arg[0], j = arg[1], k = arg[2];
    return -(i * i + j * j + (n - k) * (n - k));
  });
  results = [];
  for (r = 0, len3 = blocks.length; r < len3; r++) {
    ref3 = blocks[r], i = ref3[0], j = ref3[1], k = ref3[2];
    results.push(block(i, j, k));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsRUFBQSxHQUFLOztBQUNMLEVBQUEsR0FBSzs7QUFDTCxDQUFBLEdBQUs7O0FBQ0wsRUFBQSxHQUFLOztBQUNMLEVBQUEsR0FBSzs7QUFFTCxLQUFBLEdBQVEsU0FBQTtFQUNQLFlBQUEsQ0FBYSxHQUFiLEVBQWlCLEdBQWpCO0VBQ0EsQ0FBQSxHQUFJO0VBQ0osRUFBQSxHQUFLLENBQUEsR0FBRTtFQUNQLEVBQUEsR0FBSyxDQUFDLENBQUEsR0FBRSxFQUFILENBQUEsR0FBTztTQUNaLEtBQUEsQ0FBQTtBQUxPOztBQU9SLElBQUEsR0FBTyxTQUFBO0FBQ04sTUFBQTtFQUFBLENBQUEsR0FBSTtFQUNKLEVBQUEsR0FBSyxDQUFBLEdBQUU7RUFDUCxFQUFBLEdBQUssQ0FBQyxDQUFBLEdBQUUsRUFBSCxDQUFBLEdBQU87QUFDWjtBQUFBO09BQUEscUNBQUE7O0lBQ0MsRUFBQSxHQUFLLElBQUEsQ0FBSyxFQUFMLEVBQVEsRUFBQSxHQUFHLEVBQVgsRUFBYyxDQUFkO0lBQ0wsRUFBQSxHQUFLLElBQUEsQ0FBTyxDQUFQLEVBQVUsRUFBVixFQUFhLENBQWI7SUFDTCxFQUFBLEdBQUssSUFBQSxDQUFLLENBQUwsRUFBTyxDQUFBLEdBQUUsRUFBVCxFQUFZLENBQVo7SUFDTCxFQUFBLEdBQUssSUFBQSxDQUFLLEVBQUwsRUFBUSxFQUFBLEdBQUcsRUFBWCxFQUFjLENBQWQ7SUFDTCxJQUFBLENBQUssRUFBTCxFQUFRLEVBQVIsRUFBVyxFQUFYLEVBQWMsRUFBZDtJQUNBLEVBQUEsR0FBSyxJQUFBLENBQUssRUFBTCxFQUFRLEVBQUEsR0FBRyxFQUFYLEVBQWMsQ0FBZDtJQUNMLEVBQUEsR0FBSyxJQUFBLENBQUssQ0FBTCxFQUFPLENBQUEsR0FBRSxFQUFULEVBQVksQ0FBWjtJQUNM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QUFLLENBQUwsQ0FBWjtBQUREO0FBREQ7QUFERDtFQUlBLE1BQUEsR0FBUyxDQUFDLENBQUMsTUFBRixDQUFTLE1BQVQsRUFBaUIsU0FBQyxHQUFEO0FBQWEsUUFBQTtJQUFYLFlBQUUsWUFBRTtXQUFPLENBQUMsQ0FBQyxDQUFBLEdBQUUsQ0FBRixHQUFJLENBQUEsR0FBRSxDQUFOLEdBQVEsQ0FBQyxDQUFBLEdBQUUsQ0FBSCxDQUFBLEdBQU0sQ0FBQyxDQUFBLEdBQUUsQ0FBSCxDQUFmO0VBQWQsQ0FBakI7QUFDVDtPQUFBLDBDQUFBO3NCQUFLLGFBQUUsYUFBRTtpQkFDUixLQUFBLENBQU0sQ0FBTixFQUFRLENBQVIsRUFBVSxDQUFWO0FBREQ7O0FBVk8iLCJzb3VyY2VzQ29udGVudCI6WyJkeCA9IDEwXHJcbmR5ID0gNVxyXG53ICA9IDBcclxudzIgPSAwXHJcbncxID0gMFxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyAyMDAsMjAwXHJcblx0dyA9IHdpZHRoXHJcblx0dzIgPSB3LzJcclxuXHR3MSA9ICh3K3cyKS8yXHJcblx0eGRyYXcoKVxyXG5cclxuZ3JpZCA9IC0+XHJcblx0dyA9IHdpZHRoXHJcblx0dzIgPSB3LzJcclxuXHR3MSA9ICh3K3cyKS8yXHJcblx0Zm9yIGkgaW4gcmFuZ2Ugd2lkdGgvMjArMVxyXG5cdFx0eDEgPSBsZXJwIHcyLHcyK2R4LGlcclxuXHRcdHgyID0gbGVycCAgIDAsIGR4LGlcclxuXHRcdHkxID0gbGVycCB3LHctZHksaVxyXG5cdFx0eTIgPSBsZXJwIHcxLHcxLWR5LGlcclxuXHRcdGxpbmUgeDEseTEseDIseTJcclxuXHRcdHgxID0gbGVycCB3Mix3Mi1keCxpXHJcblx0XHR4MiA9IGxlcnAgdyx3LWR4LGlcclxuXHRcdHkxID0gbGVycCB3LHctZHksaVxyXG5cdFx0eTIgPSBsZXJwIHcxLHcxLWR5LGlcclxuXHRcdGxpbmUgeDEseTEseDIseTJcclxuXHJcbmYgPSAoaSxqLGspIC0+IFt3MitpKmR4LTIqaipkeSwgdy1qKmR5LWkqZHgvMiAtIGsqZHkqMl1cclxuXHJcbnEgPSAoYSxiLGMsZCkgLT4gcXVhZCBhWzBdLGFbMV0sIGJbMF0sYlsxXSwgY1swXSxjWzFdLCBkWzBdLGRbMV1cclxuXHJcbmJsb2NrID0gKGksaixrLCB3PTEsaD0xLGw9MSkgLT5cclxuXHRwMCA9IGYgaSwgIGosICBrXHJcblx0cDEgPSBmIGkrdyxqLCAga1xyXG5cdHAyID0gZiBpLCAgaitoLGtcclxuXHRwMyA9IGYgaSt3LGoraCxrXHJcblx0cDQgPSBmIGkgICxqLCAgaytsXHJcblx0cDUgPSBmIGkrdyxqLCAgaytsXHJcblx0cDYgPSBmIGkgICxqK2gsaytsXHJcblx0cDcgPSBmIGkrdyxqK2gsaytsXHJcblx0I3NjKClcclxuXHRmYyAxLDAsMFxyXG5cdHEgcDAscDQscDUscDFcclxuXHRmYyAwLDEsMFxyXG5cdHEgcDAscDIscDYscDRcclxuXHRmYyAwLDAsMVxyXG5cdHEgcDQscDYscDcscDVcclxuXHJcbnhkcmF3ID0gLT5cclxuXHRiZyAwLjVcclxuXHRncmlkKClcclxuXHRibG9ja3MgPSBbXVxyXG5cdG4gPSAxMFxyXG5cdGZvciBpIGluIHJhbmdlIG5cclxuXHRcdGZvciBqIGluIHJhbmdlIG5cclxuXHRcdFx0Zm9yIGsgaW4gcmFuZ2UgblxyXG5cdFx0XHRcdGJsb2Nrcy5wdXNoIFtpLGosa10gIyBpZiBub3QgKGkgaW4gWzEsNCw3XSBvciBqIGluIFsxLDQsN10gb3IgayBpbiBbMSw0LDddKVxyXG5cdGJsb2NrcyA9IF8uc29ydEJ5IGJsb2NrcywgKFtpLGosa10pIC0+IC0oaSppK2oqaisobi1rKSoobi1rKSlcclxuXHRmb3IgW2ksaixrXSBpbiBibG9ja3NcclxuXHRcdGJsb2NrIGksaixrIl19
//# sourceURL=C:\Lab\2017\050-Isometric\coffee\sketch.coffee