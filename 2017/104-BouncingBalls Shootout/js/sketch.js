// Generated by CoffeeScript 1.11.1
var balls, bullets, collisions, counter, draw, keyPressed, level, newLevel, queue, setup, shot;

level = 1;

balls = [];

bullets = [];

queue = 0;

counter = 0;

shot = [0, 0, 0];

setup = function() {
  createCanvas(800, 800);
  return newLevel(1);
};

collisions = function() {
  var ball, bullet, i, len, results;
  results = [];
  for (i = 0, len = bullets.length; i < len; i++) {
    bullet = bullets[i];
    results.push((function() {
      var j, len1, results1;
      results1 = [];
      for (j = 0, len1 = balls.length; j < len1; j++) {
        ball = balls[j];
        if (ball.distance(bullet) < ball.radius + bullet.radius) {
          shot[ball.type] += 1;
          bullet.age = 999999;
          results1.push(ball.age = 999999);
        } else {
          results1.push(void 0);
        }
      }
      return results1;
    })());
  }
  return results;
};

newLevel = function(lvl) {
  level = lvl;
  if (level === 0) {
    level = 1;
  }
  balls = [];
  bullets = [];
  queue = 2 * level;
  counter = 0;
  return shot = [0, 0, 0];
};

draw = function() {
  var ball, bullet, i, len, ref, t1, t2;
  counter += 1;
  if (counter % 50 === 1 && queue > 0) {
    queue -= 1;
    balls.push(new Ball(1 + queue % 2, width / Math.pow(level, 0.7) / 10));
  }
  bg(0.5);
  fc(0);
  sw(5);
  line(0, height, 3, height - 10);
  sw(1);
  ref = balls.concat(bullets);
  for (i = 0, len = ref.length; i < len; i++) {
    ball = ref[i];
    ball.draw();
  }
  collisions();
  bullets = (function() {
    var j, len1, results;
    results = [];
    for (j = 0, len1 = bullets.length; j < len1; j++) {
      bullet = bullets[j];
      if (bullet.age < 250) {
        results.push(bullet);
      }
    }
    return results;
  })();
  balls = (function() {
    var j, len1, results;
    results = [];
    for (j = 0, len1 = balls.length; j < len1; j++) {
      ball = balls[j];
      if (ball.age < 1000000) {
        results.push(ball);
      }
    }
    return results;
  })();
  t1 = (function() {
    var j, len1, results;
    results = [];
    for (j = 0, len1 = balls.length; j < len1; j++) {
      ball = balls[j];
      if (ball.type === 1) {
        results.push(ball);
      }
    }
    return results;
  })();
  t2 = (function() {
    var j, len1, results;
    results = [];
    for (j = 0, len1 = balls.length; j < len1; j++) {
      ball = balls[j];
      if (ball.type === 2) {
        results.push(ball);
      }
    }
    return results;
  })();
  if (shot[1] === level) {
    newLevel(level + 1);
  }
  if (shot[2] === level) {
    return newLevel(level - 1);
  }
};

keyPressed = function() {
  return bullets.push(new Ball(0, 2, 2, height - 2, 3.2, -12.6));
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsS0FBQSxHQUFROztBQUNSLEtBQUEsR0FBUTs7QUFDUixPQUFBLEdBQVU7O0FBQ1YsS0FBQSxHQUFROztBQUNSLE9BQUEsR0FBVTs7QUFDVixJQUFBLEdBQU8sQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUw7O0FBRVAsS0FBQSxHQUFRLFNBQUE7RUFDUCxZQUFBLENBQWEsR0FBYixFQUFpQixHQUFqQjtTQUNBLFFBQUEsQ0FBUyxDQUFUO0FBRk87O0FBSVIsVUFBQSxHQUFhLFNBQUE7QUFDWixNQUFBO0FBQUE7T0FBQSx5Q0FBQTs7OztBQUNDO1dBQUEseUNBQUE7O1FBQ0MsSUFBRyxJQUFJLENBQUMsUUFBTCxDQUFjLE1BQWQsQ0FBQSxHQUF3QixJQUFJLENBQUMsTUFBTCxHQUFjLE1BQU0sQ0FBQyxNQUFoRDtVQUNDLElBQUssQ0FBQSxJQUFJLENBQUMsSUFBTCxDQUFMLElBQW1CO1VBQ25CLE1BQU0sQ0FBQyxHQUFQLEdBQWE7d0JBQ2IsSUFBSSxDQUFDLEdBQUwsR0FBVyxRQUhaO1NBQUEsTUFBQTtnQ0FBQTs7QUFERDs7O0FBREQ7O0FBRFk7O0FBUWIsUUFBQSxHQUFXLFNBQUMsR0FBRDtFQUNWLEtBQUEsR0FBUTtFQUNSLElBQUcsS0FBQSxLQUFTLENBQVo7SUFBbUIsS0FBQSxHQUFRLEVBQTNCOztFQUNBLEtBQUEsR0FBUTtFQUNSLE9BQUEsR0FBVTtFQUNWLEtBQUEsR0FBUSxDQUFBLEdBQUk7RUFDWixPQUFBLEdBQVU7U0FDVixJQUFBLEdBQU8sQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUw7QUFQRzs7QUFTWCxJQUFBLEdBQU8sU0FBQTtBQUNOLE1BQUE7RUFBQSxPQUFBLElBQVc7RUFDWCxJQUFHLE9BQUEsR0FBVSxFQUFWLEtBQWdCLENBQWhCLElBQXNCLEtBQUEsR0FBUSxDQUFqQztJQUNDLEtBQUEsSUFBUztJQUNULEtBQUssQ0FBQyxJQUFOLENBQWUsSUFBQSxJQUFBLENBQUssQ0FBQSxHQUFFLEtBQUEsR0FBTSxDQUFiLEVBQWdCLEtBQUEsWUFBTSxPQUFPLElBQWIsR0FBaUIsRUFBakMsQ0FBZixFQUZEOztFQUlBLEVBQUEsQ0FBRyxHQUFIO0VBQ0EsRUFBQSxDQUFHLENBQUg7RUFDQSxFQUFBLENBQUcsQ0FBSDtFQUNBLElBQUEsQ0FBSyxDQUFMLEVBQU8sTUFBUCxFQUFlLENBQWYsRUFBaUIsTUFBQSxHQUFPLEVBQXhCO0VBQ0EsRUFBQSxDQUFHLENBQUg7QUFDQTtBQUFBLE9BQUEscUNBQUE7O0lBQ0MsSUFBSSxDQUFDLElBQUwsQ0FBQTtBQUREO0VBRUEsVUFBQSxDQUFBO0VBQ0EsT0FBQTs7QUFBVztTQUFBLDJDQUFBOztVQUFrQyxNQUFNLENBQUMsR0FBUCxHQUFhO3FCQUEvQzs7QUFBQTs7O0VBQ1gsS0FBQTs7QUFBUztTQUFBLHlDQUFBOztVQUE0QixJQUFJLENBQUMsR0FBTCxHQUFXO3FCQUF2Qzs7QUFBQTs7O0VBQ1QsRUFBQTs7QUFBTTtTQUFBLHlDQUFBOztVQUE0QixJQUFJLENBQUMsSUFBTCxLQUFhO3FCQUF6Qzs7QUFBQTs7O0VBQ04sRUFBQTs7QUFBTTtTQUFBLHlDQUFBOztVQUE0QixJQUFJLENBQUMsSUFBTCxLQUFhO3FCQUF6Qzs7QUFBQTs7O0VBQ04sSUFBRyxJQUFLLENBQUEsQ0FBQSxDQUFMLEtBQVcsS0FBZDtJQUF5QixRQUFBLENBQVMsS0FBQSxHQUFNLENBQWYsRUFBekI7O0VBQ0EsSUFBRyxJQUFLLENBQUEsQ0FBQSxDQUFMLEtBQVcsS0FBZDtXQUF5QixRQUFBLENBQVMsS0FBQSxHQUFNLENBQWYsRUFBekI7O0FBbkJNOztBQXFCUCxVQUFBLEdBQWEsU0FBQTtTQUNaLE9BQU8sQ0FBQyxJQUFSLENBQWlCLElBQUEsSUFBQSxDQUFLLENBQUwsRUFBTyxDQUFQLEVBQVUsQ0FBVixFQUFZLE1BQUEsR0FBTyxDQUFuQixFQUFzQixHQUF0QixFQUEwQixDQUFDLElBQTNCLENBQWpCO0FBRFkiLCJzb3VyY2VzQ29udGVudCI6WyJsZXZlbCA9IDFcclxuYmFsbHMgPSBbXVxyXG5idWxsZXRzID0gW11cclxucXVldWUgPSAwXHJcbmNvdW50ZXIgPSAwXHJcbnNob3QgPSBbMCwwLDBdXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIDgwMCw4MDBcclxuXHRuZXdMZXZlbCAxXHJcblxyXG5jb2xsaXNpb25zID0gLT5cclxuXHRmb3IgYnVsbGV0IGluIGJ1bGxldHNcclxuXHRcdGZvciBiYWxsIGluIGJhbGxzXHJcblx0XHRcdGlmIGJhbGwuZGlzdGFuY2UoYnVsbGV0KSA8IGJhbGwucmFkaXVzICsgYnVsbGV0LnJhZGl1c1xyXG5cdFx0XHRcdHNob3RbYmFsbC50eXBlXSArPSAxXHJcblx0XHRcdFx0YnVsbGV0LmFnZSA9IDk5OTk5OVxyXG5cdFx0XHRcdGJhbGwuYWdlID0gOTk5OTk5XHJcblxyXG5uZXdMZXZlbCA9IChsdmwpIC0+XHJcblx0bGV2ZWwgPSBsdmxcclxuXHRpZiBsZXZlbCA9PSAwIHRoZW4gbGV2ZWwgPSAxXHJcblx0YmFsbHMgPSBbXVxyXG5cdGJ1bGxldHMgPSBbXVxyXG5cdHF1ZXVlID0gMiAqIGxldmVsXHJcblx0Y291bnRlciA9IDBcclxuXHRzaG90ID0gWzAsMCwwXVxyXG5cclxuZHJhdyA9IC0+XHJcblx0Y291bnRlciArPSAxXHJcblx0aWYgY291bnRlciAlIDUwID09IDEgYW5kIHF1ZXVlID4gMFxyXG5cdFx0cXVldWUgLT0gMVxyXG5cdFx0YmFsbHMucHVzaCBuZXcgQmFsbCAxK3F1ZXVlJTIsIHdpZHRoL2xldmVsKiowLjcvMTBcclxuXHJcblx0YmcgMC41XHJcblx0ZmMgMFxyXG5cdHN3IDVcclxuXHRsaW5lIDAsaGVpZ2h0LCAzLGhlaWdodC0xMFxyXG5cdHN3IDFcclxuXHRmb3IgYmFsbCBpbiBiYWxscy5jb25jYXQgYnVsbGV0c1xyXG5cdFx0YmFsbC5kcmF3KClcclxuXHRjb2xsaXNpb25zKClcclxuXHRidWxsZXRzID0gKGJ1bGxldCBmb3IgYnVsbGV0IGluIGJ1bGxldHMgd2hlbiBidWxsZXQuYWdlIDwgMjUwKVxyXG5cdGJhbGxzID0gKGJhbGwgZm9yIGJhbGwgaW4gYmFsbHMgd2hlbiBiYWxsLmFnZSA8IDEwMDAwMDApXHJcblx0dDEgPSAoYmFsbCBmb3IgYmFsbCBpbiBiYWxscyB3aGVuIGJhbGwudHlwZSA9PSAxKVxyXG5cdHQyID0gKGJhbGwgZm9yIGJhbGwgaW4gYmFsbHMgd2hlbiBiYWxsLnR5cGUgPT0gMilcclxuXHRpZiBzaG90WzFdID09IGxldmVsIHRoZW4gbmV3TGV2ZWwgbGV2ZWwrMVxyXG5cdGlmIHNob3RbMl0gPT0gbGV2ZWwgdGhlbiBuZXdMZXZlbCBsZXZlbC0xXHJcblxyXG5rZXlQcmVzc2VkID0gLT5cclxuXHRidWxsZXRzLnB1c2ggbmV3IEJhbGwgMCwyLCAyLGhlaWdodC0yLCAzLjIsLTEyLjZcclxuIl19
//# sourceURL=C:\Lab\2017\104-BouncingBalls Shootout\coffee\sketch.coffee