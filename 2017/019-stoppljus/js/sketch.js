// Generated by CoffeeScript 2.0.3
var Stoppljus, draw, lysen, setup;

lysen = [];

setup = function() {
  var i, j, len, ref, results;
  createCanvas(windowWidth, windowHeight);
  bg(0.5);
  ref = range(10);
  results = [];
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    results.push(lysen.push(new Stoppljus(60 + 60 * i, 50, 50, [random(500, 1500), random(200, 300), random(500, 1500), random(200, 300)])));
  }
  return results;
};

draw = function() {
  var j, len, lyse, results;
  results = [];
  for (j = 0, len = lysen.length; j < len; j++) {
    lyse = lysen[j];
    results.push(lyse.update());
  }
  return results;
};

Stoppljus = class Stoppljus {
  constructor(x, y1, size, delays) {
    this.x = x;
    this.y = y1;
    this.size = size;
    this.delays = delays;
    this.delay = 0;
    this.state = 0;
  }

  one_lamp(villkor, r, g, b, y) {
    if (villkor) {
      fc(r, g, b);
    } else {
      fc(0);
    }
    return circle(this.x, this.y + y, this.size / 2);
  }

  update() {
    if (millis() > this.delay) {
      this.state += 1;
      this.state %= 4;
      this.delay = millis() + this.delays[this.state];
      this.one_lamp(this.state <= 1, 1, 0, 0, 0); // Red
      this.one_lamp(this.state % 2 === 1, 1, 1, 0, this.size); // Yellow
      return this.one_lamp(this.state === 2, 0, 1, 0, 2 * this.size); // Green
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUE7O0FBQUEsS0FBQSxHQUFROztBQUVSLEtBQUEsR0FBUSxRQUFBLENBQUEsQ0FBQTtBQUNQLE1BQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBO0VBQUEsWUFBQSxDQUFhLFdBQWIsRUFBeUIsWUFBekI7RUFDQSxFQUFBLENBQUcsR0FBSDtBQUNBO0FBQUE7RUFBQSxLQUFBLHFDQUFBOztpQkFDQyxLQUFLLENBQUMsSUFBTixDQUFXLElBQUksU0FBSixDQUFjLEVBQUEsR0FBSyxFQUFBLEdBQUcsQ0FBdEIsRUFBeUIsRUFBekIsRUFBNkIsRUFBN0IsRUFBaUMsQ0FBQyxNQUFBLENBQU8sR0FBUCxFQUFXLElBQVgsQ0FBRCxFQUFrQixNQUFBLENBQU8sR0FBUCxFQUFXLEdBQVgsQ0FBbEIsRUFBa0MsTUFBQSxDQUFPLEdBQVAsRUFBVyxJQUFYLENBQWxDLEVBQW1ELE1BQUEsQ0FBTyxHQUFQLEVBQVcsR0FBWCxDQUFuRCxDQUFqQyxDQUFYO0VBREQsQ0FBQTs7QUFITzs7QUFNUixJQUFBLEdBQU8sUUFBQSxDQUFBLENBQUE7QUFBRyxNQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO0FBQUE7RUFBQSxLQUFBLHVDQUFBOztpQkFBQSxJQUFJLENBQUMsTUFBTCxDQUFBO0VBQUEsQ0FBQTs7QUFBSDs7QUFFRCxZQUFOLE1BQUEsVUFBQTtFQUNDLFdBQWMsRUFBQSxJQUFBLE1BQUEsUUFBQSxDQUFBO0lBQUMsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQUcsSUFBQyxDQUFBO0lBQU0sSUFBQyxDQUFBO0lBQzlCLElBQUMsQ0FBQSxLQUFELEdBQVM7SUFDVCxJQUFDLENBQUEsS0FBRCxHQUFTO0VBRkk7O0VBSWQsUUFBVyxDQUFDLE9BQUQsRUFBVSxDQUFWLEVBQVksQ0FBWixFQUFjLENBQWQsRUFBaUIsQ0FBakIsQ0FBQTtJQUNWLElBQUcsT0FBSDtNQUFnQixFQUFBLENBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQWhCO0tBQUEsTUFBQTtNQUE4QixFQUFBLENBQUcsQ0FBSCxFQUE5Qjs7V0FDQSxNQUFBLENBQU8sSUFBQyxDQUFBLENBQVIsRUFBVyxJQUFDLENBQUEsQ0FBRCxHQUFHLENBQWQsRUFBaUIsSUFBQyxDQUFBLElBQUQsR0FBTSxDQUF2QjtFQUZVOztFQUlYLE1BQVMsQ0FBQSxDQUFBO0lBQ1IsSUFBRyxNQUFBLENBQUEsQ0FBQSxHQUFXLElBQUMsQ0FBQSxLQUFmO01BQ0MsSUFBQyxDQUFBLEtBQUQsSUFBVTtNQUNWLElBQUMsQ0FBQSxLQUFELElBQVU7TUFDVixJQUFDLENBQUEsS0FBRCxHQUFTLE1BQUEsQ0FBQSxDQUFBLEdBQVcsSUFBQyxDQUFBLE1BQU8sQ0FBQSxJQUFDLENBQUEsS0FBRDtNQUU1QixJQUFDLENBQUEsUUFBRCxDQUFVLElBQUMsQ0FBQSxLQUFELElBQVUsQ0FBcEIsRUFBdUIsQ0FBdkIsRUFBeUIsQ0FBekIsRUFBMkIsQ0FBM0IsRUFBK0IsQ0FBL0IsRUFKQTtNQUtBLElBQUMsQ0FBQSxRQUFELENBQVUsSUFBQyxDQUFBLEtBQUQsR0FBTyxDQUFQLEtBQVUsQ0FBcEIsRUFBdUIsQ0FBdkIsRUFBeUIsQ0FBekIsRUFBMkIsQ0FBM0IsRUFBK0IsSUFBQyxDQUFBLElBQWhDLEVBTEE7YUFNQSxJQUFDLENBQUEsUUFBRCxDQUFVLElBQUMsQ0FBQSxLQUFELEtBQVUsQ0FBcEIsRUFBdUIsQ0FBdkIsRUFBeUIsQ0FBekIsRUFBMkIsQ0FBM0IsRUFBK0IsQ0FBQSxHQUFFLElBQUMsQ0FBQSxJQUFsQyxFQVBEOztFQURROztBQVRWIiwic291cmNlc0NvbnRlbnQiOlsibHlzZW4gPSBbXVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aCx3aW5kb3dIZWlnaHRcclxuXHRiZyAwLjVcclxuXHRmb3IgaSBpbiByYW5nZSAxMFxyXG5cdFx0bHlzZW4ucHVzaCBuZXcgU3RvcHBsanVzIDYwICsgNjAqaSwgNTAsIDUwLCBbcmFuZG9tKDUwMCwxNTAwKSxyYW5kb20oMjAwLDMwMCkscmFuZG9tKDUwMCwxNTAwKSxyYW5kb20oMjAwLDMwMCldXHJcblxyXG5kcmF3ID0gLT4gbHlzZS51cGRhdGUoKSBmb3IgbHlzZSBpbiBseXNlblxyXG5cdFx0XHJcbmNsYXNzIFN0b3BwbGp1c1xyXG5cdGNvbnN0cnVjdG9yIDogKEB4LCBAeSwgQHNpemUsIEBkZWxheXMpIC0+XHJcblx0XHRAZGVsYXkgPSAwXHJcblx0XHRAc3RhdGUgPSAwXHJcblxyXG5cdG9uZV9sYW1wIDogKHZpbGxrb3IsIHIsZyxiLCB5KSAtPlxyXG5cdFx0aWYgdmlsbGtvciB0aGVuIGZjIHIsZyxiIGVsc2UgZmMgMFxyXG5cdFx0Y2lyY2xlIEB4LCBAeSt5LCBAc2l6ZS8yXHJcblxyXG5cdHVwZGF0ZSA6IC0+XHJcblx0XHRpZiBtaWxsaXMoKSA+IEBkZWxheVxyXG5cdFx0XHRAc3RhdGUgKz0gMVxyXG5cdFx0XHRAc3RhdGUgJT0gNFxyXG5cdFx0XHRAZGVsYXkgPSBtaWxsaXMoKSArIEBkZWxheXNbQHN0YXRlXVxyXG5cclxuXHRcdFx0QG9uZV9sYW1wIEBzdGF0ZSA8PSAxLCAxLDAsMCAsIDAgICAgICAgIyBSZWRcclxuXHRcdFx0QG9uZV9sYW1wIEBzdGF0ZSUyPT0xLCAxLDEsMCAsIEBzaXplICAgIyBZZWxsb3dcclxuXHRcdFx0QG9uZV9sYW1wIEBzdGF0ZSA9PSAyLCAwLDEsMCAsIDIqQHNpemUgIyBHcmVlbiJdfQ==
//# sourceURL=C:\Lab\2017\019-stoppljus\coffee\sketch.coffee