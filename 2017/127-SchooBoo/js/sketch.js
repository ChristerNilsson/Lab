// Generated by CoffeeScript 1.12.7
var N, draw, fetch, img, markedAreas, mouseTouched, pageNo, rects, setup;

pageNo = 1;

img = null;

rects = null;

N = 35;

markedAreas = {};

markedAreas[1] = [[4, 7, 1], [32, 35, 2]];

markedAreas[2] = [[14, 17, 3], [22, 25, 4]];

setup = function() {
  createCanvas(640, 360);
  fetch();
  return frameRate(10);
};

fetch = function() {
  var xmlhttp;
  img = null;
  rects = null;
  loadImage("images/data" + pageNo + ".png", function(_img) {
    return img = _img;
  });
  xmlhttp = new XMLHttpRequest();
  xmlhttp.onreadystatechange = function() {
    if (this.readyState === 4 && this.status === 200) {
      return rects = JSON.parse(this.responseText);
    }
  };
  xmlhttp.open("GET", "images/data" + pageNo + ".json", true);
  return xmlhttp.send();
};

draw = function() {
  var color, h, i, j, k, len, len1, p, ref, ref1, ref2, ref3, start, stopp, w, x, y;
  bg(1);
  sc();
  if (rects && markedAreas[pageNo]) {
    ref = markedAreas[pageNo];
    for (j = 0, len = ref.length; j < len; j++) {
      ref1 = ref[j], start = ref1[0], stopp = ref1[1], color = ref1[2];
      ref2 = range(start, stopp + 1);
      for (k = 0, len1 = ref2.length; k < len1; k++) {
        i = ref2[k];
        ref3 = rects[i], x = ref3[0], y = ref3[1], w = ref3[2], h = ref3[3];
        if (color === 1) {
          fc(1, 0, 0);
        }
        if (color === 2) {
          fc(0, 1, 0);
        }
        if (color === 3) {
          fc(1, 1, 0);
        }
        if (color === 4) {
          fc(0, 1, 1);
        }
        if (color > 0) {
          rect(x - 6, y + 4, w + 10, 29);
        }
      }
    }
  }
  if (img) {
    image(img, 0, 0);
  }
  w = width / N;
  p = (pageNo - 1) * w;
  sc(1, 0, 0);
  y = height - 2;
  return line(p, y, p + w, y);
};

mouseTouched = function() {
  if (mouseX > width / 2) {
    pageNo++;
  } else {
    pageNo--;
  }
  pageNo = constrain(pageNo, 1, N);
  fetch();
  return false;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsTUFBQSxHQUFTOztBQUNULEdBQUEsR0FBTTs7QUFDTixLQUFBLEdBQVE7O0FBQ1IsQ0FBQSxHQUFJOztBQUVKLFdBQUEsR0FBYzs7QUFDZCxXQUFZLENBQUEsQ0FBQSxDQUFaLEdBQWlCLENBQUMsQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsQ0FBRCxFQUFTLENBQUMsRUFBRCxFQUFJLEVBQUosRUFBTyxDQUFQLENBQVQ7O0FBQ2pCLFdBQVksQ0FBQSxDQUFBLENBQVosR0FBaUIsQ0FBQyxDQUFDLEVBQUQsRUFBSSxFQUFKLEVBQU8sQ0FBUCxDQUFELEVBQVcsQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLENBQVAsQ0FBWDs7QUFFakIsS0FBQSxHQUFRLFNBQUE7RUFDUCxZQUFBLENBQWEsR0FBYixFQUFpQixHQUFqQjtFQUNBLEtBQUEsQ0FBQTtTQUNBLFNBQUEsQ0FBVSxFQUFWO0FBSE87O0FBS1IsS0FBQSxHQUFRLFNBQUE7QUFDUCxNQUFBO0VBQUEsR0FBQSxHQUFNO0VBQ04sS0FBQSxHQUFRO0VBQ1IsU0FBQSxDQUFVLGFBQUEsR0FBYyxNQUFkLEdBQXFCLE1BQS9CLEVBQXNDLFNBQUMsSUFBRDtXQUFVLEdBQUEsR0FBTTtFQUFoQixDQUF0QztFQUNBLE9BQUEsR0FBVSxJQUFJLGNBQUosQ0FBQTtFQUNWLE9BQU8sQ0FBQyxrQkFBUixHQUE2QixTQUFBO0lBQzVCLElBQUcsSUFBSSxDQUFDLFVBQUwsS0FBbUIsQ0FBbkIsSUFBd0IsSUFBSSxDQUFDLE1BQUwsS0FBZSxHQUExQzthQUNDLEtBQUEsR0FBUSxJQUFJLENBQUMsS0FBTCxDQUFXLElBQUksQ0FBQyxZQUFoQixFQURUOztFQUQ0QjtFQUc3QixPQUFPLENBQUMsSUFBUixDQUFhLEtBQWIsRUFBb0IsYUFBQSxHQUFjLE1BQWQsR0FBcUIsT0FBekMsRUFBaUQsSUFBakQ7U0FDQSxPQUFPLENBQUMsSUFBUixDQUFBO0FBVE87O0FBV1IsSUFBQSxHQUFPLFNBQUE7QUFDTixNQUFBO0VBQUEsRUFBQSxDQUFHLENBQUg7RUFDQSxFQUFBLENBQUE7RUFDQSxJQUFHLEtBQUEsSUFBVSxXQUFZLENBQUEsTUFBQSxDQUF6QjtBQUNDO0FBQUEsU0FBQSxxQ0FBQTtxQkFBSyxpQkFBTSxpQkFBTTtBQUNoQjtBQUFBLFdBQUEsd0NBQUE7O1FBQ0MsT0FBWSxLQUFNLENBQUEsQ0FBQSxDQUFsQixFQUFDLFdBQUQsRUFBRyxXQUFILEVBQUssV0FBTCxFQUFPO1FBQ1AsSUFBRyxLQUFBLEtBQU8sQ0FBVjtVQUFpQixFQUFBLENBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQWpCOztRQUNBLElBQUcsS0FBQSxLQUFPLENBQVY7VUFBaUIsRUFBQSxDQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUCxFQUFqQjs7UUFDQSxJQUFHLEtBQUEsS0FBTyxDQUFWO1VBQWlCLEVBQUEsQ0FBRyxDQUFILEVBQUssQ0FBTCxFQUFPLENBQVAsRUFBakI7O1FBQ0EsSUFBRyxLQUFBLEtBQU8sQ0FBVjtVQUFpQixFQUFBLENBQUcsQ0FBSCxFQUFLLENBQUwsRUFBTyxDQUFQLEVBQWpCOztRQUNBLElBQUcsS0FBQSxHQUFRLENBQVg7VUFBa0IsSUFBQSxDQUFLLENBQUEsR0FBRSxDQUFQLEVBQVMsQ0FBQSxHQUFFLENBQVgsRUFBYSxDQUFBLEdBQUUsRUFBZixFQUFrQixFQUFsQixFQUFsQjs7QUFORDtBQURELEtBREQ7O0VBU0EsSUFBRyxHQUFIO0lBQVksS0FBQSxDQUFNLEdBQU4sRUFBVyxDQUFYLEVBQWMsQ0FBZCxFQUFaOztFQUNBLENBQUEsR0FBSSxLQUFBLEdBQU07RUFDVixDQUFBLEdBQUksQ0FBQyxNQUFBLEdBQU8sQ0FBUixDQUFBLEdBQWE7RUFDakIsRUFBQSxDQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBUDtFQUNBLENBQUEsR0FBSSxNQUFBLEdBQU87U0FDWCxJQUFBLENBQUssQ0FBTCxFQUFPLENBQVAsRUFBUyxDQUFBLEdBQUUsQ0FBWCxFQUFhLENBQWI7QUFqQk07O0FBbUJQLFlBQUEsR0FBZSxTQUFBO0VBQ2QsSUFBRyxNQUFBLEdBQVMsS0FBQSxHQUFNLENBQWxCO0lBQXlCLE1BQUEsR0FBekI7R0FBQSxNQUFBO0lBQXVDLE1BQUEsR0FBdkM7O0VBQ0EsTUFBQSxHQUFTLFNBQUEsQ0FBVSxNQUFWLEVBQWlCLENBQWpCLEVBQW1CLENBQW5CO0VBQ1QsS0FBQSxDQUFBO1NBQ0E7QUFKYyIsInNvdXJjZXNDb250ZW50IjpbInBhZ2VObyA9IDFcclxuaW1nID0gbnVsbFxyXG5yZWN0cyA9IG51bGxcclxuTiA9IDM1XHJcblxyXG5tYXJrZWRBcmVhcyA9IHt9XHJcbm1hcmtlZEFyZWFzWzFdID0gW1s0LDcsMV0sWzMyLDM1LDJdXVxyXG5tYXJrZWRBcmVhc1syXSA9IFtbMTQsMTcsM10sWzIyLDI1LDRdXVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyA2NDAsMzYwXHJcblx0ZmV0Y2goKVxyXG5cdGZyYW1lUmF0ZSAxMFxyXG5cclxuZmV0Y2ggPSAtPlxyXG5cdGltZyA9IG51bGxcclxuXHRyZWN0cyA9IG51bGxcclxuXHRsb2FkSW1hZ2UgXCJpbWFnZXMvZGF0YSN7cGFnZU5vfS5wbmdcIiwgKF9pbWcpIC0+IGltZyA9IF9pbWdcclxuXHR4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCkgICAgXHJcblx0eG1saHR0cC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSAoKSAtPlxyXG5cdFx0aWYgdGhpcy5yZWFkeVN0YXRlID09IDQgJiYgdGhpcy5zdGF0dXMgPT0gMjAwXHJcblx0XHRcdHJlY3RzID0gSlNPTi5wYXJzZSB0aGlzLnJlc3BvbnNlVGV4dFxyXG5cdHhtbGh0dHAub3BlbiBcIkdFVFwiLCBcImltYWdlcy9kYXRhI3twYWdlTm99Lmpzb25cIiwgdHJ1ZVxyXG5cdHhtbGh0dHAuc2VuZCgpXHJcblxyXG5kcmF3ID0gLT5cclxuXHRiZyAxXHJcblx0c2MoKVxyXG5cdGlmIHJlY3RzIGFuZCBtYXJrZWRBcmVhc1twYWdlTm9dXHJcblx0XHRmb3IgW3N0YXJ0LHN0b3BwLGNvbG9yXSBpbiBtYXJrZWRBcmVhc1twYWdlTm9dXHJcblx0XHRcdGZvciBpIGluIHJhbmdlIHN0YXJ0LHN0b3BwKzFcclxuXHRcdFx0XHRbeCx5LHcsaF0gPSByZWN0c1tpXVxyXG5cdFx0XHRcdGlmIGNvbG9yPT0xIHRoZW4gZmMgMSwwLDBcclxuXHRcdFx0XHRpZiBjb2xvcj09MiB0aGVuIGZjIDAsMSwwXHJcblx0XHRcdFx0aWYgY29sb3I9PTMgdGhlbiBmYyAxLDEsMFxyXG5cdFx0XHRcdGlmIGNvbG9yPT00IHRoZW4gZmMgMCwxLDFcclxuXHRcdFx0XHRpZiBjb2xvciA+IDAgdGhlblx0cmVjdCB4LTYseSs0LHcrMTAsMjlcclxuXHRpZiBpbWcgdGhlbiBpbWFnZSBpbWcsIDAsIDBcclxuXHR3ID0gd2lkdGgvTlxyXG5cdHAgPSAocGFnZU5vLTEpICogd1xyXG5cdHNjIDEsMCwwXHJcblx0eSA9IGhlaWdodC0yXHJcblx0bGluZSBwLHkscCt3LHlcclxuXHJcbm1vdXNlVG91Y2hlZCA9IC0+XHJcblx0aWYgbW91c2VYID4gd2lkdGgvMiB0aGVuIHBhZ2VObysrIGVsc2UgcGFnZU5vLS1cclxuXHRwYWdlTm8gPSBjb25zdHJhaW4gcGFnZU5vLDEsTlxyXG5cdGZldGNoKClcclxuXHRmYWxzZSAiXX0=
//# sourceURL=C:\Lab\2017\127-SchooBoo\coffee\sketch.coffee