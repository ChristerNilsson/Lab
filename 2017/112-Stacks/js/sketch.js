// Generated by CoffeeScript 1.12.7
var BRICKS, Button, HEIGHT, PassButton, RADIE, SIZE, XOFF, YOFF, buttons, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [4];
    }
    if (btn === 20) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [20];
    }
    if (btn === 4) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(0.25);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === 20 || player === 1 && this.nr === 4) {
      sw(2);
      sc(1);
    }
    circle(this.x, this.y, 0.45 * RADIE);
    sw(2);
    sc(0);
    n = this.bricks.length;
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.moveBricks = function() {
    var brick, i, k, len, ref, ref1, ref2;
    if (((ref = this.nr) !== 4 && ref !== 20) && buttons[this.nr].bricks.length > 0) {
      if (moves === 1) {
        return;
      }
      if (moves === 2) {
        moves = 1;
      }
    }
    ref1 = range(buttons[selectedButton].selected);
    for (k = 0, len = ref1.length; k < len; k++) {
      i = ref1[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref2 = this.nr) === 4 || ref2 === 20) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === 4 || selectedButton === 20)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.topBlock = function(bricks) {
    var count;
    count = 0;
    while (bricks[bricks.length - 1 - count] === player) {
      count += 1;
    }
    return count;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.topBlock(this.bricks);
    if (n === 0) {
      return;
    }
    this.selected = modulo(this.selected - 1, n + 1);
    selectedButton = this.selected > 0 ? this.nr : -1;
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  PassButton.prototype.draw = function() {
    PassButton.__super__.draw.apply(this, arguments);
    fc(0.5);
    textSize(32);
    return text(this.nr, this.x, this.y);
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[4].x = buttons[1].x;
  buttons[4].y = buttons[1].y - 2 * RADIE;
  buttons[4].bricks = [1];
  source[1] -= 1;
  buttons[20].x = buttons[23].x;
  buttons[20].y = buttons[23].y + 2 * RADIE;
  buttons[20].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  return xdraw();
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  pop();
  textSize(50);
  return text(message, width / 2, height / 2);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsbUxBQUE7RUFBQTs7Ozs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxLQUFBLEdBQVE7O0FBQ1IsTUFBQSxHQUFTOztBQUNULE1BQUEsR0FBUzs7QUFFVCxPQUFBLEdBQVU7O0FBQ1YsTUFBQSxHQUFTOztBQUNULEtBQUEsR0FBUTs7QUFDUixjQUFBLEdBQWlCLENBQUM7O0FBQ2xCLE1BQUEsR0FBUyxDQUFDLE1BQUQsRUFBUSxNQUFSOztBQUNULE1BQUEsR0FBUyxDQUFDLENBQUQsRUFBRyxDQUFIOztBQUNULE9BQUEsR0FBVTs7QUFFVixVQUFBLEdBQWEsU0FBQyxHQUFEO0VBQ1osSUFBRyxNQUFBLEtBQVUsQ0FBYjtJQUNDLElBQUcsR0FBQSxLQUFRLENBQVIsSUFBQSxHQUFBLEtBQVUsQ0FBVixJQUFBLEdBQUEsS0FBWSxDQUFmO0FBQXVCLGFBQU8sQ0FBQyxDQUFELEVBQTlCOztJQUNBLElBQUcsR0FBQSxLQUFPLEVBQVY7QUFBa0IsYUFBTyxDQUFDLEVBQUQsRUFBSSxFQUFKLEVBQU8sRUFBUCxFQUF6Qjs7QUFDQSxXQUFPLENBQUMsR0FBQSxHQUFJLENBQUwsRUFBTyxHQUFBLEdBQUksQ0FBWCxFQUhSO0dBQUEsTUFBQTtJQUtDLElBQUcsR0FBQSxLQUFRLEVBQVIsSUFBQSxHQUFBLEtBQVcsRUFBWCxJQUFBLEdBQUEsS0FBYyxFQUFqQjtBQUEwQixhQUFPLENBQUMsRUFBRCxFQUFqQzs7SUFDQSxJQUFHLEdBQUEsS0FBTyxDQUFWO0FBQWlCLGFBQU8sQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBeEI7O0FBQ0EsV0FBTyxDQUFDLEdBQUEsR0FBSSxDQUFMLEVBQU8sR0FBQSxHQUFJLENBQVgsRUFQUjs7QUFEWTs7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SUFBUixDQUFhLE1BQWI7RUFDQSxNQUFNLENBQUMsQ0FBUCxHQUFXLE9BQVEsQ0FBQSxFQUFBLENBQUcsQ0FBQztFQUN2QixNQUFNLENBQUMsQ0FBUCxHQUFXLE9BQVEsQ0FBQSxDQUFBLENBQUUsQ0FBQztFQUV0QixRQUFBLENBQVMsRUFBVDtFQUNBLFNBQUEsQ0FBVSxNQUFWLEVBQWlCLE1BQWpCO0VBQ0EsUUFBQSxDQUFTLE1BQVQ7U0FDQSxLQUFBLENBQUE7QUF2Qk87O0FBeUJSLEtBQUEsR0FBUSxTQUFBO0FBQ1AsTUFBQTtFQUFBLEVBQUEsQ0FBRyxHQUFIO0VBQ0EsSUFBQSxDQUFBO0VBQ0EsS0FBQSxDQUFNLENBQU4sRUFBUSxHQUFSO0VBQ0EsU0FBQSxDQUFVLElBQVYsRUFBZSxJQUFmO0FBQ0EsT0FBQSx5Q0FBQTs7SUFDQyxNQUFNLENBQUMsSUFBUCxDQUFBO0FBREQ7RUFFQSxHQUFBLENBQUE7RUFDQSxRQUFBLENBQVMsRUFBVDtTQUNBLElBQUEsQ0FBSyxPQUFMLEVBQWEsS0FBQSxHQUFNLENBQW5CLEVBQXFCLE1BQUEsR0FBTyxDQUE1QjtBQVRPOztBQVdSLFlBQUEsR0FBZSxTQUFBO0FBQ2QsTUFBQTtBQUFBO09BQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxZQUFQLENBQW9CLE1BQXBCLEVBQTJCLE1BQTNCO0FBREQ7O0FBRGMiLCJzb3VyY2VzQ29udGVudCI6WyIjIGJpdC5seS9zdGFja3NydWxlc1xyXG4jIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9REZnOUEzVEMxRU0mZmVhdHVyZT15b3V0dS5iZVxyXG4jIGJpdC5seS9zdGFja3Nib2FyZFxyXG5cclxuWE9GRiA9IDIyMFxyXG5ZT0ZGID0gMzgwXHJcblNJWkUgPSA2MDBcclxuUkFESUUgPSAxMzBcclxuSEVJR0hUID0gMTVcclxuQlJJQ0tTID0gMTJcclxuXHJcbmJ1dHRvbnMgPSBbXVxyXG5wbGF5ZXIgPSAwXHJcbm1vdmVzID0gMVxyXG5zZWxlY3RlZEJ1dHRvbiA9IC0xXHJcbnNvdXJjZSA9IFtCUklDS1MsQlJJQ0tTXVxyXG50YXJnZXQgPSBbMCwwXVxyXG5tZXNzYWdlID0gJydcclxuXHJcbmxlZ2FsTW92ZXMgPSAoYnRuKSAtPlxyXG5cdGlmIHBsYXllciA9PSAwXHJcblx0XHRpZiBidG4gaW4gWzAsMSwyXSB0aGVuIHJldHVybiBbNF0gXHJcblx0XHRpZiBidG4gPT0gMjAgdGhlbiByZXR1cm4gWzIyLDIzLDI0XSBcclxuXHRcdHJldHVybiBbYnRuLTUsYnRuLTZdIFxyXG5cdGVsc2VcclxuXHRcdGlmIGJ0biBpbiBbMjIsMjMsMjRdIHRoZW4gcmV0dXJuIFsyMF0gXHJcblx0XHRpZiBidG4gPT0gNCB0aGVuIHJldHVybiBbMCwxLDJdIFxyXG5cdFx0cmV0dXJuIFtidG4rNSxidG4rNl0gXHJcblxyXG5wb3NzaWJsZU1vdmVzID0gLT5cclxuXHRyZXMgPSBmYWxzZSBcclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGlmIF8ubGFzdChidXR0b24uYnJpY2tzKSA9PSBwbGF5ZXIgXHJcblx0XHRcdGlmIG1vdmVzPT0yIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdFx0XHRmb3IgbW92ZSBpbiBsZWdhbE1vdmVzIGJ1dHRvbi5uciBcclxuXHRcdFx0XHRpZiBidXR0b25zW21vdmVdLmJyaWNrcy5sZW5ndGg9PTAgdGhlbiByZXMgPSB0cnVlXHJcblx0cmVzXHJcblxyXG5jbGFzcyBCdXR0b24gXHJcblx0Y29uc3RydWN0b3IgOiAoQG5yKSAtPlxyXG5cdFx0aSA9IEBuciAlIDVcclxuXHRcdGogPSBpbnQgQG5yIC8gNVxyXG5cdFx0QHggPSBSQURJRSAqIChpIC0gMC41KmopIFxyXG5cdFx0QHkgPSBSQURJRSAqIDAuODgqalxyXG5cdFx0QGJyaWNrcyA9IFtdXHJcblx0XHRAc2VsZWN0ZWQgPSAwXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0aWYgQG5yIGluIFszLDksMTUsMjFdIHRoZW4gcmV0dXJuIFxyXG5cdFx0ZmMgMC4yNVxyXG5cclxuXHRcdHNjIDBcclxuXHRcdHN3IDFcclxuXHRcdGlmIHBsYXllcj09MCBhbmQgQG5yPT0yMCBvciBwbGF5ZXI9PTEgYW5kIEBucj09NCBcclxuXHRcdFx0c3cgMlxyXG5cdFx0XHRzYyAxXHJcblx0XHRjaXJjbGUgQHgsIEB5LCAwLjQ1ICogUkFESUVcclxuXHRcdHN3IDJcclxuXHJcblx0XHQjdGV4dCBAbnIsQHgsQHlcclxuXHRcdHNjIDBcclxuXHRcdG4gPSBAYnJpY2tzLmxlbmd0aFxyXG5cdFx0Zm9yIGJyaWNrLGkgaW4gQGJyaWNrc1xyXG5cdFx0XHRpZiBAc2VsZWN0ZWQgPj0gbi1pIHRoZW4gZmMgMCwxLDAsMC41XHRlbHNlIGZjIDEsYnJpY2ssMCwwLjVcclxuXHRcdFx0Y2lyY2xlIEB4LCBAeS1pKkhFSUdIVCwgMC4yNSAqIFJBRElFIFxyXG5cclxuXHRtb3ZlQnJpY2tzIDogLT4gIyBmcm9tIHNlbGVjdGVkQnV0dG9uIHRvIEBuclxyXG5cdFx0aWYgQG5yIG5vdCBpbiBbNCwyMF0gYW5kIGJ1dHRvbnNbQG5yXS5icmlja3MubGVuZ3RoID4gMCBcclxuXHRcdFx0aWYgbW92ZXMgPT0gMSB0aGVuIHJldHVybiAgXHJcblx0XHRcdGlmIG1vdmVzID09IDIgdGhlbiBtb3ZlcyA9IDFcclxuXHJcblx0XHRmb3IgaSBpbiByYW5nZSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZFxyXG5cdFx0XHRicmljayA9IGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLmJyaWNrcy5wb3AoKVxyXG5cdFx0XHRpZiBAbnIgaW4gWzQsMjBdXHJcblx0XHRcdFx0dGFyZ2V0W3BsYXllcl0gKz0gMVxyXG5cdFx0XHRcdGlmIHRhcmdldFtwbGF5ZXJdID09IEJSSUNLU1xyXG5cdFx0XHRcdFx0bWVzc2FnZSA9IFsnUmVkJywnWWVsbG93J11bcGxheWVyXSArICcgd29uISdcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdEBicmlja3MucHVzaCBicmljayBcclxuXHJcblx0XHRpZiBzb3VyY2VbcGxheWVyXSA+IDAgYW5kIHNlbGVjdGVkQnV0dG9uIGluIFs0LDIwXVxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5icmlja3MucHVzaCBwbGF5ZXJcclxuXHRcdFx0c291cmNlW3BsYXllcl0gLT0gMVxyXG5cclxuXHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cdFx0c2VsZWN0ZWRCdXR0b24gPSAtMVxyXG5cclxuXHRcdG1vdmVzIC09IDEgXHJcblx0XHRpZiBtb3ZlcyA9PSAwXHJcblx0XHRcdHBsYXllciA9IDEgLSBwbGF5ZXJcclxuXHRcdFx0bW92ZXMgPSAyXHJcblx0XHR4ZHJhdygpXHJcblxyXG5cdGluc2lkZSA6IChteCxteSkgLT4gZGlzdChAeCArIFhPRkYsIChAeSArIFlPRkYpLzIsIG14LCBteSkgPCAwLjUgKiBSQURJRVxyXG5cdFx0XHRcclxuXHR0b3BCbG9jayA6IChicmlja3MpIC0+XHJcblx0XHRjb3VudCA9IDBcclxuXHRcdHdoaWxlIGJyaWNrc1ticmlja3MubGVuZ3RoLTEtY291bnRdPT1wbGF5ZXJcclxuXHRcdFx0Y291bnQgKz0gMVxyXG5cdFx0Y291bnRcclxuXHJcblx0bW91c2VQcmVzc2VkIDogKG14LG15KSAtPlxyXG5cdFx0aWYgbm90IEBpbnNpZGUgbXgsbXkgdGhlbiByZXR1cm4gXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuciAjIE1hcmtlcmluZyBhdiB0aWxscnV0YVxyXG5cdFx0XHRpZiBAbnIgaW4gbGVnYWxNb3ZlcyBzZWxlY3RlZEJ1dHRvbiB0aGVuIEBtb3ZlQnJpY2tzKClcclxuXHRcdFx0cmV0dXJuXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuclxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHJcblx0XHRuID0gQHRvcEJsb2NrIEBicmlja3NcclxuXHRcdGlmIG4gPT0gMCB0aGVuIHJldHVybiAgXHJcblx0XHRAc2VsZWN0ZWQgPSAoQHNlbGVjdGVkLTEpICUlIChuKzEpXHJcblx0XHRzZWxlY3RlZEJ1dHRvbiA9IGlmIEBzZWxlY3RlZCA+IDAgdGhlbiBAbnIgZWxzZSAtMVxyXG5cclxuXHRcdHhkcmF3KClcclxuXHJcbmNsYXNzIFBhc3NCdXR0b24gZXh0ZW5kcyBCdXR0b25cclxuXHRtb3VzZVByZXNzZWQgOiAobXgsbXkpIC0+XHJcblx0XHRpZiBub3QgQGluc2lkZSBteCxteSB0aGVuIHJldHVyblxyXG5cdFx0aWYgcG9zc2libGVNb3ZlcygpIHRoZW4gcmV0dXJuIFxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24gIT0gLTEgXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cdFx0XHRzZWxlY3RlZEJ1dHRvbiA9IC0xIFxyXG5cdFx0cGxheWVyID0gMSAtIHBsYXllclxyXG5cdFx0eGRyYXcoKVxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdHN1cGVyXHJcblx0XHRmYyAwLjVcclxuXHRcdHRleHRTaXplIDMyXHJcblx0XHR0ZXh0IEBucixAeCxAeVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyBTSVpFKzEwMCxTSVpFXHJcblx0Zm9yIG5yIGluIHJhbmdlIDI1XHJcblx0XHRidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiBuclxyXG5cclxuXHRidXR0b25zWzRdLnggPSBidXR0b25zWzFdLnhcclxuXHRidXR0b25zWzRdLnkgPSBidXR0b25zWzFdLnkgLSAyKlJBRElFXHJcblx0YnV0dG9uc1s0XS5icmlja3MgPSBbMV1cclxuXHRzb3VyY2VbMV0gLT0gMVxyXG5cclxuXHRidXR0b25zWzIwXS54ID0gYnV0dG9uc1syM10ueFxyXG5cdGJ1dHRvbnNbMjBdLnkgPSBidXR0b25zWzIzXS55ICsgMipSQURJRVxyXG5cdGJ1dHRvbnNbMjBdLmJyaWNrcyA9IFswXVxyXG5cdHNvdXJjZVswXSAtPSAxXHJcblxyXG5cdGJ1dHRvbiA9IG5ldyBQYXNzQnV0dG9uICdQYXNzJ1xyXG5cdGJ1dHRvbnMucHVzaCBidXR0b25cclxuXHRidXR0b24ueCA9IGJ1dHRvbnNbMTBdLnhcclxuXHRidXR0b24ueSA9IGJ1dHRvbnNbNF0ueSBcclxuXHJcblx0dGV4dFNpemUgMzJcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdHJlY3RNb2RlIENFTlRFUlxyXG5cdHhkcmF3KClcclxuXHJcbnhkcmF3ID0gLT5cclxuXHRiZyAwLjVcclxuXHRwdXNoKClcclxuXHRzY2FsZSAxLDAuNVxyXG5cdHRyYW5zbGF0ZSBYT0ZGLFlPRkZcclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5kcmF3KClcclxuXHRwb3AoKVxyXG5cdHRleHRTaXplIDUwXHJcblx0dGV4dCBtZXNzYWdlLHdpZHRoLzIsaGVpZ2h0LzJcclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRidXR0b24ubW91c2VQcmVzc2VkIG1vdXNlWCxtb3VzZVkiXX0=
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee