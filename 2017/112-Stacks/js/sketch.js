// Generated by CoffeeScript 1.12.7
var BRICKS, Button, HEIGHT, PassButton, RADIE, SIZE, XOFF, YOFF, buttons, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, showBricks, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [4];
    }
    if (btn === 20) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [20];
    }
    if (btn === 4) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(0.25);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === 20 || player === 1 && this.nr === 4) {
      sw(2);
      sc(1);
    }
    circle(this.x, this.y, 0.45 * RADIE);
    sw(2);
    sc(0);
    n = this.bricks.length;
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.moveBricks = function() {
    var brick, i, k, len, ref, ref1, ref2;
    if (((ref = this.nr) !== 4 && ref !== 20) && buttons[this.nr].bricks.length > 0) {
      if (moves === 1) {
        return;
      }
      if (moves === 2) {
        moves = 1;
      }
    }
    ref1 = range(buttons[selectedButton].selected);
    for (k = 0, len = ref1.length; k < len; k++) {
      i = ref1[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref2 = this.nr) === 4 || ref2 === 20) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === 4 || selectedButton === 20)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.topBlock = function(bricks) {
    var count;
    count = 0;
    while (bricks[bricks.length - 1 - count] === player) {
      count += 1;
    }
    return count;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.topBlock(this.bricks);
    if (n === 0) {
      return;
    }
    this.selected = modulo(this.selected - 1, n + 1);
    selectedButton = this.selected > 0 ? this.nr : -1;
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  PassButton.prototype.draw = function() {
    PassButton.__super__.draw.apply(this, arguments);
    fc(0.5);
    textSize(32);
    return text(this.nr, this.x, this.y);
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[4].x = buttons[1].x;
  buttons[4].y = buttons[1].y - 2 * RADIE;
  buttons[4].bricks = [1];
  source[1] -= 1;
  buttons[20].x = buttons[23].x;
  buttons[20].y = buttons[23].y + 2 * RADIE;
  buttons[20].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  return xdraw();
};

showBricks = function(data, p, x, y) {
  var i, k, len, ref, results;
  ref = range(data[p]);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    fc(1, p, 0, 0.5);
    results.push(circle(x, y - i * HEIGHT, 0.25 * RADIE));
  }
  return results;
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  showBricks(source, 1, 350, -150);
  showBricks(target, 0, 430, -150);
  showBricks(source, 0, 350, 730);
  showBricks(target, 1, 430, 730);
  pop();
  textSize(50);
  return text(message, width / 2, height / 2);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsK0xBQUE7RUFBQTs7Ozs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxLQUFBLEdBQVE7O0FBQ1IsTUFBQSxHQUFTOztBQUNULE1BQUEsR0FBUzs7QUFFVCxPQUFBLEdBQVU7O0FBQ1YsTUFBQSxHQUFTOztBQUNULEtBQUEsR0FBUTs7QUFDUixjQUFBLEdBQWlCLENBQUM7O0FBQ2xCLE1BQUEsR0FBUyxDQUFDLE1BQUQsRUFBUSxNQUFSOztBQUNULE1BQUEsR0FBUyxDQUFDLENBQUQsRUFBRyxDQUFIOztBQUNULE9BQUEsR0FBVTs7QUFFVixVQUFBLEdBQWEsU0FBQyxHQUFEO0VBQ1osSUFBRyxNQUFBLEtBQVUsQ0FBYjtJQUNDLElBQUcsR0FBQSxLQUFRLENBQVIsSUFBQSxHQUFBLEtBQVUsQ0FBVixJQUFBLEdBQUEsS0FBWSxDQUFmO0FBQXVCLGFBQU8sQ0FBQyxDQUFELEVBQTlCOztJQUNBLElBQUcsR0FBQSxLQUFPLEVBQVY7QUFBa0IsYUFBTyxDQUFDLEVBQUQsRUFBSSxFQUFKLEVBQU8sRUFBUCxFQUF6Qjs7QUFDQSxXQUFPLENBQUMsR0FBQSxHQUFJLENBQUwsRUFBTyxHQUFBLEdBQUksQ0FBWCxFQUhSO0dBQUEsTUFBQTtJQUtDLElBQUcsR0FBQSxLQUFRLEVBQVIsSUFBQSxHQUFBLEtBQVcsRUFBWCxJQUFBLEdBQUEsS0FBYyxFQUFqQjtBQUEwQixhQUFPLENBQUMsRUFBRCxFQUFqQzs7SUFDQSxJQUFHLEdBQUEsS0FBTyxDQUFWO0FBQWlCLGFBQU8sQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLENBQUwsRUFBeEI7O0FBQ0EsV0FBTyxDQUFDLEdBQUEsR0FBSSxDQUFMLEVBQU8sR0FBQSxHQUFJLENBQVgsRUFQUjs7QUFEWTs7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S0FBQSxHQUFNLENBQW5CLEVBQXFCLE1BQUEsR0FBTyxDQUE1QjtBQWZPOztBQWlCUixZQUFBLEdBQWUsU0FBQTtBQUNkLE1BQUE7QUFBQTtPQUFBLHlDQUFBOztpQkFDQyxNQUFNLENBQUMsWUFBUCxDQUFvQixNQUFwQixFQUEyQixNQUEzQjtBQUREOztBQURjIiwic291cmNlc0NvbnRlbnQiOlsiIyBiaXQubHkvc3RhY2tzcnVsZXNcclxuIyBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PURGZzlBM1RDMUVNJmZlYXR1cmU9eW91dHUuYmVcclxuIyBiaXQubHkvc3RhY2tzYm9hcmRcclxuXHJcblhPRkYgPSAyMjBcclxuWU9GRiA9IDM4MFxyXG5TSVpFID0gNjAwXHJcblJBRElFID0gMTMwXHJcbkhFSUdIVCA9IDE1XHJcbkJSSUNLUyA9IDEyXHJcblxyXG5idXR0b25zID0gW11cclxucGxheWVyID0gMFxyXG5tb3ZlcyA9IDFcclxuc2VsZWN0ZWRCdXR0b24gPSAtMVxyXG5zb3VyY2UgPSBbQlJJQ0tTLEJSSUNLU11cclxudGFyZ2V0ID0gWzAsMF1cclxubWVzc2FnZSA9ICcnXHJcblxyXG5sZWdhbE1vdmVzID0gKGJ0bikgLT5cclxuXHRpZiBwbGF5ZXIgPT0gMFxyXG5cdFx0aWYgYnRuIGluIFswLDEsMl0gdGhlbiByZXR1cm4gWzRdIFxyXG5cdFx0aWYgYnRuID09IDIwIHRoZW4gcmV0dXJuIFsyMiwyMywyNF0gXHJcblx0XHRyZXR1cm4gW2J0bi01LGJ0bi02XSBcclxuXHRlbHNlXHJcblx0XHRpZiBidG4gaW4gWzIyLDIzLDI0XSB0aGVuIHJldHVybiBbMjBdIFxyXG5cdFx0aWYgYnRuID09IDQgdGhlbiByZXR1cm4gWzAsMSwyXSBcclxuXHRcdHJldHVybiBbYnRuKzUsYnRuKzZdIFxyXG5cclxucG9zc2libGVNb3ZlcyA9IC0+XHJcblx0cmVzID0gZmFsc2UgXHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRpZiBfLmxhc3QoYnV0dG9uLmJyaWNrcykgPT0gcGxheWVyIFxyXG5cdFx0XHRpZiBtb3Zlcz09MiB0aGVuIHJlcyA9IHRydWVcclxuXHRcdFx0Zm9yIG1vdmUgaW4gbGVnYWxNb3ZlcyBidXR0b24ubnIgXHJcblx0XHRcdFx0aWYgYnV0dG9uc1ttb3ZlXS5icmlja3MubGVuZ3RoPT0wIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdHJlc1xyXG5cclxuY2xhc3MgQnV0dG9uIFxyXG5cdGNvbnN0cnVjdG9yIDogKEBucikgLT5cclxuXHRcdGkgPSBAbnIgJSA1XHJcblx0XHRqID0gaW50IEBuciAvIDVcclxuXHRcdEB4ID0gUkFESUUgKiAoaSAtIDAuNSpqKSBcclxuXHRcdEB5ID0gUkFESUUgKiAwLjg4KmpcclxuXHRcdEBicmlja3MgPSBbXVxyXG5cdFx0QHNlbGVjdGVkID0gMFxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGlmIEBuciBpbiBbMyw5LDE1LDIxXSB0aGVuIHJldHVybiBcclxuXHRcdGZjIDAuMjVcclxuXHJcblx0XHRzYyAwXHJcblx0XHRzdyAxXHJcblx0XHRpZiBwbGF5ZXI9PTAgYW5kIEBucj09MjAgb3IgcGxheWVyPT0xIGFuZCBAbnI9PTQgXHJcblx0XHRcdHN3IDJcclxuXHRcdFx0c2MgMVxyXG5cdFx0Y2lyY2xlIEB4LCBAeSwgMC40NSAqIFJBRElFXHJcblx0XHRzdyAyXHJcblxyXG5cdFx0I3RleHQgQG5yLEB4LEB5XHJcblx0XHRzYyAwXHJcblx0XHRuID0gQGJyaWNrcy5sZW5ndGhcclxuXHRcdGZvciBicmljayxpIGluIEBicmlja3NcclxuXHRcdFx0aWYgQHNlbGVjdGVkID49IG4taSB0aGVuIGZjIDAsMSwwLDAuNVx0ZWxzZSBmYyAxLGJyaWNrLDAsMC41XHJcblx0XHRcdGNpcmNsZSBAeCwgQHktaSpIRUlHSFQsIDAuMjUgKiBSQURJRSBcclxuXHJcblx0bW92ZUJyaWNrcyA6IC0+ICMgZnJvbSBzZWxlY3RlZEJ1dHRvbiB0byBAbnJcclxuXHRcdGlmIEBuciBub3QgaW4gWzQsMjBdIGFuZCBidXR0b25zW0Bucl0uYnJpY2tzLmxlbmd0aCA+IDAgXHJcblx0XHRcdGlmIG1vdmVzID09IDEgdGhlbiByZXR1cm4gIFxyXG5cdFx0XHRpZiBtb3ZlcyA9PSAyIHRoZW4gbW92ZXMgPSAxXHJcblxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgYnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWRcclxuXHRcdFx0YnJpY2sgPSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5icmlja3MucG9wKClcclxuXHRcdFx0aWYgQG5yIGluIFs0LDIwXVxyXG5cdFx0XHRcdHRhcmdldFtwbGF5ZXJdICs9IDFcclxuXHRcdFx0XHRpZiB0YXJnZXRbcGxheWVyXSA9PSBCUklDS1NcclxuXHRcdFx0XHRcdG1lc3NhZ2UgPSBbJ1JlZCcsJ1llbGxvdyddW3BsYXllcl0gKyAnIHdvbiEnXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRAYnJpY2tzLnB1c2ggYnJpY2sgXHJcblxyXG5cdFx0aWYgc291cmNlW3BsYXllcl0gPiAwIGFuZCBzZWxlY3RlZEJ1dHRvbiBpbiBbNCwyMF1cclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uYnJpY2tzLnB1c2ggcGxheWVyXHJcblx0XHRcdHNvdXJjZVtwbGF5ZXJdIC09IDFcclxuXHJcblx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHRcdHNlbGVjdGVkQnV0dG9uID0gLTFcclxuXHJcblx0XHRtb3ZlcyAtPSAxIFxyXG5cdFx0aWYgbW92ZXMgPT0gMFxyXG5cdFx0XHRwbGF5ZXIgPSAxIC0gcGxheWVyXHJcblx0XHRcdG1vdmVzID0gMlxyXG5cdFx0eGRyYXcoKVxyXG5cclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+IGRpc3QoQHggKyBYT0ZGLCAoQHkgKyBZT0ZGKS8yLCBteCwgbXkpIDwgMC41ICogUkFESUVcclxuXHRcdFx0XHJcblx0dG9wQmxvY2sgOiAoYnJpY2tzKSAtPlxyXG5cdFx0Y291bnQgPSAwXHJcblx0XHR3aGlsZSBicmlja3NbYnJpY2tzLmxlbmd0aC0xLWNvdW50XT09cGxheWVyXHJcblx0XHRcdGNvdW50ICs9IDFcclxuXHRcdGNvdW50XHJcblxyXG5cdG1vdXNlUHJlc3NlZCA6IChteCxteSkgLT5cclxuXHRcdGlmIG5vdCBAaW5zaWRlIG14LG15IHRoZW4gcmV0dXJuIFxyXG5cclxuXHRcdGlmIHNlbGVjdGVkQnV0dG9uPj0wIGFuZCBzZWxlY3RlZEJ1dHRvbiAhPSBAbnIgIyBNYXJrZXJpbmcgYXYgdGlsbHJ1dGFcclxuXHRcdFx0aWYgQG5yIGluIGxlZ2FsTW92ZXMgc2VsZWN0ZWRCdXR0b24gdGhlbiBAbW92ZUJyaWNrcygpXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdGlmIHNlbGVjdGVkQnV0dG9uPj0wIGFuZCBzZWxlY3RlZEJ1dHRvbiAhPSBAbnJcclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblxyXG5cdFx0biA9IEB0b3BCbG9jayBAYnJpY2tzXHJcblx0XHRpZiBuID09IDAgdGhlbiByZXR1cm4gIFxyXG5cdFx0QHNlbGVjdGVkID0gKEBzZWxlY3RlZC0xKSAlJSAobisxKVxyXG5cdFx0c2VsZWN0ZWRCdXR0b24gPSBpZiBAc2VsZWN0ZWQgPiAwIHRoZW4gQG5yIGVsc2UgLTFcclxuXHJcblx0XHR4ZHJhdygpXHJcblxyXG5jbGFzcyBQYXNzQnV0dG9uIGV4dGVuZHMgQnV0dG9uXHJcblx0bW91c2VQcmVzc2VkIDogKG14LG15KSAtPlxyXG5cdFx0aWYgbm90IEBpbnNpZGUgbXgsbXkgdGhlbiByZXR1cm5cclxuXHRcdGlmIHBvc3NpYmxlTW92ZXMoKSB0aGVuIHJldHVybiBcclxuXHRcdGlmIHNlbGVjdGVkQnV0dG9uICE9IC0xIFxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHRcdFx0c2VsZWN0ZWRCdXR0b24gPSAtMSBcclxuXHRcdHBsYXllciA9IDEgLSBwbGF5ZXJcclxuXHRcdHhkcmF3KClcclxuXHJcblx0ZHJhdyA6IC0+XHJcblx0XHRzdXBlclxyXG5cdFx0ZmMgMC41XHJcblx0XHR0ZXh0U2l6ZSAzMlxyXG5cdFx0dGV4dCBAbnIsQHgsQHlcclxuXHJcbnNldHVwID0gLT5cclxuXHRjcmVhdGVDYW52YXMgU0laRSsxMDAsU0laRVxyXG5cdGZvciBuciBpbiByYW5nZSAyNVxyXG5cdFx0YnV0dG9ucy5wdXNoIG5ldyBCdXR0b24gbnJcclxuXHJcblx0YnV0dG9uc1s0XS54ID0gYnV0dG9uc1sxXS54XHJcblx0YnV0dG9uc1s0XS55ID0gYnV0dG9uc1sxXS55IC0gMipSQURJRVxyXG5cdGJ1dHRvbnNbNF0uYnJpY2tzID0gWzFdXHJcblx0c291cmNlWzFdIC09IDFcclxuXHJcblx0YnV0dG9uc1syMF0ueCA9IGJ1dHRvbnNbMjNdLnhcclxuXHRidXR0b25zWzIwXS55ID0gYnV0dG9uc1syM10ueSArIDIqUkFESUVcclxuXHRidXR0b25zWzIwXS5icmlja3MgPSBbMF1cclxuXHRzb3VyY2VbMF0gLT0gMVxyXG5cclxuXHRidXR0b24gPSBuZXcgUGFzc0J1dHRvbiAnUGFzcydcclxuXHRidXR0b25zLnB1c2ggYnV0dG9uXHJcblx0YnV0dG9uLnggPSBidXR0b25zWzEwXS54XHJcblx0YnV0dG9uLnkgPSBidXR0b25zWzRdLnkgXHJcblxyXG5cdHRleHRTaXplIDMyXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRyZWN0TW9kZSBDRU5URVJcclxuXHR4ZHJhdygpXHJcblxyXG5zaG93QnJpY2tzID0gKGRhdGEscCx4LHkpIC0+XHJcblx0Zm9yIGkgaW4gcmFuZ2UgZGF0YVtwXVxyXG5cdFx0ZmMgMSxwLDAsMC41XHJcblx0XHRjaXJjbGUgeCwgeS1pKkhFSUdIVCwgMC4yNSAqIFJBRElFIFxyXG5cclxueGRyYXcgPSAtPlxyXG5cdGJnIDAuNVxyXG5cdHB1c2goKVxyXG5cdHNjYWxlIDEsMC41XHJcblx0dHJhbnNsYXRlIFhPRkYsWU9GRlxyXG5cdGZvciBidXR0b24gaW4gYnV0dG9uc1xyXG5cdFx0YnV0dG9uLmRyYXcoKVxyXG5cclxuXHRzaG93QnJpY2tzIHNvdXJjZSwxLDM1MCwtMTUwXHJcblx0c2hvd0JyaWNrcyB0YXJnZXQsMCw0MzAsLTE1MFxyXG5cdHNob3dCcmlja3Mgc291cmNlLDAsMzUwLDczMFxyXG5cdHNob3dCcmlja3MgdGFyZ2V0LDEsNDMwLDczMFxyXG5cclxuXHRwb3AoKVxyXG5cdHRleHRTaXplIDUwXHJcblx0dGV4dCBtZXNzYWdlLHdpZHRoLzIsaGVpZ2h0LzJcclxuXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRidXR0b24ubW91c2VQcmVzc2VkIG1vdXNlWCxtb3VzZVkiXX0=
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee