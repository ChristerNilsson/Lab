// Generated by CoffeeScript 1.12.7
var ALPHABET, BRICKS, Button, HEIGHT, PassButton, RADIE, RED, SIZE, XOFF, YELLOW, YOFF, buttons, hist, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, showBricks, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

ALPHABET = 'abc Ydefg hijklnmnopR qrs';

YELLOW = 4;

RED = 20;

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

hist = [];

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [YELLOW];
    }
    if (btn === RED) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [RED];
    }
    if (btn === YELLOW) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(0.25);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === RED || player === 1 && this.nr === YELLOW) {
      sw(2);
      sc(1);
    }
    circle(this.x, this.y, 0.45 * RADIE);
    sw(2);
    if (this.nr === 'Pass') {
      text(this.nr, this.x, this.y);
    } else {
      text(ALPHABET[this.nr], this.x, this.y);
    }
    sc(0);
    n = this.bricks.length;
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.printHistory = function() {
    var count, k, lastp, len, move, p, ref, s;
    lastp = 0;
    count = 1;
    s = count + ' ';
    for (k = 0, len = hist.length; k < len; k++) {
      ref = hist[k], p = ref[0], move = ref[1];
      if (p !== lastp) {
        if (p === 0) {
          print(s);
          count += 1;
          s = count + ' ';
        }
        if (p === 1) {
          s = s + '| ';
        }
        lastp = p;
      }
      s = s + move + ' ';
    }
    return print(s);
  };

  Button.prototype.moveBricks = function() {
    var brick, count, i, k, len, ref, ref1, ref2;
    if (((ref = this.nr) !== YELLOW && ref !== RED) && buttons[this.nr].bricks.length > 0) {
      if (moves === 1) {
        return;
      }
      if (moves === 2) {
        moves = 1;
      }
    }
    count = buttons[selectedButton].selected;
    if (count === 1) {
      count = '';
    }
    hist.push([player, ALPHABET[selectedButton] + ALPHABET[this.nr] + count]);
    ref1 = range(buttons[selectedButton].selected);
    for (k = 0, len = ref1.length; k < len; k++) {
      i = ref1[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref2 = this.nr) === YELLOW || ref2 === RED) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
          this.printHistory();
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === YELLOW || selectedButton === RED)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.topBlock = function(bricks) {
    var count;
    count = 0;
    while (bricks[bricks.length - 1 - count] === player) {
      count += 1;
    }
    return count;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.topBlock(this.bricks);
    if (n === 0) {
      return;
    }
    this.selected = modulo(this.selected - 1, n + 1);
    selectedButton = this.selected > 0 ? this.nr : -1;
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  PassButton.prototype.draw = function() {
    PassButton.__super__.draw.apply(this, arguments);
    fc(0.5);
    textSize(32);
    return text(this.nr, this.x, this.y);
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[YELLOW].x = buttons[1].x;
  buttons[YELLOW].y = buttons[1].y - 2 * RADIE;
  buttons[YELLOW].bricks = [1];
  source[1] -= 1;
  buttons[RED].x = buttons[23].x;
  buttons[RED].y = buttons[23].y + 2 * RADIE;
  buttons[RED].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  return xdraw();
};

showBricks = function(data, p, x, y) {
  var i, k, len, ref, results;
  ref = range(data[p]);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    fc(1, p, 0, 0.5);
    results.push(circle(x, y - i * HEIGHT, 0.25 * RADIE));
  }
  return results;
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  showBricks(source, 1, 350, -150);
  showBricks(target, 0, 430, -150);
  showBricks(source, 0, 350, 730);
  showBricks(target, 1, 430, 730);
  pop();
  textSize(50);
  return text(message, width / 2, height / 2);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsNE5BQUE7RUFBQTs7Ozs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxLQUFBLEdBQVE7O0FBQ1IsTUFBQSxHQUFTOztBQUNULE1BQUEsR0FBUzs7QUFDVCxRQUFBLEdBQVc7O0FBQ1gsTUFBQSxHQUFTOztBQUNULEdBQUEsR0FBTTs7QUFFTixPQUFBLEdBQVU7O0FBQ1YsTUFBQSxHQUFTOztBQUNULEtBQUEsR0FBUTs7QUFDUixjQUFBLEdBQWlCLENBQUM7O0FBQ2xCLE1BQUEsR0FBUyxDQUFDLE1BQUQsRUFBUSxNQUFSOztBQUNULE1BQUEsR0FBUyxDQUFDLENBQUQsRUFBRyxDQUFIOztBQUNULE9BQUEsR0FBVTs7QUFDVixJQUFBLEdBQU87O0FBRVAsVUFBQSxHQUFhLFNBQUMsR0FBRDtFQUNaLElBQUcsTUFBQSxLQUFVLENBQWI7SUFDQyxJQUFHLEdBQUEsS0FBUSxDQUFSLElBQUEsR0FBQSxLQUFVLENBQVYsSUFBQSxHQUFBLEtBQVksQ0FBZjtBQUF1QixhQUFPLENBQUMsTUFBRCxFQUE5Qjs7SUFDQSxJQUFHLEdBQUEsS0FBTyxHQUFWO0FBQW1CLGFBQU8sQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLEVBQVAsRUFBMUI7O0FBQ0EsV0FBTyxDQUFDLEdBQUEsR0FBSSxDQUFMLEVBQU8sR0FBQSxHQUFJLENBQVgsRUFIUjtHQUFBLE1BQUE7SUFLQyxJQUFHLEdBQUEsS0FBUSxFQUFSLElBQUEsR0FBQSxLQUFXLEVBQVgsSUFBQSxHQUFBLEtBQWMsRUFBakI7QUFBMEIsYUFBTyxDQUFDLEdBQUQsRUFBakM7O0lBQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtBQUFzQixhQUFPLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQTdC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Q0FBbkIsRUFBcUIsTUFBQSxHQUFPLENBQTVCO0FBZk87O0FBaUJSLFlBQUEsR0FBZSxTQUFBO0FBQ2QsTUFBQTtBQUFBO09BQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxZQUFQLENBQW9CLE1BQXBCLEVBQTJCLE1BQTNCO0FBREQ7O0FBRGMiLCJzb3VyY2VzQ29udGVudCI6WyIjIGJpdC5seS9zdGFja3NydWxlc1xyXG4jIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9REZnOUEzVEMxRU0mZmVhdHVyZT15b3V0dS5iZVxyXG4jIGJpdC5seS9zdGFja3Nib2FyZFxyXG5cclxuWE9GRiA9IDIyMFxyXG5ZT0ZGID0gMzgwXHJcblNJWkUgPSA2MDBcclxuUkFESUUgPSAxMzBcclxuSEVJR0hUID0gMTVcclxuQlJJQ0tTID0gMTJcclxuQUxQSEFCRVQgPSAnYWJjIFlkZWZnIGhpamtsbm1ub3BSIHFycydcclxuWUVMTE9XID0gNFxyXG5SRUQgPSAyMFxyXG5cclxuYnV0dG9ucyA9IFtdXHJcbnBsYXllciA9IDBcclxubW92ZXMgPSAxXHJcbnNlbGVjdGVkQnV0dG9uID0gLTFcclxuc291cmNlID0gW0JSSUNLUyxCUklDS1NdXHJcbnRhcmdldCA9IFswLDBdXHJcbm1lc3NhZ2UgPSAnJ1xyXG5oaXN0ID0gW11cclxuXHJcbmxlZ2FsTW92ZXMgPSAoYnRuKSAtPlxyXG5cdGlmIHBsYXllciA9PSAwXHJcblx0XHRpZiBidG4gaW4gWzAsMSwyXSB0aGVuIHJldHVybiBbWUVMTE9XXSBcclxuXHRcdGlmIGJ0biA9PSBSRUQgdGhlbiByZXR1cm4gWzIyLDIzLDI0XSBcclxuXHRcdHJldHVybiBbYnRuLTUsYnRuLTZdIFxyXG5cdGVsc2VcclxuXHRcdGlmIGJ0biBpbiBbMjIsMjMsMjRdIHRoZW4gcmV0dXJuIFtSRURdIFxyXG5cdFx0aWYgYnRuID09IFlFTExPVyB0aGVuIHJldHVybiBbMCwxLDJdIFxyXG5cdFx0cmV0dXJuIFtidG4rNSxidG4rNl0gXHJcblxyXG5wb3NzaWJsZU1vdmVzID0gLT5cclxuXHRyZXMgPSBmYWxzZSBcclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGlmIF8ubGFzdChidXR0b24uYnJpY2tzKSA9PSBwbGF5ZXIgXHJcblx0XHRcdGlmIG1vdmVzPT0yIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdFx0XHRmb3IgbW92ZSBpbiBsZWdhbE1vdmVzIGJ1dHRvbi5uciBcclxuXHRcdFx0XHRpZiBidXR0b25zW21vdmVdLmJyaWNrcy5sZW5ndGg9PTAgdGhlbiByZXMgPSB0cnVlXHJcblx0cmVzXHJcblxyXG5jbGFzcyBCdXR0b24gXHJcblx0Y29uc3RydWN0b3IgOiAoQG5yKSAtPlxyXG5cdFx0aSA9IEBuciAlIDVcclxuXHRcdGogPSBpbnQgQG5yIC8gNVxyXG5cdFx0QHggPSBSQURJRSAqIChpIC0gMC41KmopIFxyXG5cdFx0QHkgPSBSQURJRSAqIDAuODgqalxyXG5cdFx0QGJyaWNrcyA9IFtdXHJcblx0XHRAc2VsZWN0ZWQgPSAwXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0aWYgQG5yIGluIFszLDksMTUsMjFdIHRoZW4gcmV0dXJuIFxyXG5cdFx0ZmMgMC4yNVxyXG5cclxuXHRcdHNjIDBcclxuXHRcdHN3IDFcclxuXHRcdGlmIHBsYXllcj09MCBhbmQgQG5yPT1SRUQgb3IgcGxheWVyPT0xIGFuZCBAbnI9PVlFTExPV1xyXG5cdFx0XHRzdyAyXHJcblx0XHRcdHNjIDFcclxuXHRcdGNpcmNsZSBAeCwgQHksIDAuNDUgKiBSQURJRVxyXG5cdFx0c3cgMlxyXG5cclxuXHRcdGlmIEBuciA9PSAnUGFzcycgXHJcblx0XHRcdHRleHQgQG5yLEB4LEB5XHJcblx0XHRlbHNlXHJcblx0XHRcdHRleHQgQUxQSEFCRVRbQG5yXSxAeCxAeVxyXG5cclxuXHRcdHNjIDBcclxuXHRcdG4gPSBAYnJpY2tzLmxlbmd0aFxyXG5cdFx0Zm9yIGJyaWNrLGkgaW4gQGJyaWNrc1xyXG5cdFx0XHRpZiBAc2VsZWN0ZWQgPj0gbi1pIHRoZW4gZmMgMCwxLDAsMC41XHRlbHNlIGZjIDEsYnJpY2ssMCwwLjVcclxuXHRcdFx0Y2lyY2xlIEB4LCBAeS1pKkhFSUdIVCwgMC4yNSAqIFJBRElFIFxyXG5cclxuXHRwcmludEhpc3RvcnkgOiAtPlxyXG5cdFx0bGFzdHAgPSAwXHJcblx0XHRjb3VudCA9IDFcclxuXHRcdHMgPSBjb3VudCArICcgJ1xyXG5cdFx0Zm9yIFtwLG1vdmVdIGluIGhpc3RcclxuXHRcdFx0aWYgcCE9bGFzdHAgXHJcblx0XHRcdFx0aWYgcD09MFxyXG5cdFx0XHRcdFx0cHJpbnQgc1xyXG5cdFx0XHRcdFx0Y291bnQgKz0gMSBcclxuXHRcdFx0XHRcdHMgPSBjb3VudCArICcgJ1xyXG5cdFx0XHRcdGlmIHA9PTFcclxuXHRcdFx0XHRcdHMgPSBzICsgJ3wgJ1xyXG5cdFx0XHRcdGxhc3RwPXBcclxuXHRcdFx0cyA9IHMgKyBtb3ZlICsgJyAnXHJcblx0XHRwcmludCBzXHJcblxyXG5cdG1vdmVCcmlja3MgOiAtPiAjIGZyb20gc2VsZWN0ZWRCdXR0b24gdG8gQG5yXHJcblx0XHRpZiBAbnIgbm90IGluIFtZRUxMT1csUkVEXSBhbmQgYnV0dG9uc1tAbnJdLmJyaWNrcy5sZW5ndGggPiAwIFxyXG5cdFx0XHRpZiBtb3ZlcyA9PSAxIHRoZW4gcmV0dXJuICBcclxuXHRcdFx0aWYgbW92ZXMgPT0gMiB0aGVuIG1vdmVzID0gMVxyXG5cclxuXHRcdGNvdW50ID0gYnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWRcclxuXHRcdGlmIGNvdW50ID09IDEgdGhlbiBjb3VudCA9ICcnIFxyXG5cdFx0aGlzdC5wdXNoIFtwbGF5ZXIsQUxQSEFCRVRbc2VsZWN0ZWRCdXR0b25dK0FMUEhBQkVUW0Bucl0rY291bnRdXHJcblxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgYnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWRcclxuXHRcdFx0YnJpY2sgPSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5icmlja3MucG9wKClcclxuXHRcdFx0aWYgQG5yIGluIFtZRUxMT1csUkVEXVxyXG5cdFx0XHRcdHRhcmdldFtwbGF5ZXJdICs9IDFcclxuXHRcdFx0XHRpZiB0YXJnZXRbcGxheWVyXSA9PSBCUklDS1NcclxuXHRcdFx0XHRcdG1lc3NhZ2UgPSBbJ1JlZCcsJ1llbGxvdyddW3BsYXllcl0gKyAnIHdvbiEnXHJcblx0XHRcdFx0XHRAcHJpbnRIaXN0b3J5KClcclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHRcdEBicmlja3MucHVzaCBicmljayBcclxuXHJcblx0XHRpZiBzb3VyY2VbcGxheWVyXSA+IDAgYW5kIHNlbGVjdGVkQnV0dG9uIGluIFtZRUxMT1csUkVEXVxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5icmlja3MucHVzaCBwbGF5ZXJcclxuXHRcdFx0c291cmNlW3BsYXllcl0gLT0gMVxyXG5cclxuXHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cdFx0c2VsZWN0ZWRCdXR0b24gPSAtMVxyXG5cclxuXHRcdG1vdmVzIC09IDEgXHJcblx0XHRpZiBtb3ZlcyA9PSAwXHJcblx0XHRcdHBsYXllciA9IDEgLSBwbGF5ZXJcclxuXHRcdFx0bW92ZXMgPSAyXHJcblx0XHR4ZHJhdygpXHJcblx0XHQjQHByaW50SGlzdG9yeSgpXHJcblxyXG5cdGluc2lkZSA6IChteCxteSkgLT4gZGlzdChAeCArIFhPRkYsIChAeSArIFlPRkYpLzIsIG14LCBteSkgPCAwLjUgKiBSQURJRVxyXG5cdFx0XHRcclxuXHR0b3BCbG9jayA6IChicmlja3MpIC0+XHJcblx0XHRjb3VudCA9IDBcclxuXHRcdHdoaWxlIGJyaWNrc1ticmlja3MubGVuZ3RoLTEtY291bnRdPT1wbGF5ZXJcclxuXHRcdFx0Y291bnQgKz0gMVxyXG5cdFx0Y291bnRcclxuXHJcblx0bW91c2VQcmVzc2VkIDogKG14LG15KSAtPlxyXG5cdFx0aWYgbm90IEBpbnNpZGUgbXgsbXkgdGhlbiByZXR1cm4gXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuciAjIE1hcmtlcmluZyBhdiB0aWxscnV0YVxyXG5cdFx0XHRpZiBAbnIgaW4gbGVnYWxNb3ZlcyBzZWxlY3RlZEJ1dHRvbiB0aGVuIEBtb3ZlQnJpY2tzKClcclxuXHRcdFx0cmV0dXJuXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuclxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHJcblx0XHRuID0gQHRvcEJsb2NrIEBicmlja3NcclxuXHRcdGlmIG4gPT0gMCB0aGVuIHJldHVybiAgXHJcblx0XHRAc2VsZWN0ZWQgPSAoQHNlbGVjdGVkLTEpICUlIChuKzEpXHJcblx0XHRzZWxlY3RlZEJ1dHRvbiA9IGlmIEBzZWxlY3RlZCA+IDAgdGhlbiBAbnIgZWxzZSAtMVxyXG5cclxuXHRcdHhkcmF3KClcclxuXHJcbmNsYXNzIFBhc3NCdXR0b24gZXh0ZW5kcyBCdXR0b25cclxuXHRtb3VzZVByZXNzZWQgOiAobXgsbXkpIC0+XHJcblx0XHRpZiBub3QgQGluc2lkZSBteCxteSB0aGVuIHJldHVyblxyXG5cdFx0aWYgcG9zc2libGVNb3ZlcygpIHRoZW4gcmV0dXJuIFxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24gIT0gLTEgXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cdFx0XHRzZWxlY3RlZEJ1dHRvbiA9IC0xIFxyXG5cdFx0cGxheWVyID0gMSAtIHBsYXllclxyXG5cdFx0eGRyYXcoKVxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdHN1cGVyXHJcblx0XHRmYyAwLjVcclxuXHRcdHRleHRTaXplIDMyXHJcblx0XHR0ZXh0IEBucixAeCxAeVxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyBTSVpFKzEwMCxTSVpFXHJcblx0Zm9yIG5yIGluIHJhbmdlIDI1XHJcblx0XHRidXR0b25zLnB1c2ggbmV3IEJ1dHRvbiBuclxyXG5cclxuXHRidXR0b25zW1lFTExPV10ueCA9IGJ1dHRvbnNbMV0ueFxyXG5cdGJ1dHRvbnNbWUVMTE9XXS55ID0gYnV0dG9uc1sxXS55IC0gMipSQURJRVxyXG5cdGJ1dHRvbnNbWUVMTE9XXS5icmlja3MgPSBbMV1cclxuXHRzb3VyY2VbMV0gLT0gMVxyXG5cclxuXHRidXR0b25zW1JFRF0ueCA9IGJ1dHRvbnNbMjNdLnhcclxuXHRidXR0b25zW1JFRF0ueSA9IGJ1dHRvbnNbMjNdLnkgKyAyKlJBRElFXHJcblx0YnV0dG9uc1tSRURdLmJyaWNrcyA9IFswXVxyXG5cdHNvdXJjZVswXSAtPSAxXHJcblxyXG5cdGJ1dHRvbiA9IG5ldyBQYXNzQnV0dG9uICdQYXNzJ1xyXG5cdGJ1dHRvbnMucHVzaCBidXR0b25cclxuXHRidXR0b24ueCA9IGJ1dHRvbnNbMTBdLnhcclxuXHRidXR0b24ueSA9IGJ1dHRvbnNbNF0ueSBcclxuXHJcblx0dGV4dFNpemUgMzJcclxuXHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdHJlY3RNb2RlIENFTlRFUlxyXG5cdHhkcmF3KClcclxuXHJcbnNob3dCcmlja3MgPSAoZGF0YSxwLHgseSkgLT5cclxuXHRmb3IgaSBpbiByYW5nZSBkYXRhW3BdXHJcblx0XHRmYyAxLHAsMCwwLjVcclxuXHRcdGNpcmNsZSB4LCB5LWkqSEVJR0hULCAwLjI1ICogUkFESUUgXHJcblxyXG54ZHJhdyA9IC0+XHJcblx0YmcgMC41XHJcblx0cHVzaCgpXHJcblx0c2NhbGUgMSwwLjVcclxuXHR0cmFuc2xhdGUgWE9GRixZT0ZGXHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRidXR0b24uZHJhdygpXHJcblxyXG5cdHNob3dCcmlja3Mgc291cmNlLDEsMzUwLC0xNTBcclxuXHRzaG93QnJpY2tzIHRhcmdldCwwLDQzMCwtMTUwXHJcblx0c2hvd0JyaWNrcyBzb3VyY2UsMCwzNTAsNzMwXHJcblx0c2hvd0JyaWNrcyB0YXJnZXQsMSw0MzAsNzMwXHJcblxyXG5cdHBvcCgpXHJcblx0dGV4dFNpemUgNTBcclxuXHR0ZXh0IG1lc3NhZ2Usd2lkdGgvMixoZWlnaHQvMlxyXG5cclxubW91c2VQcmVzc2VkID0gLT5cclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5tb3VzZVByZXNzZWQgbW91c2VYLG1vdXNlWSJdfQ==
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee