// Generated by CoffeeScript 1.12.7
var BRICKS, Button, HEIGHT, PassButton, RADIE, SIZE, XOFF, YOFF, buttons, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [4];
    }
    if (btn === 20) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [20];
    }
    if (btn === 4) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(0.25);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === 20 || player === 1 && this.nr === 4) {
      sw(2);
      sc(1);
    }
    circle(this.x, this.y, 0.5 * RADIE);
    sw(2);
    n = this.bricks.length;
    sc(0);
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.moveBricks = function() {
    var brick, i, k, len, ref, ref1;
    if (buttons[this.nr].bricks.length > 0 && moves === 1) {
      return;
    }
    if (buttons[this.nr].bricks.length > 0 && moves === 2) {
      moves = 1;
    }
    ref = range(buttons[selectedButton].selected);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref1 = this.nr) === 4 || ref1 === 20) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === 4 || selectedButton === 20)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var brick, n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.bricks.length - 1;
    brick = this.bricks[n - this.selected];
    if (brick === player) {
      this.selected += 1;
      selectedButton = this.nr;
    } else {
      this.selected = 0;
      selectedButton = -1;
    }
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  PassButton.prototype.draw = function() {
    PassButton.__super__.draw.apply(this, arguments);
    fc(0.5);
    textSize(32);
    return text(this.nr, this.x, this.y);
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[4].x = buttons[1].x;
  buttons[4].y = buttons[1].y - 2 * RADIE;
  buttons[4].bricks = [1];
  source[1] -= 1;
  buttons[20].x = buttons[23].x;
  buttons[20].y = buttons[23].y + 2 * RADIE;
  buttons[20].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  return xdraw();
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  pop();
  textSize(50);
  return text(message, width / 2, height / 2);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsbUxBQUE7RUFBQTs7OztBQUFBLElBQUEsR0FBTzs7QUFDUCxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLEtBQUEsR0FBUTs7QUFDUixNQUFBLEdBQVM7O0FBQ1QsTUFBQSxHQUFTOztBQUVULE9BQUEsR0FBVTs7QUFDVixNQUFBLEdBQVM7O0FBQ1QsS0FBQSxHQUFROztBQUNSLGNBQUEsR0FBaUIsQ0FBQzs7QUFDbEIsTUFBQSxHQUFTLENBQUMsTUFBRCxFQUFRLE1BQVI7O0FBQ1QsTUFBQSxHQUFTLENBQUMsQ0FBRCxFQUFHLENBQUg7O0FBQ1QsT0FBQSxHQUFVOztBQUVWLFVBQUEsR0FBYSxTQUFDLEdBQUQ7RUFDWixJQUFHLE1BQUEsS0FBVSxDQUFiO0lBQ0MsSUFBRyxHQUFBLEtBQVEsQ0FBUixJQUFBLEdBQUEsS0FBVSxDQUFWLElBQUEsR0FBQSxLQUFZLENBQWY7QUFBdUIsYUFBTyxDQUFDLENBQUQsRUFBOUI7O0lBQ0EsSUFBRyxHQUFBLEtBQU8sRUFBVjtBQUFrQixhQUFPLENBQUMsRUFBRCxFQUFJLEVBQUosRUFBTyxFQUFQLEVBQXpCOztBQUNBLFdBQU8sQ0FBQyxHQUFBLEdBQUksQ0FBTCxFQUFPLEdBQUEsR0FBSSxDQUFYLEVBSFI7R0FBQSxNQUFBO0lBS0MsSUFBRyxHQUFBLEtBQVEsRUFBUixJQUFBLEdBQUEsS0FBVyxFQUFYLElBQUEsR0FBQSxLQUFjLEVBQWpCO0FBQTBCLGFBQU8sQ0FBQyxFQUFELEVBQWpDOztJQUNBLElBQUcsR0FBQSxLQUFPLENBQVY7QUFBaUIsYUFBTyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUF4Qjs7QUFDQSxXQUFPLENBQUMsR0FBQSxHQUFJLENBQUwsRUFBTyxHQUFBLEdBQUksQ0FBWCxFQVBSOztBQURZOztB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QSxDQUFTLEVBQVQ7RUFDQSxTQUFBLENBQVUsTUFBVixFQUFpQixNQUFqQjtFQUNBLFFBQUEsQ0FBUyxNQUFUO1NBQ0EsS0FBQSxDQUFBO0FBdkJPOztBQXlCUixLQUFBLEdBQVEsU0FBQTtBQUNQLE1BQUE7RUFBQSxFQUFBLENBQUcsR0FBSDtFQUNBLElBQUEsQ0FBQTtFQUNBLEtBQUEsQ0FBTSxDQUFOLEVBQVEsR0FBUjtFQUNBLFNBQUEsQ0FBVSxJQUFWLEVBQWUsSUFBZjtBQUNBLE9BQUEseUNBQUE7O0lBQ0MsTUFBTSxDQUFDLElBQVAsQ0FBQTtBQUREO0VBRUEsR0FBQSxDQUFBO0VBQ0EsUUFBQSxDQUFTLEVBQVQ7U0FDQSxJQUFBLENBQUssT0FBTCxFQUFhLEtBQUEsR0FBTSxDQUFuQixFQUFxQixNQUFBLEdBQU8sQ0FBNUI7QUFUTzs7QUFXUixZQUFBLEdBQWUsU0FBQTtBQUNkLE1BQUE7QUFBQTtPQUFBLHlDQUFBOztpQkFDQyxNQUFNLENBQUMsWUFBUCxDQUFvQixNQUFwQixFQUEyQixNQUEzQjtBQUREOztBQURjIiwic291cmNlc0NvbnRlbnQiOlsiIyBiaXQubHkvc3RhY2tzcnVsZXNcclxuIyBodHRwczovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PURGZzlBM1RDMUVNJmZlYXR1cmU9eW91dHUuYmVcclxuIyBiaXQubHkvc3RhY2tzYm9hcmRcclxuXHJcblhPRkYgPSAyMjBcclxuWU9GRiA9IDM4MFxyXG5TSVpFID0gNjAwXHJcblJBRElFID0gMTMwXHJcbkhFSUdIVCA9IDE1XHJcbkJSSUNLUyA9IDEyXHJcblxyXG5idXR0b25zID0gW11cclxucGxheWVyID0gMFxyXG5tb3ZlcyA9IDFcclxuc2VsZWN0ZWRCdXR0b24gPSAtMVxyXG5zb3VyY2UgPSBbQlJJQ0tTLEJSSUNLU11cclxudGFyZ2V0ID0gWzAsMF1cclxubWVzc2FnZSA9ICcnXHJcblxyXG5sZWdhbE1vdmVzID0gKGJ0bikgLT5cclxuXHRpZiBwbGF5ZXIgPT0gMFxyXG5cdFx0aWYgYnRuIGluIFswLDEsMl0gdGhlbiByZXR1cm4gWzRdIFxyXG5cdFx0aWYgYnRuID09IDIwIHRoZW4gcmV0dXJuIFsyMiwyMywyNF0gXHJcblx0XHRyZXR1cm4gW2J0bi01LGJ0bi02XSBcclxuXHRlbHNlXHJcblx0XHRpZiBidG4gaW4gWzIyLDIzLDI0XSB0aGVuIHJldHVybiBbMjBdIFxyXG5cdFx0aWYgYnRuID09IDQgdGhlbiByZXR1cm4gWzAsMSwyXSBcclxuXHRcdHJldHVybiBbYnRuKzUsYnRuKzZdIFxyXG5cclxucG9zc2libGVNb3ZlcyA9IC0+XHJcblx0cmVzID0gZmFsc2UgXHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRpZiBfLmxhc3QoYnV0dG9uLmJyaWNrcykgPT0gcGxheWVyIFxyXG5cdFx0XHRpZiBtb3Zlcz09MiB0aGVuIHJlcyA9IHRydWVcclxuXHRcdFx0Zm9yIG1vdmUgaW4gbGVnYWxNb3ZlcyBidXR0b24ubnIgXHJcblx0XHRcdFx0aWYgYnV0dG9uc1ttb3ZlXS5icmlja3MubGVuZ3RoPT0wIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdHJlc1xyXG5cclxuY2xhc3MgQnV0dG9uIFxyXG5cdGNvbnN0cnVjdG9yIDogKEBucikgLT5cclxuXHRcdGkgPSBAbnIgJSA1XHJcblx0XHRqID0gaW50IEBuciAvIDVcclxuXHRcdEB4ID0gUkFESUUgKiAoaSAtIDAuNSpqKSBcclxuXHRcdEB5ID0gUkFESUUgKiAwLjg4KmpcclxuXHRcdEBicmlja3MgPSBbXVxyXG5cdFx0QHNlbGVjdGVkID0gMFxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGlmIEBuciBpbiBbMyw5LDE1LDIxXSB0aGVuIHJldHVybiBcclxuXHRcdGZjIDAuMjVcclxuXHJcblx0XHRzYyAwXHJcblx0XHRzdyAxXHJcblx0XHRpZiBwbGF5ZXI9PTAgYW5kIEBucj09MjAgb3IgcGxheWVyPT0xIGFuZCBAbnI9PTQgXHJcblx0XHRcdHN3IDJcclxuXHRcdFx0c2MgMVxyXG5cdFx0Y2lyY2xlIEB4LCBAeSwgMC41ICogUkFESUVcclxuXHRcdHN3IDJcclxuXHJcblx0XHRuID0gQGJyaWNrcy5sZW5ndGhcclxuXHRcdCN0ZXh0IEBucixAeCxAeVxyXG5cdFx0c2MgMFxyXG5cdFx0Zm9yIGJyaWNrLGkgaW4gQGJyaWNrc1xyXG5cdFx0XHRpZiBAc2VsZWN0ZWQgPj0gbi1pIHRoZW4gZmMgMCwxLDAsMC41XHRlbHNlIGZjIDEsYnJpY2ssMCwwLjVcclxuXHRcdFx0Y2lyY2xlIEB4LCBAeS1pKkhFSUdIVCwgMC4yNSAqIFJBRElFIFxyXG5cclxuXHRtb3ZlQnJpY2tzIDogLT4gIyBmcm9tIHNlbGVjdGVkQnV0dG9uIHRvIEBuclxyXG5cdFx0aWYgYnV0dG9uc1tAbnJdLmJyaWNrcy5sZW5ndGggPiAwIGFuZCBtb3ZlcyA9PSAxIHRoZW5cdHJldHVybiAjIG11c3QgYXR0YWNrIGluIGZpcnN0IG1vdmUgXHJcblx0XHRpZiBidXR0b25zW0Bucl0uYnJpY2tzLmxlbmd0aCA+IDAgYW5kIG1vdmVzID09IDIgdGhlblx0bW92ZXMgPSAxXHJcblxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2UgYnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWRcclxuXHRcdFx0YnJpY2sgPSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5icmlja3MucG9wKClcclxuXHRcdFx0aWYgQG5yIGluIFs0LDIwXVxyXG5cdFx0XHRcdHRhcmdldFtwbGF5ZXJdICs9IDFcclxuXHRcdFx0XHRpZiB0YXJnZXRbcGxheWVyXSA9PSBCUklDS1NcclxuXHRcdFx0XHRcdG1lc3NhZ2UgPSBbJ1JlZCcsJ1llbGxvdyddW3BsYXllcl0gKyAnIHdvbiEnXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRAYnJpY2tzLnB1c2ggYnJpY2sgXHJcblxyXG5cdFx0aWYgc291cmNlW3BsYXllcl0gPiAwIGFuZCBzZWxlY3RlZEJ1dHRvbiBpbiBbNCwyMF1cclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uYnJpY2tzLnB1c2ggcGxheWVyXHJcblx0XHRcdHNvdXJjZVtwbGF5ZXJdIC09IDFcclxuXHJcblx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHRcdHNlbGVjdGVkQnV0dG9uID0gLTFcclxuXHJcblx0XHRtb3ZlcyAtPSAxIFxyXG5cdFx0aWYgbW92ZXMgPT0gMFxyXG5cdFx0XHRwbGF5ZXIgPSAxIC0gcGxheWVyXHJcblx0XHRcdG1vdmVzID0gMlxyXG5cdFx0eGRyYXcoKVxyXG5cclxuXHRpbnNpZGUgOiAobXgsbXkpIC0+IGRpc3QoQHggKyBYT0ZGLCAoQHkgKyBZT0ZGKS8yLCBteCwgbXkpIDwgMC41ICogUkFESUVcclxuXHRcdFx0XHJcblx0bW91c2VQcmVzc2VkIDogKG14LG15KSAtPlxyXG5cdFx0aWYgbm90IEBpbnNpZGUgbXgsbXkgdGhlbiByZXR1cm4gXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuciAjIE1hcmtlcmluZyBhdiB0aWxscnV0YVxyXG5cdFx0XHRpZiBAbnIgaW4gbGVnYWxNb3ZlcyBzZWxlY3RlZEJ1dHRvbiB0aGVuIEBtb3ZlQnJpY2tzKClcclxuXHRcdFx0cmV0dXJuXHJcblxyXG5cdFx0aWYgc2VsZWN0ZWRCdXR0b24+PTAgYW5kIHNlbGVjdGVkQnV0dG9uICE9IEBuclxyXG5cdFx0XHRidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZCA9IDBcclxuXHRcdG4gPSBAYnJpY2tzLmxlbmd0aC0xXHJcblx0XHRicmljayA9IEBicmlja3Nbbi1Ac2VsZWN0ZWRdXHJcblx0XHRpZiBicmljayA9PSBwbGF5ZXIgXHJcblx0XHRcdEBzZWxlY3RlZCArPSAxXHJcblx0XHRcdHNlbGVjdGVkQnV0dG9uID0gQG5yXHJcblx0XHRlbHNlXHJcblx0XHRcdEBzZWxlY3RlZCA9IDBcclxuXHRcdFx0c2VsZWN0ZWRCdXR0b24gPSAtMVxyXG5cdFx0eGRyYXcoKVxyXG5cclxuY2xhc3MgUGFzc0J1dHRvbiBleHRlbmRzIEJ1dHRvblxyXG5cdG1vdXNlUHJlc3NlZCA6IChteCxteSkgLT5cclxuXHRcdGlmIG5vdCBAaW5zaWRlIG14LG15IHRoZW4gcmV0dXJuXHJcblx0XHRpZiBwb3NzaWJsZU1vdmVzKCkgdGhlbiByZXR1cm4gXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbiAhPSAtMSBcclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblx0XHRcdHNlbGVjdGVkQnV0dG9uID0gLTEgXHJcblx0XHRwbGF5ZXIgPSAxIC0gcGxheWVyXHJcblx0XHR4ZHJhdygpXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0c3VwZXJcclxuXHRcdGZjIDAuNVxyXG5cdFx0dGV4dFNpemUgMzJcclxuXHRcdHRleHQgQG5yLEB4LEB5XHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIFNJWkUrMTAwLFNJWkVcclxuXHRmb3IgbnIgaW4gcmFuZ2UgMjVcclxuXHRcdGJ1dHRvbnMucHVzaCBuZXcgQnV0dG9uIG5yXHJcblxyXG5cdGJ1dHRvbnNbNF0ueCA9IGJ1dHRvbnNbMV0ueFxyXG5cdGJ1dHRvbnNbNF0ueSA9IGJ1dHRvbnNbMV0ueSAtIDIqUkFESUVcclxuXHRidXR0b25zWzRdLmJyaWNrcyA9IFsxXVxyXG5cdHNvdXJjZVsxXSAtPSAxXHJcblxyXG5cdGJ1dHRvbnNbMjBdLnggPSBidXR0b25zWzIzXS54XHJcblx0YnV0dG9uc1syMF0ueSA9IGJ1dHRvbnNbMjNdLnkgKyAyKlJBRElFXHJcblx0YnV0dG9uc1syMF0uYnJpY2tzID0gWzBdXHJcblx0c291cmNlWzBdIC09IDFcclxuXHJcblx0YnV0dG9uID0gbmV3IFBhc3NCdXR0b24gJ1Bhc3MnXHJcblx0YnV0dG9ucy5wdXNoIGJ1dHRvblxyXG5cdGJ1dHRvbi54ID0gYnV0dG9uc1sxMF0ueFxyXG5cdGJ1dHRvbi55ID0gYnV0dG9uc1s0XS55IFxyXG5cclxuXHR0ZXh0U2l6ZSAzMlxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblx0eGRyYXcoKVxyXG5cclxueGRyYXcgPSAtPlxyXG5cdGJnIDAuNVxyXG5cdHB1c2goKVxyXG5cdHNjYWxlIDEsMC41XHJcblx0dHJhbnNsYXRlIFhPRkYsWU9GRlxyXG5cdGZvciBidXR0b24gaW4gYnV0dG9uc1xyXG5cdFx0YnV0dG9uLmRyYXcoKVxyXG5cdHBvcCgpXHJcblx0dGV4dFNpemUgNTBcclxuXHR0ZXh0IG1lc3NhZ2Usd2lkdGgvMixoZWlnaHQvMlxyXG5cclxubW91c2VQcmVzc2VkID0gLT5cclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5tb3VzZVByZXNzZWQgbW91c2VYLG1vdXNlWSJdfQ==
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee