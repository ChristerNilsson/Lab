// Generated by CoffeeScript 1.12.7
var ALPHABET, BRICKS, Button, HEIGHT, PassButton, RADIE, RED, SIZE, XOFF, YELLOW, YOFF, buttons, hist, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, showBricks, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

ALPHABET = 'abc Ydefg hijklnmnopR qrs';

YELLOW = 4;

RED = 20;

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

hist = [];

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [YELLOW];
    }
    if (btn === RED) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [RED];
    }
    if (btn === YELLOW) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(1);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === RED || player === 1 && this.nr === YELLOW) {
      sw(10);
      sc(1, player, 0);
    }
    circle(this.x, this.y, 0.45 * RADIE);
    sw(1);
    textAlign(CENTER, CENTER);
    sc();
    fc(0.75);
    if (this.nr === 'Pass') {
      textSize(40);
      text(this.nr, this.x, this.y);
    } else {
      textSize(60);
      text(ALPHABET[this.nr], this.x, this.y);
    }
    sc(0);
    n = this.bricks.length;
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.printHistory = function() {
    var count, k, lastp, len, move, p, ref, s;
    lastp = 0;
    count = 1;
    s = count + ' ';
    for (k = 0, len = hist.length; k < len; k++) {
      ref = hist[k], p = ref[0], move = ref[1];
      if (p !== lastp) {
        if (p === 0) {
          print(s);
          count += 1;
          s = count + ' ';
        }
        if (p === 1) {
          s = s + '| ';
        }
        lastp = p;
      }
      s = s + move + ' ';
    }
    return print(s);
  };

  Button.prototype.moveBricks = function() {
    var brick, count, i, k, len, ref, ref1, ref2;
    if (((ref = this.nr) !== YELLOW && ref !== RED) && buttons[this.nr].bricks.length > 0) {
      if (moves === 1) {
        return;
      }
      if (moves === 2) {
        moves = 1;
      }
    }
    count = buttons[selectedButton].selected;
    if (count === 1) {
      count = '';
    }
    hist.push([player, ALPHABET[selectedButton] + ALPHABET[this.nr] + count]);
    ref1 = range(buttons[selectedButton].selected);
    for (k = 0, len = ref1.length; k < len; k++) {
      i = ref1[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref2 = this.nr) === YELLOW || ref2 === RED) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
          this.printHistory();
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === YELLOW || selectedButton === RED)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.topBlock = function(bricks) {
    var count;
    count = 0;
    while (bricks[bricks.length - 1 - count] === player) {
      count += 1;
    }
    return count;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.topBlock(this.bricks);
    if (n === 0) {
      return;
    }
    this.selected = modulo(this.selected - 1, n + 1);
    selectedButton = this.selected > 0 ? this.nr : -1;
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[YELLOW].x = buttons[1].x;
  buttons[YELLOW].y = buttons[1].y - 2 * RADIE;
  buttons[YELLOW].bricks = [1];
  source[1] -= 1;
  buttons[RED].x = buttons[23].x;
  buttons[RED].y = buttons[23].y + 2 * RADIE;
  buttons[RED].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(LEFT, BOTTOM);
  rectMode(CENTER);
  return xdraw();
};

showBricks = function(data, p, x, y) {
  var i, k, len, ref, results;
  ref = range(data[p]);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    fc(1, p, 0, 0.5);
    results.push(circle(x, y - i * HEIGHT, 0.25 * RADIE));
  }
  return results;
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  showBricks(source, 1, 350, -150);
  showBricks(target, 0, 430, -150);
  showBricks(source, 0, 350, 730);
  showBricks(target, 1, 430, 730);
  pop();
  textSize(50);
  fc(1, player, 0);
  return text(message, 20, height - 20);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsNE5BQUE7RUFBQTs7Ozs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxLQUFBLEdBQVE7O0FBQ1IsTUFBQSxHQUFTOztBQUNULE1BQUEsR0FBUzs7QUFDVCxRQUFBLEdBQVc7O0FBQ1gsTUFBQSxHQUFTOztBQUNULEdBQUEsR0FBTTs7QUFFTixPQUFBLEdBQVU7O0FBQ1YsTUFBQSxHQUFTOztBQUNULEtBQUEsR0FBUTs7QUFDUixjQUFBLEdBQWlCLENBQUM7O0FBQ2xCLE1BQUEsR0FBUyxDQUFDLE1BQUQsRUFBUSxNQUFSOztBQUNULE1BQUEsR0FBUyxDQUFDLENBQUQsRUFBRyxDQUFIOztBQUNULE9BQUEsR0FBVTs7QUFDVixJQUFBLEdBQU87O0FBRVAsVUFBQSxHQUFhLFNBQUMsR0FBRDtFQUNaLElBQUcsTUFBQSxLQUFVLENBQWI7SUFDQyxJQUFHLEdBQUEsS0FBUSxDQUFSLElBQUEsR0FBQSxLQUFVLENBQVYsSUFBQSxHQUFBLEtBQVksQ0FBZjtBQUF1QixhQUFPLENBQUMsTUFBRCxFQUE5Qjs7SUFDQSxJQUFHLEdBQUEsS0FBTyxHQUFWO0FBQW1CLGFBQU8sQ0FBQyxFQUFELEVBQUksRUFBSixFQUFPLEVBQVAsRUFBMUI7O0FBQ0EsV0FBTyxDQUFDLEdBQUEsR0FBSSxDQUFMLEVBQU8sR0FBQSxHQUFJLENBQVgsRUFIUjtHQUFBLE1BQUE7SUFLQyxJQUFHLEdBQUEsS0FBUSxFQUFSLElBQUEsR0FBQSxLQUFXLEVBQVgsSUFBQSxHQUFBLEtBQWMsRUFBakI7QUFBMEIsYUFBTyxDQUFDLEdBQUQsRUFBakM7O0lBQ0EsSUFBRyxHQUFBLEtBQU8sTUFBVjtBQUFzQixhQUFPLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQTdC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RUFBYixFQUFnQixNQUFBLEdBQU8sRUFBdkI7QUFoQk87O0FBa0JSLFlBQUEsR0FBZSxTQUFBO0FBQ2QsTUFBQTtBQUFBO09BQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxZQUFQLENBQW9CLE1BQXBCLEVBQTJCLE1BQTNCO0FBREQ7O0FBRGMiLCJzb3VyY2VzQ29udGVudCI6WyIjIGJpdC5seS9zdGFja3NydWxlc1xyXG4jIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9REZnOUEzVEMxRU0mZmVhdHVyZT15b3V0dS5iZVxyXG4jIGJpdC5seS9zdGFja3Nib2FyZFxyXG5cclxuWE9GRiA9IDIyMFxyXG5ZT0ZGID0gMzgwXHJcblNJWkUgPSA2MDBcclxuUkFESUUgPSAxMzBcclxuSEVJR0hUID0gMTVcclxuQlJJQ0tTID0gMTJcclxuQUxQSEFCRVQgPSAnYWJjIFlkZWZnIGhpamtsbm1ub3BSIHFycydcclxuWUVMTE9XID0gNFxyXG5SRUQgPSAyMFxyXG5cclxuYnV0dG9ucyA9IFtdXHJcbnBsYXllciA9IDBcclxubW92ZXMgPSAxXHJcbnNlbGVjdGVkQnV0dG9uID0gLTFcclxuc291cmNlID0gW0JSSUNLUyxCUklDS1NdXHJcbnRhcmdldCA9IFswLDBdXHJcbm1lc3NhZ2UgPSAnJ1xyXG5oaXN0ID0gW11cclxuXHJcbmxlZ2FsTW92ZXMgPSAoYnRuKSAtPlxyXG5cdGlmIHBsYXllciA9PSAwXHJcblx0XHRpZiBidG4gaW4gWzAsMSwyXSB0aGVuIHJldHVybiBbWUVMTE9XXSBcclxuXHRcdGlmIGJ0biA9PSBSRUQgdGhlbiByZXR1cm4gWzIyLDIzLDI0XSBcclxuXHRcdHJldHVybiBbYnRuLTUsYnRuLTZdIFxyXG5cdGVsc2VcclxuXHRcdGlmIGJ0biBpbiBbMjIsMjMsMjRdIHRoZW4gcmV0dXJuIFtSRURdIFxyXG5cdFx0aWYgYnRuID09IFlFTExPVyB0aGVuIHJldHVybiBbMCwxLDJdIFxyXG5cdFx0cmV0dXJuIFtidG4rNSxidG4rNl0gXHJcblxyXG5wb3NzaWJsZU1vdmVzID0gLT5cclxuXHRyZXMgPSBmYWxzZSBcclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGlmIF8ubGFzdChidXR0b24uYnJpY2tzKSA9PSBwbGF5ZXIgXHJcblx0XHRcdGlmIG1vdmVzPT0yIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdFx0XHRmb3IgbW92ZSBpbiBsZWdhbE1vdmVzIGJ1dHRvbi5uciBcclxuXHRcdFx0XHRpZiBidXR0b25zW21vdmVdLmJyaWNrcy5sZW5ndGg9PTAgdGhlbiByZXMgPSB0cnVlXHJcblx0cmVzXHJcblxyXG5jbGFzcyBCdXR0b24gXHJcblx0Y29uc3RydWN0b3IgOiAoQG5yKSAtPlxyXG5cdFx0aSA9IEBuciAlIDVcclxuXHRcdGogPSBpbnQgQG5yIC8gNVxyXG5cdFx0QHggPSBSQURJRSAqIChpIC0gMC41KmopIFxyXG5cdFx0QHkgPSBSQURJRSAqIDAuODgqalxyXG5cdFx0QGJyaWNrcyA9IFtdXHJcblx0XHRAc2VsZWN0ZWQgPSAwXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0aWYgQG5yIGluIFszLDksMTUsMjFdIHRoZW4gcmV0dXJuIFxyXG5cdFx0ZmMgMVxyXG5cclxuXHRcdHNjIDBcclxuXHRcdHN3IDFcclxuXHRcdGlmIHBsYXllcj09MCBhbmQgQG5yPT1SRUQgb3IgcGxheWVyPT0xIGFuZCBAbnI9PVlFTExPV1xyXG5cdFx0XHRzdyAxMFxyXG5cdFx0XHRzYyAxLHBsYXllciwwXHJcblx0XHRjaXJjbGUgQHgsIEB5LCAwLjQ1ICogUkFESUVcclxuXHRcdHN3IDFcclxuXHJcblx0XHR0ZXh0QWxpZ24gQ0VOVEVSLENFTlRFUlxyXG5cdFx0c2MoKVxyXG5cdFx0ZmMgMC43NVxyXG5cdFx0aWYgQG5yID09ICdQYXNzJyBcclxuXHRcdFx0dGV4dFNpemUgNDBcclxuXHRcdFx0dGV4dCBAbnIsQHgsQHlcclxuXHRcdGVsc2VcclxuXHRcdFx0dGV4dFNpemUgNjBcclxuXHRcdFx0dGV4dCBBTFBIQUJFVFtAbnJdLEB4LEB5XHJcblxyXG5cdFx0c2MgMFxyXG5cdFx0biA9IEBicmlja3MubGVuZ3RoXHJcblx0XHRmb3IgYnJpY2ssaSBpbiBAYnJpY2tzXHJcblx0XHRcdGlmIEBzZWxlY3RlZCA+PSBuLWkgdGhlbiBmYyAwLDEsMCwwLjVcdGVsc2UgZmMgMSxicmljaywwLDAuNVxyXG5cdFx0XHRjaXJjbGUgQHgsIEB5LWkqSEVJR0hULCAwLjI1ICogUkFESUUgXHJcblxyXG5cdHByaW50SGlzdG9yeSA6IC0+XHJcblx0XHRsYXN0cCA9IDBcclxuXHRcdGNvdW50ID0gMVxyXG5cdFx0cyA9IGNvdW50ICsgJyAnXHJcblx0XHRmb3IgW3AsbW92ZV0gaW4gaGlzdFxyXG5cdFx0XHRpZiBwIT1sYXN0cCBcclxuXHRcdFx0XHRpZiBwPT0wXHJcblx0XHRcdFx0XHRwcmludCBzXHJcblx0XHRcdFx0XHRjb3VudCArPSAxIFxyXG5cdFx0XHRcdFx0cyA9IGNvdW50ICsgJyAnXHJcblx0XHRcdFx0aWYgcD09MVxyXG5cdFx0XHRcdFx0cyA9IHMgKyAnfCAnXHJcblx0XHRcdFx0bGFzdHA9cFxyXG5cdFx0XHRzID0gcyArIG1vdmUgKyAnICdcclxuXHRcdHByaW50IHNcclxuXHJcblx0bW92ZUJyaWNrcyA6IC0+ICMgZnJvbSBzZWxlY3RlZEJ1dHRvbiB0byBAbnJcclxuXHRcdGlmIEBuciBub3QgaW4gW1lFTExPVyxSRURdIGFuZCBidXR0b25zW0Bucl0uYnJpY2tzLmxlbmd0aCA+IDAgXHJcblx0XHRcdGlmIG1vdmVzID09IDEgdGhlbiByZXR1cm4gIFxyXG5cdFx0XHRpZiBtb3ZlcyA9PSAyIHRoZW4gbW92ZXMgPSAxXHJcblxyXG5cdFx0Y291bnQgPSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZFxyXG5cdFx0aWYgY291bnQgPT0gMSB0aGVuIGNvdW50ID0gJycgXHJcblx0XHRoaXN0LnB1c2ggW3BsYXllcixBTFBIQUJFVFtzZWxlY3RlZEJ1dHRvbl0rQUxQSEFCRVRbQG5yXStjb3VudF1cclxuXHJcblx0XHRmb3IgaSBpbiByYW5nZSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZFxyXG5cdFx0XHRicmljayA9IGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLmJyaWNrcy5wb3AoKVxyXG5cdFx0XHRpZiBAbnIgaW4gW1lFTExPVyxSRURdXHJcblx0XHRcdFx0dGFyZ2V0W3BsYXllcl0gKz0gMVxyXG5cdFx0XHRcdGlmIHRhcmdldFtwbGF5ZXJdID09IEJSSUNLU1xyXG5cdFx0XHRcdFx0bWVzc2FnZSA9IFsnUmVkJywnWWVsbG93J11bcGxheWVyXSArICcgd29uISdcclxuXHRcdFx0XHRcdEBwcmludEhpc3RvcnkoKVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0QGJyaWNrcy5wdXNoIGJyaWNrIFxyXG5cclxuXHRcdGlmIHNvdXJjZVtwbGF5ZXJdID4gMCBhbmQgc2VsZWN0ZWRCdXR0b24gaW4gW1lFTExPVyxSRURdXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLmJyaWNrcy5wdXNoIHBsYXllclxyXG5cdFx0XHRzb3VyY2VbcGxheWVyXSAtPSAxXHJcblxyXG5cdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblx0XHRzZWxlY3RlZEJ1dHRvbiA9IC0xXHJcblxyXG5cdFx0bW92ZXMgLT0gMSBcclxuXHRcdGlmIG1vdmVzID09IDBcclxuXHRcdFx0cGxheWVyID0gMSAtIHBsYXllclxyXG5cdFx0XHRtb3ZlcyA9IDJcclxuXHRcdHhkcmF3KClcclxuXHJcblx0aW5zaWRlIDogKG14LG15KSAtPiBkaXN0KEB4ICsgWE9GRiwgKEB5ICsgWU9GRikvMiwgbXgsIG15KSA8IDAuNSAqIFJBRElFXHJcblx0XHRcdFxyXG5cdHRvcEJsb2NrIDogKGJyaWNrcykgLT5cclxuXHRcdGNvdW50ID0gMFxyXG5cdFx0d2hpbGUgYnJpY2tzW2JyaWNrcy5sZW5ndGgtMS1jb3VudF09PXBsYXllclxyXG5cdFx0XHRjb3VudCArPSAxXHJcblx0XHRjb3VudFxyXG5cclxuXHRtb3VzZVByZXNzZWQgOiAobXgsbXkpIC0+XHJcblx0XHRpZiBub3QgQGluc2lkZSBteCxteSB0aGVuIHJldHVybiBcclxuXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbj49MCBhbmQgc2VsZWN0ZWRCdXR0b24gIT0gQG5yICMgTWFya2VyaW5nIGF2IHRpbGxydXRhXHJcblx0XHRcdGlmIEBuciBpbiBsZWdhbE1vdmVzIHNlbGVjdGVkQnV0dG9uIHRoZW4gQG1vdmVCcmlja3MoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbj49MCBhbmQgc2VsZWN0ZWRCdXR0b24gIT0gQG5yXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cclxuXHRcdG4gPSBAdG9wQmxvY2sgQGJyaWNrc1xyXG5cdFx0aWYgbiA9PSAwIHRoZW4gcmV0dXJuICBcclxuXHRcdEBzZWxlY3RlZCA9IChAc2VsZWN0ZWQtMSkgJSUgKG4rMSlcclxuXHRcdHNlbGVjdGVkQnV0dG9uID0gaWYgQHNlbGVjdGVkID4gMCB0aGVuIEBuciBlbHNlIC0xXHJcblxyXG5cdFx0eGRyYXcoKVxyXG5cclxuY2xhc3MgUGFzc0J1dHRvbiBleHRlbmRzIEJ1dHRvblxyXG5cdG1vdXNlUHJlc3NlZCA6IChteCxteSkgLT5cclxuXHRcdGlmIG5vdCBAaW5zaWRlIG14LG15IHRoZW4gcmV0dXJuXHJcblx0XHRpZiBwb3NzaWJsZU1vdmVzKCkgdGhlbiByZXR1cm4gXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbiAhPSAtMSBcclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblx0XHRcdHNlbGVjdGVkQnV0dG9uID0gLTEgXHJcblx0XHRwbGF5ZXIgPSAxIC0gcGxheWVyXHJcblx0XHR4ZHJhdygpXHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIFNJWkUrMTAwLFNJWkVcclxuXHRmb3IgbnIgaW4gcmFuZ2UgMjVcclxuXHRcdGJ1dHRvbnMucHVzaCBuZXcgQnV0dG9uIG5yXHJcblxyXG5cdGJ1dHRvbnNbWUVMTE9XXS54ID0gYnV0dG9uc1sxXS54XHJcblx0YnV0dG9uc1tZRUxMT1ddLnkgPSBidXR0b25zWzFdLnkgLSAyKlJBRElFXHJcblx0YnV0dG9uc1tZRUxMT1ddLmJyaWNrcyA9IFsxXVxyXG5cdHNvdXJjZVsxXSAtPSAxXHJcblxyXG5cdGJ1dHRvbnNbUkVEXS54ID0gYnV0dG9uc1syM10ueFxyXG5cdGJ1dHRvbnNbUkVEXS55ID0gYnV0dG9uc1syM10ueSArIDIqUkFESUVcclxuXHRidXR0b25zW1JFRF0uYnJpY2tzID0gWzBdXHJcblx0c291cmNlWzBdIC09IDFcclxuXHJcblx0YnV0dG9uID0gbmV3IFBhc3NCdXR0b24gJ1Bhc3MnXHJcblx0YnV0dG9ucy5wdXNoIGJ1dHRvblxyXG5cdGJ1dHRvbi54ID0gYnV0dG9uc1sxMF0ueFxyXG5cdGJ1dHRvbi55ID0gYnV0dG9uc1s0XS55IFxyXG5cclxuXHR0ZXh0U2l6ZSAzMlxyXG5cdHRleHRBbGlnbiBMRUZULEJPVFRPTVxyXG5cdHJlY3RNb2RlIENFTlRFUlxyXG5cdHhkcmF3KClcclxuXHJcbnNob3dCcmlja3MgPSAoZGF0YSxwLHgseSkgLT5cclxuXHRmb3IgaSBpbiByYW5nZSBkYXRhW3BdXHJcblx0XHRmYyAxLHAsMCwwLjVcclxuXHRcdGNpcmNsZSB4LCB5LWkqSEVJR0hULCAwLjI1ICogUkFESUUgXHJcblxyXG54ZHJhdyA9IC0+XHJcblx0YmcgMC41XHJcblx0cHVzaCgpXHJcblx0c2NhbGUgMSwwLjVcclxuXHR0cmFuc2xhdGUgWE9GRixZT0ZGXHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRidXR0b24uZHJhdygpXHJcblxyXG5cdHNob3dCcmlja3Mgc291cmNlLDEsMzUwLC0xNTBcclxuXHRzaG93QnJpY2tzIHRhcmdldCwwLDQzMCwtMTUwXHJcblx0c2hvd0JyaWNrcyBzb3VyY2UsMCwzNTAsNzMwXHJcblx0c2hvd0JyaWNrcyB0YXJnZXQsMSw0MzAsNzMwXHJcblxyXG5cdHBvcCgpXHJcblx0dGV4dFNpemUgNTBcclxuXHRmYyAxLHBsYXllciwwXHJcblx0dGV4dCBtZXNzYWdlLDIwLGhlaWdodC0yMFxyXG5cclxubW91c2VQcmVzc2VkID0gLT5cclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5tb3VzZVByZXNzZWQgbW91c2VYLG1vdXNlWSJdfQ==
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee