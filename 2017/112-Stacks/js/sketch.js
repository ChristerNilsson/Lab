// Generated by CoffeeScript 1.12.7
var ALPHABET, BRICKS, Button, HEIGHT, PassButton, RADIE, SIZE, XOFF, YOFF, buttons, hist, legalMoves, message, mousePressed, moves, player, possibleMoves, selectedButton, setup, showBricks, source, target, xdraw,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; },
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

XOFF = 220;

YOFF = 380;

SIZE = 600;

RADIE = 130;

HEIGHT = 15;

BRICKS = 12;

ALPHABET = 'abc Ydefg hijklnmnopR qrs';

buttons = [];

player = 0;

moves = 1;

selectedButton = -1;

source = [BRICKS, BRICKS];

target = [0, 0];

message = '';

hist = [];

legalMoves = function(btn) {
  if (player === 0) {
    if (btn === 0 || btn === 1 || btn === 2) {
      return [4];
    }
    if (btn === 20) {
      return [22, 23, 24];
    }
    return [btn - 5, btn - 6];
  } else {
    if (btn === 22 || btn === 23 || btn === 24) {
      return [20];
    }
    if (btn === 4) {
      return [0, 1, 2];
    }
    return [btn + 5, btn + 6];
  }
};

possibleMoves = function() {
  var button, k, l, len, len1, move, ref, res;
  res = false;
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    if (_.last(button.bricks) === player) {
      if (moves === 2) {
        res = true;
      }
      ref = legalMoves(button.nr);
      for (l = 0, len1 = ref.length; l < len1; l++) {
        move = ref[l];
        if (buttons[move].bricks.length === 0) {
          res = true;
        }
      }
    }
  }
  return res;
};

Button = (function() {
  function Button(nr1) {
    var i, j;
    this.nr = nr1;
    i = this.nr % 5;
    j = int(this.nr / 5);
    this.x = RADIE * (i - 0.5 * j);
    this.y = RADIE * 0.88 * j;
    this.bricks = [];
    this.selected = 0;
  }

  Button.prototype.draw = function() {
    var brick, i, k, len, n, ref, ref1, results;
    if ((ref = this.nr) === 3 || ref === 9 || ref === 15 || ref === 21) {
      return;
    }
    fc(0.25);
    sc(0);
    sw(1);
    if (player === 0 && this.nr === 20 || player === 1 && this.nr === 4) {
      sw(2);
      sc(1);
    }
    circle(this.x, this.y, 0.45 * RADIE);
    sw(2);
    if (this.nr === 'Pass') {
      text(this.nr, this.x, this.y);
    } else {
      text(ALPHABET[this.nr], this.x, this.y);
    }
    sc(0);
    n = this.bricks.length;
    ref1 = this.bricks;
    results = [];
    for (i = k = 0, len = ref1.length; k < len; i = ++k) {
      brick = ref1[i];
      if (this.selected >= n - i) {
        fc(0, 1, 0, 0.5);
      } else {
        fc(1, brick, 0, 0.5);
      }
      results.push(circle(this.x, this.y - i * HEIGHT, 0.25 * RADIE));
    }
    return results;
  };

  Button.prototype.printHistory = function() {
    var count, k, lastp, len, move, p, ref, s;
    lastp = 0;
    count = 1;
    s = count + ' ';
    for (k = 0, len = hist.length; k < len; k++) {
      ref = hist[k], p = ref[0], move = ref[1];
      if (p !== lastp) {
        if (p === 0) {
          print(s);
          count += 1;
          s = count + ' ';
        }
        if (p === 1) {
          s = s + '| ';
        }
        lastp = p;
        s = s + move + ' ';
      } else {
        s = s + move + ' ';
      }
    }
    return print(s);
  };

  Button.prototype.moveBricks = function() {
    var brick, count, i, k, len, ref, ref1, ref2;
    if (((ref = this.nr) !== 4 && ref !== 20) && buttons[this.nr].bricks.length > 0) {
      if (moves === 1) {
        return;
      }
      if (moves === 2) {
        moves = 1;
      }
    }
    count = buttons[selectedButton].selected;
    if (count === 1) {
      count = '';
    }
    hist.push([player, ALPHABET[selectedButton] + ALPHABET[this.nr] + count]);
    ref1 = range(buttons[selectedButton].selected);
    for (k = 0, len = ref1.length; k < len; k++) {
      i = ref1[k];
      brick = buttons[selectedButton].bricks.pop();
      if ((ref2 = this.nr) === 4 || ref2 === 20) {
        target[player] += 1;
        if (target[player] === BRICKS) {
          message = ['Red', 'Yellow'][player] + ' won!';
          this.printHistory();
        }
      } else {
        this.bricks.push(brick);
      }
    }
    if (source[player] > 0 && (selectedButton === 4 || selectedButton === 20)) {
      buttons[selectedButton].bricks.push(player);
      source[player] -= 1;
    }
    buttons[selectedButton].selected = 0;
    selectedButton = -1;
    moves -= 1;
    if (moves === 0) {
      player = 1 - player;
      moves = 2;
    }
    return xdraw();
  };

  Button.prototype.inside = function(mx, my) {
    return dist(this.x + XOFF, (this.y + YOFF) / 2, mx, my) < 0.5 * RADIE;
  };

  Button.prototype.topBlock = function(bricks) {
    var count;
    count = 0;
    while (bricks[bricks.length - 1 - count] === player) {
      count += 1;
    }
    return count;
  };

  Button.prototype.mousePressed = function(mx, my) {
    var n, ref;
    if (!this.inside(mx, my)) {
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      if (ref = this.nr, indexOf.call(legalMoves(selectedButton), ref) >= 0) {
        this.moveBricks();
      }
      return;
    }
    if (selectedButton >= 0 && selectedButton !== this.nr) {
      buttons[selectedButton].selected = 0;
    }
    n = this.topBlock(this.bricks);
    if (n === 0) {
      return;
    }
    this.selected = modulo(this.selected - 1, n + 1);
    selectedButton = this.selected > 0 ? this.nr : -1;
    return xdraw();
  };

  return Button;

})();

PassButton = (function(superClass) {
  extend(PassButton, superClass);

  function PassButton() {
    return PassButton.__super__.constructor.apply(this, arguments);
  }

  PassButton.prototype.mousePressed = function(mx, my) {
    if (!this.inside(mx, my)) {
      return;
    }
    if (possibleMoves()) {
      return;
    }
    if (selectedButton !== -1) {
      buttons[selectedButton].selected = 0;
      selectedButton = -1;
    }
    player = 1 - player;
    return xdraw();
  };

  PassButton.prototype.draw = function() {
    PassButton.__super__.draw.apply(this, arguments);
    fc(0.5);
    textSize(32);
    return text(this.nr, this.x, this.y);
  };

  return PassButton;

})(Button);

setup = function() {
  var button, k, len, nr, ref;
  createCanvas(SIZE + 100, SIZE);
  ref = range(25);
  for (k = 0, len = ref.length; k < len; k++) {
    nr = ref[k];
    buttons.push(new Button(nr));
  }
  buttons[4].x = buttons[1].x;
  buttons[4].y = buttons[1].y - 2 * RADIE;
  buttons[4].bricks = [1];
  source[1] -= 1;
  buttons[20].x = buttons[23].x;
  buttons[20].y = buttons[23].y + 2 * RADIE;
  buttons[20].bricks = [0];
  source[0] -= 1;
  button = new PassButton('Pass');
  buttons.push(button);
  button.x = buttons[10].x;
  button.y = buttons[4].y;
  textSize(32);
  textAlign(CENTER, CENTER);
  rectMode(CENTER);
  return xdraw();
};

showBricks = function(data, p, x, y) {
  var i, k, len, ref, results;
  ref = range(data[p]);
  results = [];
  for (k = 0, len = ref.length; k < len; k++) {
    i = ref[k];
    fc(1, p, 0, 0.5);
    results.push(circle(x, y - i * HEIGHT, 0.25 * RADIE));
  }
  return results;
};

xdraw = function() {
  var button, k, len;
  bg(0.5);
  push();
  scale(1, 0.5);
  translate(XOFF, YOFF);
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    button.draw();
  }
  showBricks(source, 1, 350, -150);
  showBricks(target, 0, 430, -150);
  showBricks(source, 0, 350, 730);
  showBricks(target, 1, 430, 730);
  pop();
  textSize(50);
  return text(message, width / 2, height / 2);
};

mousePressed = function() {
  var button, k, len, results;
  results = [];
  for (k = 0, len = buttons.length; k < len; k++) {
    button = buttons[k];
    results.push(button.mousePressed(mouseX, mouseY));
  }
  return results;
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUlBLElBQUEsK01BQUE7RUFBQTs7Ozs7QUFBQSxJQUFBLEdBQU87O0FBQ1AsSUFBQSxHQUFPOztBQUNQLElBQUEsR0FBTzs7QUFDUCxLQUFBLEdBQVE7O0FBQ1IsTUFBQSxHQUFTOztBQUNULE1BQUEsR0FBUzs7QUFDVCxRQUFBLEdBQVc7O0FBRVgsT0FBQSxHQUFVOztBQUNWLE1BQUEsR0FBUzs7QUFDVCxLQUFBLEdBQVE7O0FBQ1IsY0FBQSxHQUFpQixDQUFDOztBQUNsQixNQUFBLEdBQVMsQ0FBQyxNQUFELEVBQVEsTUFBUjs7QUFDVCxNQUFBLEdBQVMsQ0FBQyxDQUFELEVBQUcsQ0FBSDs7QUFDVCxPQUFBLEdBQVU7O0FBQ1YsSUFBQSxHQUFPOztBQUVQLFVBQUEsR0FBYSxTQUFDLEdBQUQ7RUFDWixJQUFHLE1BQUEsS0FBVSxDQUFiO0lBQ0MsSUFBRyxHQUFBLEtBQVEsQ0FBUixJQUFBLEdBQUEsS0FBVSxDQUFWLElBQUEsR0FBQSxLQUFZLENBQWY7QUFBdUIsYUFBTyxDQUFDLENBQUQsRUFBOUI7O0lBQ0EsSUFBRyxHQUFBLEtBQU8sRUFBVjtBQUFrQixhQUFPLENBQUMsRUFBRCxFQUFJLEVBQUosRUFBTyxFQUFQLEVBQXpCOztBQUNBLFdBQU8sQ0FBQyxHQUFBLEdBQUksQ0FBTCxFQUFPLEdBQUEsR0FBSSxDQUFYLEVBSFI7R0FBQSxNQUFBO0lBS0MsSUFBRyxHQUFBLEtBQVEsRUFBUixJQUFBLEdBQUEsS0FBVyxFQUFYLElBQUEsR0FBQSxLQUFjLEVBQWpCO0FBQTBCLGFBQU8sQ0FBQyxFQUFELEVBQWpDOztJQUNBLElBQUcsR0FBQSxLQUFPLENBQVY7QUFBaUIsYUFBTyxDQUFDLENBQUQsRUFBRyxDQUFILEVBQUssQ0FBTCxFQUF4Qjs7QUFDQSxXQUFPLENBQUMsR0FBQSxHQUFJLENBQUws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YSxLQUFBLEdBQU0sQ0FBbkIsRUFBcUIsTUFBQSxHQUFPLENBQTVCO0FBZk87O0FBaUJSLFlBQUEsR0FBZSxTQUFBO0FBQ2QsTUFBQTtBQUFBO09BQUEseUNBQUE7O2lCQUNDLE1BQU0sQ0FBQyxZQUFQLENBQW9CLE1BQXBCLEVBQTJCLE1BQTNCO0FBREQ7O0FBRGMiLCJzb3VyY2VzQ29udGVudCI6WyIjIGJpdC5seS9zdGFja3NydWxlc1xyXG4jIGh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9REZnOUEzVEMxRU0mZmVhdHVyZT15b3V0dS5iZVxyXG4jIGJpdC5seS9zdGFja3Nib2FyZFxyXG5cclxuWE9GRiA9IDIyMFxyXG5ZT0ZGID0gMzgwXHJcblNJWkUgPSA2MDBcclxuUkFESUUgPSAxMzBcclxuSEVJR0hUID0gMTVcclxuQlJJQ0tTID0gMTJcclxuQUxQSEFCRVQgPSAnYWJjIFlkZWZnIGhpamtsbm1ub3BSIHFycydcclxuXHJcbmJ1dHRvbnMgPSBbXVxyXG5wbGF5ZXIgPSAwXHJcbm1vdmVzID0gMVxyXG5zZWxlY3RlZEJ1dHRvbiA9IC0xXHJcbnNvdXJjZSA9IFtCUklDS1MsQlJJQ0tTXVxyXG50YXJnZXQgPSBbMCwwXVxyXG5tZXNzYWdlID0gJydcclxuaGlzdCA9IFtdXHJcblxyXG5sZWdhbE1vdmVzID0gKGJ0bikgLT5cclxuXHRpZiBwbGF5ZXIgPT0gMFxyXG5cdFx0aWYgYnRuIGluIFswLDEsMl0gdGhlbiByZXR1cm4gWzRdIFxyXG5cdFx0aWYgYnRuID09IDIwIHRoZW4gcmV0dXJuIFsyMiwyMywyNF0gXHJcblx0XHRyZXR1cm4gW2J0bi01LGJ0bi02XSBcclxuXHRlbHNlXHJcblx0XHRpZiBidG4gaW4gWzIyLDIzLDI0XSB0aGVuIHJldHVybiBbMjBdIFxyXG5cdFx0aWYgYnRuID09IDQgdGhlbiByZXR1cm4gWzAsMSwyXSBcclxuXHRcdHJldHVybiBbYnRuKzUsYnRuKzZdIFxyXG5cclxucG9zc2libGVNb3ZlcyA9IC0+XHJcblx0cmVzID0gZmFsc2UgXHJcblx0Zm9yIGJ1dHRvbiBpbiBidXR0b25zXHJcblx0XHRpZiBfLmxhc3QoYnV0dG9uLmJyaWNrcykgPT0gcGxheWVyIFxyXG5cdFx0XHRpZiBtb3Zlcz09MiB0aGVuIHJlcyA9IHRydWVcclxuXHRcdFx0Zm9yIG1vdmUgaW4gbGVnYWxNb3ZlcyBidXR0b24ubnIgXHJcblx0XHRcdFx0aWYgYnV0dG9uc1ttb3ZlXS5icmlja3MubGVuZ3RoPT0wIHRoZW4gcmVzID0gdHJ1ZVxyXG5cdHJlc1xyXG5cclxuY2xhc3MgQnV0dG9uIFxyXG5cdGNvbnN0cnVjdG9yIDogKEBucikgLT5cclxuXHRcdGkgPSBAbnIgJSA1XHJcblx0XHRqID0gaW50IEBuciAvIDVcclxuXHRcdEB4ID0gUkFESUUgKiAoaSAtIDAuNSpqKSBcclxuXHRcdEB5ID0gUkFESUUgKiAwLjg4KmpcclxuXHRcdEBicmlja3MgPSBbXVxyXG5cdFx0QHNlbGVjdGVkID0gMFxyXG5cclxuXHRkcmF3IDogLT5cclxuXHRcdGlmIEBuciBpbiBbMyw5LDE1LDIxXSB0aGVuIHJldHVybiBcclxuXHRcdGZjIDAuMjVcclxuXHJcblx0XHRzYyAwXHJcblx0XHRzdyAxXHJcblx0XHRpZiBwbGF5ZXI9PTAgYW5kIEBucj09MjAgb3IgcGxheWVyPT0xIGFuZCBAbnI9PTQgXHJcblx0XHRcdHN3IDJcclxuXHRcdFx0c2MgMVxyXG5cdFx0Y2lyY2xlIEB4LCBAeSwgMC40NSAqIFJBRElFXHJcblx0XHRzdyAyXHJcblxyXG5cdFx0aWYgQG5yID09ICdQYXNzJyBcclxuXHRcdFx0dGV4dCBAbnIsQHgsQHlcclxuXHRcdGVsc2VcclxuXHRcdFx0dGV4dCBBTFBIQUJFVFtAbnJdLEB4LEB5XHJcblxyXG5cdFx0c2MgMFxyXG5cdFx0biA9IEBicmlja3MubGVuZ3RoXHJcblx0XHRmb3IgYnJpY2ssaSBpbiBAYnJpY2tzXHJcblx0XHRcdGlmIEBzZWxlY3RlZCA+PSBuLWkgdGhlbiBmYyAwLDEsMCwwLjVcdGVsc2UgZmMgMSxicmljaywwLDAuNVxyXG5cdFx0XHRjaXJjbGUgQHgsIEB5LWkqSEVJR0hULCAwLjI1ICogUkFESUUgXHJcblxyXG5cdHByaW50SGlzdG9yeSA6IC0+XHJcblx0XHRsYXN0cCA9IDBcclxuXHRcdGNvdW50ID0gMVxyXG5cdFx0cyA9IGNvdW50ICsgJyAnXHJcblx0XHRmb3IgW3AsbW92ZV0gaW4gaGlzdFxyXG5cdFx0XHRpZiBwIT1sYXN0cCBcclxuXHRcdFx0XHRpZiBwPT0wXHJcblx0XHRcdFx0XHRwcmludCBzXHJcblx0XHRcdFx0XHRjb3VudCArPSAxIFxyXG5cdFx0XHRcdFx0cyA9IGNvdW50ICsgJyAnXHJcblx0XHRcdFx0aWYgcD09MVxyXG5cdFx0XHRcdFx0cyA9IHMgKyAnfCAnXHJcblx0XHRcdFx0bGFzdHA9cFxyXG5cdFx0XHRcdHMgPSBzICsgbW92ZSArICcgJ1xyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0cyA9IHMgKyBtb3ZlICsgJyAnIFxyXG5cdFx0cHJpbnQgc1xyXG5cclxuXHJcblx0bW92ZUJyaWNrcyA6IC0+ICMgZnJvbSBzZWxlY3RlZEJ1dHRvbiB0byBAbnJcclxuXHRcdGlmIEBuciBub3QgaW4gWzQsMjBdIGFuZCBidXR0b25zW0Bucl0uYnJpY2tzLmxlbmd0aCA+IDAgXHJcblx0XHRcdGlmIG1vdmVzID09IDEgdGhlbiByZXR1cm4gIFxyXG5cdFx0XHRpZiBtb3ZlcyA9PSAyIHRoZW4gbW92ZXMgPSAxXHJcblxyXG5cdFx0Y291bnQgPSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZFxyXG5cdFx0aWYgY291bnQgPT0gMSB0aGVuIGNvdW50ID0gJycgXHJcblx0XHRoaXN0LnB1c2ggW3BsYXllcixBTFBIQUJFVFtzZWxlY3RlZEJ1dHRvbl0rQUxQSEFCRVRbQG5yXStjb3VudF1cclxuXHJcblx0XHRmb3IgaSBpbiByYW5nZSBidXR0b25zW3NlbGVjdGVkQnV0dG9uXS5zZWxlY3RlZFxyXG5cdFx0XHRicmljayA9IGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLmJyaWNrcy5wb3AoKVxyXG5cdFx0XHRpZiBAbnIgaW4gWzQsMjBdXHJcblx0XHRcdFx0dGFyZ2V0W3BsYXllcl0gKz0gMVxyXG5cdFx0XHRcdGlmIHRhcmdldFtwbGF5ZXJdID09IEJSSUNLU1xyXG5cdFx0XHRcdFx0bWVzc2FnZSA9IFsnUmVkJywnWWVsbG93J11bcGxheWVyXSArICcgd29uISdcclxuXHRcdFx0XHRcdEBwcmludEhpc3RvcnkoKVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdFx0QGJyaWNrcy5wdXNoIGJyaWNrIFxyXG5cclxuXHRcdGlmIHNvdXJjZVtwbGF5ZXJdID4gMCBhbmQgc2VsZWN0ZWRCdXR0b24gaW4gWzQsMjBdXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLmJyaWNrcy5wdXNoIHBsYXllclxyXG5cdFx0XHRzb3VyY2VbcGxheWVyXSAtPSAxXHJcblxyXG5cdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblx0XHRzZWxlY3RlZEJ1dHRvbiA9IC0xXHJcblxyXG5cdFx0bW92ZXMgLT0gMSBcclxuXHRcdGlmIG1vdmVzID09IDBcclxuXHRcdFx0cGxheWVyID0gMSAtIHBsYXllclxyXG5cdFx0XHRtb3ZlcyA9IDJcclxuXHRcdHhkcmF3KClcclxuXHRcdCNAcHJpbnRIaXN0b3J5KClcclxuXHJcblx0aW5zaWRlIDogKG14LG15KSAtPiBkaXN0KEB4ICsgWE9GRiwgKEB5ICsgWU9GRikvMiwgbXgsIG15KSA8IDAuNSAqIFJBRElFXHJcblx0XHRcdFxyXG5cdHRvcEJsb2NrIDogKGJyaWNrcykgLT5cclxuXHRcdGNvdW50ID0gMFxyXG5cdFx0d2hpbGUgYnJpY2tzW2JyaWNrcy5sZW5ndGgtMS1jb3VudF09PXBsYXllclxyXG5cdFx0XHRjb3VudCArPSAxXHJcblx0XHRjb3VudFxyXG5cclxuXHRtb3VzZVByZXNzZWQgOiAobXgsbXkpIC0+XHJcblx0XHRpZiBub3QgQGluc2lkZSBteCxteSB0aGVuIHJldHVybiBcclxuXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbj49MCBhbmQgc2VsZWN0ZWRCdXR0b24gIT0gQG5yICMgTWFya2VyaW5nIGF2IHRpbGxydXRhXHJcblx0XHRcdGlmIEBuciBpbiBsZWdhbE1vdmVzIHNlbGVjdGVkQnV0dG9uIHRoZW4gQG1vdmVCcmlja3MoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbj49MCBhbmQgc2VsZWN0ZWRCdXR0b24gIT0gQG5yXHJcblx0XHRcdGJ1dHRvbnNbc2VsZWN0ZWRCdXR0b25dLnNlbGVjdGVkID0gMFxyXG5cclxuXHRcdG4gPSBAdG9wQmxvY2sgQGJyaWNrc1xyXG5cdFx0aWYgbiA9PSAwIHRoZW4gcmV0dXJuICBcclxuXHRcdEBzZWxlY3RlZCA9IChAc2VsZWN0ZWQtMSkgJSUgKG4rMSlcclxuXHRcdHNlbGVjdGVkQnV0dG9uID0gaWYgQHNlbGVjdGVkID4gMCB0aGVuIEBuciBlbHNlIC0xXHJcblxyXG5cdFx0eGRyYXcoKVxyXG5cclxuY2xhc3MgUGFzc0J1dHRvbiBleHRlbmRzIEJ1dHRvblxyXG5cdG1vdXNlUHJlc3NlZCA6IChteCxteSkgLT5cclxuXHRcdGlmIG5vdCBAaW5zaWRlIG14LG15IHRoZW4gcmV0dXJuXHJcblx0XHRpZiBwb3NzaWJsZU1vdmVzKCkgdGhlbiByZXR1cm4gXHJcblx0XHRpZiBzZWxlY3RlZEJ1dHRvbiAhPSAtMSBcclxuXHRcdFx0YnV0dG9uc1tzZWxlY3RlZEJ1dHRvbl0uc2VsZWN0ZWQgPSAwXHJcblx0XHRcdHNlbGVjdGVkQnV0dG9uID0gLTEgXHJcblx0XHRwbGF5ZXIgPSAxIC0gcGxheWVyXHJcblx0XHR4ZHJhdygpXHJcblxyXG5cdGRyYXcgOiAtPlxyXG5cdFx0c3VwZXJcclxuXHRcdGZjIDAuNVxyXG5cdFx0dGV4dFNpemUgMzJcclxuXHRcdHRleHQgQG5yLEB4LEB5XHJcblxyXG5zZXR1cCA9IC0+XHJcblx0Y3JlYXRlQ2FudmFzIFNJWkUrMTAwLFNJWkVcclxuXHRmb3IgbnIgaW4gcmFuZ2UgMjVcclxuXHRcdGJ1dHRvbnMucHVzaCBuZXcgQnV0dG9uIG5yXHJcblxyXG5cdGJ1dHRvbnNbNF0ueCA9IGJ1dHRvbnNbMV0ueFxyXG5cdGJ1dHRvbnNbNF0ueSA9IGJ1dHRvbnNbMV0ueSAtIDIqUkFESUVcclxuXHRidXR0b25zWzRdLmJyaWNrcyA9IFsxXVxyXG5cdHNvdXJjZVsxXSAtPSAxXHJcblxyXG5cdGJ1dHRvbnNbMjBdLnggPSBidXR0b25zWzIzXS54XHJcblx0YnV0dG9uc1syMF0ueSA9IGJ1dHRvbnNbMjNdLnkgKyAyKlJBRElFXHJcblx0YnV0dG9uc1syMF0uYnJpY2tzID0gWzBdXHJcblx0c291cmNlWzBdIC09IDFcclxuXHJcblx0YnV0dG9uID0gbmV3IFBhc3NCdXR0b24gJ1Bhc3MnXHJcblx0YnV0dG9ucy5wdXNoIGJ1dHRvblxyXG5cdGJ1dHRvbi54ID0gYnV0dG9uc1sxMF0ueFxyXG5cdGJ1dHRvbi55ID0gYnV0dG9uc1s0XS55IFxyXG5cclxuXHR0ZXh0U2l6ZSAzMlxyXG5cdHRleHRBbGlnbiBDRU5URVIsQ0VOVEVSXHJcblx0cmVjdE1vZGUgQ0VOVEVSXHJcblx0eGRyYXcoKVxyXG5cclxuc2hvd0JyaWNrcyA9IChkYXRhLHAseCx5KSAtPlxyXG5cdGZvciBpIGluIHJhbmdlIGRhdGFbcF1cclxuXHRcdGZjIDEscCwwLDAuNVxyXG5cdFx0Y2lyY2xlIHgsIHktaSpIRUlHSFQsIDAuMjUgKiBSQURJRSBcclxuXHJcbnhkcmF3ID0gLT5cclxuXHRiZyAwLjVcclxuXHRwdXNoKClcclxuXHRzY2FsZSAxLDAuNVxyXG5cdHRyYW5zbGF0ZSBYT0ZGLFlPRkZcclxuXHRmb3IgYnV0dG9uIGluIGJ1dHRvbnNcclxuXHRcdGJ1dHRvbi5kcmF3KClcclxuXHJcblx0c2hvd0JyaWNrcyBzb3VyY2UsMSwzNTAsLTE1MFxyXG5cdHNob3dCcmlja3MgdGFyZ2V0LDAsNDMwLC0xNTBcclxuXHRzaG93QnJpY2tzIHNvdXJjZSwwLDM1MCw3MzBcclxuXHRzaG93QnJpY2tzIHRhcmdldCwxLDQzMCw3MzBcclxuXHJcblx0cG9wKClcclxuXHR0ZXh0U2l6ZSA1MFxyXG5cdHRleHQgbWVzc2FnZSx3aWR0aC8yLGhlaWdodC8yXHJcblxyXG5tb3VzZVByZXNzZWQgPSAtPlxyXG5cdGZvciBidXR0b24gaW4gYnV0dG9uc1xyXG5cdFx0YnV0dG9uLm1vdXNlUHJlc3NlZCBtb3VzZVgsbW91c2VZIl19
//# sourceURL=C:\Lab\2017\112-Stacks\coffee\sketch.coffee