// Generated by CoffeeScript 1.11.1
var Snake,
  modulo = function(a, b) { return (+a % (b = +b) + b) % b; };

Snake = (function() {
  function Snake(head, dir, total, tail) {
    this.head = head != null ? head : createVector(10, 10);
    this.dir = dir != null ? dir : 0;
    this.total = total != null ? total : 1;
    this.tail = tail != null ? tail : [];
  }

  Snake.prototype.eat = function(pos) {
    var d;
    d = dist(this.head.x, this.head.y, pos.x, pos.y);
    if (d === 0) {
      this.total++;
    }
    return d === 0;
  };

  Snake.prototype.death = function() {
    var d, i, len, pos, ref, results;
    ref = this.tail;
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      pos = ref[i];
      d = dist(this.head.x, this.head.y, pos.x, pos.y);
      if (d === 0) {
        print('starting over');
        this.total = 1;
        results.push(this.tail = []);
      } else {
        results.push(void 0);
      }
    }
    return results;
  };

  Snake.prototype.update = function() {
    this.tail.unshift(this.head);
    if (this.total <= this.tail.length) {
      this.tail.pop();
    }
    return this.head = createVector(modulo(this.head.x + [1, 0, -1, 0][this.dir], n), modulo(this.head.y + [0, 1, 0, -1][this.dir], n));
  };

  Snake.prototype.show = function() {
    var i, len, pos, ref, results;
    ref = this.tail.concat(this.head);
    results = [];
    for (i = 0, len = ref.length; i < len; i++) {
      pos = ref[i];
      results.push(kvadrat(pos, color(255)));
    }
    return results;
  };

  return Snake;

})();

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic25ha2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzbmFrZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsS0FBQTtFQUFBOztBQUFNO0VBQ1UsZUFBQyxJQUFELEVBQTRCLEdBQTVCLEVBQW9DLEtBQXBDLEVBQThDLElBQTlDO0lBQUMsSUFBQyxDQUFBLHNCQUFELE9BQU0sWUFBQSxDQUFhLEVBQWIsRUFBZ0IsRUFBaEI7SUFBcUIsSUFBQyxDQUFBLG9CQUFELE1BQUs7SUFBRyxJQUFDLENBQUEsd0JBQUQsUUFBTztJQUFHLElBQUMsQ0FBQSxzQkFBRCxPQUFNO0VBQXBEOztrQkFFZCxHQUFBLEdBQU0sU0FBQyxHQUFEO0FBQ0osUUFBQTtJQUFBLENBQUEsR0FBSSxJQUFBLENBQUssSUFBQyxDQUFBLElBQUksQ0FBQyxDQUFYLEVBQWMsSUFBQyxDQUFBLElBQUksQ0FBQyxDQUFwQixFQUF1QixHQUFHLENBQUMsQ0FBM0IsRUFBOEIsR0FBRyxDQUFDLENBQWxDO0lBQ0osSUFBRyxDQUFBLEtBQUssQ0FBUjtNQUFlLElBQUMsQ0FBQSxLQUFELEdBQWY7O1dBQ0EsQ0FBQSxLQUFLO0VBSEQ7O2tCQUtOLEtBQUEsR0FBUSxTQUFBO0FBQ04sUUFBQTtBQUFBO0FBQUE7U0FBQSxxQ0FBQTs7TUFDRSxDQUFBLEdBQUksSUFBQSxDQUFLLElBQUMsQ0FBQSxJQUFJLENBQUMsQ0FBWCxFQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsQ0FBcEIsRUFBdUIsR0FBRyxDQUFDLENBQTNCLEVBQThCLEdBQUcsQ0FBQyxDQUFsQztNQUNKLElBQUcsQ0FBQSxLQUFLLENBQVI7UUFDRSxLQUFBLENBQU0sZUFBTjtRQUNBLElBQUMsQ0FBQSxLQUFELEdBQVM7cUJBQ1QsSUFBQyxDQUFBLElBQUQsR0FBUSxJQUhWO09BQUEsTUFBQTs2QkFBQTs7QUFGRjs7RUFETTs7a0JBUVIsTUFBQSxHQUFTLFNBQUE7SUFDUCxJQUFDLENBQUEsSUFBSSxDQUFDLE9BQU4sQ0FBYyxJQUFDLENBQUEsSUFBZjtJQUNBLElBQUcsSUFBQyxDQUFBLEtBQUQsSUFBVSxJQUFDLENBQUEsSUFBSSxDQUFDLE1BQW5CO01BQStCLElBQUMsQ0FBQSxJQUFJLENBQUMsR0FBTixDQUFBLEVBQS9COztXQUNBLElBQUMsQ0FBQSxJQUFELEdBQVEsWUFBQSxRQUFjLElBQUMsQ0FBQSxJQUFJLENBQUMsQ0FBTixHQUFVLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFDLENBQU4sRUFBUSxDQUFSLENBQVcsQ0FBQSxJQUFDLENBQUEsR0FBRCxHQUFVLEVBQTdDLFNBQWlELElBQUMsQ0FBQSxJQUFJLENBQUMsQ0FBTixHQUFVLENBQUMsQ0FBRCxFQUFHLENBQUgsRUFBSyxDQUFMLEVBQU8sQ0FBQyxDQUFSLENBQVcsQ0FBQSxJQUFDLENBQUEsR0FBRCxHQUFVLEVBQWhGO0VBSEQ7O2tCQUtULElBQUEsR0FBTyxTQUFBO0FBQUcsUUFBQTtBQUFBO0FBQUE7U0FBQSxxQ0FBQTs7bUJBQUEsT0FBQSxDQUFRLEdBQVIsRUFBYSxLQUFBLENBQU0sR0FBTixDQUFiO0FBQUE7O0VBQUgiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBTbmFrZVxyXG4gIGNvbnN0cnVjdG9yIDogKEBoZWFkPWNyZWF0ZVZlY3RvcigxMCwxMCksIEBkaXI9MCwgQHRvdGFsPTEsIEB0YWlsPVtdKSAtPiBcclxuXHJcbiAgZWF0IDogKHBvcykgLT5cclxuICAgIGQgPSBkaXN0IEBoZWFkLngsIEBoZWFkLnksIHBvcy54LCBwb3MueVxyXG4gICAgaWYgZCA9PSAwIHRoZW4gQHRvdGFsKytcclxuICAgIGQgPT0gMFxyXG5cclxuICBkZWF0aCA6IC0+XHJcbiAgICBmb3IgcG9zIGluIEB0YWlsXHJcbiAgICAgIGQgPSBkaXN0IEBoZWFkLngsIEBoZWFkLnksIHBvcy54LCBwb3MueVxyXG4gICAgICBpZiBkID09IDAgXHJcbiAgICAgICAgcHJpbnQgJ3N0YXJ0aW5nIG92ZXInXHJcbiAgICAgICAgQHRvdGFsID0gMVxyXG4gICAgICAgIEB0YWlsID0gW11cclxuXHJcbiAgdXBkYXRlIDogLT5cclxuICAgIEB0YWlsLnVuc2hpZnQgQGhlYWRcclxuICAgIGlmIEB0b3RhbCA8PSBAdGFpbC5sZW5ndGggdGhlbiBAdGFpbC5wb3AoKVxyXG4gICAgQGhlYWQgPSBjcmVhdGVWZWN0b3IgKEBoZWFkLnggKyBbMSwwLC0xLDBdW0BkaXJdKSAlJSBuLCAoQGhlYWQueSArIFswLDEsMCwtMV1bQGRpcl0pICUlIG5cclxuXHJcbiAgc2hvdyA6IC0+IGt2YWRyYXQgcG9zLCBjb2xvciAyNTUgZm9yIHBvcyBpbiBAdGFpbC5jb25jYXQgQGhlYWQiXX0=
//# sourceURL=C:\Lab\2017\027-snake\snake.coffee