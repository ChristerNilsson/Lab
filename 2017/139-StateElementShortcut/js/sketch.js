// Generated by CoffeeScript 1.12.7
var State, button, div, render, setup, state, table, td, tr;

render = function(tag, attrs, children) {
  var attr, child, key, res;
  res = ((function() {
    var results;
    results = [];
    for (key in attrs) {
      attr = attrs[key];
      results.push(' ' + key + '="' + attr + '"');
    }
    return results;
  })()).join('');
  return "<" + tag + res + ">" + (((function() {
    var i, len, results;
    results = [];
    for (i = 0, len = children.length; i < len; i++) {
      child = children[i];
      results.push(child);
    }
    return results;
  })()).join('')) + "</" + tag + ">\n";
};

button = function(attrs, children) {
  return render('button', attrs, children);
};

div = function(attrs, children) {
  return render('div', attrs, children);
};

table = function(attrs, children) {
  return render('table', attrs, children);
};

tr = function(attrs, children) {
  return render('tr', attrs, children);
};

td = function(attrs, children) {
  return render('td', attrs, children);
};

State = (function() {
  function State(a, b, hist) {
    this.a = a;
    this.b = b;
    this.hist = hist;
    this.update('body', div({
      style: "font-size:30px"
    }, [
      div({
        id: 'a'
      }, [this.a]), div({
        id: 'b'
      }, [this.b]), button({
        id: 'bAdd',
        onclick: 'state.add2()',
        style: "font-size:30px"
      }, ['+2']), button({
        id: 'bMul',
        onclick: 'state.mul2()',
        style: "font-size:30px"
      }, ['*2']), button({
        id: 'bDiv',
        onclick: 'state.div2()',
        style: "font-size:30px"
      }, ['/2']), button({
        id: 'bUndo',
        onclick: 'state.undo()',
        style: "font-size:30px"
      }, ['undo']), button({
        id: 'bNext',
        onclick: 'state.next()',
        style: "font-size:30px"
      }, ['next']), div({
        id: 'hist'
      }, [this.hist])
    ]));
  }

  State.prototype.add2 = function() {
    return this.fix({
      'hist': this.hist.concat([this.a]),
      'a': this.a + 2
    });
  };

  State.prototype.mul2 = function() {
    return this.fix({
      'hist': this.hist.concat([this.a]),
      'a': this.a * 2
    });
  };

  State.prototype.div2 = function() {
    return this.fix({
      'hist': this.hist.concat([this.a]),
      'a': this.a / 2
    });
  };

  State.prototype.undo = function() {
    return this.fix({
      'a': this.hist.pop(),
      'hist': this.hist
    });
  };

  State.prototype.next = function() {
    return this.fix({
      'a': int(1 + 20 * random()),
      'b': int(1 + 20 * random()),
      'hist': []
    });
  };

  State.prototype.fix = function(hash) {
    var key, results, value;
    results = [];
    for (key in hash) {
      value = hash[key];
      results.push(this.update(key, value));
    }
    return results;
  };

  State.prototype.update = function(name, value) {
    print(name, value);
    this[name] = value;
    document.getElementById(name).innerHTML = value;
    this.disable('bUndo', this.hist.length === 0 || this.a === this.b);
    this.disable('bAdd', this.a === this.b);
    this.disable('bMul', this.a === this.b);
    this.disable('bDiv', this.a === this.b || this.a % 2 === 1);
    return this.disable('bNext', this.a !== this.b);
  };

  State.prototype.disable = function(name, value) {
    return document.getElementById(name).disabled = value;
  };

  return State;

})();

state = null;

setup = function() {
  return state = new State(7, 1, []);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsTUFBQSxHQUFTLFNBQUMsR0FBRCxFQUFLLEtBQUwsRUFBVyxRQUFYO0FBQ1IsTUFBQTtFQUFBLEdBQUEsR0FBTTs7QUFBQztTQUFBLFlBQUE7O21CQUFBLEdBQUEsR0FBTSxHQUFOLEdBQVksSUFBWixHQUFtQixJQUFuQixHQUEwQjtBQUExQjs7TUFBRCxDQUFxRCxDQUFDLElBQXRELENBQTJELEVBQTNEO1NBQ04sR0FBQSxHQUFJLEdBQUosR0FBVSxHQUFWLEdBQWMsR0FBZCxHQUFnQixDQUFDOztBQUFDO1NBQUEsMENBQUE7O21CQUFBO0FBQUE7O01BQUQsQ0FBNkIsQ0FBQyxJQUE5QixDQUFtQyxFQUFuQyxDQUFELENBQWhCLEdBQXdELElBQXhELEdBQTRELEdBQTVELEdBQWdFO0FBRnhEOztBQUlULE1BQUEsR0FBUyxTQUFDLEtBQUQsRUFBTyxRQUFQO1NBQW9CLE1BQUEsQ0FBTyxRQUFQLEVBQWdCLEtBQWhCLEVBQXNCLFFBQXRCO0FBQXBCOztBQUNULEdBQUEsR0FBTSxTQUFDLEtBQUQsRUFBTyxRQUFQO1NBQW9CLE1BQUEsQ0FBTyxLQUFQLEVBQWEsS0FBYixFQUFtQixRQUFuQjtBQUFwQjs7QUFDTixLQUFBLEdBQVEsU0FBQyxLQUFELEVBQU8sUUFBUDtTQUFvQixNQUFBLENBQU8sT0FBUCxFQUFlLEtBQWYsRUFBcUIsUUFBckI7QUFBcEI7O0FBQ1IsRUFBQSxHQUFLLFNBQUMsS0FBRCxFQUFPLFFBQVA7U0FBb0IsTUFBQSxDQUFPLElBQVAsRUFBWSxLQUFaLEVBQWtCLFFBQWxCO0FBQXBCOztBQUNMLEVBQUEsR0FBSyxTQUFDLEtBQUQsRUFBTyxRQUFQO1NBQW9CLE1BQUEsQ0FBTyxJQUFQLEVBQVksS0FBWixFQUFrQixRQUFsQjtBQUFwQjs7QUFJQztFQUNTLGVB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LEtBQUEsR0FBUSxJQUFJLEtBQUosQ0FBVSxDQUFWLEVBQVksQ0FBWixFQUFjLEVBQWQ7QUFBWCIsInNvdXJjZXNDb250ZW50IjpbInJlbmRlciA9ICh0YWcsYXR0cnMsY2hpbGRyZW4pIC0+XHJcblx0cmVzID0gKCcgJyArIGtleSArICc9XCInICsgYXR0ciArICdcIicgZm9yIGtleSxhdHRyIG9mIGF0dHJzKS5qb2luICcnXHJcblx0XCI8I3t0YWd9I3tyZXN9PiN7KGNoaWxkIGZvciBjaGlsZCBpbiBjaGlsZHJlbikuam9pbignJyl9PC8je3RhZ30+XFxuXCJcclxuXHJcbmJ1dHRvbiA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICdidXR0b24nLGF0dHJzLGNoaWxkcmVuXHJcbmRpdiA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICdkaXYnLGF0dHJzLGNoaWxkcmVuXHJcbnRhYmxlID0gKGF0dHJzLGNoaWxkcmVuKSAtPiByZW5kZXIgJ3RhYmxlJyxhdHRycyxjaGlsZHJlblxyXG50ciA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICd0cicsYXR0cnMsY2hpbGRyZW5cclxudGQgPSAoYXR0cnMsY2hpbGRyZW4pIC0+IHJlbmRlciAndGQnLGF0dHJzLGNoaWxkcmVuXHJcblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcblxyXG5jbGFzcyBTdGF0ZSBcclxuXHRjb25zdHJ1Y3RvciA6IChAYSxAYixAaGlzdCkgLT5cclxuXHRcdEB1cGRhdGUgJ2JvZHknLFxyXG5cdFx0XHRkaXYge3N0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sW1xyXG5cdFx0XHRcdGRpdiB7aWQ6J2EnfSxbQGFdXHJcblx0XHRcdFx0ZGl2IHtpZDonYid9LFtAYl1cclxuXHRcdFx0XHRidXR0b24ge2lkOidiQWRkJyxvbmNsaWNrOidzdGF0ZS5hZGQyKCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sWycrMiddXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYk11bCcsb25jbGljazonc3RhdGUubXVsMigpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFsnKjInXVxyXG5cdFx0XHRcdGJ1dHRvbiB7aWQ6J2JEaXYnLG9uY2xpY2s6J3N0YXRlLmRpdjIoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJy8yJ11cclxuXHRcdFx0XHRidXR0b24ge2lkOidiVW5kbycsb25jbGljazonc3RhdGUudW5kbygpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFsndW5kbyddXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYk5leHQnLG9uY2xpY2s6J3N0YXRlLm5leHQoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJ25leHQnXVxyXG5cdFx0XHRcdGRpdiB7aWQ6J2hpc3QnfSxbQGhpc3RdXHJcblx0XHRcdF1cclxuXHJcblx0YWRkMiA6IC0+IEBmaXggeydoaXN0JzogQGhpc3QuY29uY2F0KFtAYV0pLCAnYSc6IEBhKzJ9XHJcblx0bXVsMiA6IC0+IEBmaXggeydoaXN0JzogQGhpc3QuY29uY2F0KFtAYV0pLCAnYSc6IEBhKjJ9XHJcblx0ZGl2MiA6IC0+IEBmaXggeydoaXN0JzogQGhpc3QuY29uY2F0KFtAYV0pLCAnYSc6IEBhLzJ9XHJcblx0dW5kbyA6IC0+IEBmaXggeydhJzogQGhpc3QucG9wKCksICdoaXN0JzpAaGlzdH1cclxuXHRuZXh0IDogLT4gQGZpeCB7J2EnOiBpbnQoMSArIDIwICogcmFuZG9tKCkpLCdiJzogaW50KDEgKyAyMCAqIHJhbmRvbSgpKSwnaGlzdCc6IFtdfVxyXG5cdGZpeCA6IChoYXNoKSAtPiBAdXBkYXRlIGtleSx2YWx1ZSBmb3Iga2V5LHZhbHVlIG9mIGhhc2hcclxuXHR1cGRhdGUgOiAobmFtZSx2YWx1ZSkgLT5cclxuXHRcdHByaW50IG5hbWUsdmFsdWUgXHJcblx0XHRAW25hbWVdID0gdmFsdWVcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hbWUpLmlubmVySFRNTCA9IHZhbHVlXHJcblx0XHRAZGlzYWJsZSAnYlVuZG8nLEBoaXN0Lmxlbmd0aD09MCBvciBAYT09QGJcclxuXHRcdEBkaXNhYmxlICdiQWRkJywgQGE9PUBiXHJcblx0XHRAZGlzYWJsZSAnYk11bCcsIEBhPT1AYlxyXG5cdFx0QGRpc2FibGUgJ2JEaXYnLCBAYT09QGIgb3IgQGElMj09MVxyXG5cdFx0QGRpc2FibGUgJ2JOZXh0JywgQGEhPUBiXHJcblx0ZGlzYWJsZSA6IChuYW1lLHZhbHVlKSAtPlx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmFtZSkuZGlzYWJsZWQgPSB2YWx1ZVxyXG5cclxuc3RhdGUgPSBudWxsXHJcbnNldHVwID0gLT4gc3RhdGUgPSBuZXcgU3RhdGUgNywxLFtdXHJcbiJdfQ==
//# sourceURL=C:\Lab\2017\139-StateElementShortcut\coffee\sketch.coffee