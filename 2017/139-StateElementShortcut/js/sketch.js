// Generated by CoffeeScript 1.12.7
var Button, Data, Div, Element, State, Table, Td, Text, Tr, setup, state,
  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
  hasProp = {}.hasOwnProperty;

Element = (function() {
  function Element(attrs, children) {
    this.attrs = attrs;
    this.children = children != null ? children : [];
  }

  Element.prototype.render = function(tag) {
    var attr, child, key, res;
    res = (function() {
      var ref, results;
      ref = this.attrs;
      results = [];
      for (key in ref) {
        attr = ref[key];
        results.push(' ' + key + '="' + attr + '"');
      }
      return results;
    }).call(this);
    res = res.join('');
    return "<" + tag + res + ">" + (((function() {
      var i, len, ref, results;
      ref = this.children;
      results = [];
      for (i = 0, len = ref.length; i < len; i++) {
        child = ref[i];
        results.push(child.render());
      }
      return results;
    }).call(this)).join('')) + "</" + tag + ">\n";
  };

  return Element;

})();

Button = (function(superClass) {
  extend(Button, superClass);

  function Button() {
    return Button.__super__.constructor.apply(this, arguments);
  }

  Button.prototype.render = function() {
    return Button.__super__.render.call(this, 'button');
  };

  return Button;

})(Element);

Div = (function(superClass) {
  extend(Div, superClass);

  function Div() {
    return Div.__super__.constructor.apply(this, arguments);
  }

  Div.prototype.render = function() {
    return Div.__super__.render.call(this, 'div');
  };

  return Div;

})(Element);

Table = (function(superClass) {
  extend(Table, superClass);

  function Table() {
    return Table.__super__.constructor.apply(this, arguments);
  }

  Table.prototype.render = function() {
    return Table.__super__.render.call(this, 'table');
  };

  return Table;

})(Element);

Tr = (function(superClass) {
  extend(Tr, superClass);

  function Tr() {
    return Tr.__super__.constructor.apply(this, arguments);
  }

  Tr.prototype.render = function() {
    return Tr.__super__.render.call(this, 'tr');
  };

  return Tr;

})(Element);

Td = (function(superClass) {
  extend(Td, superClass);

  function Td() {
    return Td.__super__.constructor.apply(this, arguments);
  }

  Td.prototype.render = function() {
    return Td.__super__.render.call(this, 'td');
  };

  return Td;

})(Element);

Text = (function() {
  function Text(text) {
    this.text = text;
  }

  Text.prototype.render = function() {
    return this.text;
  };

  return Text;

})();

Data = (function() {
  function Data(name1) {
    this.name = name1;
  }

  Data.prototype.render = function() {
    return state[this.name];
  };

  return Data;

})();

State = (function() {
  function State(a, b, hist) {
    var view;
    this.a = a;
    this.b = b;
    this.hist = hist;
    view = new Div({
      style: "font-size:30px"
    }, [
      new Div({
        id: 'a'
      }, [new Text(this.a)]), new Div({
        id: 'b'
      }, [new Text(this.b)]), new Button({
        id: 'bAdd',
        onclick: 'state.add2()',
        style: "font-size:30px"
      }, [new Text('+2')]), new Button({
        id: 'bMul',
        onclick: 'state.mul2()',
        style: "font-size:30px"
      }, [new Text('*2')]), new Button({
        id: 'bDiv',
        onclick: 'state.div2()',
        style: "font-size:30px"
      }, [new Text('/2')]), new Button({
        id: 'bUndo',
        onclick: 'state.undo()',
        style: "font-size:30px"
      }, [new Text('undo')]), new Button({
        id: 'bNext',
        onclick: 'state.next()',
        style: "font-size:30px"
      }, [new Text('next')]), new Div({
        id: 'hist'
      }, [new Text(this.hist)])
    ]);
    this.update('body', view.render());
  }

  State.prototype.add2 = function() {
    this.update('hist', this.hist.concat([this.a]));
    return this.update('a', this.a + 2);
  };

  State.prototype.mul2 = function() {
    this.update('hist', this.hist.concat([this.a]));
    return this.update('a', this.a * 2);
  };

  State.prototype.div2 = function() {
    this.update('hist', this.hist.concat([this.a]));
    return this.update('a', this.a / 2);
  };

  State.prototype.undo = function() {
    if (this.hist.length === 0) {
      return;
    }
    this.update('a', this.hist.pop());
    return this.update('hist', this.hist);
  };

  State.prototype.next = function() {
    this.update('a', int(1 + 20 * random()));
    this.update('b', int(1 + 20 * random()));
    return this.update('hist', []);
  };

  State.prototype.update = function(name, value) {
    print(name, value);
    this[name] = value;
    return document.getElementById(name).innerHTML = value;
  };

  return State;

})();

state = null;

setup = function() {
  return state = new State(7, 1, []);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsb0VBQUE7RUFBQTs7O0FBQU07RUFDUyxpQkFBQyxLQUFELEVBQVMsUUFBVDtJQUFDLElBQUMsQ0FBQSxRQUFEO0lBQVEsSUFBQyxDQUFBLDhCQUFELFdBQVU7RUFBbkI7O29CQUNkLE1BQUEsR0FBUyxTQUFDLEdBQUQ7QUFDUixRQUFBO0lBQUEsR0FBQTs7QUFBTztBQUFBO1dBQUEsVUFBQTs7cUJBQUEsR0FBQSxHQUFNLEdBQU4sR0FBWSxJQUFaLEdBQW1CLElBQW5CLEdBQTBCO0FBQTFCOzs7SUFDUCxHQUFBLEdBQU0sR0FBRyxDQUFDLElBQUosQ0FBUyxFQUFUO1dBQ04sR0FBQSxHQUFJLEdBQUosR0FBVSxHQUFWLEdBQWMsR0FBZCxHQUFnQixDQUFDOztBQUFDO0FBQUE7V0FBQSxxQ0FBQTs7cUJBQUEsS0FBSyxDQUFDLE1BQU4sQ0FBQTtBQUFBOztpQkFBRCxDQUF1QyxDQUFDLElBQXhDLENBQTZDLEVBQTdDLENBQUQsQ0FBaEIsR0FBa0UsSUFBbEUsR0FBc0UsR0FBdEUsR0FBMEU7RUFIbEU7Ozs7OztBQUtKOzs7Ozs7O21CQUNMLE1BQUEsR0FBUyxTQUFBO1dBQUcsbUNBQU0sUUFBTjtFQUFIOzs7O0dBRFc7O0FBR2Y7Ozs7Ozs7Z0JBQ0wsTUFBQSxHQUFTLFNBQUE7V0FBRyxnQ0FBTSxLQUFOO0VBQUg7Ozs7R0FEUTs7QUFHWjs7Ozs7OztrQkFDTCxNQUFBLEdBQVMsU0FBQTtXQUFHLGtDQUFNLE9BQU47RUFBSDs7OztHQURVOztBQUdkOzs7Ozs7O2VBQ0wsTUFBQSxHQUFTLFNBQUE7V0FBRywrQkFBTSxJQUFOO0VBQUg7Ozs7R0FETzs7QUFHWDs7Ozs7OztlQUNMLE1BQUEsR0FBUyxTQUFBO1dBQUcsK0JBQU0sSUFBTjtFQUFIOzs7O0dBRE87O0FBR1g7RUFDUyxjQUFDLElB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b250ZW50IjpbImNsYXNzIEVsZW1lbnQgXHJcblx0Y29uc3RydWN0b3IgOiAoQGF0dHJzLCBAY2hpbGRyZW49W10pIC0+XHJcblx0cmVuZGVyIDogKHRhZykgLT5cclxuXHRcdHJlcyA9ICgnICcgKyBrZXkgKyAnPVwiJyArIGF0dHIgKyAnXCInIGZvciBrZXksYXR0ciBvZiBAYXR0cnMpXHJcblx0XHRyZXMgPSByZXMuam9pbiAnJ1xyXG5cdFx0XCI8I3t0YWd9I3tyZXN9PiN7KGNoaWxkLnJlbmRlcigpIGZvciBjaGlsZCBpbiBAY2hpbGRyZW4pLmpvaW4oJycpfTwvI3t0YWd9PlxcblwiXHJcblxyXG5jbGFzcyBCdXR0b24gZXh0ZW5kcyBFbGVtZW50ICBcclxuXHRyZW5kZXIgOiAtPiBzdXBlciAnYnV0dG9uJ1xyXG5cclxuY2xhc3MgRGl2IGV4dGVuZHMgRWxlbWVudCBcclxuXHRyZW5kZXIgOiAtPiBzdXBlciAnZGl2J1xyXG5cclxuY2xhc3MgVGFibGUgZXh0ZW5kcyBFbGVtZW50IFxyXG5cdHJlbmRlciA6IC0+IHN1cGVyICd0YWJsZSdcclxuXHJcbmNsYXNzIFRyIGV4dGVuZHMgRWxlbWVudCBcclxuXHRyZW5kZXIgOiAtPiBzdXBlciAndHInXHJcblxyXG5jbGFzcyBUZCBleHRlbmRzIEVsZW1lbnQgXHJcblx0cmVuZGVyIDogLT4gc3VwZXIgJ3RkJ1xyXG5cclxuY2xhc3MgVGV4dFxyXG5cdGNvbnN0cnVjdG9yIDogKEB0ZXh0KSAtPlxyXG5cdHJlbmRlciA6IC0+IEB0ZXh0XHJcblxyXG5jbGFzcyBEYXRhIFxyXG5cdGNvbnN0cnVjdG9yIDogKEBuYW1lKSAtPlxyXG5cdHJlbmRlciA6IC0+IHN0YXRlW0BuYW1lXVxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuY2xhc3MgU3RhdGUgXHJcblx0Y29uc3RydWN0b3IgOiAoQGEsQGIsQGhpc3QpIC0+XHJcblx0XHR2aWV3ID0gXHJcblx0XHRcdG5ldyBEaXYge3N0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sW1xyXG5cdFx0XHRcdG5ldyBEaXYge2lkOidhJ30sW25ldyBUZXh0IEBhXVxyXG5cdFx0XHRcdG5ldyBEaXYge2lkOidiJ30sW25ldyBUZXh0IEBiXVxyXG5cdFx0XHRcdG5ldyBCdXR0b24ge2lkOidiQWRkJyxvbmNsaWNrOidzdGF0ZS5hZGQyKCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sW25ldyBUZXh0ICcrMiddXHJcblx0XHRcdFx0bmV3IEJ1dHRvbiB7aWQ6J2JNdWwnLG9uY2xpY2s6J3N0YXRlLm11bDIoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbbmV3IFRleHQgJyoyJ11cclxuXHRcdFx0XHRuZXcgQnV0dG9uIHtpZDonYkRpdicsb25jbGljazonc3RhdGUuZGl2MigpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFtuZXcgVGV4dCAnLzInXVxyXG5cdFx0XHRcdG5ldyBCdXR0b24ge2lkOidiVW5kbycsb25jbGljazonc3RhdGUudW5kbygpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFtuZXcgVGV4dCAndW5kbyddXHJcblx0XHRcdFx0bmV3IEJ1dHRvbiB7aWQ6J2JOZXh0JyxvbmNsaWNrOidzdGF0ZS5uZXh0KCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sW25ldyBUZXh0ICduZXh0J11cclxuXHRcdFx0XHRuZXcgRGl2IHtpZDonaGlzdCd9LFtuZXcgVGV4dCBAaGlzdF1cclxuXHRcdFx0XVxyXG5cdFx0QHVwZGF0ZSAnYm9keScsdmlldy5yZW5kZXIoKVxyXG5cclxuXHRhZGQyIDogLT5cclxuXHRcdEB1cGRhdGUgJ2hpc3QnLCBAaGlzdC5jb25jYXQgW0BhXSBcclxuXHRcdEB1cGRhdGUgJ2EnLCBAYSsyXHJcblx0bXVsMiA6IC0+XHJcblx0XHRAdXBkYXRlICdoaXN0JywgQGhpc3QuY29uY2F0IFtAYV0gXHJcblx0XHRAdXBkYXRlICdhJywgQGEqMlxyXG5cdGRpdjIgOiAtPlxyXG5cdFx0QHVwZGF0ZSAnaGlzdCcsIEBoaXN0LmNvbmNhdCBbQGFdIFxyXG5cdFx0QHVwZGF0ZSAnYScsIEBhLzJcclxuXHR1bmRvIDogLT5cclxuXHRcdGlmIEBoaXN0Lmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuXHJcblx0XHRAdXBkYXRlICdhJywgQGhpc3QucG9wKClcclxuXHRcdEB1cGRhdGUgJ2hpc3QnLCBAaGlzdFxyXG5cdG5leHQgOiAtPlxyXG5cdFx0QHVwZGF0ZSAnYScsIGludCAxICsgMjAgKiByYW5kb20oKSBcclxuXHRcdEB1cGRhdGUgJ2InLCBpbnQgMSArIDIwICogcmFuZG9tKCkgXHJcblx0XHRAdXBkYXRlICdoaXN0JywgW11cclxuXHR1cGRhdGUgOiAobmFtZSx2YWx1ZSkgLT5cclxuXHRcdHByaW50IG5hbWUsdmFsdWUgXHJcblx0XHRAW25hbWVdID0gdmFsdWVcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hbWUpLmlubmVySFRNTCA9IHZhbHVlXHJcblxyXG5zdGF0ZSA9IG51bGxcclxuXHJcbnNldHVwID0gLT4gc3RhdGUgPSBuZXcgU3RhdGUgNywxLFtdXHJcbiJdfQ==
//# sourceURL=C:\Lab\2017\139\coffee\sketch.coffee