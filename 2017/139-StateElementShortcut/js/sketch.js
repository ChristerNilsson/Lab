// Generated by CoffeeScript 1.12.7
var State, button, div, render, setup, state;

render = function(tag, attrs, children) {
  var attr, child, key, res;
  res = ((function() {
    var results;
    results = [];
    for (key in attrs) {
      attr = attrs[key];
      results.push(' ' + key + '="' + attr + '"');
    }
    return results;
  })()).join('');
  return "<" + tag + res + ">" + (((function() {
    var i, len, results;
    results = [];
    for (i = 0, len = children.length; i < len; i++) {
      child = children[i];
      results.push(child);
    }
    return results;
  })()).join('')) + "</" + tag + ">\n";
};

button = function(attrs, children) {
  if (children == null) {
    children = [];
  }
  return render('button', attrs, children);
};

div = function(attrs, children) {
  if (children == null) {
    children = [];
  }
  return render('div', attrs, children);
};

State = (function() {
  function State(a, b, hist) {
    this.a = a;
    this.b = b;
    this.hist = hist;
    this.update('body', div({
      style: "font-size:30px"
    }, [
      div({
        id: 'a'
      }, [this.a]), div({
        id: 'b'
      }, [this.b]), button({
        id: 'bAdd',
        onclick: 'state.add2()',
        style: "font-size:30px"
      }, ['+2']), button({
        id: 'bMul',
        onclick: 'state.mul2()',
        style: "font-size:30px"
      }, ['*2']), button({
        id: 'bDiv',
        onclick: 'state.div2()',
        style: "font-size:30px"
      }, ['/2']), button({
        id: 'bUndo',
        onclick: 'state.undo()',
        style: "font-size:30px"
      }, ['undo']), button({
        id: 'bNext',
        onclick: 'state.next()',
        style: "font-size:30px"
      }, ['next']), div({
        id: 'hist'
      }, [this.hist])
    ]));
  }

  State.prototype.add2 = function() {
    return this.fix({
      a: this.a + 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.mul2 = function() {
    return this.fix({
      a: this.a * 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.div2 = function() {
    return this.fix({
      a: this.a / 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.undo = function() {
    return this.fix({
      a: this.hist.pop(),
      hist: this.hist
    });
  };

  State.prototype.next = function() {
    return this.fix({
      a: int(1 + 20 * random()),
      b: int(1 + 20 * random()),
      hist: []
    });
  };

  State.prototype.fix = function(hash) {
    var key, value;
    for (key in hash) {
      value = hash[key];
      this.update(key, value);
    }
    this.disable('bUndo', this.hist.length === 0 || this.a === this.b);
    this.disable('bAdd', this.a === this.b);
    this.disable('bMul', this.a === this.b);
    this.disable('bDiv', this.a === this.b || this.a % 2 === 1);
    return this.disable('bNext', this.a !== this.b);
  };

  State.prototype.update = function(name, value) {
    print(name, value);
    this[name] = value;
    return document.getElementById(name).innerHTML = value;
  };

  State.prototype.disable = function(name, value) {
    return document.getElementById(name).disabled = value;
  };

  return State;

})();

state = null;

setup = function() {
  return state = new State(7, 1, []);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsTUFBQSxHQUFTLFNBQUMsR0FBRCxFQUFLLEtBQUwsRUFBVyxRQUFYO0FBQ1IsTUFBQTtFQUFBLEdBQUEsR0FBTTs7QUFBQztTQUFBLFlBQUE7O21CQUFBLEdBQUEsR0FBTSxHQUFOLEdBQVksSUFBWixHQUFtQixJQUFuQixHQUEwQjtBQUExQjs7TUFBRCxDQUFxRCxDQUFDLElBQXRELENBQTJELEVBQTNEO1NBQ04sR0FBQSxHQUFJLEdBQUosR0FBVSxHQUFWLEdBQWMsR0FBZCxHQUFnQixDQUFDOztBQUFDO1NBQUEsMENBQUE7O21CQUFBO0FBQUE7O01BQUQsQ0FBNkIsQ0FBQyxJQUE5QixDQUFtQyxFQUFuQyxDQUFELENBQWhCLEdBQXdELElBQXhELEdBQTRELEdBQTVELEdBQWdFO0FBRnhEOztBQUlULE1BQUEsR0FBUyxTQUFDLEtBQUQsRUFBTyxRQUFQOztJQUFPLFdBQVM7O1NBQU8sTUFBQSxDQUFPLFFBQVAsRUFBZ0IsS0FBaEIsRUFBc0IsUUFBdEI7QUFBdkI7O0FBQ1QsR0FBQSxHQUFNLFNBQUMsS0FBRCxFQUFPLFFBQVA7O0lBQU8sV0FBUzs7U0FBTyxNQUFBLENBQU8sS0FBUCxFQUFhLEtBQWIsRUFBbUIsUUFBbkI7QUFBdkI7O0FBT0E7RUFDUyxlQUFDLENBQUQsRUFBSSxDQUFKLEVBQU8sSUFBUDtJQUFDLElBQUMsQ0FBQSxJQUFEO0lBQUcsSUFBQyxDQUFBLElBQUQ7SUFBRyxJQUFDLENBQUEsT0FBRDtJQUNwQixJQUFDLENBQUEsTUFBRCxDQUFRLE1BQVIsRUFDQyxHQUFBLENBQUk7TUFBQyxLQUFBLEVBQU0sZ0JBQVA7S0FBSixFQUE2QjtNQUM1QixHQUFBLENBQUk7UUFBQyxFQUFBLEVBQUcsR0FBSjtPQUFKLEVBQWEsQ0FBQyxJQUFDLENBQUEsQ0FBRixD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LENBQUQsS0FBSSxJQUFDLENBQUEsQ0FBekM7SUFDQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQVQsRUFBaUIsSUFBQyxDQUFBLENBQUQsS0FBSSxJQUFDLENBQUEsQ0FBdEI7SUFDQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQVQsRUFBaUIsSUFBQyxDQUFBLENBQUQsS0FBSSxJQUFDLENBQUEsQ0FBdEI7SUFDQSxJQUFDLENBQUEsT0FBRCxDQUFTLE1BQVQsRUFBaUIsSUFBQyxDQUFBLENBQUQsS0FBSSxJQUFDLENBQUEsQ0FBTCxJQUFVLElBQUMsQ0FBQSxDQUFELEdBQUcsQ0FBSCxLQUFNLENBQWpDO1dBQ0EsSUFBQyxDQUFBLE9BQUQsQ0FBUyxPQUFULEVBQWtCLElBQUMsQ0FBQSxDQUFELEtBQUksSUFBQyxDQUFBLENBQXZCO0VBTks7O2tCQU9OLE1BQUEsR0FBUyxTQUFDLElBQUQsRUFBTSxLQUFOO0lBQ1IsS0FBQSxDQUFNLElBQU4sRUFBVyxLQUFYO0lBQ0EsSUFBRSxDQUFBLElBQUEsQ0FBRixHQUFVO1dBQ1YsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsSUFBeEIsQ0FBNkIsQ0FBQyxTQUE5QixHQUEwQztFQUhsQzs7a0JBSVQsT0FBQSxHQUFVLFNBQUMsSUFBRCxFQUFNLEtBQU47V0FBZ0IsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsSUFBeEIsQ0FBNkIsQ0FBQyxRQUE5QixHQUF5QztFQUF6RDs7Ozs7O0FBRVgsS0FBQSxHQUFROztBQUNSLEtBQUEsR0FBUSxTQUFBO1NBQUcsS0FBQSxHQUFRLElBQUksS0FBSixDQUFVLENBQVYsRUFBWSxDQUFaLEVBQWMsRUFBZDtBQUFYIiwic291cmNlc0NvbnRlbnQiOlsicmVuZGVyID0gKHRhZyxhdHRycyxjaGlsZHJlbikgLT5cclxuXHRyZXMgPSAoJyAnICsga2V5ICsgJz1cIicgKyBhdHRyICsgJ1wiJyBmb3Iga2V5LGF0dHIgb2YgYXR0cnMpLmpvaW4gJydcclxuXHRcIjwje3RhZ30je3Jlc30+I3soY2hpbGQgZm9yIGNoaWxkIGluIGNoaWxkcmVuKS5qb2luKCcnKX08LyN7dGFnfT5cXG5cIlxyXG5cclxuYnV0dG9uID0gKGF0dHJzLGNoaWxkcmVuPVtdKSAtPiByZW5kZXIgJ2J1dHRvbicsYXR0cnMsY2hpbGRyZW5cclxuZGl2ID0gKGF0dHJzLGNoaWxkcmVuPVtdKSAtPiByZW5kZXIgJ2RpdicsYXR0cnMsY2hpbGRyZW5cclxuIyB0YWJsZSA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICd0YWJsZScsYXR0cnMsY2hpbGRyZW5cclxuIyB0ciA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICd0cicsYXR0cnMsY2hpbGRyZW5cclxuIyB0ZCA9IChhdHRycyxjaGlsZHJlbikgLT4gcmVuZGVyICd0ZCcsYXR0cnMsY2hpbGRyZW5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcbmNsYXNzIFN0YXRlIFxyXG5cdGNvbnN0cnVjdG9yIDogKEBhLEBiLEBoaXN0KSAtPlxyXG5cdFx0QHVwZGF0ZSAnYm9keScsIFxyXG5cdFx0XHRkaXYge3N0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sW1xyXG5cdFx0XHRcdGRpdiB7aWQ6J2EnfSxbQGFdXHJcblx0XHRcdFx0ZGl2IHtpZDonYid9LFtAYl1cclxuXHRcdFx0XHRidXR0b24ge2lkOidiQWRkJyxvbmNsaWNrOidzdGF0ZS5hZGQyKCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sWycrMiddXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYk11bCcsb25jbGljazonc3RhdGUubXVsMigpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFsnKjInXVxyXG5cdFx0XHRcdGJ1dHRvbiB7aWQ6J2JEaXYnLG9uY2xpY2s6J3N0YXRlLmRpdjIoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJy8yJ11cclxuXHRcdFx0XHRidXR0b24ge2lkOidiVW5kbycsb25jbGljazonc3RhdGUudW5kbygpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFsndW5kbyddXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYk5leHQnLG9uY2xpY2s6J3N0YXRlLm5leHQoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJ25leHQnXVxyXG5cdFx0XHRcdGRpdiB7aWQ6J2hpc3QnfSxbQGhpc3RdXHJcblx0XHRcdF1cclxuXHJcblx0YWRkMiA6IC0+IEBmaXgge2E6IEBhKzIsIGhpc3Q6IEBoaXN0LmNvbmNhdChbQGFdKX1cclxuXHRtdWwyIDogLT4gQGZpeCB7YTogQGEqMiwgaGlzdDogQGhpc3QuY29uY2F0KFtAYV0pfVxyXG5cdGRpdjIgOiAtPiBAZml4IHthOiBAYS8yLCBoaXN0OiBAaGlzdC5jb25jYXQoW0BhXSl9XHJcblx0dW5kbyA6IC0+IEBmaXgge2E6IEBoaXN0LnBvcCgpLCBoaXN0OiBAaGlzdH1cclxuXHRuZXh0IDogLT4gQGZpeCB7YTogaW50KDEgKyAyMCAqIHJhbmRvbSgpKSwgYjogaW50KDEgKyAyMCAqIHJhbmRvbSgpKSwgaGlzdDogW119XHJcblx0Zml4IDogKGhhc2gpIC0+IFxyXG5cdFx0QHVwZGF0ZSBrZXksdmFsdWUgZm9yIGtleSx2YWx1ZSBvZiBoYXNoXHJcblx0XHRAZGlzYWJsZSAnYlVuZG8nLEBoaXN0Lmxlbmd0aD09MCBvciBAYT09QGJcclxuXHRcdEBkaXNhYmxlICdiQWRkJywgQGE9PUBiXHJcblx0XHRAZGlzYWJsZSAnYk11bCcsIEBhPT1AYlxyXG5cdFx0QGRpc2FibGUgJ2JEaXYnLCBAYT09QGIgb3IgQGElMj09MVxyXG5cdFx0QGRpc2FibGUgJ2JOZXh0JywgQGEhPUBiXHJcblx0dXBkYXRlIDogKG5hbWUsdmFsdWUpIC0+XHJcblx0XHRwcmludCBuYW1lLHZhbHVlIFxyXG5cdFx0QFtuYW1lXSA9IHZhbHVlXHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lKS5pbm5lckhUTUwgPSB2YWx1ZVxyXG5cdGRpc2FibGUgOiAobmFtZSx2YWx1ZSkgLT5cdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG5hbWUpLmRpc2FibGVkID0gdmFsdWVcclxuXHJcbnN0YXRlID0gbnVsbFxyXG5zZXR1cCA9IC0+IHN0YXRlID0gbmV3IFN0YXRlIDcsMSxbXVxyXG4iXX0=
//# sourceURL=C:\Lab\2017\139-StateElementShortcut\coffee\sketch.coffee