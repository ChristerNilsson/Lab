// Generated by CoffeeScript 1.12.7
var State, button, div, render, setup, state;

render = function(tag, attrs, children) {
  var attr, child, key, res;
  res = ((function() {
    var results;
    results = [];
    for (key in attrs) {
      attr = attrs[key];
      results.push(' ' + key + '="' + attr + '"');
    }
    return results;
  })()).join('');
  return "<" + tag + res + ">" + (((function() {
    var i, len, results;
    results = [];
    for (i = 0, len = children.length; i < len; i++) {
      child = children[i];
      results.push(child);
    }
    return results;
  })()).join('')) + "</" + tag + ">\n";
};

button = function(attrs, children) {
  return render('button', attrs, children);
};

div = function(attrs, children) {
  return render('div', attrs, children);
};

State = (function() {
  function State(a, b, hist) {
    this.a = a;
    this.b = b;
    this.hist = hist;
    this.update('body', div({
      style: "font-size:30px"
    }, [
      div({
        id: 'a'
      }, [this.a]), div({
        id: 'b'
      }, [this.b]), button({
        id: 'bAdd',
        onclick: 'state.add2()',
        style: "font-size:30px"
      }, ['+2']), button({
        id: 'bMul',
        onclick: 'state.mul2()',
        style: "font-size:30px"
      }, ['*2']), button({
        id: 'bDiv',
        onclick: 'state.div2()',
        style: "font-size:30px"
      }, ['/2']), button({
        id: 'bUndo',
        onclick: 'state.undo()',
        style: "font-size:30px"
      }, ['undo']), button({
        id: 'bNext',
        onclick: 'state.next()',
        style: "font-size:30px"
      }, ['next']), div({
        id: 'hist'
      }, [this.hist])
    ]));
  }

  State.prototype.add2 = function() {
    return this.fix({
      a: this.a + 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.mul2 = function() {
    return this.fix({
      a: this.a * 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.div2 = function() {
    return this.fix({
      a: this.a / 2,
      hist: this.hist.concat([this.a])
    });
  };

  State.prototype.undo = function() {
    return this.fix({
      a: this.hist.pop(),
      hist: this.hist
    });
  };

  State.prototype.next = function() {
    return this.fix({
      a: int(1 + 20 * random()),
      b: int(1 + 20 * random()),
      hist: []
    });
  };

  State.prototype.fix = function(hash) {
    var key, value;
    for (key in hash) {
      value = hash[key];
      this.update(key, value);
    }
    this.disable('bUndo', this.hist.length === 0 || this.a === this.b);
    this.disable('bAdd', this.a === this.b);
    this.disable('bMul', this.a === this.b);
    this.disable('bDiv', this.a === this.b || this.a % 2 === 1);
    return this.disable('bNext', this.a !== this.b);
  };

  State.prototype.update = function(name, value) {
    print(name, value);
    this[name] = value;
    return document.getElementById(name).innerHTML = value;
  };

  State.prototype.disable = function(name, value) {
    return document.getElementById(name).disabled = value;
  };

  return State;

})();

state = null;

setup = function() {
  return state = new State(7, 1, []);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUE7O0FBQUEsTUFBQSxHQUFTLFNBQUMsR0FBRCxFQUFLLEtBQUwsRUFBVyxRQUFYO0FBQ1IsTUFBQTtFQUFBLEdBQUEsR0FBTTs7QUFBQztTQUFBLFlBQUE7O21CQUFBLEdBQUEsR0FBTSxHQUFOLEdBQVksSUFBWixHQUFtQixJQUFuQixHQUEwQjtBQUExQjs7TUFBRCxDQUFxRCxDQUFDLElBQXRELENBQTJELEVBQTNEO1NBQ04sR0FBQSxHQUFJLEdBQUosR0FBVSxHQUFWLEdBQWMsR0FBZCxHQUFnQixDQUFDOztBQUFDO1NBQUEsMENBQUE7O21CQUFBO0FBQUE7O01BQUQsQ0FBNkIsQ0FBQyxJQUE5QixDQUFtQyxFQUFuQyxDQUFELENBQWhCLEdBQXdELElBQXhELEdBQTRELEdBQTVELEdBQWdFO0FBRnhEOztBQUlULE1BQUEsR0FBUyxTQUFDLEtBQUQsRUFBTyxRQUFQO1NBQW9CLE1BQUEsQ0FBTyxRQUFQLEVBQWdCLEtBQWhCLEVBQXNCLFFBQXRCO0FBQXBCOztBQUNULEdBQUEsR0FBTSxTQUFDLEtBQUQsRUFBTyxRQUFQO1NBQW9CLE1BQUEsQ0FBTyxLQUFQLEVBQWEsS0FBYixFQUFtQixRQUFuQjtBQUFwQjs7QUFPQTtFQUNTLGVBQUMsQ0FBRCxFQUFJLENBQUosRUFBTyxJQUFQO0lBQUMsSUFBQyxDQUFBLElBQUQ7SUFBRyxJQUFDLENBQUEsSUFBRDtJQUFHLElBQUMsQ0FBQSxPQUFEO0lBQ3BCLElBQUMsQ0FBQSxNQUFELENBQVEsTUFBUixFQUNDLEdBQUEsQ0FBSTtNQUFDLEtBQUEsRUFBTSxnQkFBUDtLQUFKLEVBQTZCO01BQzVCLEdBQUEsQ0FBSTtRQUFDLEVBQUEsRUFBRyxHQUFKO09BQUosRUFBYSxDQUFDLElBQUMsQ0FBQSxDQUFGLENBQWIsQ0FENEIsRUFFNUIsR0FBQSxD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QUF6QztJQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUFpQixJQUFDLENBQUEsQ0FBRCxLQUFJLElBQUMsQ0FBQSxDQUF0QjtJQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUFpQixJQUFDLENBQUEsQ0FBRCxLQUFJLElBQUMsQ0FBQSxDQUF0QjtJQUNBLElBQUMsQ0FBQSxPQUFELENBQVMsTUFBVCxFQUFpQixJQUFDLENBQUEsQ0FBRCxLQUFJLElBQUMsQ0FBQSxDQUFMLElBQVUsSUFBQyxDQUFBLENBQUQsR0FBRyxDQUFILEtBQU0sQ0FBakM7V0FDQSxJQUFDLENBQUEsT0FBRCxDQUFTLE9BQVQsRUFBa0IsSUFBQyxDQUFBLENBQUQsS0FBSSxJQUFDLENBQUEsQ0FBdkI7RUFOSzs7a0JBT04sTUFBQSxHQUFTLFNBQUMsSUFBRCxFQUFNLEtBQU47SUFDUixLQUFBLENBQU0sSUFBTixFQUFXLEtBQVg7SUFDQSxJQUFFLENBQUEsSUFBQSxDQUFGLEdBQVU7V0FDVixRQUFRLENBQUMsY0FBVCxDQUF3QixJQUF4QixDQUE2QixDQUFDLFNBQTlCLEdBQTBDO0VBSGxDOztrQkFJVCxPQUFBLEdBQVUsU0FBQyxJQUFELEVBQU0sS0FBTjtXQUFnQixRQUFRLENBQUMsY0FBVCxDQUF3QixJQUF4QixDQUE2QixDQUFDLFFBQTlCLEdBQXlDO0VBQXpEOzs7Ozs7QUFFWCxLQUFBLEdBQVE7O0FBQ1IsS0FBQSxHQUFRLFNBQUE7U0FBRyxLQUFBLEdBQVEsSUFBSSxLQUFKLENBQVUsQ0FBVixFQUFZLENBQVosRUFBYyxFQUFkO0FBQVgiLCJzb3VyY2VzQ29udGVudCI6WyJyZW5kZXIgPSAodGFnLGF0dHJzLGNoaWxkcmVuKSAtPlxyXG5cdHJlcyA9ICgnICcgKyBrZXkgKyAnPVwiJyArIGF0dHIgKyAnXCInIGZvciBrZXksYXR0ciBvZiBhdHRycykuam9pbiAnJ1xyXG5cdFwiPCN7dGFnfSN7cmVzfT4jeyhjaGlsZCBmb3IgY2hpbGQgaW4gY2hpbGRyZW4pLmpvaW4oJycpfTwvI3t0YWd9PlxcblwiXHJcblxyXG5idXR0b24gPSAoYXR0cnMsY2hpbGRyZW4pIC0+IHJlbmRlciAnYnV0dG9uJyxhdHRycyxjaGlsZHJlblxyXG5kaXYgPSAoYXR0cnMsY2hpbGRyZW4pIC0+IHJlbmRlciAnZGl2JyxhdHRycyxjaGlsZHJlblxyXG4jIHRhYmxlID0gKGF0dHJzLGNoaWxkcmVuKSAtPiByZW5kZXIgJ3RhYmxlJyxhdHRycyxjaGlsZHJlblxyXG4jIHRyID0gKGF0dHJzLGNoaWxkcmVuKSAtPiByZW5kZXIgJ3RyJyxhdHRycyxjaGlsZHJlblxyXG4jIHRkID0gKGF0dHJzLGNoaWxkcmVuKSAtPiByZW5kZXIgJ3RkJyxhdHRycyxjaGlsZHJlblxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG5cclxuY2xhc3MgU3RhdGUgXHJcblx0Y29uc3RydWN0b3IgOiAoQGEsQGIsQGhpc3QpIC0+XHJcblx0XHRAdXBkYXRlICdib2R5JyxcclxuXHRcdFx0ZGl2IHtzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFtcclxuXHRcdFx0XHRkaXYge2lkOidhJ30sW0BhXVxyXG5cdFx0XHRcdGRpdiB7aWQ6J2InfSxbQGJdXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYkFkZCcsb25jbGljazonc3RhdGUuYWRkMigpJyxzdHlsZTpcImZvbnQtc2l6ZTozMHB4XCJ9LFsnKzInXVxyXG5cdFx0XHRcdGJ1dHRvbiB7aWQ6J2JNdWwnLG9uY2xpY2s6J3N0YXRlLm11bDIoKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJyoyJ11cclxuXHRcdFx0XHRidXR0b24ge2lkOidiRGl2JyxvbmNsaWNrOidzdGF0ZS5kaXYyKCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sWycvMiddXHJcblx0XHRcdFx0YnV0dG9uIHtpZDonYlVuZG8nLG9uY2xpY2s6J3N0YXRlLnVuZG8oKScsc3R5bGU6XCJmb250LXNpemU6MzBweFwifSxbJ3VuZG8nXVxyXG5cdFx0XHRcdGJ1dHRvbiB7aWQ6J2JOZXh0JyxvbmNsaWNrOidzdGF0ZS5uZXh0KCknLHN0eWxlOlwiZm9udC1zaXplOjMwcHhcIn0sWyduZXh0J11cclxuXHRcdFx0XHRkaXYge2lkOidoaXN0J30sW0BoaXN0XVxyXG5cdFx0XHRdXHJcblxyXG5cdGFkZDIgOiAtPiBAZml4IHthOiBAYSsyLCBoaXN0OiBAaGlzdC5jb25jYXQoW0BhXSl9XHJcblx0bXVsMiA6IC0+IEBmaXgge2E6IEBhKjIsIGhpc3Q6IEBoaXN0LmNvbmNhdChbQGFdKX1cclxuXHRkaXYyIDogLT4gQGZpeCB7YTogQGEvMiwgaGlzdDogQGhpc3QuY29uY2F0KFtAYV0pfVxyXG5cdHVuZG8gOiAtPiBAZml4IHthOiBAaGlzdC5wb3AoKSwgaGlzdDogQGhpc3R9XHJcblx0bmV4dCA6IC0+IEBmaXgge2E6IGludCgxICsgMjAgKiByYW5kb20oKSksIGI6IGludCgxICsgMjAgKiByYW5kb20oKSksIGhpc3Q6IFtdfVxyXG5cdGZpeCA6IChoYXNoKSAtPiBcclxuXHRcdEB1cGRhdGUga2V5LHZhbHVlIGZvciBrZXksdmFsdWUgb2YgaGFzaFxyXG5cdFx0QGRpc2FibGUgJ2JVbmRvJyxAaGlzdC5sZW5ndGg9PTAgb3IgQGE9PUBiXHJcblx0XHRAZGlzYWJsZSAnYkFkZCcsIEBhPT1AYlxyXG5cdFx0QGRpc2FibGUgJ2JNdWwnLCBAYT09QGJcclxuXHRcdEBkaXNhYmxlICdiRGl2JywgQGE9PUBiIG9yIEBhJTI9PTFcclxuXHRcdEBkaXNhYmxlICdiTmV4dCcsIEBhIT1AYlxyXG5cdHVwZGF0ZSA6IChuYW1lLHZhbHVlKSAtPlxyXG5cdFx0cHJpbnQgbmFtZSx2YWx1ZSBcclxuXHRcdEBbbmFtZV0gPSB2YWx1ZVxyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobmFtZSkuaW5uZXJIVE1MID0gdmFsdWVcclxuXHRkaXNhYmxlIDogKG5hbWUsdmFsdWUpIC0+XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChuYW1lKS5kaXNhYmxlZCA9IHZhbHVlXHJcblxyXG5zdGF0ZSA9IG51bGxcclxuc2V0dXAgPSAtPiBzdGF0ZSA9IG5ldyBTdGF0ZSA3LDEsW11cclxuIl19
//# sourceURL=C:\Lab\2017\139-StateElementShortcut\coffee\sketch.coffee