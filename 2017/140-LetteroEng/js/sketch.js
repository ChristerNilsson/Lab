// Generated by CoffeeScript 1.12.7
var angle, direction, draw, dt, findWords, handleMousePressed, level, listCircular, mousePressed, newGame, possibleWords, radius1, radius2, reverseString, setup, size, solution, touchStarted, word, words,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

words = null;

word = '';

level = -1;

angle = 0;

direction = 1;

size = null;

radius1 = null;

radius2 = null;

possibleWords = [];

solution = "";

dt = 0;

setup = function() {
  createCanvas(windowWidth, windowHeight);
  size = min(width, height);
  radius2 = size / 10;
  radius1 = size / 2 - radius2;
  words = ordlista.split(' ');
  textAlign(CENTER, CENTER);
  print(words.length);
  return newGame(1);
};

newGame = function(dLevel) {
  var extra;
  solution = possibleWords.join(' ');
  direction = dLevel;
  extra = int(level / 10);
  if (dLevel < 0 && extra !== 0) {
    dLevel *= extra;
  }
  level += dLevel;
  if (level < 0) {
    level = 0;
  }
  word = _.sample(words);
  possibleWords = findWords(word);
  if (0.5 < random()) {
    word = reverseString(word);
  }
  word = word.toUpperCase();
  angle = 360 * random();
  return false;
};

draw = function() {
  var ch, dAngle, i, j, len, n;
  bg(0.5);
  textSize(size / 12);
  text(solution, width / 2, height - size / 10);
  textSize(size / 4);
  if (direction === 1) {
    fc(0, 1, 0);
  } else {
    fc(1, 0, 0);
  }
  text(level, width / 2, height / 2);
  fc(0);
  translate(width / 2, height / 2);
  n = word.length;
  dAngle = 360 / n;
  rd(angle);
  textSize(size / 10);
  for (i = j = 0, len = word.length; j < len; i = ++j) {
    ch = word[i];
    push();
    translate(radius1, 0);
    rd(90);
    fc(1, 1, 0);
    circle(0, 0, radius2);
    fc(0);
    text(ch, 0, 0);
    pop();
    rd(dAngle);
  }
  angle += (millis() - dt) / 50;
  return dt = millis();
};

handleMousePressed = function() {
  var ch, dword, i, j, len, n, rw, w, x, y;
  n = word.length;
  dword = (word + word).toLowerCase();
  for (i = j = 0, len = word.length; j < len; i = ++j) {
    ch = word[i];
    x = width / 2 + radius1 * cos(radians(angle + i / n * 360));
    y = height / 2 + radius1 * sin(radians(angle + i / n * 360));
    if (radius2 > dist(mouseX, mouseY, x, y)) {
      w = dword.slice(i, i + n);
      rw = reverseString(dword).slice(n - i - 1, n - i + n - 1);
      if (indexOf.call(possibleWords, w) >= 0 || indexOf.call(possibleWords, rw) >= 0) {
        return newGame(1);
      } else {
        return newGame(-1);
      }
    }
  }
  return false;
};

reverseString = function(str) {
  return str.split("").reverse().join("");
};

mousePressed = function() {
  return handleMousePressed();
};

touchStarted = function() {
  return handleMousePressed();
};

findWords = function(word) {
  var ch, dword, i, j, len, n, res, rw, w;
  n = word.length;
  dword = (word + word).toLowerCase();
  res = [];
  for (i = j = 0, len = word.length; j < len; i = ++j) {
    ch = word[i];
    w = dword.slice(i, i + n);
    rw = reverseString(dword).slice(n - i - 1, n - i + n - 1);
    if (indexOf.call(words, w) >= 0) {
      res.push(w);
    }
    if (indexOf.call(words, rw) >= 0) {
      res.push(rw);
    }
  }
  return _.uniq(res);
};

listCircular = function() {
  var antal, j, len, res;
  print(words.length);
  antal = 0;
  for (j = 0, len = words.length; j < len; j++) {
    word = words[j];
    res = findWords(word);
    if (res.length === 2) {
      print(res.join(' '));
      antal++;
    }
  }
  return print(antal);
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXHNrZXRjaC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsdU1BQUE7RUFBQTs7QUFBQSxLQUFBLEdBQVE7O0FBQ1IsSUFBQSxHQUFPOztBQUNQLEtBQUEsR0FBUSxDQUFDOztBQUNULEtBQUEsR0FBUTs7QUFDUixTQUFBLEdBQVk7O0FBQ1osSUFBQSxHQUFPOztBQUNQLE9BQUEsR0FBVTs7QUFDVixPQUFBLEdBQVU7O0FBQ1YsYUFBQSxHQUFnQjs7QUFDaEIsUUFBQSxHQUFXOztBQUNYLEVBQUEsR0FBSzs7QUFFTCxLQUFBLEdBQVEsU0FBQTtFQUNQLFlBQUEsQ0FBYSxXQUFiLEVBQXlCLFlBQXpCO0VBQ0EsSUFBQSxHQUFPLEdBQUEsQ0FBSSxLQUFKLEVBQVUsTUFBVjtFQUNQLE9BQUEsR0FBVSxJQUFBLEdBQUs7RUFDZixPQUFBLEdBQVUsSUFBQSxHQUFLLENBQUwsR0FBTztFQUNqQixLQUFBLEdBQVEsUUFBUSxDQUFDLEtBQVQsQ0FBZSxHQUFmO0VBQ1IsU0FBQSxDQUFVLE1BQVYsRUFBaUIsTUFBakI7RUFDQSxLQUFBLENBQU0sS0FBSyxDQUFDLE1BQVo7U0FFQSxPQUFBLENBQVEsQ0FBUjtBQVRPOztBQVdSLE9BQUEsR0FBVSxTQUFDLE1BQUQ7QUFDVCxNQUFBO0VBQUEsUUFBQSxHQUFXLGFBQWEsQ0FBQyxJQUFkLENBQW1CLEdBQW5CO0VBQ1gsU0FBQSxHQUFZO0VBQ1osS0FBQSxHQUFRLEdBQUEsQ0FBSSxLQUFBLEdBQU0sRUFBVjtFQUNSLElBQUcsTUFBQSxHQUFTLENBQVQsSUFBZSxLQUFBLEtBQVMsQ0FBM0I7SUFBa0MsTUFBQSxJQUFVLE1BQTVDOztFQUNBLEtBQUEsSUFBUztFQUNULElBQUcsS0FBQSxHQUFRLENBQVg7SUFBa0IsS0FBQSxHQUFRLEVBQTFCOztFQUNBLElBQUEsR0FBTyxDQUFDLENBQUMsTUFBRixDQUFTLEtBQVQ7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QUFHLENBQUMsTUFBSixLQUFZLENBQWY7TUFDQyxLQUFBLENBQU0sR0FBRyxDQUFDLElBQUosQ0FBUyxHQUFULENBQU47TUFDQSxLQUFBLEdBRkQ7O0FBRkQ7U0FLQSxLQUFBLENBQU0sS0FBTjtBQVJjIiwic291cmNlc0NvbnRlbnQiOlsid29yZHMgPSBudWxsXHJcbndvcmQgPSAnJ1xyXG5sZXZlbCA9IC0xXHJcbmFuZ2xlID0gMFxyXG5kaXJlY3Rpb24gPSAxXHJcbnNpemUgPSBudWxsXHJcbnJhZGl1czEgPSBudWxsXHJcbnJhZGl1czIgPSBudWxsXHJcbnBvc3NpYmxlV29yZHMgPSBbXVxyXG5zb2x1dGlvbiA9IFwiXCJcclxuZHQgPSAwIFxyXG5cclxuc2V0dXAgPSAtPlxyXG5cdGNyZWF0ZUNhbnZhcyB3aW5kb3dXaWR0aCx3aW5kb3dIZWlnaHRcclxuXHRzaXplID0gbWluIHdpZHRoLGhlaWdodFxyXG5cdHJhZGl1czIgPSBzaXplLzEwXHJcblx0cmFkaXVzMSA9IHNpemUvMi1yYWRpdXMyIFxyXG5cdHdvcmRzID0gb3JkbGlzdGEuc3BsaXQgJyAnXHJcblx0dGV4dEFsaWduIENFTlRFUixDRU5URVJcclxuXHRwcmludCB3b3Jkcy5sZW5ndGggXHJcblx0I2xpc3RDaXJjdWxhcigpXHJcblx0bmV3R2FtZSAxXHJcblxyXG5uZXdHYW1lID0gKGRMZXZlbCkgLT5cclxuXHRzb2x1dGlvbiA9IHBvc3NpYmxlV29yZHMuam9pbiAnICdcclxuXHRkaXJlY3Rpb24gPSBkTGV2ZWxcclxuXHRleHRyYSA9IGludCBsZXZlbC8xMCAjIHN0cmFmZmEgbWVkIDEwJSBhdiBsZXZlbC5cclxuXHRpZiBkTGV2ZWwgPCAwIGFuZCBleHRyYSAhPSAwIHRoZW4gZExldmVsICo9IGV4dHJhXHJcblx0bGV2ZWwgKz0gZExldmVsXHJcblx0aWYgbGV2ZWwgPCAwIHRoZW4gbGV2ZWwgPSAwXHJcblx0d29yZCA9IF8uc2FtcGxlIHdvcmRzXHJcblx0cG9zc2libGVXb3JkcyA9IGZpbmRXb3JkcyB3b3JkXHJcblx0aWYgMC41IDwgcmFuZG9tKCkgdGhlbiB3b3JkID0gcmV2ZXJzZVN0cmluZyB3b3JkXHJcblx0d29yZCA9IHdvcmQudG9VcHBlckNhc2UoKVxyXG5cdGFuZ2xlID0gMzYwICogcmFuZG9tKClcclxuXHRmYWxzZSAjIHRvIHByZXZlbnQgZG91YmxlIGNsaWNrIG9uIEFuZHJvaWRcclxuXHJcbmRyYXcgPSAtPlxyXG5cdGJnIDAuNVxyXG5cdHRleHRTaXplIHNpemUvMTJcclxuXHR0ZXh0IHNvbHV0aW9uLCB3aWR0aC8yLGhlaWdodC1zaXplLzEwXHJcblx0dGV4dFNpemUgc2l6ZS80XHJcblx0aWYgZGlyZWN0aW9uID09IDEgdGhlbiBmYyAwLDEsMCBlbHNlIGZjIDEsMCwwXHJcblx0dGV4dCBsZXZlbCx3aWR0aC8yLGhlaWdodC8yIFxyXG5cdGZjIDBcclxuXHR0cmFuc2xhdGUgd2lkdGgvMixoZWlnaHQvMlxyXG5cdG4gPSB3b3JkLmxlbmd0aFxyXG5cdGRBbmdsZSA9IDM2MC9uXHJcblx0cmQgYW5nbGVcclxuXHR0ZXh0U2l6ZSBzaXplLzEwXHJcblx0Zm9yIGNoLGkgaW4gd29yZFxyXG5cdFx0cHVzaCgpXHJcblx0XHR0cmFuc2xhdGUgcmFkaXVzMSwwXHJcblx0XHRyZCA5MFxyXG5cdFx0ZmMgMSwxLDBcclxuXHRcdGNpcmNsZSAwLDAscmFkaXVzMlxyXG5cdFx0ZmMgMFxyXG5cdFx0dGV4dCBjaCwwLDBcclxuXHRcdHBvcCgpXHJcblx0XHRyZCBkQW5nbGVcclxuXHRhbmdsZSArPSAobWlsbGlzKCktZHQpLzUwXHJcblx0ZHQgPSBtaWxsaXMoKVxyXG5cclxuaGFuZGxlTW91c2VQcmVzc2VkID0gLT5cclxuXHRuID0gd29yZC5sZW5ndGhcclxuXHRkd29yZCA9ICh3b3JkK3dvcmQpLnRvTG93ZXJDYXNlKClcclxuXHRmb3IgY2gsaSBpbiB3b3JkXHJcblx0XHR4ID0gd2lkdGgvMiAgKyByYWRpdXMxICogY29zIHJhZGlhbnMgYW5nbGUgKyBpL24gKiAzNjBcclxuXHRcdHkgPSBoZWlnaHQvMiArIHJhZGl1czEgKiBzaW4gcmFkaWFucyBhbmdsZSArIGkvbiAqIDM2MFxyXG5cdFx0aWYgcmFkaXVzMiA+IGRpc3QgbW91c2VYLG1vdXNlWSx4LHkgXHJcblx0XHRcdHcgPSBkd29yZC5zbGljZSBpLGkrblxyXG5cdFx0XHRydyA9IHJldmVyc2VTdHJpbmcoZHdvcmQpLnNsaWNlIG4taS0xLG4taStuLTFcclxuXHRcdFx0aWYgdyBpbiBwb3NzaWJsZVdvcmRzIG9yIHJ3IGluIHBvc3NpYmxlV29yZHNcclxuXHRcdFx0XHRyZXR1cm4gbmV3R2FtZSAxXHJcblx0XHRcdGVsc2VcclxuXHRcdFx0XHRyZXR1cm4gbmV3R2FtZSAtMVxyXG5cdGZhbHNlICMgdG8gcHJldmVudCBkb3VibGUgY2xpY2sgb24gQW5kcm9pZFxyXG5cclxucmV2ZXJzZVN0cmluZyA9IChzdHIpIC0+IHN0ci5zcGxpdChcIlwiKS5yZXZlcnNlKCkuam9pbiBcIlwiXHJcbm1vdXNlUHJlc3NlZCA9IC0+XHRoYW5kbGVNb3VzZVByZXNzZWQoKVxyXG50b3VjaFN0YXJ0ZWQgPSAtPiBoYW5kbGVNb3VzZVByZXNzZWQoKVxyXG5cclxuZmluZFdvcmRzID0gKHdvcmQpIC0+XHJcblx0biA9IHdvcmQubGVuZ3RoXHJcblx0ZHdvcmQgPSAod29yZCt3b3JkKS50b0xvd2VyQ2FzZSgpXHJcblx0cmVzID0gW11cclxuXHRmb3IgY2gsaSBpbiB3b3JkXHJcblx0XHR3ID0gZHdvcmQuc2xpY2UgaSxpK25cclxuXHRcdHJ3ID0gcmV2ZXJzZVN0cmluZyhkd29yZCkuc2xpY2Ugbi1pLTEsbi1pK24tMVxyXG5cdFx0aWYgdyBpbiB3b3JkcyB0aGVuIHJlcy5wdXNoIHdcclxuXHRcdGlmIHJ3IGluIHdvcmRzIHRoZW4gcmVzLnB1c2ggcndcclxuXHRfLnVuaXEgcmVzXHJcblxyXG5saXN0Q2lyY3VsYXIgPSAoKSAtPlxyXG5cdHByaW50IHdvcmRzLmxlbmd0aFxyXG5cdGFudGFsID0gMFxyXG5cdGZvciB3b3JkIGluIHdvcmRzXHJcblx0XHRyZXMgPSBmaW5kV29yZHMgd29yZFxyXG5cdFx0aWYgcmVzLmxlbmd0aD09MlxyXG5cdFx0XHRwcmludCByZXMuam9pbiAnICdcclxuXHRcdFx0YW50YWwrK1xyXG5cdHByaW50IGFudGFsIl19
//# sourceURL=C:\Lab\2017\140-LetteroEng\coffee\sketch.coffee